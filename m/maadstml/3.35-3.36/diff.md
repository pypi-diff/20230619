# Comparing `tmp/maadstml-3.35.tar.gz` & `tmp/maadstml-3.36.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "maadstml-3.35.tar", last modified: Tue Jun 13 18:30:06 2023, max compression
+gzip compressed data, was "maadstml-3.36.tar", last modified: Mon Jun 19 21:22:21 2023, max compression
```

## Comparing `maadstml-3.35.tar` & `maadstml-3.36.tar`

### file list

```diff
@@ -1,19 +1,19 @@
-drwxrwxrwx   0        0        0        0 2023-06-13 18:30:06.561820 maadstml-3.35/
--rw-rw-rw-   0        0        0      852 2020-02-09 18:05:54.000000 maadstml-3.35/LICENSE.txt
--rw-rw-rw-   0        0        0       65 2021-01-25 23:03:44.000000 maadstml-3.35/MANIFEST.in
--rw-rw-rw-   0        0        0   174408 2023-06-13 18:30:06.559357 maadstml-3.35/PKG-INFO
--rw-rw-rw-   0        0        0   173811 2023-06-13 18:28:52.000000 maadstml-3.35/README.md
-drwxrwxrwx   0        0        0        0 2023-06-13 18:30:06.533583 maadstml-3.35/maadstml/
--rw-rw-rw-   0        0        0     2387 2023-06-13 18:19:41.000000 maadstml-3.35/maadstml/__init__.py
--rw-rw-rw-   0        0        0     4871 2023-06-10 19:44:05.000000 maadstml-3.35/maadstml/readpdf.py
--rw-rw-rw-   0        0        0    81647 2023-06-13 18:18:45.000000 maadstml-3.35/maadstml/sendfiles.py
--rw-rw-rw-   0        0        0    10850 2023-06-10 19:08:28.000000 maadstml-3.35/maadstml/tmltextsummary.py
-drwxrwxrwx   0        0        0        0 2023-06-13 18:30:06.559357 maadstml-3.35/maadstml.egg-info/
--rw-rw-rw-   0        0        0   174408 2023-06-13 18:30:06.000000 maadstml-3.35/maadstml.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0      320 2023-06-13 18:30:06.000000 maadstml-3.35/maadstml.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-06-13 18:30:06.000000 maadstml-3.35/maadstml.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0      210 2023-06-13 18:30:06.000000 maadstml-3.35/maadstml.egg-info/requires.txt
--rw-rw-rw-   0        0        0        9 2023-06-13 18:30:06.000000 maadstml-3.35/maadstml.egg-info/top_level.txt
--rw-rw-rw-   0        0        0      225 2023-06-13 18:10:54.000000 maadstml-3.35/requirements.txt
--rw-rw-rw-   0        0        0       42 2023-06-13 18:30:06.561820 maadstml-3.35/setup.cfg
--rw-rw-rw-   0        0        0     1088 2023-06-13 18:13:39.000000 maadstml-3.35/setup.py
+drwxrwxrwx   0        0        0        0 2023-06-19 21:22:21.749509 maadstml-3.36/
+-rw-rw-rw-   0        0        0      852 2020-02-09 18:05:54.000000 maadstml-3.36/LICENSE.txt
+-rw-rw-rw-   0        0        0       65 2021-01-25 23:03:44.000000 maadstml-3.36/MANIFEST.in
+-rw-rw-rw-   0        0        0   174408 2023-06-19 21:22:21.748946 maadstml-3.36/PKG-INFO
+-rw-rw-rw-   0        0        0   173811 2023-06-13 18:28:52.000000 maadstml-3.36/README.md
+drwxrwxrwx   0        0        0        0 2023-06-19 21:22:21.696196 maadstml-3.36/maadstml/
+-rw-rw-rw-   0        0        0     2387 2023-06-13 18:19:41.000000 maadstml-3.36/maadstml/__init__.py
+-rw-rw-rw-   0        0        0     4871 2023-06-10 19:44:05.000000 maadstml-3.36/maadstml/readpdf.py
+-rw-rw-rw-   0        0        0    81649 2023-06-13 19:45:36.000000 maadstml-3.36/maadstml/sendfiles.py
+-rw-rw-rw-   0        0        0    10850 2023-06-10 19:08:28.000000 maadstml-3.36/maadstml/tmltextsummary.py
+drwxrwxrwx   0        0        0        0 2023-06-19 21:22:21.739827 maadstml-3.36/maadstml.egg-info/
+-rw-rw-rw-   0        0        0   174408 2023-06-19 21:22:21.000000 maadstml-3.36/maadstml.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0      320 2023-06-19 21:22:21.000000 maadstml-3.36/maadstml.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-06-19 21:22:21.000000 maadstml-3.36/maadstml.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0      218 2023-06-19 21:22:21.000000 maadstml-3.36/maadstml.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        9 2023-06-19 21:22:21.000000 maadstml-3.36/maadstml.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0      234 2023-06-19 21:15:50.000000 maadstml-3.36/requirements.txt
+-rw-rw-rw-   0        0        0       42 2023-06-19 21:22:21.749509 maadstml-3.36/setup.cfg
+-rw-rw-rw-   0        0        0     1088 2023-06-19 21:21:21.000000 maadstml-3.36/setup.py
```

### Comparing `maadstml-3.35/LICENSE.txt` & `maadstml-3.36/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `maadstml-3.35/PKG-INFO` & `maadstml-3.36/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: maadstml
-Version: 3.35
+Version: 3.36
 Summary: Multi-Agent Accelerator for Data Science (MAADS): Transactional Machine Learning
 Home-page: https://github.com/smaurice101/transactionalmachinelearning
 Author: Sebastian Maurice
 Author-email: sebastian.maurice@otics.ca
 License: MIT License
 Keywords: multi-agent, transactional machine learning, data streams, data science, optimization, prescriptive analytics, machine learning, automl,auto-ml,artificial intelligence,predictive analytics,advanced analytics
 Description-Content-Type: text/markdown
```

### Comparing `maadstml-3.35/README.md` & `maadstml-3.36/README.md`

 * *Files identical despite different names*

### Comparing `maadstml-3.35/maadstml/__init__.py` & `maadstml-3.36/maadstml/__init__.py`

 * *Files identical despite different names*

### Comparing `maadstml-3.35/maadstml/readpdf.py` & `maadstml-3.36/maadstml/readpdf.py`

 * *Files identical despite different names*

### Comparing `maadstml-3.35/maadstml/sendfiles.py` & `maadstml-3.36/maadstml/sendfiles.py`

 * *Files 0% similar despite different names*

```diff
@@ -4105,999 +4105,1000 @@
 00010080: 6368 6174 6770 7472 6573 706f 6e73 650d  chatgptresponse.
 00010090: 0a0d 0a64 6566 2076 6970 6572 6578 7261  ...def viperexra
 000100a0: 6374 7064 6666 6965 6c64 7328 6669 6c65  ctpdffields(file
 000100b0: 6e61 6d65 293a 0d0a 2020 2020 6966 2066  name):..    if f
 000100c0: 696c 656e 616d 653d 3d22 223a 0d0a 2020  ilename=="":..  
 000100d0: 2020 2020 2020 7265 7475 726e 2022 456e        return "En
 000100e0: 7465 7220 5044 4620 6669 6c65 6e61 6d65  ter PDF filename
-000100f0: 220d 0a20 2020 200d 0a20 2020 2072 6574  "..    ..    ret
-00010100: 7572 6e20 6578 7472 6163 7466 6965 6c64  urn extractfield
-00010110: 7328 6669 6c65 6e61 6d65 290d 0a0d 0a64  s(filename)....d
-00010120: 6566 2076 6970 6572 6578 7261 6374 7064  ef viperexractpd
-00010130: 6666 6965 6c64 6279 6c61 6265 6c28 6669  ffieldbylabel(fi
-00010140: 6c65 6e61 6d65 2c6c 6162 656c 6e61 6d65  lename,labelname
-00010150: 2c61 6372 6f74 7970 6529 3a0d 0a20 2020  ,acrotype):..   
-00010160: 2069 6620 6669 6c65 6e61 6d65 3d3d 2222   if filename==""
-00010170: 206f 7220 6c61 6265 6c6e 616d 653d 3d22   or labelname=="
-00010180: 2220 6f72 2061 6372 6f74 7970 653d 3d22  " or acrotype=="
-00010190: 223a 0d0a 2020 2020 2020 2020 7265 7475  ":..        retu
-000101a0: 726e 2022 456e 7465 7220 5044 4620 6669  rn "Enter PDF fi
-000101b0: 6c65 6e61 6d65 2c20 6c61 6265 6c6e 616d  lename, labelnam
-000101c0: 6520 616e 6420 6163 726f 7479 7065 220d  e and acrotype".
-000101d0: 0a20 2020 200d 0a20 2020 2072 6574 7572  .    ..    retur
-000101e0: 6e20 6c61 6265 6c66 6965 6c64 7328 6669  n labelfields(fi
-000101f0: 6c65 6e61 6d65 2c6c 6162 656c 6e61 6d65  lename,labelname
-00010200: 2c61 6372 6f74 7970 6529 0d0a 0d0a 6465  ,acrotype)....de
-00010210: 6620 7669 7065 7269 6d61 6765 746f 7465  f viperimagetote
-00010220: 7874 2866 696c 656e 616d 6529 3a0d 0a20  xt(filename):.. 
-00010230: 2020 2069 6620 6669 6c65 6e61 6d65 3d3d     if filename==
-00010240: 2222 3a0d 0a20 2020 2020 2020 2072 6574  "":..        ret
-00010250: 7572 6e20 2245 6e74 6572 2049 4d41 4745  urn "Enter IMAGE
-00010260: 2028 706e 672c 206a 7067 2c20 6574 632e   (png, jpg, etc.
-00010270: 2920 6669 6c65 6e61 6d65 220d 0a20 2020  ) filename"..   
-00010280: 200d 0a20 2020 2072 6574 7572 6e20 646f   ..    return do
-00010290: 6f63 726d 6169 6e28 6669 6c65 6e61 6d65  ocrmain(filename
-000102a0: 290d 0a0d 0a64 6566 2076 6970 6572 6175  )....def viperau
-000102b0: 6469 6f74 6f74 6578 7428 6669 6c65 6e61  diototext(filena
-000102c0: 6d65 293a 0d0a 2020 2020 6966 2066 696c  me):..    if fil
-000102d0: 656e 616d 653d 3d22 223a 0d0a 2020 2020  ename=="":..    
-000102e0: 2020 2020 7265 7475 726e 2022 456e 7465      return "Ente
-000102f0: 7220 4155 4449 4f20 4669 6c65 2028 5741  r AUDIO File (WA
-00010300: 5629 2066 696c 656e 616d 6522 0d0a 2020  V) filename"..  
-00010310: 2020 0d0a 2020 2020 7265 7475 726e 2061    ..    return a
-00010320: 7564 696f 746f 7465 7874 2866 696c 656e  udiototext(filen
-00010330: 616d 6529 0d0a 0d0a 6465 6620 7669 7065  ame)....def vipe
-00010340: 7276 6964 656f 746f 7465 7874 2866 696c  rvideototext(fil
-00010350: 656e 616d 6529 3a0d 0a20 2020 2069 6620  ename):..    if 
-00010360: 6669 6c65 6e61 6d65 3d3d 2222 3a0d 0a20  filename=="":.. 
-00010370: 2020 2020 2020 2072 6574 7572 6e20 2245         return "E
-00010380: 6e74 6572 2056 4944 454f 2046 696c 6520  nter VIDEO File 
-00010390: 284d 5034 2920 6669 6c65 6e61 6d65 220d  (MP4) filename".
-000103a0: 0a20 2020 200d 0a20 2020 2072 6574 7572  .    ..    retur
-000103b0: 6e20 636f 6e76 6572 7476 6964 656f 746f  n convertvideoto
-000103c0: 7465 7874 2866 696c 656e 616d 6529 0d0a  text(filename)..
-000103d0: 2020 2020 0d0a 6465 6620 6172 6579 6f75      ..def areyou
-000103e0: 6275 7379 2868 6f73 742c 706f 7274 3d2d  busy(host,port=-
-000103f0: 3939 392c 6d69 6372 6f73 6572 7669 6365  999,microservice
-00010400: 6964 3d27 2729 3a0d 0a20 2020 2067 6c6f  id=''):..    glo
-00010410: 6261 6c20 636f 6e6e 6563 7469 6f6e 6572  bal connectioner
-00010420: 726f 720d 0a0d 0a20 2020 2069 6620 286c  ror....    if (l
-00010430: 656e 2868 6f73 7429 3d3d 3020 6f72 2070  en(host)==0 or p
-00010440: 6f72 743d 3d2d 3939 3920 293a 0d0a 2020  ort==-999 ):..  
-00010450: 2020 2020 2020 2072 6574 7572 6e20 2250         return "P
-00010460: 6c65 6173 6520 656e 7465 7220 686f 7374  lease enter host
-00010470: 2c70 6f72 7422 0d0a 2020 2020 7661 6c75  ,port"..    valu
-00010480: 653d 2822 6172 6579 6f75 6275 7379 2229  e=("areyoubusy")
-00010490: 0d0a 0d0a 2020 2020 7661 6c3d 6c6f 6f70  ....    val=loop
-000104a0: 2e72 756e 5f75 6e74 696c 5f63 6f6d 706c  .run_until_compl
-000104b0: 6574 6528 7463 705f 6563 686f 5f63 6c69  ete(tcp_echo_cli
-000104c0: 656e 7476 6970 6572 2876 616c 7565 2c20  entviper(value, 
-000104d0: 6c6f 6f70 2c68 6f73 742c 706f 7274 2c6d  loop,host,port,m
-000104e0: 6963 726f 7365 7276 6963 6569 6429 290d  icroserviceid)).
-000104f0: 0a20 2020 2069 6620 636f 6e6e 6563 7469  .    if connecti
-00010500: 6f6e 6572 726f 723a 0d0a 2020 2020 2020  onerror:..      
-00010510: 2020 2072 6574 7572 6e20 636f 6e6e 6563     return connec
-00010520: 7469 6f6e 6572 726f 720d 0a0d 0a20 2020  tionerror....   
-00010530: 2072 6574 7572 6e20 7661 6c0d 0a0d 0a23   return val....#
-00010540: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000100f0: 220d 0a0d 0a20 2020 200d 0a20 2020 2072  "....    ..    r
+00010100: 6574 7572 6e20 6578 7472 6163 7466 6965  eturn extractfie
+00010110: 6c64 7328 6669 6c65 6e61 6d65 290d 0a0d  lds(filename)...
+00010120: 0a64 6566 2076 6970 6572 6578 7261 6374  .def viperexract
+00010130: 7064 6666 6965 6c64 6279 6c61 6265 6c28  pdffieldbylabel(
+00010140: 6669 6c65 6e61 6d65 2c6c 6162 656c 6e61  filename,labelna
+00010150: 6d65 2c61 6372 6f74 7970 6529 3a0d 0a20  me,acrotype):.. 
+00010160: 2020 2069 6620 6669 6c65 6e61 6d65 3d3d     if filename==
+00010170: 2222 206f 7220 6c61 6265 6c6e 616d 653d  "" or labelname=
+00010180: 3d22 2220 6f72 2061 6372 6f74 7970 653d  ="" or acrotype=
+00010190: 3d22 223a 0d0a 2020 2020 2020 2020 7265  ="":..        re
+000101a0: 7475 726e 2022 456e 7465 7220 5044 4620  turn "Enter PDF 
+000101b0: 6669 6c65 6e61 6d65 2c20 6c61 6265 6c6e  filename, labeln
+000101c0: 616d 6520 616e 6420 6163 726f 7479 7065  ame and acrotype
+000101d0: 220d 0a20 2020 200d 0a20 2020 2072 6574  "..    ..    ret
+000101e0: 7572 6e20 6c61 6265 6c66 6965 6c64 7328  urn labelfields(
+000101f0: 6669 6c65 6e61 6d65 2c6c 6162 656c 6e61  filename,labelna
+00010200: 6d65 2c61 6372 6f74 7970 6529 0d0a 0d0a  me,acrotype)....
+00010210: 6465 6620 7669 7065 7269 6d61 6765 746f  def viperimageto
+00010220: 7465 7874 2866 696c 656e 616d 6529 3a0d  text(filename):.
+00010230: 0a20 2020 2069 6620 6669 6c65 6e61 6d65  .    if filename
+00010240: 3d3d 2222 3a0d 0a20 2020 2020 2020 2072  =="":..        r
+00010250: 6574 7572 6e20 2245 6e74 6572 2049 4d41  eturn "Enter IMA
+00010260: 4745 2028 706e 672c 206a 7067 2c20 6574  GE (png, jpg, et
+00010270: 632e 2920 6669 6c65 6e61 6d65 220d 0a20  c.) filename".. 
+00010280: 2020 200d 0a20 2020 2072 6574 7572 6e20     ..    return 
+00010290: 646f 6f63 726d 6169 6e28 6669 6c65 6e61  doocrmain(filena
+000102a0: 6d65 290d 0a0d 0a64 6566 2076 6970 6572  me)....def viper
+000102b0: 6175 6469 6f74 6f74 6578 7428 6669 6c65  audiototext(file
+000102c0: 6e61 6d65 293a 0d0a 2020 2020 6966 2066  name):..    if f
+000102d0: 696c 656e 616d 653d 3d22 223a 0d0a 2020  ilename=="":..  
+000102e0: 2020 2020 2020 7265 7475 726e 2022 456e        return "En
+000102f0: 7465 7220 4155 4449 4f20 4669 6c65 2028  ter AUDIO File (
+00010300: 5741 5629 2066 696c 656e 616d 6522 0d0a  WAV) filename"..
+00010310: 2020 2020 0d0a 2020 2020 7265 7475 726e      ..    return
+00010320: 2061 7564 696f 746f 7465 7874 2866 696c   audiototext(fil
+00010330: 656e 616d 6529 0d0a 0d0a 6465 6620 7669  ename)....def vi
+00010340: 7065 7276 6964 656f 746f 7465 7874 2866  pervideototext(f
+00010350: 696c 656e 616d 6529 3a0d 0a20 2020 2069  ilename):..    i
+00010360: 6620 6669 6c65 6e61 6d65 3d3d 2222 3a0d  f filename=="":.
+00010370: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00010380: 2245 6e74 6572 2056 4944 454f 2046 696c  "Enter VIDEO Fil
+00010390: 6520 284d 5034 2920 6669 6c65 6e61 6d65  e (MP4) filename
+000103a0: 220d 0a20 2020 200d 0a20 2020 2072 6574  "..    ..    ret
+000103b0: 7572 6e20 636f 6e76 6572 7476 6964 656f  urn convertvideo
+000103c0: 746f 7465 7874 2866 696c 656e 616d 6529  totext(filename)
+000103d0: 0d0a 2020 2020 0d0a 6465 6620 6172 6579  ..    ..def arey
+000103e0: 6f75 6275 7379 2868 6f73 742c 706f 7274  oubusy(host,port
+000103f0: 3d2d 3939 392c 6d69 6372 6f73 6572 7669  =-999,microservi
+00010400: 6365 6964 3d27 2729 3a0d 0a20 2020 2067  ceid=''):..    g
+00010410: 6c6f 6261 6c20 636f 6e6e 6563 7469 6f6e  lobal connection
+00010420: 6572 726f 720d 0a0d 0a20 2020 2069 6620  error....    if 
+00010430: 286c 656e 2868 6f73 7429 3d3d 3020 6f72  (len(host)==0 or
+00010440: 2070 6f72 743d 3d2d 3939 3920 293a 0d0a   port==-999 ):..
+00010450: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00010460: 2250 6c65 6173 6520 656e 7465 7220 686f  "Please enter ho
+00010470: 7374 2c70 6f72 7422 0d0a 2020 2020 7661  st,port"..    va
+00010480: 6c75 653d 2822 6172 6579 6f75 6275 7379  lue=("areyoubusy
+00010490: 2229 0d0a 0d0a 2020 2020 7661 6c3d 6c6f  ")....    val=lo
+000104a0: 6f70 2e72 756e 5f75 6e74 696c 5f63 6f6d  op.run_until_com
+000104b0: 706c 6574 6528 7463 705f 6563 686f 5f63  plete(tcp_echo_c
+000104c0: 6c69 656e 7476 6970 6572 2876 616c 7565  lientviper(value
+000104d0: 2c20 6c6f 6f70 2c68 6f73 742c 706f 7274  , loop,host,port
+000104e0: 2c6d 6963 726f 7365 7276 6963 6569 6429  ,microserviceid)
+000104f0: 290d 0a20 2020 2069 6620 636f 6e6e 6563  )..    if connec
+00010500: 7469 6f6e 6572 726f 723a 0d0a 2020 2020  tionerror:..    
+00010510: 2020 2020 2072 6574 7572 6e20 636f 6e6e       return conn
+00010520: 6563 7469 6f6e 6572 726f 720d 0a0d 0a20  ectionerror.... 
+00010530: 2020 2072 6574 7572 6e20 7661 6c0d 0a0d     return val...
+00010540: 0a23 2323 2323 2323 2323 2323 2323 2323  .###############
 00010550: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00010560: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00010570: 2323 230d 0a69 6d70 6f72 7420 7379 730d  ###..import sys.
-00010580: 0a66 726f 6d20 7064 666d 696e 6572 2e70  .from pdfminer.p
-00010590: 6466 7061 7273 6572 2069 6d70 6f72 7420  dfparser import 
-000105a0: 5044 4650 6172 7365 720d 0a66 726f 6d20  PDFParser..from 
-000105b0: 7064 666d 696e 6572 2e70 6466 646f 6375  pdfminer.pdfdocu
-000105c0: 6d65 6e74 2069 6d70 6f72 7420 5044 4644  ment import PDFD
-000105d0: 6f63 756d 656e 740d 0a66 726f 6d20 7064  ocument..from pd
-000105e0: 666d 696e 6572 2e70 6466 7061 6765 2069  fminer.pdfpage i
-000105f0: 6d70 6f72 7420 5044 4650 6167 650d 0a66  mport PDFPage..f
-00010600: 726f 6d20 7064 666d 696e 6572 2e70 6466  rom pdfminer.pdf
-00010610: 7061 6765 2069 6d70 6f72 7420 5044 4654  page import PDFT
-00010620: 6578 7445 7874 7261 6374 696f 6e4e 6f74  extExtractionNot
-00010630: 416c 6c6f 7765 640d 0a66 726f 6d20 7064  Allowed..from pd
-00010640: 666d 696e 6572 2e70 6466 696e 7465 7270  fminer.pdfinterp
-00010650: 2069 6d70 6f72 7420 5044 4652 6573 6f75   import PDFResou
-00010660: 7263 654d 616e 6167 6572 0d0a 6672 6f6d  rceManager..from
-00010670: 2070 6466 6d69 6e65 722e 7064 6669 6e74   pdfminer.pdfint
-00010680: 6572 7020 696d 706f 7274 2050 4446 5061  erp import PDFPa
-00010690: 6765 496e 7465 7270 7265 7465 720d 0a23  geInterpreter..#
-000106a0: 6672 6f6d 2053 7472 696e 6749 4f20 696d  from StringIO im
-000106b0: 706f 7274 2053 7472 696e 6749 4f0d 0a66  port StringIO..f
-000106c0: 726f 6d20 696f 2069 6d70 6f72 7420 5374  rom io import St
-000106d0: 7269 6e67 494f 0d0a 696d 706f 7274 2075  ringIO..import u
-000106e0: 726c 6c69 622e 7265 7175 6573 7420 200d  rllib.request  .
-000106f0: 0a23 696d 706f 7274 2074 6d6c 7465 7874  .#import tmltext
-00010700: 7375 6d6d 6172 790d 0a69 6d70 6f72 7420  summary..import 
-00010710: 6f73 0d0a 696d 706f 7274 2064 6174 6574  os..import datet
-00010720: 696d 650d 0a23 696d 706f 7274 2067 6c6f  ime..#import glo
-00010730: 620d 0a0d 0a0d 0a66 726f 6d20 7064 666d  b......from pdfm
-00010740: 696e 6572 2e6c 6179 6f75 7420 696d 706f  iner.layout impo
-00010750: 7274 204c 4150 6172 616d 730d 0a66 726f  rt LAParams..fro
-00010760: 6d20 7064 666d 696e 6572 2e63 6f6e 7665  m pdfminer.conve
-00010770: 7274 6572 2069 6d70 6f72 7420 5465 7874  rter import Text
-00010780: 436f 6e76 6572 7465 720d 0a20 0d0a 636c  Converter.. ..cl
-00010790: 6173 7320 4d79 5061 7273 6572 286f 626a  ass MyParser(obj
-000107a0: 6563 7429 3a0d 0a20 2020 2064 6566 205f  ect):..    def _
-000107b0: 5f69 6e69 745f 5f28 7365 6c66 2c20 7064  _init__(self, pd
-000107c0: 6629 3a0d 0a20 2020 2020 2020 2023 2320  f):..        ## 
-000107d0: 536e 6970 7065 6420 6164 6170 7465 6420  Snipped adapted 
-000107e0: 6672 6f6d 2059 7573 756b 6520 5368 696e  from Yusuke Shin
-000107f0: 7961 6d61 7320 0d0a 2020 2020 2020 2020  yamas ..        
-00010800: 2350 4446 4d69 6e65 7220 646f 6375 6d65  #PDFMiner docume
-00010810: 6e74 6174 696f 6e0d 0a20 2020 2020 2020  ntation..       
-00010820: 2023 2043 7265 6174 6520 7468 6520 646f   # Create the do
-00010830: 6375 6d65 6e74 206d 6f64 656c 2066 726f  cument model fro
-00010840: 6d20 7468 6520 6669 6c65 0d0a 2020 2020  m the file..    
-00010850: 2020 2020 7061 7273 6572 203d 2050 4446      parser = PDF
-00010860: 5061 7273 6572 286f 7065 6e28 7064 662c  Parser(open(pdf,
-00010870: 2027 7262 2729 290d 0a20 2020 2020 2020   'rb'))..       
-00010880: 2064 6f63 756d 656e 7420 3d20 5044 4644   document = PDFD
-00010890: 6f63 756d 656e 7428 7061 7273 6572 290d  ocument(parser).
-000108a0: 0a20 2020 2020 2020 2023 2054 7279 2074  .        # Try t
-000108b0: 6f20 7061 7273 6520 7468 6520 646f 6375  o parse the docu
-000108c0: 6d65 6e74 0d0a 2020 2020 2020 2020 6966  ment..        if
-000108d0: 206e 6f74 2064 6f63 756d 656e 742e 6973   not document.is
-000108e0: 5f65 7874 7261 6374 6162 6c65 3a0d 0a20  _extractable:.. 
-000108f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00010900: 2050 4446 5465 7874 4578 7472 6163 7469   PDFTextExtracti
-00010910: 6f6e 4e6f 7441 6c6c 6f77 6564 0d0a 2020  onNotAllowed..  
-00010920: 2020 2020 2020 2320 4372 6561 7465 2061        # Create a
-00010930: 2050 4446 2072 6573 6f75 7263 6520 6d61   PDF resource ma
-00010940: 6e61 6765 7220 6f62 6a65 6374 200d 0a20  nager object .. 
-00010950: 2020 2020 2020 2023 2074 6861 7420 7374         # that st
-00010960: 6f72 6573 2073 6861 7265 6420 7265 736f  ores shared reso
-00010970: 7572 6365 732e 0d0a 2020 2020 2020 2020  urces...        
-00010980: 7273 7263 6d67 7220 3d20 5044 4652 6573  rsrcmgr = PDFRes
-00010990: 6f75 7263 654d 616e 6167 6572 2829 0d0a  ourceManager()..
-000109a0: 2020 2020 2020 2020 2320 4372 6561 7465          # Create
-000109b0: 2061 2062 7566 6665 7220 666f 7220 7468   a buffer for th
-000109c0: 6520 7061 7273 6564 2074 6578 740d 0a20  e parsed text.. 
-000109d0: 2020 2020 2020 2072 6574 7374 7220 3d20         retstr = 
-000109e0: 5374 7269 6e67 494f 2829 0d0a 2020 2020  StringIO()..    
-000109f0: 2020 2020 2320 5370 6163 696e 6720 7061      # Spacing pa
-00010a00: 7261 6d65 7465 7273 2066 6f72 2070 6172  rameters for par
-00010a10: 7369 6e67 0d0a 2020 2020 2020 2020 6c61  sing..        la
-00010a20: 7061 7261 6d73 203d 204c 4150 6172 616d  params = LAParam
-00010a30: 7328 290d 0a20 2020 2020 2020 2063 6f64  s()..        cod
-00010a40: 6563 203d 2027 7574 662d 3827 0d0a 200d  ec = 'utf-8'.. .
-00010a50: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
-00010a60: 6520 6120 5044 4620 6465 7669 6365 206f  e a PDF device o
-00010a70: 626a 6563 740d 0a20 2020 2020 2020 2064  bject..        d
-00010a80: 6576 6963 6520 3d20 5465 7874 436f 6e76  evice = TextConv
-00010a90: 6572 7465 7228 7273 7263 6d67 722c 2072  erter(rsrcmgr, r
-00010aa0: 6574 7374 722c 0d0a 2020 2020 2020 2020  etstr,..        
+00010570: 2323 2323 230d 0a69 6d70 6f72 7420 7379  #####..import sy
+00010580: 730d 0a66 726f 6d20 7064 666d 696e 6572  s..from pdfminer
+00010590: 2e70 6466 7061 7273 6572 2069 6d70 6f72  .pdfparser impor
+000105a0: 7420 5044 4650 6172 7365 720d 0a66 726f  t PDFParser..fro
+000105b0: 6d20 7064 666d 696e 6572 2e70 6466 646f  m pdfminer.pdfdo
+000105c0: 6375 6d65 6e74 2069 6d70 6f72 7420 5044  cument import PD
+000105d0: 4644 6f63 756d 656e 740d 0a66 726f 6d20  FDocument..from 
+000105e0: 7064 666d 696e 6572 2e70 6466 7061 6765  pdfminer.pdfpage
+000105f0: 2069 6d70 6f72 7420 5044 4650 6167 650d   import PDFPage.
+00010600: 0a66 726f 6d20 7064 666d 696e 6572 2e70  .from pdfminer.p
+00010610: 6466 7061 6765 2069 6d70 6f72 7420 5044  dfpage import PD
+00010620: 4654 6578 7445 7874 7261 6374 696f 6e4e  FTextExtractionN
+00010630: 6f74 416c 6c6f 7765 640d 0a66 726f 6d20  otAllowed..from 
+00010640: 7064 666d 696e 6572 2e70 6466 696e 7465  pdfminer.pdfinte
+00010650: 7270 2069 6d70 6f72 7420 5044 4652 6573  rp import PDFRes
+00010660: 6f75 7263 654d 616e 6167 6572 0d0a 6672  ourceManager..fr
+00010670: 6f6d 2070 6466 6d69 6e65 722e 7064 6669  om pdfminer.pdfi
+00010680: 6e74 6572 7020 696d 706f 7274 2050 4446  nterp import PDF
+00010690: 5061 6765 496e 7465 7270 7265 7465 720d  PageInterpreter.
+000106a0: 0a23 6672 6f6d 2053 7472 696e 6749 4f20  .#from StringIO 
+000106b0: 696d 706f 7274 2053 7472 696e 6749 4f0d  import StringIO.
+000106c0: 0a66 726f 6d20 696f 2069 6d70 6f72 7420  .from io import 
+000106d0: 5374 7269 6e67 494f 0d0a 696d 706f 7274  StringIO..import
+000106e0: 2075 726c 6c69 622e 7265 7175 6573 7420   urllib.request 
+000106f0: 200d 0a23 696d 706f 7274 2074 6d6c 7465   ..#import tmlte
+00010700: 7874 7375 6d6d 6172 790d 0a69 6d70 6f72  xtsummary..impor
+00010710: 7420 6f73 0d0a 696d 706f 7274 2064 6174  t os..import dat
+00010720: 6574 696d 650d 0a23 696d 706f 7274 2067  etime..#import g
+00010730: 6c6f 620d 0a0d 0a0d 0a66 726f 6d20 7064  lob......from pd
+00010740: 666d 696e 6572 2e6c 6179 6f75 7420 696d  fminer.layout im
+00010750: 706f 7274 204c 4150 6172 616d 730d 0a66  port LAParams..f
+00010760: 726f 6d20 7064 666d 696e 6572 2e63 6f6e  rom pdfminer.con
+00010770: 7665 7274 6572 2069 6d70 6f72 7420 5465  verter import Te
+00010780: 7874 436f 6e76 6572 7465 720d 0a20 0d0a  xtConverter.. ..
+00010790: 636c 6173 7320 4d79 5061 7273 6572 286f  class MyParser(o
+000107a0: 626a 6563 7429 3a0d 0a20 2020 2064 6566  bject):..    def
+000107b0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+000107c0: 7064 6629 3a0d 0a20 2020 2020 2020 2023  pdf):..        #
+000107d0: 2320 536e 6970 7065 6420 6164 6170 7465  # Snipped adapte
+000107e0: 6420 6672 6f6d 2059 7573 756b 6520 5368  d from Yusuke Sh
+000107f0: 696e 7961 6d61 7320 0d0a 2020 2020 2020  inyamas ..      
+00010800: 2020 2350 4446 4d69 6e65 7220 646f 6375    #PDFMiner docu
+00010810: 6d65 6e74 6174 696f 6e0d 0a20 2020 2020  mentation..     
+00010820: 2020 2023 2043 7265 6174 6520 7468 6520     # Create the 
+00010830: 646f 6375 6d65 6e74 206d 6f64 656c 2066  document model f
+00010840: 726f 6d20 7468 6520 6669 6c65 0d0a 2020  rom the file..  
+00010850: 2020 2020 2020 7061 7273 6572 203d 2050        parser = P
+00010860: 4446 5061 7273 6572 286f 7065 6e28 7064  DFParser(open(pd
+00010870: 662c 2027 7262 2729 290d 0a20 2020 2020  f, 'rb'))..     
+00010880: 2020 2064 6f63 756d 656e 7420 3d20 5044     document = PD
+00010890: 4644 6f63 756d 656e 7428 7061 7273 6572  FDocument(parser
+000108a0: 290d 0a20 2020 2020 2020 2023 2054 7279  )..        # Try
+000108b0: 2074 6f20 7061 7273 6520 7468 6520 646f   to parse the do
+000108c0: 6375 6d65 6e74 0d0a 2020 2020 2020 2020  cument..        
+000108d0: 6966 206e 6f74 2064 6f63 756d 656e 742e  if not document.
+000108e0: 6973 5f65 7874 7261 6374 6162 6c65 3a0d  is_extractable:.
+000108f0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00010900: 7365 2050 4446 5465 7874 4578 7472 6163  se PDFTextExtrac
+00010910: 7469 6f6e 4e6f 7441 6c6c 6f77 6564 0d0a  tionNotAllowed..
+00010920: 2020 2020 2020 2020 2320 4372 6561 7465          # Create
+00010930: 2061 2050 4446 2072 6573 6f75 7263 6520   a PDF resource 
+00010940: 6d61 6e61 6765 7220 6f62 6a65 6374 200d  manager object .
+00010950: 0a20 2020 2020 2020 2023 2074 6861 7420  .        # that 
+00010960: 7374 6f72 6573 2073 6861 7265 6420 7265  stores shared re
+00010970: 736f 7572 6365 732e 0d0a 2020 2020 2020  sources...      
+00010980: 2020 7273 7263 6d67 7220 3d20 5044 4652    rsrcmgr = PDFR
+00010990: 6573 6f75 7263 654d 616e 6167 6572 2829  esourceManager()
+000109a0: 0d0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+000109b0: 7465 2061 2062 7566 6665 7220 666f 7220  te a buffer for 
+000109c0: 7468 6520 7061 7273 6564 2074 6578 740d  the parsed text.
+000109d0: 0a20 2020 2020 2020 2072 6574 7374 7220  .        retstr 
+000109e0: 3d20 5374 7269 6e67 494f 2829 0d0a 2020  = StringIO()..  
+000109f0: 2020 2020 2020 2320 5370 6163 696e 6720        # Spacing 
+00010a00: 7061 7261 6d65 7465 7273 2066 6f72 2070  parameters for p
+00010a10: 6172 7369 6e67 0d0a 2020 2020 2020 2020  arsing..        
+00010a20: 6c61 7061 7261 6d73 203d 204c 4150 6172  laparams = LAPar
+00010a30: 616d 7328 290d 0a20 2020 2020 2020 2063  ams()..        c
+00010a40: 6f64 6563 203d 2027 7574 662d 3827 0d0a  odec = 'utf-8'..
+00010a50: 200d 0a20 2020 2020 2020 2023 2043 7265   ..        # Cre
+00010a60: 6174 6520 6120 5044 4620 6465 7669 6365  ate a PDF device
+00010a70: 206f 626a 6563 740d 0a20 2020 2020 2020   object..       
+00010a80: 2064 6576 6963 6520 3d20 5465 7874 436f   device = TextCo
+00010a90: 6e76 6572 7465 7228 7273 7263 6d67 722c  nverter(rsrcmgr,
+00010aa0: 2072 6574 7374 722c 0d0a 2020 2020 2020   retstr,..      
 00010ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ac0: 2020 2020 2020 206c 6170 6172 616d 7320         laparams 
-00010ad0: 3d20 6c61 7061 7261 6d73 290d 0a20 2020  = laparams)..   
-00010ae0: 2020 2020 2023 2043 7265 6174 6520 6120       # Create a 
-00010af0: 5044 4620 696e 7465 7270 7265 7465 7220  PDF interpreter 
-00010b00: 6f62 6a65 6374 0d0a 2020 2020 2020 2020  object..        
-00010b10: 696e 7465 7270 7265 7465 7220 3d20 5044  interpreter = PD
-00010b20: 4650 6167 6549 6e74 6572 7072 6574 6572  FPageInterpreter
-00010b30: 2872 7372 636d 6772 2c20 6465 7669 6365  (rsrcmgr, device
-00010b40: 290d 0a20 2020 2020 2020 2023 2050 726f  )..        # Pro
-00010b50: 6365 7373 2065 6163 6820 7061 6765 2063  cess each page c
-00010b60: 6f6e 7461 696e 6564 2069 6e20 7468 6520  ontained in the 
-00010b70: 646f 6375 6d65 6e74 2e0d 0a20 2020 2020  document...     
-00010b80: 2020 2066 6f72 2070 6167 6520 696e 2050     for page in P
-00010b90: 4446 5061 6765 2e63 7265 6174 655f 7061  DFPage.create_pa
-00010ba0: 6765 7328 646f 6375 6d65 6e74 293a 0d0a  ges(document):..
-00010bb0: 2020 2020 2020 2020 2020 2020 696e 7465              inte
-00010bc0: 7270 7265 7465 722e 7072 6f63 6573 735f  rpreter.process_
-00010bd0: 7061 6765 2870 6167 6529 0d0a 2020 2020  page(page)..    
-00010be0: 2020 2020 200d 0a20 2020 2020 2020 2073       ..        s
-00010bf0: 656c 662e 7265 636f 7264 7320 2020 2020  elf.records     
-00010c00: 2020 2020 2020 203d 205b 5d0d 0a20 2020         = []..   
-00010c10: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00010c20: 6c69 6e65 7320 3d20 7265 7473 7472 2e67  lines = retstr.g
-00010c30: 6574 7661 6c75 6528 292e 7370 6c69 746c  etvalue().splitl
-00010c40: 696e 6573 2829 0d0a 2020 2020 2020 2020  ines()..        
-00010c50: 666f 7220 6c69 6e65 2069 6e20 6c69 6e65  for line in line
-00010c60: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00010c70: 7365 6c66 2e68 616e 646c 655f 6c69 6e65  self.handle_line
-00010c80: 286c 696e 6529 0d0a 2020 2020 200d 0a20  (line)..     .. 
-00010c90: 2020 2064 6566 2068 616e 646c 655f 6c69     def handle_li
-00010ca0: 6e65 2873 656c 662c 206c 696e 6529 3a0d  ne(self, line):.
-00010cb0: 0a20 2020 2020 2020 2023 2043 7573 746f  .        # Custo
-00010cc0: 6d69 7a65 2079 6f75 7220 6c69 6e65 2d62  mize your line-b
-00010cd0: 792d 6c69 6e65 2070 6172 7365 7220 6865  y-line parser he
-00010ce0: 7265 0d0a 2020 2020 2020 2020 7365 6c66  re..        self
-00010cf0: 2e72 6563 6f72 6473 2e61 7070 656e 6428  .records.append(
-00010d00: 6c69 6e65 290d 0a0d 0a64 6566 2073 6372  line)....def scr
-00010d10: 6170 6570 6466 2874 6865 7572 6c2c 666e  apepdf(theurl,fn
-00010d20: 293a 0d0a 2020 2020 7363 7261 7065 645f  ):..    scraped_
-00010d30: 6461 7461 203d 2075 726c 6c69 622e 7265  data = urllib.re
-00010d40: 7175 6573 742e 7572 6c6f 7065 6e28 7468  quest.urlopen(th
-00010d50: 6575 726c 2920 200d 0a20 2020 2066 696c  eurl)  ..    fil
-00010d60: 6520 3d20 6f70 656e 2866 6e2c 2027 7762  e = open(fn, 'wb
-00010d70: 2729 0d0a 2020 2020 6669 6c65 2e77 7269  ')..    file.wri
-00010d80: 7465 2873 6372 6170 6564 5f64 6174 612e  te(scraped_data.
-00010d90: 7265 6164 2829 290d 0a20 2020 2066 696c  read())..    fil
-00010da0: 652e 636c 6f73 6528 290d 0a20 2020 2023  e.close()..    #
-00010db0: 7265 7475 726e 2061 7274 6963 6c65 5f74  return article_t
-00010dc0: 6578 740d 0a0d 0a64 6566 2073 7461 7274  ext....def start
-00010dd0: 7064 6672 6561 6469 6e67 2866 696c 656e  pdfreading(filen
-00010de0: 616d 652c 6676 616c 7565 2c6b 6579 636f  ame,fvalue,keyco
-00010df0: 756e 7429 3a0d 0a20 2023 6f73 2e70 6174  unt):..  #os.pat
-00010e00: 682e 6162 7370 6174 6828 6f73 2e67 6574  h.abspath(os.get
-00010e10: 6377 6428 2929 0d0a 2020 7468 6573 697a  cwd())..  thesiz
-00010e20: 653d 726f 756e 6428 6f73 2e70 6174 682e  e=round(os.path.
-00010e30: 6765 7473 697a 6528 6669 6c65 6e61 6d65  getsize(filename
-00010e40: 292f 3130 3030 3030 302c 3229 0d0a 2020  )/1000000,2)..  
-00010e50: 6d5f 7469 6d65 203d 206f 732e 7061 7468  m_time = os.path
-00010e60: 2e67 6574 6d74 696d 6528 6669 6c65 6e61  .getmtime(filena
-00010e70: 6d65 290d 0a20 2064 745f 6d20 3d20 6461  me)..  dt_m = da
-00010e80: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
-00010e90: 6672 6f6d 7469 6d65 7374 616d 7028 6d5f  fromtimestamp(m_
-00010ea0: 7469 6d65 290d 0a20 2063 5f74 696d 6520  time)..  c_time 
-00010eb0: 3d20 6f73 2e70 6174 682e 6765 7463 7469  = os.path.getcti
-00010ec0: 6d65 2866 696c 656e 616d 6529 0d0a 2020  me(filename)..  
-00010ed0: 2320 636f 6e76 6572 7420 6372 6561 7469  # convert creati
-00010ee0: 6f6e 2074 696d 6573 7461 6d70 2069 6e74  on timestamp int
-00010ef0: 6f20 4461 7465 5469 6d65 206f 626a 6563  o DateTime objec
-00010f00: 740d 0a20 2064 745f 6320 3d20 6461 7465  t..  dt_c = date
-00010f10: 7469 6d65 2e64 6174 6574 696d 652e 6672  time.datetime.fr
-00010f20: 6f6d 7469 6d65 7374 616d 7028 635f 7469  omtimestamp(c_ti
-00010f30: 6d65 290d 0a20 2063 6f20 3d20 7374 7228  me)..  co = str(
-00010f40: 6474 5f63 2920 5b30 3a31 395d 0d0a 2020  dt_c) [0:19]..  
-00010f50: 6d6f 203d 2073 7472 2864 745f 6d29 205b  mo = str(dt_m) [
-00010f60: 303a 3139 5d0d 0a0d 0a20 2070 203d 204d  0:19]....  p = M
-00010f70: 7950 6172 7365 7228 6669 6c65 6e61 6d65  yParser(filename
-00010f80: 290d 0a20 2074 6865 7465 7874 3d27 5c6e  )..  thetext='\n
-00010f90: 272e 6a6f 696e 2870 2e72 6563 6f72 6473  '.join(p.records
-00010fa0: 290d 0a20 2061 7274 6963 6c65 5f74 6578  )..  article_tex
-00010fb0: 743d 7468 6574 6578 742e 656e 636f 6465  t=thetext.encode
-00010fc0: 2827 7574 6638 2729 0d0a 2020 7375 6d6d  ('utf8')..  summ
-00010fd0: 6172 697a 6564 3d22 7b5c 2266 696c 656e  arized="{\"filen
-00010fe0: 616d 655c 223a 5c22 2220 2b20 6669 6c65  ame\":\"" + file
-00010ff0: 6e61 6d65 202b 2022 5c22 2c5c 2266 696c  name + "\",\"fil
-00011000: 6573 697a 6528 4d42 295c 223a 222b 7374  esize(MB)\":"+st
-00011010: 7228 7468 6573 697a 6529 2b22 2c5c 2266  r(thesize)+",\"f
-00011020: 696c 6563 7265 6174 6564 6f6e 5c22 3a5c  ilecreatedon\":\
-00011030: 2222 202b 2063 6f20 2b20 225c 222c 5c22  "" + co + "\",\"
-00011040: 6669 6c65 6d6f 6469 6669 6564 6f6e 5c22  filemodifiedon\"
-00011050: 3a5c 2222 202b 206d 6f20 2b20 225c 222c  :\"" + mo + "\",
-00011060: 5c22 6b65 7977 6f72 6473 5c22 3a22 202b  \"keywords\":" +
-00011070: 2020 7374 6172 7473 756d 6d61 7279 2874    startsummary(t
-00011080: 6865 7465 7874 2c66 7661 6c75 652c 6b65  hetext,fvalue,ke
-00011090: 7963 6f75 6e74 290d 0a20 2320 7072 696e  ycount).. # prin
-000110a0: 7428 7375 6d6d 6172 697a 6564 290d 0a20  t(summarized).. 
-000110b0: 2072 6574 7572 6e20 7375 6d6d 6172 697a   return summariz
-000110c0: 6564 0d0a 0d0a 0d0a 2323 2323 2323 2323  ed......########
+00010ac0: 2020 2020 2020 2020 206c 6170 6172 616d           laparam
+00010ad0: 7320 3d20 6c61 7061 7261 6d73 290d 0a20  s = laparams).. 
+00010ae0: 2020 2020 2020 2023 2043 7265 6174 6520         # Create 
+00010af0: 6120 5044 4620 696e 7465 7270 7265 7465  a PDF interprete
+00010b00: 7220 6f62 6a65 6374 0d0a 2020 2020 2020  r object..      
+00010b10: 2020 696e 7465 7270 7265 7465 7220 3d20    interpreter = 
+00010b20: 5044 4650 6167 6549 6e74 6572 7072 6574  PDFPageInterpret
+00010b30: 6572 2872 7372 636d 6772 2c20 6465 7669  er(rsrcmgr, devi
+00010b40: 6365 290d 0a20 2020 2020 2020 2023 2050  ce)..        # P
+00010b50: 726f 6365 7373 2065 6163 6820 7061 6765  rocess each page
+00010b60: 2063 6f6e 7461 696e 6564 2069 6e20 7468   contained in th
+00010b70: 6520 646f 6375 6d65 6e74 2e0d 0a20 2020  e document...   
+00010b80: 2020 2020 2066 6f72 2070 6167 6520 696e       for page in
+00010b90: 2050 4446 5061 6765 2e63 7265 6174 655f   PDFPage.create_
+00010ba0: 7061 6765 7328 646f 6375 6d65 6e74 293a  pages(document):
+00010bb0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00010bc0: 7465 7270 7265 7465 722e 7072 6f63 6573  terpreter.proces
+00010bd0: 735f 7061 6765 2870 6167 6529 0d0a 2020  s_page(page)..  
+00010be0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
+00010bf0: 2073 656c 662e 7265 636f 7264 7320 2020   self.records   
+00010c00: 2020 2020 2020 2020 203d 205b 5d0d 0a20           = [].. 
+00010c10: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00010c20: 2020 6c69 6e65 7320 3d20 7265 7473 7472    lines = retstr
+00010c30: 2e67 6574 7661 6c75 6528 292e 7370 6c69  .getvalue().spli
+00010c40: 746c 696e 6573 2829 0d0a 2020 2020 2020  tlines()..      
+00010c50: 2020 666f 7220 6c69 6e65 2069 6e20 6c69    for line in li
+00010c60: 6e65 733a 0d0a 2020 2020 2020 2020 2020  nes:..          
+00010c70: 2020 7365 6c66 2e68 616e 646c 655f 6c69    self.handle_li
+00010c80: 6e65 286c 696e 6529 0d0a 2020 2020 200d  ne(line)..     .
+00010c90: 0a20 2020 2064 6566 2068 616e 646c 655f  .    def handle_
+00010ca0: 6c69 6e65 2873 656c 662c 206c 696e 6529  line(self, line)
+00010cb0: 3a0d 0a20 2020 2020 2020 2023 2043 7573  :..        # Cus
+00010cc0: 746f 6d69 7a65 2079 6f75 7220 6c69 6e65  tomize your line
+00010cd0: 2d62 792d 6c69 6e65 2070 6172 7365 7220  -by-line parser 
+00010ce0: 6865 7265 0d0a 2020 2020 2020 2020 7365  here..        se
+00010cf0: 6c66 2e72 6563 6f72 6473 2e61 7070 656e  lf.records.appen
+00010d00: 6428 6c69 6e65 290d 0a0d 0a64 6566 2073  d(line)....def s
+00010d10: 6372 6170 6570 6466 2874 6865 7572 6c2c  crapepdf(theurl,
+00010d20: 666e 293a 0d0a 2020 2020 7363 7261 7065  fn):..    scrape
+00010d30: 645f 6461 7461 203d 2075 726c 6c69 622e  d_data = urllib.
+00010d40: 7265 7175 6573 742e 7572 6c6f 7065 6e28  request.urlopen(
+00010d50: 7468 6575 726c 2920 200d 0a20 2020 2066  theurl)  ..    f
+00010d60: 696c 6520 3d20 6f70 656e 2866 6e2c 2027  ile = open(fn, '
+00010d70: 7762 2729 0d0a 2020 2020 6669 6c65 2e77  wb')..    file.w
+00010d80: 7269 7465 2873 6372 6170 6564 5f64 6174  rite(scraped_dat
+00010d90: 612e 7265 6164 2829 290d 0a20 2020 2066  a.read())..    f
+00010da0: 696c 652e 636c 6f73 6528 290d 0a20 2020  ile.close()..   
+00010db0: 2023 7265 7475 726e 2061 7274 6963 6c65   #return article
+00010dc0: 5f74 6578 740d 0a0d 0a64 6566 2073 7461  _text....def sta
+00010dd0: 7274 7064 6672 6561 6469 6e67 2866 696c  rtpdfreading(fil
+00010de0: 656e 616d 652c 6676 616c 7565 2c6b 6579  ename,fvalue,key
+00010df0: 636f 756e 7429 3a0d 0a20 2023 6f73 2e70  count):..  #os.p
+00010e00: 6174 682e 6162 7370 6174 6828 6f73 2e67  ath.abspath(os.g
+00010e10: 6574 6377 6428 2929 0d0a 2020 7468 6573  etcwd())..  thes
+00010e20: 697a 653d 726f 756e 6428 6f73 2e70 6174  ize=round(os.pat
+00010e30: 682e 6765 7473 697a 6528 6669 6c65 6e61  h.getsize(filena
+00010e40: 6d65 292f 3130 3030 3030 302c 3229 0d0a  me)/1000000,2)..
+00010e50: 2020 6d5f 7469 6d65 203d 206f 732e 7061    m_time = os.pa
+00010e60: 7468 2e67 6574 6d74 696d 6528 6669 6c65  th.getmtime(file
+00010e70: 6e61 6d65 290d 0a20 2064 745f 6d20 3d20  name)..  dt_m = 
+00010e80: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
+00010e90: 652e 6672 6f6d 7469 6d65 7374 616d 7028  e.fromtimestamp(
+00010ea0: 6d5f 7469 6d65 290d 0a20 2063 5f74 696d  m_time)..  c_tim
+00010eb0: 6520 3d20 6f73 2e70 6174 682e 6765 7463  e = os.path.getc
+00010ec0: 7469 6d65 2866 696c 656e 616d 6529 0d0a  time(filename)..
+00010ed0: 2020 2320 636f 6e76 6572 7420 6372 6561    # convert crea
+00010ee0: 7469 6f6e 2074 696d 6573 7461 6d70 2069  tion timestamp i
+00010ef0: 6e74 6f20 4461 7465 5469 6d65 206f 626a  nto DateTime obj
+00010f00: 6563 740d 0a20 2064 745f 6320 3d20 6461  ect..  dt_c = da
+00010f10: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
+00010f20: 6672 6f6d 7469 6d65 7374 616d 7028 635f  fromtimestamp(c_
+00010f30: 7469 6d65 290d 0a20 2063 6f20 3d20 7374  time)..  co = st
+00010f40: 7228 6474 5f63 2920 5b30 3a31 395d 0d0a  r(dt_c) [0:19]..
+00010f50: 2020 6d6f 203d 2073 7472 2864 745f 6d29    mo = str(dt_m)
+00010f60: 205b 303a 3139 5d0d 0a0d 0a20 2070 203d   [0:19]....  p =
+00010f70: 204d 7950 6172 7365 7228 6669 6c65 6e61   MyParser(filena
+00010f80: 6d65 290d 0a20 2074 6865 7465 7874 3d27  me)..  thetext='
+00010f90: 5c6e 272e 6a6f 696e 2870 2e72 6563 6f72  \n'.join(p.recor
+00010fa0: 6473 290d 0a20 2061 7274 6963 6c65 5f74  ds)..  article_t
+00010fb0: 6578 743d 7468 6574 6578 742e 656e 636f  ext=thetext.enco
+00010fc0: 6465 2827 7574 6638 2729 0d0a 2020 7375  de('utf8')..  su
+00010fd0: 6d6d 6172 697a 6564 3d22 7b5c 2266 696c  mmarized="{\"fil
+00010fe0: 656e 616d 655c 223a 5c22 2220 2b20 6669  ename\":\"" + fi
+00010ff0: 6c65 6e61 6d65 202b 2022 5c22 2c5c 2266  lename + "\",\"f
+00011000: 696c 6573 697a 6528 4d42 295c 223a 222b  ilesize(MB)\":"+
+00011010: 7374 7228 7468 6573 697a 6529 2b22 2c5c  str(thesize)+",\
+00011020: 2266 696c 6563 7265 6174 6564 6f6e 5c22  "filecreatedon\"
+00011030: 3a5c 2222 202b 2063 6f20 2b20 225c 222c  :\"" + co + "\",
+00011040: 5c22 6669 6c65 6d6f 6469 6669 6564 6f6e  \"filemodifiedon
+00011050: 5c22 3a5c 2222 202b 206d 6f20 2b20 225c  \":\"" + mo + "\
+00011060: 222c 5c22 6b65 7977 6f72 6473 5c22 3a22  ",\"keywords\":"
+00011070: 202b 2020 7374 6172 7473 756d 6d61 7279   +  startsummary
+00011080: 2874 6865 7465 7874 2c66 7661 6c75 652c  (thetext,fvalue,
+00011090: 6b65 7963 6f75 6e74 290d 0a20 2320 7072  keycount).. # pr
+000110a0: 696e 7428 7375 6d6d 6172 697a 6564 290d  int(summarized).
+000110b0: 0a20 2072 6574 7572 6e20 7375 6d6d 6172  .  return summar
+000110c0: 697a 6564 0d0a 0d0a 0d0a 2323 2323 2323  ized......######
 000110d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 000110e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000110f0: 2323 2323 2323 230d 0a23 2044 6576 656c  #######..# Devel
-00011100: 6f70 6564 2062 7920 4f54 4943 5320 4164  oped by OTICS Ad
-00011110: 7661 6e63 6564 2041 6e61 6c79 7469 6373  vanced Analytics
-00011120: 0d0a 2320 5365 6261 7374 6961 6e20 4d61  ..# Sebastian Ma
-00011130: 7572 6963 650d 0a0d 0a69 6d70 6f72 7420  urice....import 
-00011140: 6273 3420 6173 2062 7320 200d 0a69 6d70  bs4 as bs  ..imp
-00011150: 6f72 7420 7572 6c6c 6962 2e72 6571 7565  ort urllib.reque
-00011160: 7374 2020 0d0a 696d 706f 7274 2072 650d  st  ..import re.
-00011170: 0a69 6d70 6f72 7420 6e6c 746b 0d0a 6672  .import nltk..fr
-00011180: 6f6d 206e 6c74 6b2e 746f 6b65 6e69 7a65  om nltk.tokenize
-00011190: 2069 6d70 6f72 7420 5265 6765 7870 546f   import RegexpTo
-000111a0: 6b65 6e69 7a65 720d 0a69 6d70 6f72 7420  kenizer..import 
-000111b0: 6865 6170 710d 0a69 6d70 6f72 7420 7379  heapq..import sy
-000111c0: 730d 0a69 6d70 6f72 7420 6f73 0d0a 6672  s..import os..fr
-000111d0: 6f6d 2072 616b 655f 6e6c 746b 2069 6d70  om rake_nltk imp
-000111e0: 6f72 7420 4d65 7472 6963 2c52 616b 650d  ort Metric,Rake.
-000111f0: 0a69 6d70 6f72 7420 6a73 6f6e 0d0a 696d  .import json..im
-00011200: 706f 7274 2070 616e 6461 7320 6173 2070  port pandas as p
-00011210: 640d 0a69 6d70 6f72 7420 6e6c 746b 2e63  d..import nltk.c
-00011220: 6f72 7075 730d 0a66 726f 6d20 6e6c 746b  orpus..from nltk
-00011230: 2e63 6f72 7075 7320 696d 706f 7274 2073  .corpus import s
-00011240: 746f 7077 6f72 6473 0d0a 6672 6f6d 2074  topwords..from t
-00011250: 6578 7462 6c6f 6220 696d 706f 7274 2054  extblob import T
-00011260: 6578 7442 6c6f 620d 0a66 726f 6d20 7465  extBlob..from te
-00011270: 7874 626c 6f62 2069 6d70 6f72 7420 576f  xtblob import Wo
-00011280: 7264 0d0a 6672 6f6d 2073 6b6c 6561 726e  rd..from sklearn
-00011290: 2e66 6561 7475 7265 5f65 7874 7261 6374  .feature_extract
-000112a0: 696f 6e2e 7465 7874 2069 6d70 6f72 7420  ion.text import 
-000112b0: 5466 6964 6654 7261 6e73 666f 726d 6572  TfidfTransformer
-000112c0: 2c54 6669 6466 5665 6374 6f72 697a 6572  ,TfidfVectorizer
-000112d0: 0d0a 6672 6f6d 2073 6b6c 6561 726e 2e66  ..from sklearn.f
-000112e0: 6561 7475 7265 5f65 7874 7261 6374 696f  eature_extractio
-000112f0: 6e2e 7465 7874 2069 6d70 6f72 7420 436f  n.text import Co
-00011300: 756e 7456 6563 746f 7269 7a65 720d 0a23  untVectorizer..#
-00011310: 6e6c 746b 2e64 6f77 6e6c 6f61 6428 2770  nltk.download('p
-00011320: 756e 6b74 2729 0d0a 696d 706f 7274 2077  unkt')..import w
-00011330: 6172 6e69 6e67 730d 0a77 6172 6e69 6e67  arnings..warning
-00011340: 732e 6669 6c74 6572 7761 726e 696e 6773  s.filterwarnings
-00011350: 2822 6967 6e6f 7265 2229 0d0a 0d0a 236e  ("ignore")....#n
-00011360: 6c74 6b2e 646f 776e 6c6f 6164 2827 7374  ltk.download('st
-00011370: 6f70 776f 7264 7327 290d 0a0d 0a64 6566  opwords')....def
-00011380: 2067 6574 5f73 746f 705f 776f 7264 7328   get_stop_words(
-00011390: 293a 0d0a 2020 2020 2222 226c 6f61 6420  ):..    """load 
-000113a0: 7374 6f70 2077 6f72 6473 2022 2222 0d0a  stop words """..
-000113b0: 2020 2020 7265 7475 726e 2073 746f 7077      return stopw
-000113c0: 6f72 6473 2e77 6f72 6473 2827 656e 676c  ords.words('engl
-000113d0: 6973 6827 290d 0a20 2020 200d 0a23 2320  ish')..    ..## 
-000113e0: 2020 2077 6974 6820 6f70 656e 2827 7374     with open('st
-000113f0: 6f70 776f 7264 732e 7478 7427 2c20 2772  opwords.txt', 'r
-00011400: 272c 2065 6e63 6f64 696e 673d 2275 7466  ', encoding="utf
-00011410: 2d38 2229 2061 7320 663a 0d0a 2323 2020  -8") as f:..##  
-00011420: 2020 2020 2020 7374 6f70 776f 7264 7320        stopwords 
-00011430: 3d20 662e 7265 6164 6c69 6e65 7328 290d  = f.readlines().
-00011440: 0a23 2320 2020 2020 2020 2073 746f 705f  .##        stop_
-00011450: 7365 7420 3d20 7365 7428 6d2e 7374 7269  set = set(m.stri
-00011460: 7028 2920 666f 7220 6d20 696e 2073 746f  p() for m in sto
-00011470: 7077 6f72 6473 290d 0a23 2320 2020 2020  pwords)..##     
-00011480: 2023 2020 7072 696e 7428 6672 6f7a 656e   #  print(frozen
-00011490: 7365 7428 7374 6f70 5f73 6574 2929 0d0a  set(stop_set))..
-000114a0: 2323 2020 2020 2020 2020 7265 7475 726e  ##        return
-000114b0: 2066 726f 7a65 6e73 6574 2873 746f 705f   frozenset(stop_
-000114c0: 7365 7429 0d0a 0d0a 6465 6620 7363 7261  set)....def scra
-000114d0: 7065 7765 6228 7468 6575 726c 293a 0d0a  peweb(theurl):..
-000114e0: 2020 2020 7363 7261 7065 645f 6461 7461      scraped_data
-000114f0: 203d 2075 726c 6c69 622e 7265 7175 6573   = urllib.reques
-00011500: 742e 7572 6c6f 7065 6e28 7468 6575 726c  t.urlopen(theurl
-00011510: 2920 200d 0a20 2020 2061 7274 6963 6c65  )  ..    article
-00011520: 203d 2073 6372 6170 6564 5f64 6174 612e   = scraped_data.
-00011530: 7265 6164 2829 0d0a 0d0a 2020 2020 7061  read()....    pa
-00011540: 7273 6564 5f61 7274 6963 6c65 203d 2062  rsed_article = b
-00011550: 732e 4265 6175 7469 6675 6c53 6f75 7028  s.BeautifulSoup(
-00011560: 6172 7469 636c 652c 276c 786d 6c27 290d  article,'lxml').
-00011570: 0a0d 0a20 2020 2070 6172 6167 7261 7068  ...    paragraph
-00011580: 7320 3d20 7061 7273 6564 5f61 7274 6963  s = parsed_artic
-00011590: 6c65 2e66 696e 645f 616c 6c28 2770 2729  le.find_all('p')
-000115a0: 0d0a 0d0a 2020 2020 6172 7469 636c 655f  ....    article_
-000115b0: 7465 7874 203d 2022 220d 0a0d 0a20 2020  text = ""....   
-000115c0: 2066 6f72 2070 2069 6e20 7061 7261 6772   for p in paragr
-000115d0: 6170 6873 3a20 200d 0a20 2020 2020 2020  aphs:  ..       
-000115e0: 2061 7274 6963 6c65 5f74 6578 7420 2b3d   article_text +=
-000115f0: 2070 2e74 6578 740d 0a20 2020 2072 6574   p.text..    ret
-00011600: 7572 6e20 6172 7469 636c 655f 7465 7874  urn article_text
-00011610: 200d 0a0d 0a64 6566 2063 6f6e 7665 7274   ....def convert
-00011620: 746f 6c6f 7765 7263 6173 6528 6466 2c63  tolowercase(df,c
-00011630: 6f6c 293a 0d0a 2020 2020 2020 6466 5b63  ol):..      df[c
-00011640: 6f6c 5d20 3d20 6466 5b63 6f6c 5d2e 6170  ol] = df[col].ap
-00011650: 706c 7928 6c61 6d62 6461 2078 3a20 2220  ply(lambda x: " 
-00011660: 222e 6a6f 696e 2878 2e6c 6f77 6572 2829  ".join(x.lower()
-00011670: 2066 6f72 2078 2069 6e20 782e 7370 6c69   for x in x.spli
-00011680: 7428 2929 290d 0a20 2020 2020 2072 6574  t()))..      ret
-00011690: 7572 6e20 6466 0d0a 2020 2020 0d0a 6465  urn df..    ..de
-000116a0: 6620 7265 6d6f 7665 7075 6e63 7475 6174  f removepunctuat
-000116b0: 696f 6e28 6466 2c63 6f6c 293a 0d0a 2020  ion(df,col):..  
-000116c0: 2020 2020 6466 5b63 6f6c 5d20 3d20 6466      df[col] = df
-000116d0: 5b63 6f6c 5d2e 7374 722e 7265 706c 6163  [col].str.replac
-000116e0: 6528 275b 5e5c 775c 735d 272c 2727 290d  e('[^\w\s]','').
-000116f0: 0a20 2020 2020 2072 6574 7572 6e20 6466  .      return df
-00011700: 0d0a 0d0a 6465 6620 7265 6d6f 7665 7374  ....def removest
-00011710: 6f70 776f 7264 7328 6466 2c63 6f6c 293a  opwords(df,col):
-00011720: 0d0a 2020 2020 2020 7374 6f70 203d 2073  ..      stop = s
-00011730: 746f 7077 6f72 6473 2e77 6f72 6473 2827  topwords.words('
-00011740: 656e 676c 6973 6827 290d 0a20 2020 2020  english')..     
-00011750: 2064 665b 636f 6c5d 203d 2064 665b 636f   df[col] = df[co
-00011760: 6c5d 2e61 7070 6c79 286c 616d 6264 6120  l].apply(lambda 
-00011770: 783a 2022 2022 2e6a 6f69 6e28 7820 666f  x: " ".join(x fo
-00011780: 7220 7820 696e 2078 2e73 706c 6974 2829  r x in x.split()
-00011790: 2069 6620 7820 6e6f 7420 696e 2073 746f   if x not in sto
-000117a0: 7029 290d 0a20 2020 2020 2072 6574 7572  p))..      retur
-000117b0: 6e20 6466 0d0a 0d0a 6465 6620 7265 6d6f  n df....def remo
-000117c0: 7665 636f 6d6d 6f6e 776f 7264 7328 6466  vecommonwords(df
-000117d0: 2c63 6f6c 293a 0d0a 2020 2020 2020 6672  ,col):..      fr
-000117e0: 6571 203d 2070 642e 5365 7269 6573 2827  eq = pd.Series('
-000117f0: 2027 2e6a 6f69 6e28 6466 5b63 6f6c 5d29   '.join(df[col])
-00011800: 2e73 706c 6974 2829 292e 7661 6c75 655f  .split()).value_
-00011810: 636f 756e 7473 2829 5b3a 3130 5d0d 0a20  counts()[:10].. 
-00011820: 2020 2020 2066 7265 7120 3d20 6c69 7374       freq = list
-00011830: 2866 7265 712e 696e 6465 7829 0d0a 2020  (freq.index)..  
-00011840: 2020 2020 6466 5b63 6f6c 5d20 3d20 6466      df[col] = df
-00011850: 5b63 6f6c 5d2e 6170 706c 7928 6c61 6d62  [col].apply(lamb
-00011860: 6461 2078 3a20 2220 222e 6a6f 696e 2878  da x: " ".join(x
-00011870: 2066 6f72 2078 2069 6e20 782e 7370 6c69   for x in x.spli
-00011880: 7428 2920 6966 2078 206e 6f74 2069 6e20  t() if x not in 
-00011890: 6672 6571 2929 0d0a 2020 2020 2020 7265  freq))..      re
-000118a0: 7475 726e 2064 660d 0a0d 0a64 6566 2072  turn df....def r
-000118b0: 656d 6f76 6572 6172 6577 6f72 6473 2864  emoverarewords(d
-000118c0: 662c 636f 6c29 3a0d 0a20 2020 2020 2066  f,col):..      f
-000118d0: 7265 7120 3d20 7064 2e53 6572 6965 7328  req = pd.Series(
-000118e0: 2720 272e 6a6f 696e 2864 665b 636f 6c5d  ' '.join(df[col]
-000118f0: 292e 7370 6c69 7428 2929 2e76 616c 7565  ).split()).value
-00011900: 5f63 6f75 6e74 7328 295b 2d31 303a 5d0d  _counts()[-10:].
-00011910: 0a20 2020 2020 2066 7265 7120 3d20 6c69  .      freq = li
-00011920: 7374 2866 7265 712e 696e 6465 7829 0d0a  st(freq.index)..
-00011930: 2020 2020 2020 6466 5b63 6f6c 5d20 3d20        df[col] = 
-00011940: 6466 5b63 6f6c 5d2e 6170 706c 7928 6c61  df[col].apply(la
-00011950: 6d62 6461 2078 3a20 2220 222e 6a6f 696e  mbda x: " ".join
-00011960: 2878 2066 6f72 2078 2069 6e20 782e 7370  (x for x in x.sp
-00011970: 6c69 7428 2920 6966 2078 206e 6f74 2069  lit() if x not i
-00011980: 6e20 6672 6571 2929 0d0a 2020 2020 2020  n freq))..      
-00011990: 7265 7475 726e 2064 660d 0a0d 0a64 6566  return df....def
-000119a0: 2063 6f72 7265 6374 7370 656c 6c69 6e67   correctspelling
-000119b0: 2864 662c 636f 6c29 3a0d 0a20 2020 2020  (df,col):..     
-000119c0: 2064 665b 636f 6c5d 5b3a 355d 2e61 7070   df[col][:5].app
-000119d0: 6c79 286c 616d 6264 6120 783a 2073 7472  ly(lambda x: str
-000119e0: 2854 6578 7442 6c6f 6228 7829 2e63 6f72  (TextBlob(x).cor
-000119f0: 7265 6374 2829 2929 0d0a 2020 2020 2020  rect()))..      
-00011a00: 7265 7475 726e 2064 660d 0a0d 0a64 6566  return df....def
-00011a10: 206c 656d 6d61 7469 7a61 7469 6f6e 2864   lemmatization(d
-00011a20: 662c 636f 6c29 3a0d 0a20 2020 2020 2064  f,col):..      d
-00011a30: 665b 636f 6c5d 203d 2064 665b 636f 6c5d  f[col] = df[col]
-00011a40: 2e61 7070 6c79 286c 616d 6264 6120 783a  .apply(lambda x:
-00011a50: 2022 2022 2e6a 6f69 6e28 5b57 6f72 6428   " ".join([Word(
-00011a60: 776f 7264 292e 6c65 6d6d 6174 697a 6528  word).lemmatize(
-00011a70: 2920 666f 7220 776f 7264 2069 6e20 782e  ) for word in x.
-00011a80: 7370 6c69 7428 295d 2929 0d0a 2020 2020  split()]))..    
-00011a90: 2020 7265 7475 726e 2064 660d 0a0d 0a64    return df....d
-00011aa0: 6566 2074 7261 696e 7665 6374 2863 762c  ef trainvect(cv,
-00011ab0: 7462 6f77 2c64 662c 636f 6c2c 6d61 786b  tbow,df,col,maxk
-00011ac0: 6579 776f 7264 7329 3a0d 0a20 2020 2020  eywords):..     
-00011ad0: 2074 6578 743d 6466 5b63 6f6c 5d2e 746f   text=df[col].to
-00011ae0: 6c69 7374 2829 0d0a 2020 2020 2020 7466  list()..      tf
-00011af0: 6964 6620 3d20 5466 6964 6654 7261 6e73  idf = TfidfTrans
-00011b00: 666f 726d 6572 2873 6d6f 6f74 685f 6964  former(smooth_id
-00011b10: 663d 5472 7565 2c75 7365 5f69 6466 3d54  f=True,use_idf=T
-00011b20: 7275 6529 0d0a 2020 2020 2020 7466 6964  rue)..      tfid
-00011b30: 662e 6669 7428 7462 6f77 290d 0a20 2020  f.fit(tbow)..   
-00011b40: 2020 2074 665f 6964 665f 7665 6374 6f72     tf_idf_vector
-00011b50: 3d74 6669 6466 2e74 7261 6e73 666f 726d  =tfidf.transform
-00011b60: 2863 762e 7472 616e 7366 6f72 6d28 7465  (cv.transform(te
-00011b70: 7874 2929 0d0a 2020 2020 2020 736f 7274  xt))..      sort
-00011b80: 6564 6974 656d 733d 736f 7274 5f63 6f6f  editems=sort_coo
-00011b90: 2874 665f 6964 665f 7665 6374 6f72 2e74  (tf_idf_vector.t
-00011ba0: 6f63 6f6f 2829 290d 0a20 2020 2020 2066  ocoo())..      f
-00011bb0: 6561 7475 7265 6e61 6d65 733d 6376 2e67  eaturenames=cv.g
-00011bc0: 6574 5f66 6561 7475 7265 5f6e 616d 6573  et_feature_names
-00011bd0: 5f6f 7574 2829 0d0a 2020 2020 2020 6b65  _out()..      ke
-00011be0: 7977 6f72 6473 3d65 7874 7261 6374 5f74  ywords=extract_t
-00011bf0: 6f70 6e5f 6672 6f6d 5f76 6563 746f 7228  opn_from_vector(
-00011c00: 6665 6174 7572 656e 616d 6573 2c73 6f72  featurenames,sor
-00011c10: 7465 6469 7465 6d73 2c6d 6178 6b65 7977  teditems,maxkeyw
-00011c20: 6f72 6473 290d 0a20 2020 2020 206b 6579  ords)..      key
-00011c30: 776f 7264 733d 6a73 6f6e 2e64 756d 7073  words=json.dumps
-00011c40: 286b 6579 776f 7264 7329 0d0a 2020 2020  (keywords)..    
-00011c50: 2023 2070 7269 6e74 286b 6579 776f 7264   # print(keyword
-00011c60: 7329 0d0a 2020 2020 2020 7265 7475 726e  s)..      return
-00011c70: 206b 6579 776f 7264 730d 0a0d 0a64 6566   keywords....def
-00011c80: 2074 7261 696e 626f 7728 6466 2c63 6f6c   trainbow(df,col
-00011c90: 293a 0d0a 2020 2020 2020 6d79 6c69 7374  ):..      mylist
-00011ca0: 3d64 665b 636f 6c5d 2e74 6f6c 6973 7428  =df[col].tolist(
-00011cb0: 290d 0a20 2020 2020 2073 746f 7077 6f72  )..      stopwor
-00011cc0: 6473 3d67 6574 5f73 746f 705f 776f 7264  ds=get_stop_word
-00011cd0: 7328 290d 0a20 2020 2020 2063 7620 3d20  s()..      cv = 
-00011ce0: 436f 756e 7456 6563 746f 7269 7a65 7228  CountVectorizer(
-00011cf0: 7374 6f70 5f77 6f72 6473 3d73 746f 7077  stop_words=stopw
-00011d00: 6f72 6473 290d 0a20 2020 2020 2074 7261  ords)..      tra
-00011d10: 696e 5f62 6f77 203d 2063 762e 6669 745f  in_bow = cv.fit_
-00011d20: 7472 616e 7366 6f72 6d28 6d79 6c69 7374  transform(mylist
-00011d30: 290d 0a20 2020 2020 2023 7072 696e 7428  )..      #print(
-00011d40: 6c69 7374 2863 762e 766f 6361 6275 6c61  list(cv.vocabula
-00011d50: 7279 5f2e 6b65 7973 2829 2929 0d0a 2020  ry_.keys()))..  
-00011d60: 2020 2020 7265 7475 726e 2063 762c 7472      return cv,tr
-00011d70: 6169 6e5f 626f 770d 0a0d 0a20 0d0a 6465  ain_bow.... ..de
-00011d80: 6620 736f 7274 5f63 6f6f 2863 6f6f 5f6d  f sort_coo(coo_m
-00011d90: 6174 7269 7829 3a0d 0a20 2020 2074 7570  atrix):..    tup
-00011da0: 6c65 7320 3d20 7a69 7028 636f 6f5f 6d61  les = zip(coo_ma
-00011db0: 7472 6978 2e63 6f6c 2c20 636f 6f5f 6d61  trix.col, coo_ma
-00011dc0: 7472 6978 2e64 6174 6129 0d0a 2020 2020  trix.data)..    
-00011dd0: 7265 7475 726e 2073 6f72 7465 6428 7475  return sorted(tu
-00011de0: 706c 6573 2c20 6b65 793d 6c61 6d62 6461  ples, key=lambda
-00011df0: 2078 3a20 2878 5b31 5d2c 2078 5b30 5d29   x: (x[1], x[0])
-00011e00: 2c20 7265 7665 7273 653d 5472 7565 290d  , reverse=True).
-00011e10: 0a0d 0a64 6566 2065 7874 7261 6374 5f74  ...def extract_t
-00011e20: 6f70 6e5f 6672 6f6d 5f76 6563 746f 7228  opn_from_vector(
-00011e30: 6665 6174 7572 655f 6e61 6d65 732c 2073  feature_names, s
-00011e40: 6f72 7465 645f 6974 656d 732c 2074 6f70  orted_items, top
-00011e50: 6e3d 3130 293a 0d0a 2020 2020 2222 2267  n=10):..    """g
-00011e60: 6574 2074 6865 2066 6561 7475 7265 206e  et the feature n
-00011e70: 616d 6573 2061 6e64 2074 662d 6964 6620  ames and tf-idf 
-00011e80: 7363 6f72 6520 6f66 2074 6f70 206e 2069  score of top n i
-00011e90: 7465 6d73 2222 220d 0a20 2020 200d 0a20  tems"""..    .. 
-00011ea0: 2020 2023 7573 6520 6f6e 6c79 2074 6f70     #use only top
-00011eb0: 6e20 6974 656d 7320 6672 6f6d 2076 6563  n items from vec
-00011ec0: 746f 720d 0a20 2020 2073 6f72 7465 645f  tor..    sorted_
-00011ed0: 6974 656d 7320 3d20 736f 7274 6564 5f69  items = sorted_i
-00011ee0: 7465 6d73 5b3a 746f 706e 5d0d 0a0d 0a20  tems[:topn].... 
-00011ef0: 2020 2073 636f 7265 5f76 616c 7320 3d20     score_vals = 
-00011f00: 5b5d 0d0a 2020 2020 6665 6174 7572 655f  []..    feature_
-00011f10: 7661 6c73 203d 205b 5d0d 0a0d 0a20 2020  vals = []....   
-00011f20: 2066 6f72 2069 6478 2c20 7363 6f72 6520   for idx, score 
-00011f30: 696e 2073 6f72 7465 645f 6974 656d 733a  in sorted_items:
-00011f40: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-00011f50: 2020 2020 666e 616d 6520 3d20 6665 6174      fname = feat
-00011f60: 7572 655f 6e61 6d65 735b 6964 785d 0d0a  ure_names[idx]..
-00011f70: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00011f80: 2866 6e61 6d65 293e 333a 0d0a 2020 2020  (fname)>3:..    
-00011f90: 2020 2020 236b 6565 7020 7472 6163 6b20      #keep track 
-00011fa0: 6f66 2066 6561 7475 7265 206e 616d 6520  of feature name 
-00011fb0: 616e 6420 6974 7320 636f 7272 6573 706f  and its correspo
-00011fc0: 6e64 696e 6720 7363 6f72 650d 0a20 2020  nding score..   
-00011fd0: 2020 2020 2020 2020 2073 636f 7265 5f76           score_v
-00011fe0: 616c 732e 6170 7065 6e64 2872 6f75 6e64  als.append(round
-00011ff0: 2873 636f 7265 2c20 3329 290d 0a20 2020  (score, 3))..   
-00012000: 2020 2020 2020 2020 2066 6561 7475 7265           feature
-00012010: 5f76 616c 732e 6170 7065 6e64 2866 6561  _vals.append(fea
-00012020: 7475 7265 5f6e 616d 6573 5b69 6478 5d29  ture_names[idx])
-00012030: 0d0a 0d0a 2020 2020 2363 7265 6174 6520  ....    #create 
-00012040: 6120 7475 706c 6573 206f 6620 6665 6174  a tuples of feat
-00012050: 7572 652c 7363 6f72 650d 0a20 2020 2023  ure,score..    #
-00012060: 7265 7375 6c74 7320 3d20 7a69 7028 6665  results = zip(fe
-00012070: 6174 7572 655f 7661 6c73 2c73 636f 7265  ature_vals,score
-00012080: 5f76 616c 7329 0d0a 2020 2020 7265 7375  _vals)..    resu
-00012090: 6c74 733d 207b 7d0d 0a20 2020 2066 6f72  lts= {}..    for
-000120a0: 2069 6478 2069 6e20 7261 6e67 6528 6c65   idx in range(le
-000120b0: 6e28 6665 6174 7572 655f 7661 6c73 2929  n(feature_vals))
-000120c0: 3a0d 0a20 2020 2020 2020 2072 6573 756c  :..        resul
-000120d0: 7473 5b66 6561 7475 7265 5f76 616c 735b  ts[feature_vals[
-000120e0: 6964 785d 5d3d 7363 6f72 655f 7661 6c73  idx]]=score_vals
-000120f0: 5b69 6478 5d0d 0a20 2020 200d 0a20 2020  [idx]..    ..   
-00012100: 2072 6574 7572 6e20 7265 7375 6c74 730d   return results.
-00012110: 0a0d 0a64 6566 2067 6574 6b65 7977 6f72  ...def getkeywor
-00012120: 6473 286d 7974 6578 742c 6d61 786b 6579  ds(mytext,maxkey
-00012130: 776f 7264 7329 3a0d 0a20 2020 2072 3d52  words):..    r=R
-00012140: 616b 6528 6d61 785f 6c65 6e67 7468 3d31  ake(max_length=1
-00012150: 3029 0d0a 2020 2020 7220 3d20 5261 6b65  0)..    r = Rake
-00012160: 2872 616e 6b69 6e67 5f6d 6574 7269 633d  (ranking_metric=
-00012170: 4d65 7472 6963 2e44 4547 5245 455f 544f  Metric.DEGREE_TO
-00012180: 5f46 5245 5155 454e 4359 5f52 4154 494f  _FREQUENCY_RATIO
-00012190: 290d 0a20 2020 2023 7220 3d20 5261 6b65  )..    #r = Rake
-000121a0: 2872 616e 6b69 6e67 5f6d 6574 7269 633d  (ranking_metric=
-000121b0: 4d65 7472 6963 2e57 4f52 445f 4445 4752  Metric.WORD_DEGR
-000121c0: 4545 290d 0a20 2020 2023 7220 3d20 5261  EE)..    #r = Ra
-000121d0: 6b65 2872 616e 6b69 6e67 5f6d 6574 7269  ke(ranking_metri
-000121e0: 633d 4d65 7472 6963 2e57 4f52 445f 4652  c=Metric.WORD_FR
-000121f0: 4551 5545 4e43 5929 0d0a 2020 2020 643d  EQUENCY)..    d=
-00012200: 7b27 696e 7075 7427 3a5b 6d79 7465 7874  {'input':[mytext
-00012210: 5d7d 0d0a 2020 2020 6466 203d 2070 642e  ]}..    df = pd.
-00012220: 4461 7461 4672 616d 6528 6429 0d0a 2020  DataFrame(d)..  
-00012230: 2020 6466 3d63 6f6e 7665 7274 746f 6c6f    df=converttolo
-00012240: 7765 7263 6173 6528 6466 2c27 696e 7075  wercase(df,'inpu
-00012250: 7427 290d 0a20 2020 2064 663d 7265 6d6f  t')..    df=remo
-00012260: 7665 7075 6e63 7475 6174 696f 6e28 6466  vepunctuation(df
-00012270: 2c27 696e 7075 7427 290d 0a20 2020 2064  ,'input')..    d
-00012280: 663d 7265 6d6f 7665 7374 6f70 776f 7264  f=removestopword
-00012290: 7328 6466 2c27 696e 7075 7427 290d 0a20  s(df,'input').. 
-000122a0: 2020 2064 663d 7265 6d6f 7665 636f 6d6d     df=removecomm
-000122b0: 6f6e 776f 7264 7328 6466 2c27 696e 7075  onwords(df,'inpu
-000122c0: 7427 290d 0a20 2020 2064 663d 7265 6d6f  t')..    df=remo
-000122d0: 7665 7261 7265 776f 7264 7328 6466 2c27  verarewords(df,'
-000122e0: 696e 7075 7427 290d 0a20 2020 2064 663d  input')..    df=
-000122f0: 636f 7272 6563 7473 7065 6c6c 696e 6728  correctspelling(
-00012300: 6466 2c27 696e 7075 7427 290d 0a20 2020  df,'input')..   
-00012310: 2064 663d 6c65 6d6d 6174 697a 6174 696f   df=lemmatizatio
-00012320: 6e28 6466 2c27 696e 7075 7427 290d 0a20  n(df,'input').. 
-00012330: 2020 206d 7974 6578 743d 6466 5b27 696e     mytext=df['in
-00012340: 7075 7427 5d5b 305d 0d0a 2020 2020 6376  put'][0]..    cv
-00012350: 2c74 773d 7472 6169 6e62 6f77 2864 662c  ,tw=trainbow(df,
-00012360: 2769 6e70 7574 2729 0d0a 2020 2020 6b65  'input')..    ke
-00012370: 7977 6f72 6473 3d74 7261 696e 7665 6374  ywords=trainvect
-00012380: 2863 762c 7477 2c64 662c 2769 6e70 7574  (cv,tw,df,'input
-00012390: 272c 6d61 786b 6579 776f 7264 7329 0d0a  ',maxkeywords)..
-000123a0: 0d0a 2020 2020 0d0a 2020 2020 6b65 7962  ..    ..    keyb
-000123b0: 7566 203d 2022 220d 0a20 2020 206b 6a73  uf = ""..    kjs
-000123c0: 6f6e 203d 206a 736f 6e2e 6c6f 6164 7328  on = json.loads(
-000123d0: 6b65 7977 6f72 6473 290d 0a20 2020 2066  keywords)..    f
-000123e0: 6f72 206b 6579 2c20 7661 6c75 6520 696e  or key, value in
-000123f0: 206b 6a73 6f6e 2e69 7465 6d73 2829 3a0d   kjson.items():.
-00012400: 0a20 2020 2020 2020 206b 6579 6275 6620  .        keybuf 
-00012410: 3d20 6b65 7962 7566 202b 206b 6579 202b  = keybuf + key +
-00012420: 222c 2220 2b20 7374 7228 7661 6c75 6529  "," + str(value)
-00012430: 202b 2022 3a22 0d0a 2020 2020 6b65 7962   + ":"..    keyb
-00012440: 7566 203d 206b 6579 6275 665b 3a2d 315d  uf = keybuf[:-1]
-00012450: 0d0a 0d0a 2020 2020 7265 7475 726e 206b  ....    return k
-00012460: 6579 6275 660d 0a20 0d0a 6465 6620 646f  eybuf.. ..def do
-00012470: 7375 6d6d 6172 7928 6172 7469 636c 655f  summary(article_
-00012480: 7465 7874 2c69 293a 0d0a 0d0a 0d0a 2020  text,i):......  
-00012490: 2020 6172 7469 636c 655f 7465 7874 203d    article_text =
-000124a0: 2072 652e 7375 6228 7227 5c5b 5b30 2d39   re.sub(r'\[[0-9
-000124b0: 5d2a 5c5d 272c 2027 2027 2c20 6172 7469  ]*\]', ' ', arti
-000124c0: 636c 655f 7465 7874 2920 200d 0a20 2020  cle_text)  ..   
-000124d0: 2061 7274 6963 6c65 5f74 6578 7420 3d20   article_text = 
-000124e0: 7265 2e73 7562 2872 275c 732b 272c 2027  re.sub(r'\s+', '
-000124f0: 2027 2c20 6172 7469 636c 655f 7465 7874   ', article_text
-00012500: 290d 0a0d 0a20 2020 2023 2052 656d 6f76  )....    # Remov
-00012510: 696e 6720 7370 6563 6961 6c20 6368 6172  ing special char
-00012520: 6163 7465 7273 2061 6e64 2064 6967 6974  acters and digit
-00012530: 730d 0a20 2020 2066 6f72 6d61 7474 6564  s..    formatted
-00012540: 5f61 7274 6963 6c65 5f74 6578 7420 3d20  _article_text = 
-00012550: 7265 2e73 7562 2827 5b5e 612d 7a41 2d5a  re.sub('[^a-zA-Z
-00012560: 5d27 2c20 2720 272c 2061 7274 6963 6c65  ]', ' ', article
-00012570: 5f74 6578 7420 2920 200d 0a20 2020 2066  _text )  ..    f
-00012580: 6f72 6d61 7474 6564 5f61 7274 6963 6c65  ormatted_article
-00012590: 5f74 6578 7420 3d20 7265 2e73 7562 2872  _text = re.sub(r
-000125a0: 275c 732b 272c 2027 2027 2c20 666f 726d  '\s+', ' ', form
-000125b0: 6174 7465 645f 6172 7469 636c 655f 7465  atted_article_te
-000125c0: 7874 2920 200d 0a0d 0a20 2020 2073 656e  xt)  ....    sen
-000125d0: 7465 6e63 655f 6c69 7374 203d 206e 6c74  tence_list = nlt
-000125e0: 6b2e 7365 6e74 5f74 6f6b 656e 697a 6528  k.sent_tokenize(
-000125f0: 6172 7469 636c 655f 7465 7874 2920 200d  article_text)  .
-00012600: 0a20 2020 2023 7072 696e 7428 7365 6e74  .    #print(sent
-00012610: 656e 6365 5f6c 6973 7429 0d0a 0d0a 2020  ence_list)....  
-00012620: 2020 7374 6f70 776f 7264 7320 3d20 6e6c    stopwords = nl
-00012630: 746b 2e63 6f72 7075 732e 7374 6f70 776f  tk.corpus.stopwo
-00012640: 7264 732e 776f 7264 7328 2765 6e67 6c69  rds.words('engli
-00012650: 7368 2729 0d0a 0d0a 2020 2020 776f 7264  sh')....    word
-00012660: 5f66 7265 7175 656e 6369 6573 203d 207b  _frequencies = {
-00012670: 7d20 200d 0a20 2020 2066 6f72 2077 6f72  }  ..    for wor
-00012680: 6420 696e 206e 6c74 6b2e 776f 7264 5f74  d in nltk.word_t
-00012690: 6f6b 656e 697a 6528 666f 726d 6174 7465  okenize(formatte
-000126a0: 645f 6172 7469 636c 655f 7465 7874 293a  d_article_text):
-000126b0: 2020 0d0a 2020 2020 2020 2020 6966 2077    ..        if w
-000126c0: 6f72 6420 6e6f 7420 696e 2073 746f 7077  ord not in stopw
-000126d0: 6f72 6473 3a0d 0a20 2020 2020 2020 2020  ords:..         
-000126e0: 2020 2069 6620 776f 7264 206e 6f74 2069     if word not i
-000126f0: 6e20 776f 7264 5f66 7265 7175 656e 6369  n word_frequenci
-00012700: 6573 2e6b 6579 7328 293a 0d0a 2020 2020  es.keys():..    
-00012710: 2020 2020 2020 2020 2020 2020 776f 7264              word
-00012720: 5f66 7265 7175 656e 6369 6573 5b77 6f72  _frequencies[wor
-00012730: 645d 203d 2031 0d0a 2020 2020 2020 2020  d] = 1..        
-00012740: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00012750: 2020 2020 2020 2020 2020 2077 6f72 645f             word_
-00012760: 6672 6571 7565 6e63 6965 735b 776f 7264  frequencies[word
-00012770: 5d20 2b3d 2031 0d0a 0d0a 2020 2020 6d61  ] += 1....    ma
-00012780: 7869 6d75 6d5f 6672 6571 756e 6379 203d  ximum_frequncy =
-00012790: 206d 6178 2877 6f72 645f 6672 6571 7565   max(word_freque
-000127a0: 6e63 6965 732e 7661 6c75 6573 2829 290d  ncies.values()).
-000127b0: 0a0d 0a20 2020 2066 6f72 2077 6f72 6420  ...    for word 
-000127c0: 696e 2077 6f72 645f 6672 6571 7565 6e63  in word_frequenc
-000127d0: 6965 732e 6b65 7973 2829 3a20 200d 0a20  ies.keys():  .. 
-000127e0: 2020 2020 2020 2077 6f72 645f 6672 6571         word_freq
-000127f0: 7565 6e63 6965 735b 776f 7264 5d20 3d20  uencies[word] = 
-00012800: 2877 6f72 645f 6672 6571 7565 6e63 6965  (word_frequencie
-00012810: 735b 776f 7264 5d2f 6d61 7869 6d75 6d5f  s[word]/maximum_
-00012820: 6672 6571 756e 6379 290d 0a0d 0a20 2020  frequncy)....   
-00012830: 2023 7072 696e 7428 776f 7264 5f66 7265   #print(word_fre
-00012840: 7175 656e 6369 6573 290d 0a0d 0a20 2020  quencies)....   
-00012850: 2073 656e 7465 6e63 655f 7363 6f72 6573   sentence_scores
-00012860: 203d 207b 7d20 200d 0a20 2020 2066 6f72   = {}  ..    for
-00012870: 2073 656e 7420 696e 2073 656e 7465 6e63   sent in sentenc
-00012880: 655f 6c69 7374 3a20 200d 0a20 2020 2020  e_list:  ..     
-00012890: 2020 2066 6f72 2077 6f72 6420 696e 206e     for word in n
-000128a0: 6c74 6b2e 776f 7264 5f74 6f6b 656e 697a  ltk.word_tokeniz
-000128b0: 6528 7365 6e74 2e6c 6f77 6572 2829 293a  e(sent.lower()):
-000128c0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000128d0: 2077 6f72 6420 696e 2077 6f72 645f 6672   word in word_fr
-000128e0: 6571 7565 6e63 6965 732e 6b65 7973 2829  equencies.keys()
-000128f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00012900: 2020 2069 6620 6c65 6e28 7365 6e74 2e73     if len(sent.s
-00012910: 706c 6974 2827 2027 2929 203c 2032 353a  plit(' ')) < 25:
-00012920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012930: 2020 2020 2020 6966 2073 656e 7420 6e6f        if sent no
-00012940: 7420 696e 2073 656e 7465 6e63 655f 7363  t in sentence_sc
-00012950: 6f72 6573 2e6b 6579 7328 293a 0d0a 2020  ores.keys():..  
+000110f0: 2323 2323 2323 2323 230d 0a23 2044 6576  #########..# Dev
+00011100: 656c 6f70 6564 2062 7920 4f54 4943 5320  eloped by OTICS 
+00011110: 4164 7661 6e63 6564 2041 6e61 6c79 7469  Advanced Analyti
+00011120: 6373 0d0a 2320 5365 6261 7374 6961 6e20  cs..# Sebastian 
+00011130: 4d61 7572 6963 650d 0a0d 0a69 6d70 6f72  Maurice....impor
+00011140: 7420 6273 3420 6173 2062 7320 200d 0a69  t bs4 as bs  ..i
+00011150: 6d70 6f72 7420 7572 6c6c 6962 2e72 6571  mport urllib.req
+00011160: 7565 7374 2020 0d0a 696d 706f 7274 2072  uest  ..import r
+00011170: 650d 0a69 6d70 6f72 7420 6e6c 746b 0d0a  e..import nltk..
+00011180: 6672 6f6d 206e 6c74 6b2e 746f 6b65 6e69  from nltk.tokeni
+00011190: 7a65 2069 6d70 6f72 7420 5265 6765 7870  ze import Regexp
+000111a0: 546f 6b65 6e69 7a65 720d 0a69 6d70 6f72  Tokenizer..impor
+000111b0: 7420 6865 6170 710d 0a69 6d70 6f72 7420  t heapq..import 
+000111c0: 7379 730d 0a69 6d70 6f72 7420 6f73 0d0a  sys..import os..
+000111d0: 6672 6f6d 2072 616b 655f 6e6c 746b 2069  from rake_nltk i
+000111e0: 6d70 6f72 7420 4d65 7472 6963 2c52 616b  mport Metric,Rak
+000111f0: 650d 0a69 6d70 6f72 7420 6a73 6f6e 0d0a  e..import json..
+00011200: 696d 706f 7274 2070 616e 6461 7320 6173  import pandas as
+00011210: 2070 640d 0a69 6d70 6f72 7420 6e6c 746b   pd..import nltk
+00011220: 2e63 6f72 7075 730d 0a66 726f 6d20 6e6c  .corpus..from nl
+00011230: 746b 2e63 6f72 7075 7320 696d 706f 7274  tk.corpus import
+00011240: 2073 746f 7077 6f72 6473 0d0a 6672 6f6d   stopwords..from
+00011250: 2074 6578 7462 6c6f 6220 696d 706f 7274   textblob import
+00011260: 2054 6578 7442 6c6f 620d 0a66 726f 6d20   TextBlob..from 
+00011270: 7465 7874 626c 6f62 2069 6d70 6f72 7420  textblob import 
+00011280: 576f 7264 0d0a 6672 6f6d 2073 6b6c 6561  Word..from sklea
+00011290: 726e 2e66 6561 7475 7265 5f65 7874 7261  rn.feature_extra
+000112a0: 6374 696f 6e2e 7465 7874 2069 6d70 6f72  ction.text impor
+000112b0: 7420 5466 6964 6654 7261 6e73 666f 726d  t TfidfTransform
+000112c0: 6572 2c54 6669 6466 5665 6374 6f72 697a  er,TfidfVectoriz
+000112d0: 6572 0d0a 6672 6f6d 2073 6b6c 6561 726e  er..from sklearn
+000112e0: 2e66 6561 7475 7265 5f65 7874 7261 6374  .feature_extract
+000112f0: 696f 6e2e 7465 7874 2069 6d70 6f72 7420  ion.text import 
+00011300: 436f 756e 7456 6563 746f 7269 7a65 720d  CountVectorizer.
+00011310: 0a23 6e6c 746b 2e64 6f77 6e6c 6f61 6428  .#nltk.download(
+00011320: 2770 756e 6b74 2729 0d0a 696d 706f 7274  'punkt')..import
+00011330: 2077 6172 6e69 6e67 730d 0a77 6172 6e69   warnings..warni
+00011340: 6e67 732e 6669 6c74 6572 7761 726e 696e  ngs.filterwarnin
+00011350: 6773 2822 6967 6e6f 7265 2229 0d0a 0d0a  gs("ignore")....
+00011360: 236e 6c74 6b2e 646f 776e 6c6f 6164 2827  #nltk.download('
+00011370: 7374 6f70 776f 7264 7327 290d 0a0d 0a64  stopwords')....d
+00011380: 6566 2067 6574 5f73 746f 705f 776f 7264  ef get_stop_word
+00011390: 7328 293a 0d0a 2020 2020 2222 226c 6f61  s():..    """loa
+000113a0: 6420 7374 6f70 2077 6f72 6473 2022 2222  d stop words """
+000113b0: 0d0a 2020 2020 7265 7475 726e 2073 746f  ..    return sto
+000113c0: 7077 6f72 6473 2e77 6f72 6473 2827 656e  pwords.words('en
+000113d0: 676c 6973 6827 290d 0a20 2020 200d 0a23  glish')..    ..#
+000113e0: 2320 2020 2077 6974 6820 6f70 656e 2827  #    with open('
+000113f0: 7374 6f70 776f 7264 732e 7478 7427 2c20  stopwords.txt', 
+00011400: 2772 272c 2065 6e63 6f64 696e 673d 2275  'r', encoding="u
+00011410: 7466 2d38 2229 2061 7320 663a 0d0a 2323  tf-8") as f:..##
+00011420: 2020 2020 2020 2020 7374 6f70 776f 7264          stopword
+00011430: 7320 3d20 662e 7265 6164 6c69 6e65 7328  s = f.readlines(
+00011440: 290d 0a23 2320 2020 2020 2020 2073 746f  )..##        sto
+00011450: 705f 7365 7420 3d20 7365 7428 6d2e 7374  p_set = set(m.st
+00011460: 7269 7028 2920 666f 7220 6d20 696e 2073  rip() for m in s
+00011470: 746f 7077 6f72 6473 290d 0a23 2320 2020  topwords)..##   
+00011480: 2020 2023 2020 7072 696e 7428 6672 6f7a     #  print(froz
+00011490: 656e 7365 7428 7374 6f70 5f73 6574 2929  enset(stop_set))
+000114a0: 0d0a 2323 2020 2020 2020 2020 7265 7475  ..##        retu
+000114b0: 726e 2066 726f 7a65 6e73 6574 2873 746f  rn frozenset(sto
+000114c0: 705f 7365 7429 0d0a 0d0a 6465 6620 7363  p_set)....def sc
+000114d0: 7261 7065 7765 6228 7468 6575 726c 293a  rapeweb(theurl):
+000114e0: 0d0a 2020 2020 7363 7261 7065 645f 6461  ..    scraped_da
+000114f0: 7461 203d 2075 726c 6c69 622e 7265 7175  ta = urllib.requ
+00011500: 6573 742e 7572 6c6f 7065 6e28 7468 6575  est.urlopen(theu
+00011510: 726c 2920 200d 0a20 2020 2061 7274 6963  rl)  ..    artic
+00011520: 6c65 203d 2073 6372 6170 6564 5f64 6174  le = scraped_dat
+00011530: 612e 7265 6164 2829 0d0a 0d0a 2020 2020  a.read()....    
+00011540: 7061 7273 6564 5f61 7274 6963 6c65 203d  parsed_article =
+00011550: 2062 732e 4265 6175 7469 6675 6c53 6f75   bs.BeautifulSou
+00011560: 7028 6172 7469 636c 652c 276c 786d 6c27  p(article,'lxml'
+00011570: 290d 0a0d 0a20 2020 2070 6172 6167 7261  )....    paragra
+00011580: 7068 7320 3d20 7061 7273 6564 5f61 7274  phs = parsed_art
+00011590: 6963 6c65 2e66 696e 645f 616c 6c28 2770  icle.find_all('p
+000115a0: 2729 0d0a 0d0a 2020 2020 6172 7469 636c  ')....    articl
+000115b0: 655f 7465 7874 203d 2022 220d 0a0d 0a20  e_text = "".... 
+000115c0: 2020 2066 6f72 2070 2069 6e20 7061 7261     for p in para
+000115d0: 6772 6170 6873 3a20 200d 0a20 2020 2020  graphs:  ..     
+000115e0: 2020 2061 7274 6963 6c65 5f74 6578 7420     article_text 
+000115f0: 2b3d 2070 2e74 6578 740d 0a20 2020 2072  += p.text..    r
+00011600: 6574 7572 6e20 6172 7469 636c 655f 7465  eturn article_te
+00011610: 7874 200d 0a0d 0a64 6566 2063 6f6e 7665  xt ....def conve
+00011620: 7274 746f 6c6f 7765 7263 6173 6528 6466  rttolowercase(df
+00011630: 2c63 6f6c 293a 0d0a 2020 2020 2020 6466  ,col):..      df
+00011640: 5b63 6f6c 5d20 3d20 6466 5b63 6f6c 5d2e  [col] = df[col].
+00011650: 6170 706c 7928 6c61 6d62 6461 2078 3a20  apply(lambda x: 
+00011660: 2220 222e 6a6f 696e 2878 2e6c 6f77 6572  " ".join(x.lower
+00011670: 2829 2066 6f72 2078 2069 6e20 782e 7370  () for x in x.sp
+00011680: 6c69 7428 2929 290d 0a20 2020 2020 2072  lit()))..      r
+00011690: 6574 7572 6e20 6466 0d0a 2020 2020 0d0a  eturn df..    ..
+000116a0: 6465 6620 7265 6d6f 7665 7075 6e63 7475  def removepunctu
+000116b0: 6174 696f 6e28 6466 2c63 6f6c 293a 0d0a  ation(df,col):..
+000116c0: 2020 2020 2020 6466 5b63 6f6c 5d20 3d20        df[col] = 
+000116d0: 6466 5b63 6f6c 5d2e 7374 722e 7265 706c  df[col].str.repl
+000116e0: 6163 6528 275b 5e5c 775c 735d 272c 2727  ace('[^\w\s]',''
+000116f0: 290d 0a20 2020 2020 2072 6574 7572 6e20  )..      return 
+00011700: 6466 0d0a 0d0a 6465 6620 7265 6d6f 7665  df....def remove
+00011710: 7374 6f70 776f 7264 7328 6466 2c63 6f6c  stopwords(df,col
+00011720: 293a 0d0a 2020 2020 2020 7374 6f70 203d  ):..      stop =
+00011730: 2073 746f 7077 6f72 6473 2e77 6f72 6473   stopwords.words
+00011740: 2827 656e 676c 6973 6827 290d 0a20 2020  ('english')..   
+00011750: 2020 2064 665b 636f 6c5d 203d 2064 665b     df[col] = df[
+00011760: 636f 6c5d 2e61 7070 6c79 286c 616d 6264  col].apply(lambd
+00011770: 6120 783a 2022 2022 2e6a 6f69 6e28 7820  a x: " ".join(x 
+00011780: 666f 7220 7820 696e 2078 2e73 706c 6974  for x in x.split
+00011790: 2829 2069 6620 7820 6e6f 7420 696e 2073  () if x not in s
+000117a0: 746f 7029 290d 0a20 2020 2020 2072 6574  top))..      ret
+000117b0: 7572 6e20 6466 0d0a 0d0a 6465 6620 7265  urn df....def re
+000117c0: 6d6f 7665 636f 6d6d 6f6e 776f 7264 7328  movecommonwords(
+000117d0: 6466 2c63 6f6c 293a 0d0a 2020 2020 2020  df,col):..      
+000117e0: 6672 6571 203d 2070 642e 5365 7269 6573  freq = pd.Series
+000117f0: 2827 2027 2e6a 6f69 6e28 6466 5b63 6f6c  (' '.join(df[col
+00011800: 5d29 2e73 706c 6974 2829 292e 7661 6c75  ]).split()).valu
+00011810: 655f 636f 756e 7473 2829 5b3a 3130 5d0d  e_counts()[:10].
+00011820: 0a20 2020 2020 2066 7265 7120 3d20 6c69  .      freq = li
+00011830: 7374 2866 7265 712e 696e 6465 7829 0d0a  st(freq.index)..
+00011840: 2020 2020 2020 6466 5b63 6f6c 5d20 3d20        df[col] = 
+00011850: 6466 5b63 6f6c 5d2e 6170 706c 7928 6c61  df[col].apply(la
+00011860: 6d62 6461 2078 3a20 2220 222e 6a6f 696e  mbda x: " ".join
+00011870: 2878 2066 6f72 2078 2069 6e20 782e 7370  (x for x in x.sp
+00011880: 6c69 7428 2920 6966 2078 206e 6f74 2069  lit() if x not i
+00011890: 6e20 6672 6571 2929 0d0a 2020 2020 2020  n freq))..      
+000118a0: 7265 7475 726e 2064 660d 0a0d 0a64 6566  return df....def
+000118b0: 2072 656d 6f76 6572 6172 6577 6f72 6473   removerarewords
+000118c0: 2864 662c 636f 6c29 3a0d 0a20 2020 2020  (df,col):..     
+000118d0: 2066 7265 7120 3d20 7064 2e53 6572 6965   freq = pd.Serie
+000118e0: 7328 2720 272e 6a6f 696e 2864 665b 636f  s(' '.join(df[co
+000118f0: 6c5d 292e 7370 6c69 7428 2929 2e76 616c  l]).split()).val
+00011900: 7565 5f63 6f75 6e74 7328 295b 2d31 303a  ue_counts()[-10:
+00011910: 5d0d 0a20 2020 2020 2066 7265 7120 3d20  ]..      freq = 
+00011920: 6c69 7374 2866 7265 712e 696e 6465 7829  list(freq.index)
+00011930: 0d0a 2020 2020 2020 6466 5b63 6f6c 5d20  ..      df[col] 
+00011940: 3d20 6466 5b63 6f6c 5d2e 6170 706c 7928  = df[col].apply(
+00011950: 6c61 6d62 6461 2078 3a20 2220 222e 6a6f  lambda x: " ".jo
+00011960: 696e 2878 2066 6f72 2078 2069 6e20 782e  in(x for x in x.
+00011970: 7370 6c69 7428 2920 6966 2078 206e 6f74  split() if x not
+00011980: 2069 6e20 6672 6571 2929 0d0a 2020 2020   in freq))..    
+00011990: 2020 7265 7475 726e 2064 660d 0a0d 0a64    return df....d
+000119a0: 6566 2063 6f72 7265 6374 7370 656c 6c69  ef correctspelli
+000119b0: 6e67 2864 662c 636f 6c29 3a0d 0a20 2020  ng(df,col):..   
+000119c0: 2020 2064 665b 636f 6c5d 5b3a 355d 2e61     df[col][:5].a
+000119d0: 7070 6c79 286c 616d 6264 6120 783a 2073  pply(lambda x: s
+000119e0: 7472 2854 6578 7442 6c6f 6228 7829 2e63  tr(TextBlob(x).c
+000119f0: 6f72 7265 6374 2829 2929 0d0a 2020 2020  orrect()))..    
+00011a00: 2020 7265 7475 726e 2064 660d 0a0d 0a64    return df....d
+00011a10: 6566 206c 656d 6d61 7469 7a61 7469 6f6e  ef lemmatization
+00011a20: 2864 662c 636f 6c29 3a0d 0a20 2020 2020  (df,col):..     
+00011a30: 2064 665b 636f 6c5d 203d 2064 665b 636f   df[col] = df[co
+00011a40: 6c5d 2e61 7070 6c79 286c 616d 6264 6120  l].apply(lambda 
+00011a50: 783a 2022 2022 2e6a 6f69 6e28 5b57 6f72  x: " ".join([Wor
+00011a60: 6428 776f 7264 292e 6c65 6d6d 6174 697a  d(word).lemmatiz
+00011a70: 6528 2920 666f 7220 776f 7264 2069 6e20  e() for word in 
+00011a80: 782e 7370 6c69 7428 295d 2929 0d0a 2020  x.split()]))..  
+00011a90: 2020 2020 7265 7475 726e 2064 660d 0a0d      return df...
+00011aa0: 0a64 6566 2074 7261 696e 7665 6374 2863  .def trainvect(c
+00011ab0: 762c 7462 6f77 2c64 662c 636f 6c2c 6d61  v,tbow,df,col,ma
+00011ac0: 786b 6579 776f 7264 7329 3a0d 0a20 2020  xkeywords):..   
+00011ad0: 2020 2074 6578 743d 6466 5b63 6f6c 5d2e     text=df[col].
+00011ae0: 746f 6c69 7374 2829 0d0a 2020 2020 2020  tolist()..      
+00011af0: 7466 6964 6620 3d20 5466 6964 6654 7261  tfidf = TfidfTra
+00011b00: 6e73 666f 726d 6572 2873 6d6f 6f74 685f  nsformer(smooth_
+00011b10: 6964 663d 5472 7565 2c75 7365 5f69 6466  idf=True,use_idf
+00011b20: 3d54 7275 6529 0d0a 2020 2020 2020 7466  =True)..      tf
+00011b30: 6964 662e 6669 7428 7462 6f77 290d 0a20  idf.fit(tbow).. 
+00011b40: 2020 2020 2074 665f 6964 665f 7665 6374       tf_idf_vect
+00011b50: 6f72 3d74 6669 6466 2e74 7261 6e73 666f  or=tfidf.transfo
+00011b60: 726d 2863 762e 7472 616e 7366 6f72 6d28  rm(cv.transform(
+00011b70: 7465 7874 2929 0d0a 2020 2020 2020 736f  text))..      so
+00011b80: 7274 6564 6974 656d 733d 736f 7274 5f63  rteditems=sort_c
+00011b90: 6f6f 2874 665f 6964 665f 7665 6374 6f72  oo(tf_idf_vector
+00011ba0: 2e74 6f63 6f6f 2829 290d 0a20 2020 2020  .tocoo())..     
+00011bb0: 2066 6561 7475 7265 6e61 6d65 733d 6376   featurenames=cv
+00011bc0: 2e67 6574 5f66 6561 7475 7265 5f6e 616d  .get_feature_nam
+00011bd0: 6573 5f6f 7574 2829 0d0a 2020 2020 2020  es_out()..      
+00011be0: 6b65 7977 6f72 6473 3d65 7874 7261 6374  keywords=extract
+00011bf0: 5f74 6f70 6e5f 6672 6f6d 5f76 6563 746f  _topn_from_vecto
+00011c00: 7228 6665 6174 7572 656e 616d 6573 2c73  r(featurenames,s
+00011c10: 6f72 7465 6469 7465 6d73 2c6d 6178 6b65  orteditems,maxke
+00011c20: 7977 6f72 6473 290d 0a20 2020 2020 206b  ywords)..      k
+00011c30: 6579 776f 7264 733d 6a73 6f6e 2e64 756d  eywords=json.dum
+00011c40: 7073 286b 6579 776f 7264 7329 0d0a 2020  ps(keywords)..  
+00011c50: 2020 2023 2070 7269 6e74 286b 6579 776f     # print(keywo
+00011c60: 7264 7329 0d0a 2020 2020 2020 7265 7475  rds)..      retu
+00011c70: 726e 206b 6579 776f 7264 730d 0a0d 0a64  rn keywords....d
+00011c80: 6566 2074 7261 696e 626f 7728 6466 2c63  ef trainbow(df,c
+00011c90: 6f6c 293a 0d0a 2020 2020 2020 6d79 6c69  ol):..      myli
+00011ca0: 7374 3d64 665b 636f 6c5d 2e74 6f6c 6973  st=df[col].tolis
+00011cb0: 7428 290d 0a20 2020 2020 2073 746f 7077  t()..      stopw
+00011cc0: 6f72 6473 3d67 6574 5f73 746f 705f 776f  ords=get_stop_wo
+00011cd0: 7264 7328 290d 0a20 2020 2020 2063 7620  rds()..      cv 
+00011ce0: 3d20 436f 756e 7456 6563 746f 7269 7a65  = CountVectorize
+00011cf0: 7228 7374 6f70 5f77 6f72 6473 3d73 746f  r(stop_words=sto
+00011d00: 7077 6f72 6473 290d 0a20 2020 2020 2074  pwords)..      t
+00011d10: 7261 696e 5f62 6f77 203d 2063 762e 6669  rain_bow = cv.fi
+00011d20: 745f 7472 616e 7366 6f72 6d28 6d79 6c69  t_transform(myli
+00011d30: 7374 290d 0a20 2020 2020 2023 7072 696e  st)..      #prin
+00011d40: 7428 6c69 7374 2863 762e 766f 6361 6275  t(list(cv.vocabu
+00011d50: 6c61 7279 5f2e 6b65 7973 2829 2929 0d0a  lary_.keys()))..
+00011d60: 2020 2020 2020 7265 7475 726e 2063 762c        return cv,
+00011d70: 7472 6169 6e5f 626f 770d 0a0d 0a20 0d0a  train_bow.... ..
+00011d80: 6465 6620 736f 7274 5f63 6f6f 2863 6f6f  def sort_coo(coo
+00011d90: 5f6d 6174 7269 7829 3a0d 0a20 2020 2074  _matrix):..    t
+00011da0: 7570 6c65 7320 3d20 7a69 7028 636f 6f5f  uples = zip(coo_
+00011db0: 6d61 7472 6978 2e63 6f6c 2c20 636f 6f5f  matrix.col, coo_
+00011dc0: 6d61 7472 6978 2e64 6174 6129 0d0a 2020  matrix.data)..  
+00011dd0: 2020 7265 7475 726e 2073 6f72 7465 6428    return sorted(
+00011de0: 7475 706c 6573 2c20 6b65 793d 6c61 6d62  tuples, key=lamb
+00011df0: 6461 2078 3a20 2878 5b31 5d2c 2078 5b30  da x: (x[1], x[0
+00011e00: 5d29 2c20 7265 7665 7273 653d 5472 7565  ]), reverse=True
+00011e10: 290d 0a0d 0a64 6566 2065 7874 7261 6374  )....def extract
+00011e20: 5f74 6f70 6e5f 6672 6f6d 5f76 6563 746f  _topn_from_vecto
+00011e30: 7228 6665 6174 7572 655f 6e61 6d65 732c  r(feature_names,
+00011e40: 2073 6f72 7465 645f 6974 656d 732c 2074   sorted_items, t
+00011e50: 6f70 6e3d 3130 293a 0d0a 2020 2020 2222  opn=10):..    ""
+00011e60: 2267 6574 2074 6865 2066 6561 7475 7265  "get the feature
+00011e70: 206e 616d 6573 2061 6e64 2074 662d 6964   names and tf-id
+00011e80: 6620 7363 6f72 6520 6f66 2074 6f70 206e  f score of top n
+00011e90: 2069 7465 6d73 2222 220d 0a20 2020 200d   items"""..    .
+00011ea0: 0a20 2020 2023 7573 6520 6f6e 6c79 2074  .    #use only t
+00011eb0: 6f70 6e20 6974 656d 7320 6672 6f6d 2076  opn items from v
+00011ec0: 6563 746f 720d 0a20 2020 2073 6f72 7465  ector..    sorte
+00011ed0: 645f 6974 656d 7320 3d20 736f 7274 6564  d_items = sorted
+00011ee0: 5f69 7465 6d73 5b3a 746f 706e 5d0d 0a0d  _items[:topn]...
+00011ef0: 0a20 2020 2073 636f 7265 5f76 616c 7320  .    score_vals 
+00011f00: 3d20 5b5d 0d0a 2020 2020 6665 6174 7572  = []..    featur
+00011f10: 655f 7661 6c73 203d 205b 5d0d 0a0d 0a20  e_vals = [].... 
+00011f20: 2020 2066 6f72 2069 6478 2c20 7363 6f72     for idx, scor
+00011f30: 6520 696e 2073 6f72 7465 645f 6974 656d  e in sorted_item
+00011f40: 733a 2020 2020 2020 2020 0d0a 2020 2020  s:        ..    
+00011f50: 2020 2020 2020 666e 616d 6520 3d20 6665        fname = fe
+00011f60: 6174 7572 655f 6e61 6d65 735b 6964 785d  ature_names[idx]
+00011f70: 0d0a 2020 2020 2020 2020 2020 6966 206c  ..          if l
+00011f80: 656e 2866 6e61 6d65 293e 333a 0d0a 2020  en(fname)>3:..  
+00011f90: 2020 2020 2020 236b 6565 7020 7472 6163        #keep trac
+00011fa0: 6b20 6f66 2066 6561 7475 7265 206e 616d  k of feature nam
+00011fb0: 6520 616e 6420 6974 7320 636f 7272 6573  e and its corres
+00011fc0: 706f 6e64 696e 6720 7363 6f72 650d 0a20  ponding score.. 
+00011fd0: 2020 2020 2020 2020 2020 2073 636f 7265             score
+00011fe0: 5f76 616c 732e 6170 7065 6e64 2872 6f75  _vals.append(rou
+00011ff0: 6e64 2873 636f 7265 2c20 3329 290d 0a20  nd(score, 3)).. 
+00012000: 2020 2020 2020 2020 2020 2066 6561 7475             featu
+00012010: 7265 5f76 616c 732e 6170 7065 6e64 2866  re_vals.append(f
+00012020: 6561 7475 7265 5f6e 616d 6573 5b69 6478  eature_names[idx
+00012030: 5d29 0d0a 0d0a 2020 2020 2363 7265 6174  ])....    #creat
+00012040: 6520 6120 7475 706c 6573 206f 6620 6665  e a tuples of fe
+00012050: 6174 7572 652c 7363 6f72 650d 0a20 2020  ature,score..   
+00012060: 2023 7265 7375 6c74 7320 3d20 7a69 7028   #results = zip(
+00012070: 6665 6174 7572 655f 7661 6c73 2c73 636f  feature_vals,sco
+00012080: 7265 5f76 616c 7329 0d0a 2020 2020 7265  re_vals)..    re
+00012090: 7375 6c74 733d 207b 7d0d 0a20 2020 2066  sults= {}..    f
+000120a0: 6f72 2069 6478 2069 6e20 7261 6e67 6528  or idx in range(
+000120b0: 6c65 6e28 6665 6174 7572 655f 7661 6c73  len(feature_vals
+000120c0: 2929 3a0d 0a20 2020 2020 2020 2072 6573  )):..        res
+000120d0: 756c 7473 5b66 6561 7475 7265 5f76 616c  ults[feature_val
+000120e0: 735b 6964 785d 5d3d 7363 6f72 655f 7661  s[idx]]=score_va
+000120f0: 6c73 5b69 6478 5d0d 0a20 2020 200d 0a20  ls[idx]..    .. 
+00012100: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00012110: 730d 0a0d 0a64 6566 2067 6574 6b65 7977  s....def getkeyw
+00012120: 6f72 6473 286d 7974 6578 742c 6d61 786b  ords(mytext,maxk
+00012130: 6579 776f 7264 7329 3a0d 0a20 2020 2072  eywords):..    r
+00012140: 3d52 616b 6528 6d61 785f 6c65 6e67 7468  =Rake(max_length
+00012150: 3d31 3029 0d0a 2020 2020 7220 3d20 5261  =10)..    r = Ra
+00012160: 6b65 2872 616e 6b69 6e67 5f6d 6574 7269  ke(ranking_metri
+00012170: 633d 4d65 7472 6963 2e44 4547 5245 455f  c=Metric.DEGREE_
+00012180: 544f 5f46 5245 5155 454e 4359 5f52 4154  TO_FREQUENCY_RAT
+00012190: 494f 290d 0a20 2020 2023 7220 3d20 5261  IO)..    #r = Ra
+000121a0: 6b65 2872 616e 6b69 6e67 5f6d 6574 7269  ke(ranking_metri
+000121b0: 633d 4d65 7472 6963 2e57 4f52 445f 4445  c=Metric.WORD_DE
+000121c0: 4752 4545 290d 0a20 2020 2023 7220 3d20  GREE)..    #r = 
+000121d0: 5261 6b65 2872 616e 6b69 6e67 5f6d 6574  Rake(ranking_met
+000121e0: 7269 633d 4d65 7472 6963 2e57 4f52 445f  ric=Metric.WORD_
+000121f0: 4652 4551 5545 4e43 5929 0d0a 2020 2020  FREQUENCY)..    
+00012200: 643d 7b27 696e 7075 7427 3a5b 6d79 7465  d={'input':[myte
+00012210: 7874 5d7d 0d0a 2020 2020 6466 203d 2070  xt]}..    df = p
+00012220: 642e 4461 7461 4672 616d 6528 6429 0d0a  d.DataFrame(d)..
+00012230: 2020 2020 6466 3d63 6f6e 7665 7274 746f      df=convertto
+00012240: 6c6f 7765 7263 6173 6528 6466 2c27 696e  lowercase(df,'in
+00012250: 7075 7427 290d 0a20 2020 2064 663d 7265  put')..    df=re
+00012260: 6d6f 7665 7075 6e63 7475 6174 696f 6e28  movepunctuation(
+00012270: 6466 2c27 696e 7075 7427 290d 0a20 2020  df,'input')..   
+00012280: 2064 663d 7265 6d6f 7665 7374 6f70 776f   df=removestopwo
+00012290: 7264 7328 6466 2c27 696e 7075 7427 290d  rds(df,'input').
+000122a0: 0a20 2020 2064 663d 7265 6d6f 7665 636f  .    df=removeco
+000122b0: 6d6d 6f6e 776f 7264 7328 6466 2c27 696e  mmonwords(df,'in
+000122c0: 7075 7427 290d 0a20 2020 2064 663d 7265  put')..    df=re
+000122d0: 6d6f 7665 7261 7265 776f 7264 7328 6466  moverarewords(df
+000122e0: 2c27 696e 7075 7427 290d 0a20 2020 2064  ,'input')..    d
+000122f0: 663d 636f 7272 6563 7473 7065 6c6c 696e  f=correctspellin
+00012300: 6728 6466 2c27 696e 7075 7427 290d 0a20  g(df,'input').. 
+00012310: 2020 2064 663d 6c65 6d6d 6174 697a 6174     df=lemmatizat
+00012320: 696f 6e28 6466 2c27 696e 7075 7427 290d  ion(df,'input').
+00012330: 0a20 2020 206d 7974 6578 743d 6466 5b27  .    mytext=df['
+00012340: 696e 7075 7427 5d5b 305d 0d0a 2020 2020  input'][0]..    
+00012350: 6376 2c74 773d 7472 6169 6e62 6f77 2864  cv,tw=trainbow(d
+00012360: 662c 2769 6e70 7574 2729 0d0a 2020 2020  f,'input')..    
+00012370: 6b65 7977 6f72 6473 3d74 7261 696e 7665  keywords=trainve
+00012380: 6374 2863 762c 7477 2c64 662c 2769 6e70  ct(cv,tw,df,'inp
+00012390: 7574 272c 6d61 786b 6579 776f 7264 7329  ut',maxkeywords)
+000123a0: 0d0a 0d0a 2020 2020 0d0a 2020 2020 6b65  ....    ..    ke
+000123b0: 7962 7566 203d 2022 220d 0a20 2020 206b  ybuf = ""..    k
+000123c0: 6a73 6f6e 203d 206a 736f 6e2e 6c6f 6164  json = json.load
+000123d0: 7328 6b65 7977 6f72 6473 290d 0a20 2020  s(keywords)..   
+000123e0: 2066 6f72 206b 6579 2c20 7661 6c75 6520   for key, value 
+000123f0: 696e 206b 6a73 6f6e 2e69 7465 6d73 2829  in kjson.items()
+00012400: 3a0d 0a20 2020 2020 2020 206b 6579 6275  :..        keybu
+00012410: 6620 3d20 6b65 7962 7566 202b 206b 6579  f = keybuf + key
+00012420: 202b 222c 2220 2b20 7374 7228 7661 6c75   +"," + str(valu
+00012430: 6529 202b 2022 3a22 0d0a 2020 2020 6b65  e) + ":"..    ke
+00012440: 7962 7566 203d 206b 6579 6275 665b 3a2d  ybuf = keybuf[:-
+00012450: 315d 0d0a 0d0a 2020 2020 7265 7475 726e  1]....    return
+00012460: 206b 6579 6275 660d 0a20 0d0a 6465 6620   keybuf.. ..def 
+00012470: 646f 7375 6d6d 6172 7928 6172 7469 636c  dosummary(articl
+00012480: 655f 7465 7874 2c69 293a 0d0a 0d0a 0d0a  e_text,i):......
+00012490: 2020 2020 6172 7469 636c 655f 7465 7874      article_text
+000124a0: 203d 2072 652e 7375 6228 7227 5c5b 5b30   = re.sub(r'\[[0
+000124b0: 2d39 5d2a 5c5d 272c 2027 2027 2c20 6172  -9]*\]', ' ', ar
+000124c0: 7469 636c 655f 7465 7874 2920 200d 0a20  ticle_text)  .. 
+000124d0: 2020 2061 7274 6963 6c65 5f74 6578 7420     article_text 
+000124e0: 3d20 7265 2e73 7562 2872 275c 732b 272c  = re.sub(r'\s+',
+000124f0: 2027 2027 2c20 6172 7469 636c 655f 7465   ' ', article_te
+00012500: 7874 290d 0a0d 0a20 2020 2023 2052 656d  xt)....    # Rem
+00012510: 6f76 696e 6720 7370 6563 6961 6c20 6368  oving special ch
+00012520: 6172 6163 7465 7273 2061 6e64 2064 6967  aracters and dig
+00012530: 6974 730d 0a20 2020 2066 6f72 6d61 7474  its..    formatt
+00012540: 6564 5f61 7274 6963 6c65 5f74 6578 7420  ed_article_text 
+00012550: 3d20 7265 2e73 7562 2827 5b5e 612d 7a41  = re.sub('[^a-zA
+00012560: 2d5a 5d27 2c20 2720 272c 2061 7274 6963  -Z]', ' ', artic
+00012570: 6c65 5f74 6578 7420 2920 200d 0a20 2020  le_text )  ..   
+00012580: 2066 6f72 6d61 7474 6564 5f61 7274 6963   formatted_artic
+00012590: 6c65 5f74 6578 7420 3d20 7265 2e73 7562  le_text = re.sub
+000125a0: 2872 275c 732b 272c 2027 2027 2c20 666f  (r'\s+', ' ', fo
+000125b0: 726d 6174 7465 645f 6172 7469 636c 655f  rmatted_article_
+000125c0: 7465 7874 2920 200d 0a0d 0a20 2020 2073  text)  ....    s
+000125d0: 656e 7465 6e63 655f 6c69 7374 203d 206e  entence_list = n
+000125e0: 6c74 6b2e 7365 6e74 5f74 6f6b 656e 697a  ltk.sent_tokeniz
+000125f0: 6528 6172 7469 636c 655f 7465 7874 2920  e(article_text) 
+00012600: 200d 0a20 2020 2023 7072 696e 7428 7365   ..    #print(se
+00012610: 6e74 656e 6365 5f6c 6973 7429 0d0a 0d0a  ntence_list)....
+00012620: 2020 2020 7374 6f70 776f 7264 7320 3d20      stopwords = 
+00012630: 6e6c 746b 2e63 6f72 7075 732e 7374 6f70  nltk.corpus.stop
+00012640: 776f 7264 732e 776f 7264 7328 2765 6e67  words.words('eng
+00012650: 6c69 7368 2729 0d0a 0d0a 2020 2020 776f  lish')....    wo
+00012660: 7264 5f66 7265 7175 656e 6369 6573 203d  rd_frequencies =
+00012670: 207b 7d20 200d 0a20 2020 2066 6f72 2077   {}  ..    for w
+00012680: 6f72 6420 696e 206e 6c74 6b2e 776f 7264  ord in nltk.word
+00012690: 5f74 6f6b 656e 697a 6528 666f 726d 6174  _tokenize(format
+000126a0: 7465 645f 6172 7469 636c 655f 7465 7874  ted_article_text
+000126b0: 293a 2020 0d0a 2020 2020 2020 2020 6966  ):  ..        if
+000126c0: 2077 6f72 6420 6e6f 7420 696e 2073 746f   word not in sto
+000126d0: 7077 6f72 6473 3a0d 0a20 2020 2020 2020  pwords:..       
+000126e0: 2020 2020 2069 6620 776f 7264 206e 6f74       if word not
+000126f0: 2069 6e20 776f 7264 5f66 7265 7175 656e   in word_frequen
+00012700: 6369 6573 2e6b 6579 7328 293a 0d0a 2020  cies.keys():..  
+00012710: 2020 2020 2020 2020 2020 2020 2020 776f                wo
+00012720: 7264 5f66 7265 7175 656e 6369 6573 5b77  rd_frequencies[w
+00012730: 6f72 645d 203d 2031 0d0a 2020 2020 2020  ord] = 1..      
+00012740: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00012750: 2020 2020 2020 2020 2020 2020 2077 6f72               wor
+00012760: 645f 6672 6571 7565 6e63 6965 735b 776f  d_frequencies[wo
+00012770: 7264 5d20 2b3d 2031 0d0a 0d0a 2020 2020  rd] += 1....    
+00012780: 6d61 7869 6d75 6d5f 6672 6571 756e 6379  maximum_frequncy
+00012790: 203d 206d 6178 2877 6f72 645f 6672 6571   = max(word_freq
+000127a0: 7565 6e63 6965 732e 7661 6c75 6573 2829  uencies.values()
+000127b0: 290d 0a0d 0a20 2020 2066 6f72 2077 6f72  )....    for wor
+000127c0: 6420 696e 2077 6f72 645f 6672 6571 7565  d in word_freque
+000127d0: 6e63 6965 732e 6b65 7973 2829 3a20 200d  ncies.keys():  .
+000127e0: 0a20 2020 2020 2020 2077 6f72 645f 6672  .        word_fr
+000127f0: 6571 7565 6e63 6965 735b 776f 7264 5d20  equencies[word] 
+00012800: 3d20 2877 6f72 645f 6672 6571 7565 6e63  = (word_frequenc
+00012810: 6965 735b 776f 7264 5d2f 6d61 7869 6d75  ies[word]/maximu
+00012820: 6d5f 6672 6571 756e 6379 290d 0a0d 0a20  m_frequncy).... 
+00012830: 2020 2023 7072 696e 7428 776f 7264 5f66     #print(word_f
+00012840: 7265 7175 656e 6369 6573 290d 0a0d 0a20  requencies).... 
+00012850: 2020 2073 656e 7465 6e63 655f 7363 6f72     sentence_scor
+00012860: 6573 203d 207b 7d20 200d 0a20 2020 2066  es = {}  ..    f
+00012870: 6f72 2073 656e 7420 696e 2073 656e 7465  or sent in sente
+00012880: 6e63 655f 6c69 7374 3a20 200d 0a20 2020  nce_list:  ..   
+00012890: 2020 2020 2066 6f72 2077 6f72 6420 696e       for word in
+000128a0: 206e 6c74 6b2e 776f 7264 5f74 6f6b 656e   nltk.word_token
+000128b0: 697a 6528 7365 6e74 2e6c 6f77 6572 2829  ize(sent.lower()
+000128c0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000128d0: 6966 2077 6f72 6420 696e 2077 6f72 645f  if word in word_
+000128e0: 6672 6571 7565 6e63 6965 732e 6b65 7973  frequencies.keys
+000128f0: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+00012900: 2020 2020 2069 6620 6c65 6e28 7365 6e74       if len(sent
+00012910: 2e73 706c 6974 2827 2027 2929 203c 2032  .split(' ')) < 2
+00012920: 353a 0d0a 2020 2020 2020 2020 2020 2020  5:..            
+00012930: 2020 2020 2020 2020 6966 2073 656e 7420          if sent 
+00012940: 6e6f 7420 696e 2073 656e 7465 6e63 655f  not in sentence_
+00012950: 7363 6f72 6573 2e6b 6579 7328 293a 0d0a  scores.keys():..
 00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012970: 2020 2020 2020 7365 6e74 656e 6365 5f73        sentence_s
-00012980: 636f 7265 735b 7365 6e74 5d20 3d20 776f  cores[sent] = wo
-00012990: 7264 5f66 7265 7175 656e 6369 6573 5b77  rd_frequencies[w
-000129a0: 6f72 645d 0d0a 2020 2020 2020 2020 2020  ord]..          
-000129b0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-000129c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000129d0: 2020 2020 2020 2020 2073 656e 7465 6e63           sentenc
-000129e0: 655f 7363 6f72 6573 5b73 656e 745d 202b  e_scores[sent] +
-000129f0: 3d20 776f 7264 5f66 7265 7175 656e 6369  = word_frequenci
-00012a00: 6573 5b77 6f72 645d 0d0a 0d0a 2020 2020  es[word]....    
-00012a10: 2370 7269 6e74 2873 656e 7465 6e63 655f  #print(sentence_
-00012a20: 7363 6f72 6573 290d 0a0d 0a20 2020 2073  scores)....    s
-00012a30: 756d 6d61 7279 5f73 656e 7465 6e63 6573  ummary_sentences
-00012a40: 203d 2068 6561 7071 2e6e 6c61 7267 6573   = heapq.nlarges
-00012a50: 7428 692c 2073 656e 7465 6e63 655f 7363  t(i, sentence_sc
-00012a60: 6f72 6573 2c20 6b65 793d 7365 6e74 656e  ores, key=senten
-00012a70: 6365 5f73 636f 7265 732e 6765 7429 0d0a  ce_scores.get)..
-00012a80: 2020 2020 2370 7269 6e74 2873 756d 6d61      #print(summa
-00012a90: 7279 5f73 656e 7465 6e63 6573 290d 0a20  ry_sentences).. 
-00012aa0: 2020 2073 756d 6d61 7279 203d 2027 2027     summary = ' '
-00012ab0: 2e6a 6f69 6e28 7375 6d6d 6172 795f 7365  .join(summary_se
-00012ac0: 6e74 656e 6365 7329 0d0a 2020 2020 2370  ntences)..    #p
-00012ad0: 7269 6e74 2822 4149 2053 756d 6d61 7279  rint("AI Summary
-00012ae0: 2229 0d0a 2020 2020 7265 7475 726e 2073  ")..    return s
-00012af0: 756d 6d61 7279 0d0a 0d0a 6465 6620 7374  ummary....def st
-00012b00: 6172 7473 756d 6d61 7279 2861 7274 6963  artsummary(artic
-00012b10: 6c65 5f74 6578 742c 6676 616c 7565 2c6d  le_text,fvalue,m
-00012b20: 6178 6b65 7977 6f72 6473 293a 0d0a 2020  axkeywords):..  
-00012b30: 2020 2020 0d0a 2023 2074 7279 3a0d 0a20      .. # try:.. 
-00012b40: 2020 6f72 6967 696e 616c 776f 7264 7320    originalwords 
-00012b50: 3d20 6c65 6e28 6172 7469 636c 655f 7465  = len(article_te
-00012b60: 7874 2e73 706c 6974 2822 2022 2929 0d0a  xt.split(" "))..
-00012b70: 0d0a 2020 2066 6f72 2069 2069 6e20 7261  ..   for i in ra
-00012b80: 6e67 6528 312c 3130 3030 3029 3a0d 0a20  nge(1,10000):.. 
-00012b90: 2020 2020 7375 6d6d 6172 793d 646f 7375      summary=dosu
-00012ba0: 6d6d 6172 7928 6172 7469 636c 655f 7465  mmary(article_te
-00012bb0: 7874 2c69 290d 0a20 2020 2020 7265 7320  xt,i)..     res 
-00012bc0: 3d20 6c65 6e28 7375 6d6d 6172 792e 7370  = len(summary.sp
-00012bd0: 6c69 7428 2929 0d0a 2020 2020 2069 6620  lit())..     if 
-00012be0: 7265 7320 3e3d 2066 7661 6c75 653a 0d0a  res >= fvalue:..
-00012bf0: 2020 2020 2020 2020 2062 7265 616b 0d0a           break..
-00012c00: 0d0a 2020 2073 756d 6d61 7279 203d 2020  ..   summary =  
-00012c10: 7265 2e73 7562 2822 5c5c 5c5c 785b 612d  re.sub("\\\\x[a-
-00012c20: 6630 2d39 5d5b 612d 6630 2d39 5d22 2c20  f0-9][a-f0-9]", 
-00012c30: 2220 222c 7375 6d6d 6172 7929 0d0a 2020  " ",summary)..  
-00012c40: 2073 756d 6d61 7279 203d 2072 652e 7375   summary = re.su
-00012c50: 6228 225c 5c78 6532 5c5c 7838 305c 5c78  b("\\xe2\\x80\\x
-00012c60: 3939 222c 2227 222c 2073 756d 6d61 7279  99","'", summary
-00012c70: 290d 0a20 2020 7375 6d6d 6172 793d 7375  )..   summary=su
-00012c80: 6d6d 6172 792e 7265 706c 6163 6528 225c  mmary.replace("\
-00012c90: 5c78 6532 5c5c 7838 305c 5c78 3939 222c  \xe2\\x80\\x99",
-00012ca0: 2227 2229 0d0a 2020 2073 756d 6d61 7279  "'")..   summary
-00012cb0: 3d73 756d 6d61 7279 2e72 6570 6c61 6365  =summary.replace
-00012cc0: 2822 5c5c 7865 325c 5c78 3830 5c5c 7839  ("\\xe2\\x80\\x9
-00012cd0: 3022 2c22 2d22 290d 0a20 2020 7375 6d6d  0","-")..   summ
-00012ce0: 6172 793d 7375 6d6d 6172 792e 7265 706c  ary=summary.repl
-00012cf0: 6163 6528 225c 5c78 6532 5c5c 7838 305c  ace("\\xe2\\x80\
-00012d00: 5c78 3931 222c 222d 2229 0d0a 2020 2073  \x91","-")..   s
-00012d10: 756d 6d61 7279 3d73 756d 6d61 7279 2e72  ummary=summary.r
-00012d20: 6570 6c61 6365 2822 5c5c 7865 325c 5c78  eplace("\\xe2\\x
-00012d30: 3830 5c5c 7839 3222 2c22 2d22 290d 0a20  80\\x92","-").. 
-00012d40: 2020 7375 6d6d 6172 793d 7375 6d6d 6172    summary=summar
-00012d50: 792e 7265 706c 6163 6528 225c 5c78 6532  y.replace("\\xe2
-00012d60: 5c5c 7838 305c 5c78 3933 222c 222d 2229  \\x80\\x93","-")
-00012d70: 0d0a 2020 2073 756d 6d61 7279 3d73 756d  ..   summary=sum
-00012d80: 6d61 7279 2e72 6570 6c61 6365 2822 5c5c  mary.replace("\\
-00012d90: 7865 325c 5c78 3830 5c5c 7839 3422 2c22  xe2\\x80\\x94","
-00012da0: 2d22 290d 0a20 2020 7375 6d6d 6172 793d  -")..   summary=
-00012db0: 7375 6d6d 6172 792e 7265 706c 6163 6528  summary.replace(
-00012dc0: 225c 5c78 6532 5c5c 7838 305c 5c78 3935  "\\xe2\\x80\\x95
-00012dd0: 222c 222d 2229 0d0a 2020 2073 756d 6d61  ","-")..   summa
-00012de0: 7279 3d73 756d 6d61 7279 2e72 6570 6c61  ry=summary.repla
-00012df0: 6365 2822 5c5c 7865 325c 5c78 3830 5c5c  ce("\\xe2\\x80\\
-00012e00: 7862 3322 2c27 2227 290d 0a20 2020 7375  xb3",'"')..   su
-00012e10: 6d6d 6172 7920 3d20 7375 6d6d 6172 792e  mmary = summary.
-00012e20: 7265 706c 6163 6528 27e2 809c 272c 2027  replace('...', '
-00012e30: 2227 290d 0a20 2020 7375 6d6d 6172 7920  "')..   summary 
-00012e40: 3d20 7375 6d6d 6172 792e 7265 706c 6163  = summary.replac
-00012e50: 6528 27e2 809d 272c 2027 2227 290d 0a20  e('...', '"').. 
-00012e60: 2020 7375 6d6d 6172 7920 3d20 7375 6d6d    summary = summ
-00012e70: 6172 792e 7265 706c 6163 6528 27e2 8099  ary.replace('...
-00012e80: 272c 2022 2722 290d 0a20 2020 7375 6d6d  ', "'")..   summ
-00012e90: 6172 7920 3d20 7375 6d6d 6172 792e 7265  ary = summary.re
-00012ea0: 706c 6163 6528 27e2 8098 272c 2022 2722  place('...', "'"
-00012eb0: 290d 0a20 2020 7375 6d6d 6172 7920 3d20  )..   summary = 
-00012ec0: 7375 6d6d 6172 792e 7265 706c 6163 6528  summary.replace(
-00012ed0: 27e2 8093 272c 2022 2d22 290d 0a20 2020  '...', "-")..   
-00012ee0: 7375 6d6d 6172 7920 3d20 7375 6d6d 6172  summary = summar
-00012ef0: 792e 7265 706c 6163 6528 27e2 80a6 272c  y.replace('...',
-00012f00: 2022 2e2e 2e22 290d 0a20 2020 7375 6d6d   "...")..   summ
-00012f10: 6172 7920 3d20 7375 6d6d 6172 792e 7265  ary = summary.re
-00012f20: 706c 6163 6528 27e2 8094 272c 2022 2d22  place('...', "-"
-00012f30: 290d 0a20 2020 7375 6d6d 6172 7920 3d20  )..   summary = 
-00012f40: 7375 6d6d 6172 792e 7265 706c 6163 6528  summary.replace(
-00012f50: 2722 272c 2022 2229 0d0a 0d0a 2020 2073  '"', "")....   s
-00012f60: 756d 6d61 7279 203d 2073 756d 6d61 7279  ummary = summary
-00012f70: 2e72 6570 6c61 6365 2827 5c5c 7527 2c27  .replace('\\u','
-00012f80: 552b 2729 0d0a 2020 2073 756d 6d61 7279  U+')..   summary
-00012f90: 203d 2072 652e 7375 6228 7227 3c55 5c2b   = re.sub(r'<U\+
-00012fa0: 285b 302d 3961 2d66 412d 465d 7b34 2c36  ([0-9a-fA-F]{4,6
-00012fb0: 7d29 3e27 2c20 6c61 6d62 6461 2078 3a20  })>', lambda x: 
-00012fc0: 6368 7228 696e 7428 782e 6772 6f75 7028  chr(int(x.group(
-00012fd0: 3129 2c31 3629 292c 2073 756d 6d61 7279  1),16)), summary
-00012fe0: 290d 0a0d 0a20 2020 6b65 7977 6f72 6473  )....   keywords
-00012ff0: 3d67 6574 6b65 7977 6f72 6473 2873 756d  =getkeywords(sum
-00013000: 6d61 7279 2c6d 6178 6b65 7977 6f72 6473  mary,maxkeywords
-00013010: 290d 0a0d 0a20 2020 7375 6d6d 6172 7977  )....   summaryw
-00013020: 6f72 6473 203d 206c 656e 2873 756d 6d61  ords = len(summa
-00013030: 7279 2e73 706c 6974 2822 2022 2929 0d0a  ry.split(" "))..
-00013040: 200d 0a20 2020 6d61 696e 6f75 743d 225c   ..   mainout="\
-00013050: 2222 202b 206b 6579 776f 7264 7320 2b20  "" + keywords + 
-00013060: 225c 222c 5c22 6f72 6967 696e 616c 776f  "\",\"originalwo
-00013070: 7264 636f 756e 745c 223a 2220 2b20 7374  rdcount\":" + st
-00013080: 7228 6f72 6967 696e 616c 776f 7264 7329  r(originalwords)
-00013090: 202b 2022 2c5c 2273 756d 6d61 7279 776f   + ",\"summarywo
-000130a0: 7264 636f 756e 745c 223a 222b 2073 7472  rdcount\":"+ str
-000130b0: 2873 756d 6d61 7279 776f 7264 7329 202b  (summarywords) +
-000130c0: 222c 5c22 6d61 696e 7375 6d6d 6172 795c  ",\"mainsummary\
-000130d0: 223a 7b5c 2273 756d 6d61 7279 5c22 3a20  ":{\"summary\": 
-000130e0: 5c22 2220 2b20 7375 6d6d 6172 7920 2b20  \"" + summary + 
-000130f0: 225c 227d 7d22 0d0a 2020 2072 6574 7572  "\"}}"..   retur
-00013100: 6e20 6d61 696e 6f75 740d 0a20 2020 0d0a  n mainout..   ..
-00013110: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00012970: 2020 2020 2020 2020 7365 6e74 656e 6365          sentence
+00012980: 5f73 636f 7265 735b 7365 6e74 5d20 3d20  _scores[sent] = 
+00012990: 776f 7264 5f66 7265 7175 656e 6369 6573  word_frequencies
+000129a0: 5b77 6f72 645d 0d0a 2020 2020 2020 2020  [word]..        
+000129b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000129c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000129d0: 2020 2020 2020 2020 2020 2073 656e 7465             sente
+000129e0: 6e63 655f 7363 6f72 6573 5b73 656e 745d  nce_scores[sent]
+000129f0: 202b 3d20 776f 7264 5f66 7265 7175 656e   += word_frequen
+00012a00: 6369 6573 5b77 6f72 645d 0d0a 0d0a 2020  cies[word]....  
+00012a10: 2020 2370 7269 6e74 2873 656e 7465 6e63    #print(sentenc
+00012a20: 655f 7363 6f72 6573 290d 0a0d 0a20 2020  e_scores)....   
+00012a30: 2073 756d 6d61 7279 5f73 656e 7465 6e63   summary_sentenc
+00012a40: 6573 203d 2068 6561 7071 2e6e 6c61 7267  es = heapq.nlarg
+00012a50: 6573 7428 692c 2073 656e 7465 6e63 655f  est(i, sentence_
+00012a60: 7363 6f72 6573 2c20 6b65 793d 7365 6e74  scores, key=sent
+00012a70: 656e 6365 5f73 636f 7265 732e 6765 7429  ence_scores.get)
+00012a80: 0d0a 2020 2020 2370 7269 6e74 2873 756d  ..    #print(sum
+00012a90: 6d61 7279 5f73 656e 7465 6e63 6573 290d  mary_sentences).
+00012aa0: 0a20 2020 2073 756d 6d61 7279 203d 2027  .    summary = '
+00012ab0: 2027 2e6a 6f69 6e28 7375 6d6d 6172 795f   '.join(summary_
+00012ac0: 7365 6e74 656e 6365 7329 0d0a 2020 2020  sentences)..    
+00012ad0: 2370 7269 6e74 2822 4149 2053 756d 6d61  #print("AI Summa
+00012ae0: 7279 2229 0d0a 2020 2020 7265 7475 726e  ry")..    return
+00012af0: 2073 756d 6d61 7279 0d0a 0d0a 6465 6620   summary....def 
+00012b00: 7374 6172 7473 756d 6d61 7279 2861 7274  startsummary(art
+00012b10: 6963 6c65 5f74 6578 742c 6676 616c 7565  icle_text,fvalue
+00012b20: 2c6d 6178 6b65 7977 6f72 6473 293a 0d0a  ,maxkeywords):..
+00012b30: 2020 2020 2020 0d0a 2023 2074 7279 3a0d        .. # try:.
+00012b40: 0a20 2020 6f72 6967 696e 616c 776f 7264  .   originalword
+00012b50: 7320 3d20 6c65 6e28 6172 7469 636c 655f  s = len(article_
+00012b60: 7465 7874 2e73 706c 6974 2822 2022 2929  text.split(" "))
+00012b70: 0d0a 0d0a 2020 2066 6f72 2069 2069 6e20  ....   for i in 
+00012b80: 7261 6e67 6528 312c 3130 3030 3029 3a0d  range(1,10000):.
+00012b90: 0a20 2020 2020 7375 6d6d 6172 793d 646f  .     summary=do
+00012ba0: 7375 6d6d 6172 7928 6172 7469 636c 655f  summary(article_
+00012bb0: 7465 7874 2c69 290d 0a20 2020 2020 7265  text,i)..     re
+00012bc0: 7320 3d20 6c65 6e28 7375 6d6d 6172 792e  s = len(summary.
+00012bd0: 7370 6c69 7428 2929 0d0a 2020 2020 2069  split())..     i
+00012be0: 6620 7265 7320 3e3d 2066 7661 6c75 653a  f res >= fvalue:
+00012bf0: 0d0a 2020 2020 2020 2020 2062 7265 616b  ..         break
+00012c00: 0d0a 0d0a 2020 2073 756d 6d61 7279 203d  ....   summary =
+00012c10: 2020 7265 2e73 7562 2822 5c5c 5c5c 785b    re.sub("\\\\x[
+00012c20: 612d 6630 2d39 5d5b 612d 6630 2d39 5d22  a-f0-9][a-f0-9]"
+00012c30: 2c20 2220 222c 7375 6d6d 6172 7929 0d0a  , " ",summary)..
+00012c40: 2020 2073 756d 6d61 7279 203d 2072 652e     summary = re.
+00012c50: 7375 6228 225c 5c78 6532 5c5c 7838 305c  sub("\\xe2\\x80\
+00012c60: 5c78 3939 222c 2227 222c 2073 756d 6d61  \x99","'", summa
+00012c70: 7279 290d 0a20 2020 7375 6d6d 6172 793d  ry)..   summary=
+00012c80: 7375 6d6d 6172 792e 7265 706c 6163 6528  summary.replace(
+00012c90: 225c 5c78 6532 5c5c 7838 305c 5c78 3939  "\\xe2\\x80\\x99
+00012ca0: 222c 2227 2229 0d0a 2020 2073 756d 6d61  ","'")..   summa
+00012cb0: 7279 3d73 756d 6d61 7279 2e72 6570 6c61  ry=summary.repla
+00012cc0: 6365 2822 5c5c 7865 325c 5c78 3830 5c5c  ce("\\xe2\\x80\\
+00012cd0: 7839 3022 2c22 2d22 290d 0a20 2020 7375  x90","-")..   su
+00012ce0: 6d6d 6172 793d 7375 6d6d 6172 792e 7265  mmary=summary.re
+00012cf0: 706c 6163 6528 225c 5c78 6532 5c5c 7838  place("\\xe2\\x8
+00012d00: 305c 5c78 3931 222c 222d 2229 0d0a 2020  0\\x91","-")..  
+00012d10: 2073 756d 6d61 7279 3d73 756d 6d61 7279   summary=summary
+00012d20: 2e72 6570 6c61 6365 2822 5c5c 7865 325c  .replace("\\xe2\
+00012d30: 5c78 3830 5c5c 7839 3222 2c22 2d22 290d  \x80\\x92","-").
+00012d40: 0a20 2020 7375 6d6d 6172 793d 7375 6d6d  .   summary=summ
+00012d50: 6172 792e 7265 706c 6163 6528 225c 5c78  ary.replace("\\x
+00012d60: 6532 5c5c 7838 305c 5c78 3933 222c 222d  e2\\x80\\x93","-
+00012d70: 2229 0d0a 2020 2073 756d 6d61 7279 3d73  ")..   summary=s
+00012d80: 756d 6d61 7279 2e72 6570 6c61 6365 2822  ummary.replace("
+00012d90: 5c5c 7865 325c 5c78 3830 5c5c 7839 3422  \\xe2\\x80\\x94"
+00012da0: 2c22 2d22 290d 0a20 2020 7375 6d6d 6172  ,"-")..   summar
+00012db0: 793d 7375 6d6d 6172 792e 7265 706c 6163  y=summary.replac
+00012dc0: 6528 225c 5c78 6532 5c5c 7838 305c 5c78  e("\\xe2\\x80\\x
+00012dd0: 3935 222c 222d 2229 0d0a 2020 2073 756d  95","-")..   sum
+00012de0: 6d61 7279 3d73 756d 6d61 7279 2e72 6570  mary=summary.rep
+00012df0: 6c61 6365 2822 5c5c 7865 325c 5c78 3830  lace("\\xe2\\x80
+00012e00: 5c5c 7862 3322 2c27 2227 290d 0a20 2020  \\xb3",'"')..   
+00012e10: 7375 6d6d 6172 7920 3d20 7375 6d6d 6172  summary = summar
+00012e20: 792e 7265 706c 6163 6528 27e2 809c 272c  y.replace('...',
+00012e30: 2027 2227 290d 0a20 2020 7375 6d6d 6172   '"')..   summar
+00012e40: 7920 3d20 7375 6d6d 6172 792e 7265 706c  y = summary.repl
+00012e50: 6163 6528 27e2 809d 272c 2027 2227 290d  ace('...', '"').
+00012e60: 0a20 2020 7375 6d6d 6172 7920 3d20 7375  .   summary = su
+00012e70: 6d6d 6172 792e 7265 706c 6163 6528 27e2  mmary.replace('.
+00012e80: 8099 272c 2022 2722 290d 0a20 2020 7375  ..', "'")..   su
+00012e90: 6d6d 6172 7920 3d20 7375 6d6d 6172 792e  mmary = summary.
+00012ea0: 7265 706c 6163 6528 27e2 8098 272c 2022  replace('...', "
+00012eb0: 2722 290d 0a20 2020 7375 6d6d 6172 7920  '")..   summary 
+00012ec0: 3d20 7375 6d6d 6172 792e 7265 706c 6163  = summary.replac
+00012ed0: 6528 27e2 8093 272c 2022 2d22 290d 0a20  e('...', "-").. 
+00012ee0: 2020 7375 6d6d 6172 7920 3d20 7375 6d6d    summary = summ
+00012ef0: 6172 792e 7265 706c 6163 6528 27e2 80a6  ary.replace('...
+00012f00: 272c 2022 2e2e 2e22 290d 0a20 2020 7375  ', "...")..   su
+00012f10: 6d6d 6172 7920 3d20 7375 6d6d 6172 792e  mmary = summary.
+00012f20: 7265 706c 6163 6528 27e2 8094 272c 2022  replace('...', "
+00012f30: 2d22 290d 0a20 2020 7375 6d6d 6172 7920  -")..   summary 
+00012f40: 3d20 7375 6d6d 6172 792e 7265 706c 6163  = summary.replac
+00012f50: 6528 2722 272c 2022 2229 0d0a 0d0a 2020  e('"', "")....  
+00012f60: 2073 756d 6d61 7279 203d 2073 756d 6d61   summary = summa
+00012f70: 7279 2e72 6570 6c61 6365 2827 5c5c 7527  ry.replace('\\u'
+00012f80: 2c27 552b 2729 0d0a 2020 2073 756d 6d61  ,'U+')..   summa
+00012f90: 7279 203d 2072 652e 7375 6228 7227 3c55  ry = re.sub(r'<U
+00012fa0: 5c2b 285b 302d 3961 2d66 412d 465d 7b34  \+([0-9a-fA-F]{4
+00012fb0: 2c36 7d29 3e27 2c20 6c61 6d62 6461 2078  ,6})>', lambda x
+00012fc0: 3a20 6368 7228 696e 7428 782e 6772 6f75  : chr(int(x.grou
+00012fd0: 7028 3129 2c31 3629 292c 2073 756d 6d61  p(1),16)), summa
+00012fe0: 7279 290d 0a0d 0a20 2020 6b65 7977 6f72  ry)....   keywor
+00012ff0: 6473 3d67 6574 6b65 7977 6f72 6473 2873  ds=getkeywords(s
+00013000: 756d 6d61 7279 2c6d 6178 6b65 7977 6f72  ummary,maxkeywor
+00013010: 6473 290d 0a0d 0a20 2020 7375 6d6d 6172  ds)....   summar
+00013020: 7977 6f72 6473 203d 206c 656e 2873 756d  ywords = len(sum
+00013030: 6d61 7279 2e73 706c 6974 2822 2022 2929  mary.split(" "))
+00013040: 0d0a 200d 0a20 2020 6d61 696e 6f75 743d  .. ..   mainout=
+00013050: 225c 2222 202b 206b 6579 776f 7264 7320  "\"" + keywords 
+00013060: 2b20 225c 222c 5c22 6f72 6967 696e 616c  + "\",\"original
+00013070: 776f 7264 636f 756e 745c 223a 2220 2b20  wordcount\":" + 
+00013080: 7374 7228 6f72 6967 696e 616c 776f 7264  str(originalword
+00013090: 7329 202b 2022 2c5c 2273 756d 6d61 7279  s) + ",\"summary
+000130a0: 776f 7264 636f 756e 745c 223a 222b 2073  wordcount\":"+ s
+000130b0: 7472 2873 756d 6d61 7279 776f 7264 7329  tr(summarywords)
+000130c0: 202b 222c 5c22 6d61 696e 7375 6d6d 6172   +",\"mainsummar
+000130d0: 795c 223a 7b5c 2273 756d 6d61 7279 5c22  y\":{\"summary\"
+000130e0: 3a20 5c22 2220 2b20 7375 6d6d 6172 7920  : \"" + summary 
+000130f0: 2b20 225c 227d 7d22 0d0a 2020 2072 6574  + "\"}}"..   ret
+00013100: 7572 6e20 6d61 696e 6f75 740d 0a20 2020  urn mainout..   
+00013110: 0d0a 2323 2323 2323 2323 2323 2323 2323  ..##############
 00013120: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00013130: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013140: 230d 0a0d 0a66 726f 6d20 6c61 6e67 6368  #....from langch
-00013150: 6169 6e2e 656d 6265 6464 696e 6773 2e6f  ain.embeddings.o
-00013160: 7065 6e61 6920 696d 706f 7274 204f 7065  penai import Ope
-00013170: 6e41 4945 6d62 6564 6469 6e67 730d 0a66  nAIEmbeddings..f
-00013180: 726f 6d20 6c61 6e67 6368 6169 6e2e 7465  rom langchain.te
-00013190: 7874 5f73 706c 6974 7465 7220 696d 706f  xt_splitter impo
-000131a0: 7274 2043 6861 7261 6374 6572 5465 7874  rt CharacterText
-000131b0: 5370 6c69 7474 6572 0d0a 6672 6f6d 206c  Splitter..from l
-000131c0: 616e 6763 6861 696e 2e76 6563 746f 7273  angchain.vectors
-000131d0: 746f 7265 732e 6661 6973 7320 696d 706f  tores.faiss impo
-000131e0: 7274 2046 4149 5353 0d0a 0d0a 6672 6f6d  rt FAISS....from
-000131f0: 206c 616e 6763 6861 696e 2e63 6861 696e   langchain.chain
-00013200: 732e 7175 6573 7469 6f6e 5f61 6e73 7765  s.question_answe
-00013210: 7269 6e67 2069 6d70 6f72 7420 6c6f 6164  ring import load
-00013220: 5f71 615f 6368 6169 6e0d 0a66 726f 6d20  _qa_chain..from 
-00013230: 6c61 6e67 6368 6169 6e2e 6c6c 6d73 2069  langchain.llms i
-00013240: 6d70 6f72 7420 5072 6f6d 7074 4c61 7965  mport PromptLaye
-00013250: 724f 7065 6e41 4943 6861 740d 0a66 726f  rOpenAIChat..fro
-00013260: 6d20 6c61 6e67 6368 6169 6e2e 6368 6174  m langchain.chat
-00013270: 5f6d 6f64 656c 7320 696d 706f 7274 2043  _models import C
-00013280: 6861 744f 7065 6e41 490d 0a66 726f 6d20  hatOpenAI..from 
-00013290: 6c61 6e67 6368 6169 6e2e 6c6c 6d73 2069  langchain.llms i
-000132a0: 6d70 6f72 7420 4f70 656e 4149 0d0a 696d  mport OpenAI..im
-000132b0: 706f 7274 2068 6173 686c 6962 0d0a 0d0a  port hashlib....
-000132c0: 2320 416e 7377 6572 2071 7565 7374 696f  # Answer questio
-000132d0: 6e73 2061 626f 7574 2074 6865 2068 6561  ns about the hea
-000132e0: 646c 696e 6573 0d0a 6465 6620 7374 6172  dlines..def star
-000132f0: 745f 636f 6e76 6572 7361 7469 6f6e 286f  t_conversation(o
-00013300: 7065 6e61 696b 6579 2c71 7565 7279 2c74  penaikey,query,t
-00013310: 6578 742c 7465 6d70 6572 6174 7572 652c  ext,temperature,
-00013320: 6d6f 6465 6c29 3a0d 0a20 2020 2023 2047  model):..    # G
-00013330: 7261 6220 7468 6520 696e 7075 7420 6672  rab the input fr
-00013340: 6f6d 2074 6865 2041 5049 0d0a 2020 2020  om the API..    
-00013350: 2020 2020 2371 7565 7279 203d 2069 6e70      #query = inp
-00013360: 7574 735b 2271 7565 7279 220d 0a0d 0a0d  uts["query".....
-00013370: 0a20 2020 2020 2020 2074 6578 745f 7370  .        text_sp
-00013380: 6c69 7474 6572 203d 2043 6861 7261 6374  litter = Charact
-00013390: 6572 5465 7874 5370 6c69 7474 6572 280d  erTextSplitter(.
-000133a0: 0a20 2020 2020 2020 2020 2020 2073 6570  .            sep
-000133b0: 6172 6174 6f72 3d22 2022 2c0d 0a20 2020  arator=" ",..   
-000133c0: 2020 2020 2020 2020 2063 6875 6e6b 5f73           chunk_s
-000133d0: 697a 653d 3130 3030 2c0d 0a20 2020 2020  ize=1000,..     
-000133e0: 2020 2020 2020 2063 6875 6e6b 5f6f 7665         chunk_ove
-000133f0: 726c 6170 3d32 3030 2c0d 0a20 2020 2020  rlap=200,..     
-00013400: 2020 2020 2020 206c 656e 6774 685f 6675         length_fu
-00013410: 6e63 7469 6f6e 3d6c 656e 2c0d 0a20 2020  nction=len,..   
-00013420: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00013430: 2020 7465 7874 7320 3d20 7465 7874 5f73    texts = text_s
-00013440: 706c 6974 7465 722e 7370 6c69 745f 7465  plitter.split_te
-00013450: 7874 2874 6578 7429 0d0a 2020 2020 2020  xt(text)..      
-00013460: 2020 656d 6265 6464 696e 6773 203d 204f    embeddings = O
-00013470: 7065 6e41 4945 6d62 6564 6469 6e67 7328  penAIEmbeddings(
-00013480: 290d 0a20 2020 2020 2020 2064 6f63 7365  )..        docse
-00013490: 6172 6368 203d 2046 4149 5353 2e66 726f  arch = FAISS.fro
-000134a0: 6d5f 7465 7874 7328 7465 7874 732c 2065  m_texts(texts, e
-000134b0: 6d62 6564 6469 6e67 7329 0d0a 2020 2020  mbeddings)..    
-000134c0: 2020 2020 646f 6373 203d 2064 6f63 7365      docs = docse
-000134d0: 6172 6368 2e73 696d 696c 6172 6974 795f  arch.similarity_
-000134e0: 7365 6172 6368 2871 7565 7279 290d 0a20  search(query).. 
-000134f0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00013500: 2063 6861 696e 203d 206c 6f61 645f 7161   chain = load_qa
-00013510: 5f63 6861 696e 284f 7065 6e41 4928 6d6f  _chain(OpenAI(mo
-00013520: 6465 6c5f 6e61 6d65 3d6d 6f64 656c 2c20  del_name=model, 
-00013530: 7465 6d70 6572 6174 7572 653d 7465 6d70  temperature=temp
-00013540: 6572 6174 7572 652c 6f70 656e 6169 5f61  erature,openai_a
-00013550: 7069 5f6b 6579 3d6f 7065 6e61 696b 6579  pi_key=openaikey
-00013560: 292c 2063 6861 696e 5f74 7970 653d 2273  ), chain_type="s
-00013570: 7475 6666 2229 0d0a 2020 2020 2020 2020  tuff")..        
-00013580: 7265 7320 3d20 6368 6169 6e28 7b22 696e  res = chain({"in
-00013590: 7075 745f 646f 6375 6d65 6e74 7322 3a20  put_documents": 
-000135a0: 646f 6373 2c20 2271 7565 7374 696f 6e22  docs, "question"
-000135b0: 3a20 7175 6572 797d 2c20 7265 7475 726e  : query}, return
-000135c0: 5f6f 6e6c 795f 6f75 7470 7574 733d 5472  _only_outputs=Tr
-000135d0: 7565 290d 0a0d 0a20 2020 2020 2020 2023  ue)....        #
-000135e0: 7265 7475 726e 207b 2270 7265 6422 3a20  return {"pred": 
-000135f0: 7265 737d 0d0a 2020 2020 2020 2020 7265  res}..        re
-00013600: 7475 726e 2072 6573 0d0a 0d0a 2323 2323  turn res....####
+00013140: 2323 230d 0a0d 0a66 726f 6d20 6c61 6e67  ###....from lang
+00013150: 6368 6169 6e2e 656d 6265 6464 696e 6773  chain.embeddings
+00013160: 2e6f 7065 6e61 6920 696d 706f 7274 204f  .openai import O
+00013170: 7065 6e41 4945 6d62 6564 6469 6e67 730d  penAIEmbeddings.
+00013180: 0a66 726f 6d20 6c61 6e67 6368 6169 6e2e  .from langchain.
+00013190: 7465 7874 5f73 706c 6974 7465 7220 696d  text_splitter im
+000131a0: 706f 7274 2043 6861 7261 6374 6572 5465  port CharacterTe
+000131b0: 7874 5370 6c69 7474 6572 0d0a 6672 6f6d  xtSplitter..from
+000131c0: 206c 616e 6763 6861 696e 2e76 6563 746f   langchain.vecto
+000131d0: 7273 746f 7265 732e 6661 6973 7320 696d  rstores.faiss im
+000131e0: 706f 7274 2046 4149 5353 0d0a 0d0a 6672  port FAISS....fr
+000131f0: 6f6d 206c 616e 6763 6861 696e 2e63 6861  om langchain.cha
+00013200: 696e 732e 7175 6573 7469 6f6e 5f61 6e73  ins.question_ans
+00013210: 7765 7269 6e67 2069 6d70 6f72 7420 6c6f  wering import lo
+00013220: 6164 5f71 615f 6368 6169 6e0d 0a66 726f  ad_qa_chain..fro
+00013230: 6d20 6c61 6e67 6368 6169 6e2e 6c6c 6d73  m langchain.llms
+00013240: 2069 6d70 6f72 7420 5072 6f6d 7074 4c61   import PromptLa
+00013250: 7965 724f 7065 6e41 4943 6861 740d 0a66  yerOpenAIChat..f
+00013260: 726f 6d20 6c61 6e67 6368 6169 6e2e 6368  rom langchain.ch
+00013270: 6174 5f6d 6f64 656c 7320 696d 706f 7274  at_models import
+00013280: 2043 6861 744f 7065 6e41 490d 0a66 726f   ChatOpenAI..fro
+00013290: 6d20 6c61 6e67 6368 6169 6e2e 6c6c 6d73  m langchain.llms
+000132a0: 2069 6d70 6f72 7420 4f70 656e 4149 0d0a   import OpenAI..
+000132b0: 696d 706f 7274 2068 6173 686c 6962 0d0a  import hashlib..
+000132c0: 0d0a 2320 416e 7377 6572 2071 7565 7374  ..# Answer quest
+000132d0: 696f 6e73 2061 626f 7574 2074 6865 2068  ions about the h
+000132e0: 6561 646c 696e 6573 0d0a 6465 6620 7374  eadlines..def st
+000132f0: 6172 745f 636f 6e76 6572 7361 7469 6f6e  art_conversation
+00013300: 286f 7065 6e61 696b 6579 2c71 7565 7279  (openaikey,query
+00013310: 2c74 6578 742c 7465 6d70 6572 6174 7572  ,text,temperatur
+00013320: 652c 6d6f 6465 6c29 3a0d 0a20 2020 2023  e,model):..    #
+00013330: 2047 7261 6220 7468 6520 696e 7075 7420   Grab the input 
+00013340: 6672 6f6d 2074 6865 2041 5049 0d0a 2020  from the API..  
+00013350: 2020 2020 2020 2371 7565 7279 203d 2069        #query = i
+00013360: 6e70 7574 735b 2271 7565 7279 220d 0a0d  nputs["query"...
+00013370: 0a0d 0a20 2020 2020 2020 2074 6578 745f  ...        text_
+00013380: 7370 6c69 7474 6572 203d 2043 6861 7261  splitter = Chara
+00013390: 6374 6572 5465 7874 5370 6c69 7474 6572  cterTextSplitter
+000133a0: 280d 0a20 2020 2020 2020 2020 2020 2073  (..            s
+000133b0: 6570 6172 6174 6f72 3d22 2022 2c0d 0a20  eparator=" ",.. 
+000133c0: 2020 2020 2020 2020 2020 2063 6875 6e6b             chunk
+000133d0: 5f73 697a 653d 3130 3030 2c0d 0a20 2020  _size=1000,..   
+000133e0: 2020 2020 2020 2020 2063 6875 6e6b 5f6f           chunk_o
+000133f0: 7665 726c 6170 3d32 3030 2c0d 0a20 2020  verlap=200,..   
+00013400: 2020 2020 2020 2020 206c 656e 6774 685f           length_
+00013410: 6675 6e63 7469 6f6e 3d6c 656e 2c0d 0a20  function=len,.. 
+00013420: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00013430: 2020 2020 7465 7874 7320 3d20 7465 7874      texts = text
+00013440: 5f73 706c 6974 7465 722e 7370 6c69 745f  _splitter.split_
+00013450: 7465 7874 2874 6578 7429 0d0a 2020 2020  text(text)..    
+00013460: 2020 2020 656d 6265 6464 696e 6773 203d      embeddings =
+00013470: 204f 7065 6e41 4945 6d62 6564 6469 6e67   OpenAIEmbedding
+00013480: 7328 290d 0a20 2020 2020 2020 2064 6f63  s()..        doc
+00013490: 7365 6172 6368 203d 2046 4149 5353 2e66  search = FAISS.f
+000134a0: 726f 6d5f 7465 7874 7328 7465 7874 732c  rom_texts(texts,
+000134b0: 2065 6d62 6564 6469 6e67 7329 0d0a 2020   embeddings)..  
+000134c0: 2020 2020 2020 646f 6373 203d 2064 6f63        docs = doc
+000134d0: 7365 6172 6368 2e73 696d 696c 6172 6974  search.similarit
+000134e0: 795f 7365 6172 6368 2871 7565 7279 290d  y_search(query).
+000134f0: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
+00013500: 2020 2063 6861 696e 203d 206c 6f61 645f     chain = load_
+00013510: 7161 5f63 6861 696e 284f 7065 6e41 4928  qa_chain(OpenAI(
+00013520: 6d6f 6465 6c5f 6e61 6d65 3d6d 6f64 656c  model_name=model
+00013530: 2c20 7465 6d70 6572 6174 7572 653d 7465  , temperature=te
+00013540: 6d70 6572 6174 7572 652c 6f70 656e 6169  mperature,openai
+00013550: 5f61 7069 5f6b 6579 3d6f 7065 6e61 696b  _api_key=openaik
+00013560: 6579 292c 2063 6861 696e 5f74 7970 653d  ey), chain_type=
+00013570: 2273 7475 6666 2229 0d0a 2020 2020 2020  "stuff")..      
+00013580: 2020 7265 7320 3d20 6368 6169 6e28 7b22    res = chain({"
+00013590: 696e 7075 745f 646f 6375 6d65 6e74 7322  input_documents"
+000135a0: 3a20 646f 6373 2c20 2271 7565 7374 696f  : docs, "questio
+000135b0: 6e22 3a20 7175 6572 797d 2c20 7265 7475  n": query}, retu
+000135c0: 726e 5f6f 6e6c 795f 6f75 7470 7574 733d  rn_only_outputs=
+000135d0: 5472 7565 290d 0a0d 0a20 2020 2020 2020  True)....       
+000135e0: 2023 7265 7475 726e 207b 2270 7265 6422   #return {"pred"
+000135f0: 3a20 7265 737d 0d0a 2020 2020 2020 2020  : res}..        
+00013600: 7265 7475 726e 2072 6573 0d0a 0d0a 2323  return res....##
 00013610: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00013620: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00013630: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013640: 0d0a 6672 6f6d 2070 6466 7175 6572 7920  ..from pdfquery 
-00013650: 696d 706f 7274 2050 4446 5175 6572 790d  import PDFQuery.
-00013660: 0a69 6d70 6f72 7420 786d 6c74 6f64 6963  .import xmltodic
-00013670: 740d 0a0d 0a0d 0a64 6566 206c 6162 656c  t......def label
-00013680: 6669 656c 6473 2866 696c 656e 616d 652c  fields(filename,
-00013690: 6c61 6265 6c6e 616d 652c 6163 726f 7479  labelname,acroty
-000136a0: 7065 293a 0d0a 2020 2020 2070 6466 203d  pe):..     pdf =
-000136b0: 2050 4446 5175 6572 7928 6669 6c65 6e61   PDFQuery(filena
-000136c0: 6d65 290d 0a20 2020 2020 7064 662e 6c6f  me)..     pdf.lo
-000136d0: 6164 2829 0d0a 2020 2020 2023 4c54 5465  ad()..     #LTTe
-000136e0: 7874 4c69 6e65 486f 7269 7a6f 6e74 616c  xtLineHorizontal
-000136f0: 0d0a 2020 2020 206c 6162 656c 203d 2070  ..     label = p
-00013700: 6466 2e70 7128 6163 726f 7479 7065 2b27  df.pq(acrotype+'
-00013710: 3a63 6f6e 7461 696e 7328 2227 2b6c 6162  :contains("'+lab
-00013720: 656c 6e61 6d65 202b 2027 2229 2729 0d0a  elname + '")')..
-00013730: 2020 2020 206c 6566 745f 636f 726e 6572       left_corner
-00013740: 203d 2066 6c6f 6174 286c 6162 656c 2e61   = float(label.a
-00013750: 7474 7228 2778 3027 2929 0d0a 2020 2020  ttr('x0'))..    
-00013760: 2062 6f74 746f 6d5f 636f 726e 6572 203d   bottom_corner =
-00013770: 2066 6c6f 6174 286c 6162 656c 2e61 7474   float(label.att
-00013780: 7228 2779 3027 2929 0d0a 2020 2020 206e  r('y0'))..     n
-00013790: 616d 6520 3d20 7064 662e 7071 2861 6372  ame = pdf.pq(acr
-000137a0: 6f74 7970 6520 2b27 3a69 6e5f 6262 6f78  otype +':in_bbox
-000137b0: 2822 2573 2c20 2573 2c20 2573 2c20 2573  ("%s, %s, %s, %s
-000137c0: 2229 2720 2520 286c 6566 745f 636f 726e  ")' % (left_corn
-000137d0: 6572 2c20 626f 7474 6f6d 5f63 6f72 6e65  er, bottom_corne
-000137e0: 722d 3330 2c20 6c65 6674 5f63 6f72 6e65  r-30, left_corne
-000137f0: 722b 3135 302c 2062 6f74 746f 6d5f 636f  r+150, bottom_co
-00013800: 726e 6572 2929 2e74 6578 7428 290d 0a20  rner)).text().. 
-00013810: 2020 2020 7265 7475 726e 206e 616d 650d      return name.
-00013820: 0a0d 0a0d 0a64 6566 2065 7874 7261 6374  .....def extract
-00013830: 6669 656c 6473 2866 696c 656e 616d 6529  fields(filename)
-00013840: 3a0d 0a20 2020 2020 2023 7265 6164 2074  :..      #read t
-00013850: 6865 2050 4446 0d0a 2020 2020 2020 7064  he PDF..      pd
-00013860: 6620 3d20 5044 4651 7565 7279 2866 696c  f = PDFQuery(fil
-00013870: 656e 616d 6529 0d0a 2020 2020 2020 7064  ename)..      pd
-00013880: 662e 6c6f 6164 2829 0d0a 0d0a 2020 2020  f.load()....    
-00013890: 2020 236f 203d 2078 6d6c 746f 6469 6374    #o = xmltodict
-000138a0: 2e70 6172 7365 2827 3c65 3e20 3c61 3e74  .parse('<e> <a>t
-000138b0: 6578 743c 2f61 3e20 3c61 3e74 6578 743c  ext</a> <a>text<
-000138c0: 2f61 3e20 3c2f 653e 2729 0d0a 0d0a 2020  /a> </e>')....  
-000138d0: 2020 2020 2363 6f6e 7665 7274 2074 6865      #convert the
-000138e0: 2070 6466 2074 6f20 584d 4c0d 0a20 2020   pdf to XML..   
-000138f0: 2020 2078 6d6c 6669 6c65 3d20 6669 6c65     xmlfile= file
-00013900: 6e61 6d65 202b 2027 2e78 6d6c 270d 0a20  name + '.xml'.. 
-00013910: 2020 2020 2070 6466 2e74 7265 652e 7772       pdf.tree.wr
-00013920: 6974 6528 786d 6c66 696c 652c 2070 7265  ite(xmlfile, pre
-00013930: 7474 795f 7072 696e 7420 3d20 5472 7565  tty_print = True
-00013940: 290d 0a20 2020 2020 2077 6974 6820 6f70  )..      with op
-00013950: 656e 2878 6d6c 6669 6c65 2920 6173 2066  en(xmlfile) as f
-00013960: 3a20 7320 3d20 662e 7265 6164 2829 0d0a  : s = f.read()..
-00013970: 0d0a 2020 2020 2020 2370 7269 6e74 2873  ..      #print(s
-00013980: 290d 0a20 2020 2020 206a 736f 6e62 7566  )..      jsonbuf
-00013990: 3d78 6d6c 746f 6a73 6f6e 2873 2c78 6d6c  =xmltojson(s,xml
-000139a0: 6669 6c65 290d 0a0d 0a20 2020 2020 2072  file)....      r
-000139b0: 6574 7572 6e20 6a73 6f6e 6275 660d 0a20  eturn jsonbuf.. 
-000139c0: 2020 2020 200d 0a0d 0a64 6566 2078 6d6c       ....def xml
-000139d0: 746f 6a73 6f6e 2878 6d6c 6275 6666 6572  tojson(xmlbuffer
-000139e0: 2c78 6d6c 6669 6c65 293a 0d0a 0d0a 2020  ,xmlfile):....  
-000139f0: 2020 2020 6f20 3d20 786d 6c74 6f64 6963      o = xmltodic
-00013a00: 742e 7061 7273 6528 786d 6c62 7566 6665  t.parse(xmlbuffe
-00013a10: 7229 0d0a 2020 2020 2020 786d 6c6a 736f  r)..      xmljso
-00013a20: 6e3d 6a73 6f6e 2e64 756d 7073 286f 290d  n=json.dumps(o).
-00013a30: 0a20 2020 2020 2023 7072 696e 7428 786d  .      #print(xm
-00013a40: 6c6a 736f 6e29 0d0a 2020 2020 2020 7769  ljson)..      wi
-00013a50: 7468 206f 7065 6e28 786d 6c66 696c 6520  th open(xmlfile 
-00013a60: 2b20 272e 6a73 6f6e 272c 2277 2229 2061  + '.json',"w") a
-00013a70: 7320 663a 0d0a 2020 2020 2020 2020 662e  s f:..        f.
-00013a80: 7772 6974 6528 786d 6c6a 736f 6e29 0d0a  write(xmljson)..
-00013a90: 0d0a 2020 2020 2020 7265 7475 726e 2078  ..      return x
-00013aa0: 6d6c 6a73 6f6e 2020 0d0a 0d0a 2323 2323  mljson  ....####
+00013640: 2323 0d0a 6672 6f6d 2070 6466 7175 6572  ##..from pdfquer
+00013650: 7920 696d 706f 7274 2050 4446 5175 6572  y import PDFQuer
+00013660: 790d 0a69 6d70 6f72 7420 786d 6c74 6f64  y..import xmltod
+00013670: 6963 740d 0a0d 0a0d 0a64 6566 206c 6162  ict......def lab
+00013680: 656c 6669 656c 6473 2866 696c 656e 616d  elfields(filenam
+00013690: 652c 6c61 6265 6c6e 616d 652c 6163 726f  e,labelname,acro
+000136a0: 7479 7065 293a 0d0a 2020 2020 2070 6466  type):..     pdf
+000136b0: 203d 2050 4446 5175 6572 7928 6669 6c65   = PDFQuery(file
+000136c0: 6e61 6d65 290d 0a20 2020 2020 7064 662e  name)..     pdf.
+000136d0: 6c6f 6164 2829 0d0a 2020 2020 2023 4c54  load()..     #LT
+000136e0: 5465 7874 4c69 6e65 486f 7269 7a6f 6e74  TextLineHorizont
+000136f0: 616c 0d0a 2020 2020 206c 6162 656c 203d  al..     label =
+00013700: 2070 6466 2e70 7128 6163 726f 7479 7065   pdf.pq(acrotype
+00013710: 2b27 3a63 6f6e 7461 696e 7328 2227 2b6c  +':contains("'+l
+00013720: 6162 656c 6e61 6d65 202b 2027 2229 2729  abelname + '")')
+00013730: 0d0a 2020 2020 206c 6566 745f 636f 726e  ..     left_corn
+00013740: 6572 203d 2066 6c6f 6174 286c 6162 656c  er = float(label
+00013750: 2e61 7474 7228 2778 3027 2929 0d0a 2020  .attr('x0'))..  
+00013760: 2020 2062 6f74 746f 6d5f 636f 726e 6572     bottom_corner
+00013770: 203d 2066 6c6f 6174 286c 6162 656c 2e61   = float(label.a
+00013780: 7474 7228 2779 3027 2929 0d0a 2020 2020  ttr('y0'))..    
+00013790: 206e 616d 6520 3d20 7064 662e 7071 2861   name = pdf.pq(a
+000137a0: 6372 6f74 7970 6520 2b27 3a69 6e5f 6262  crotype +':in_bb
+000137b0: 6f78 2822 2573 2c20 2573 2c20 2573 2c20  ox("%s, %s, %s, 
+000137c0: 2573 2229 2720 2520 286c 6566 745f 636f  %s")' % (left_co
+000137d0: 726e 6572 2c20 626f 7474 6f6d 5f63 6f72  rner, bottom_cor
+000137e0: 6e65 722d 3330 2c20 6c65 6674 5f63 6f72  ner-30, left_cor
+000137f0: 6e65 722b 3135 302c 2062 6f74 746f 6d5f  ner+150, bottom_
+00013800: 636f 726e 6572 2929 2e74 6578 7428 290d  corner)).text().
+00013810: 0a20 2020 2020 7265 7475 726e 206e 616d  .     return nam
+00013820: 650d 0a0d 0a0d 0a64 6566 2065 7874 7261  e......def extra
+00013830: 6374 6669 656c 6473 2866 696c 656e 616d  ctfields(filenam
+00013840: 6529 3a0d 0a20 2020 2020 2023 7265 6164  e):..      #read
+00013850: 2074 6865 2050 4446 0d0a 2020 2020 2020   the PDF..      
+00013860: 7064 6620 3d20 5044 4651 7565 7279 2866  pdf = PDFQuery(f
+00013870: 696c 656e 616d 6529 0d0a 2020 2020 2020  ilename)..      
+00013880: 7064 662e 6c6f 6164 2829 0d0a 0d0a 2020  pdf.load()....  
+00013890: 2020 2020 236f 203d 2078 6d6c 746f 6469      #o = xmltodi
+000138a0: 6374 2e70 6172 7365 2827 3c65 3e20 3c61  ct.parse('<e> <a
+000138b0: 3e74 6578 743c 2f61 3e20 3c61 3e74 6578  >text</a> <a>tex
+000138c0: 743c 2f61 3e20 3c2f 653e 2729 0d0a 0d0a  t</a> </e>')....
+000138d0: 2020 2020 2020 2363 6f6e 7665 7274 2074        #convert t
+000138e0: 6865 2070 6466 2074 6f20 584d 4c0d 0a20  he pdf to XML.. 
+000138f0: 2020 2020 2078 6d6c 6669 6c65 3d20 6669       xmlfile= fi
+00013900: 6c65 6e61 6d65 202b 2027 2e78 6d6c 270d  lename + '.xml'.
+00013910: 0a20 2020 2020 2070 6466 2e74 7265 652e  .      pdf.tree.
+00013920: 7772 6974 6528 786d 6c66 696c 652c 2070  write(xmlfile, p
+00013930: 7265 7474 795f 7072 696e 7420 3d20 5472  retty_print = Tr
+00013940: 7565 290d 0a20 2020 2020 2077 6974 6820  ue)..      with 
+00013950: 6f70 656e 2878 6d6c 6669 6c65 2920 6173  open(xmlfile) as
+00013960: 2066 3a20 7320 3d20 662e 7265 6164 2829   f: s = f.read()
+00013970: 0d0a 0d0a 2020 2020 2020 2370 7269 6e74  ....      #print
+00013980: 2873 290d 0a20 2020 2020 206a 736f 6e62  (s)..      jsonb
+00013990: 7566 3d78 6d6c 746f 6a73 6f6e 2873 2c78  uf=xmltojson(s,x
+000139a0: 6d6c 6669 6c65 290d 0a0d 0a20 2020 2020  mlfile)....     
+000139b0: 2072 6574 7572 6e20 6a73 6f6e 6275 660d   return jsonbuf.
+000139c0: 0a20 2020 2020 200d 0a0d 0a64 6566 2078  .      ....def x
+000139d0: 6d6c 746f 6a73 6f6e 2878 6d6c 6275 6666  mltojson(xmlbuff
+000139e0: 6572 2c78 6d6c 6669 6c65 293a 0d0a 0d0a  er,xmlfile):....
+000139f0: 2020 2020 2020 6f20 3d20 786d 6c74 6f64        o = xmltod
+00013a00: 6963 742e 7061 7273 6528 786d 6c62 7566  ict.parse(xmlbuf
+00013a10: 6665 7229 0d0a 2020 2020 2020 786d 6c6a  fer)..      xmlj
+00013a20: 736f 6e3d 6a73 6f6e 2e64 756d 7073 286f  son=json.dumps(o
+00013a30: 290d 0a20 2020 2020 2023 7072 696e 7428  )..      #print(
+00013a40: 786d 6c6a 736f 6e29 0d0a 2020 2020 2020  xmljson)..      
+00013a50: 7769 7468 206f 7065 6e28 786d 6c66 696c  with open(xmlfil
+00013a60: 6520 2b20 272e 6a73 6f6e 272c 2277 2229  e + '.json',"w")
+00013a70: 2061 7320 663a 0d0a 2020 2020 2020 2020   as f:..        
+00013a80: 662e 7772 6974 6528 786d 6c6a 736f 6e29  f.write(xmljson)
+00013a90: 0d0a 0d0a 2020 2020 2020 7265 7475 726e  ....      return
+00013aa0: 2078 6d6c 6a73 6f6e 2020 0d0a 0d0a 2323   xmljson  ....##
 00013ab0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00013ac0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013ad0: 2323 2323 2323 2323 2323 230d 0a69 6d70  ###########..imp
-00013ae0: 6f72 7420 6561 7379 6f63 720d 0a69 6d70  ort easyocr..imp
-00013af0: 6f72 7420 7370 6565 6368 5f72 6563 6f67  ort speech_recog
-00013b00: 6e69 7469 6f6e 2061 7320 7372 0d0a 696d  nition as sr..im
-00013b10: 706f 7274 206d 6f76 6965 7079 2e65 6469  port moviepy.edi
-00013b20: 746f 7220 6173 206d 7065 0d0a 0d0a 6465  tor as mpe....de
-00013b30: 6620 636f 6e76 6572 7476 6964 656f 746f  f convertvideoto
-00013b40: 7465 7874 2866 696c 656e 616d 6529 3a0d  text(filename):.
-00013b50: 0a20 2020 2020 2020 2023 636f 6e76 6572  .        #conver
-00013b60: 7420 746f 2061 7564 696f 0d0a 2020 2020  t to audio..    
-00013b70: 2020 2020 7669 6465 6f20 3d20 6d70 652e      video = mpe.
-00013b80: 5669 6465 6f46 696c 6543 6c69 7028 6669  VideoFileClip(fi
-00013b90: 6c65 6e61 6d65 290d 0a20 2020 2020 2020  lename)..       
-00013ba0: 2061 7564 696f 6669 6c65 3d66 696c 656e   audiofile=filen
-00013bb0: 616d 6520 2b20 222e 7761 7622 0d0a 2020  ame + ".wav"..  
-00013bc0: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00013bd0: 7669 6465 6f2e 6175 6469 6f2e 7772 6974  video.audio.writ
-00013be0: 655f 6175 6469 6f66 696c 6528 6175 6469  e_audiofile(audi
-00013bf0: 6f66 696c 6529 0d0a 2020 2020 2020 2020  ofile)..        
-00013c00: 7265 7375 6c74 203d 2061 7564 696f 746f  result = audioto
-00013c10: 7465 7874 2861 7564 696f 6669 6c65 290d  text(audiofile).
-00013c20: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
-00013c30: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00013c40: 0d0a 0d0a 6465 6620 6175 6469 6f74 6f74  ....def audiotot
-00013c50: 6578 7428 6669 6c65 6e61 6d65 293a 0d0a  ext(filename):..
-00013c60: 2020 2020 2020 2020 7220 3d20 7372 2e52          r = sr.R
-00013c70: 6563 6f67 6e69 7a65 7228 290d 0a20 2020  ecognizer()..   
-00013c80: 2020 2020 2061 7564 696f 203d 2073 722e       audio = sr.
-00013c90: 4175 6469 6f46 696c 6528 6669 6c65 6e61  AudioFile(filena
-00013ca0: 6d65 290d 0a20 2020 2020 2020 2077 6974  me)..        wit
-00013cb0: 6820 6175 6469 6f20 6173 2073 6f75 7263  h audio as sourc
-00013cc0: 653a 0d0a 2020 2020 2020 2020 2020 6175  e:..          au
-00013cd0: 6469 6f5f 6669 6c65 203d 2072 2e72 6563  dio_file = r.rec
-00013ce0: 6f72 6428 736f 7572 6365 290d 0a20 2020  ord(source)..   
-00013cf0: 2020 2020 2072 6573 756c 7420 3d20 722e       result = r.
-00013d00: 7265 636f 676e 697a 655f 676f 6f67 6c65  recognize_google
-00013d10: 2861 7564 696f 5f66 696c 6529 0d0a 2020  (audio_file)..  
-00013d20: 2020 2020 2020 7370 6565 6368 6669 6c65        speechfile
-00013d30: 203d 2066 696c 656e 616d 6520 2b20 272e   = filename + '.
-00013d40: 7370 6565 6368 2e74 7874 270d 0a20 2020  speech.txt'..   
-00013d50: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-00013d60: 696c 656e 616d 6520 2b20 272e 7370 6565  ilename + '.spee
-00013d70: 6368 2e74 7874 272c 6d6f 6465 203d 2777  ch.txt',mode ='w
-00013d80: 2729 2061 7320 6669 6c65 3a20 0d0a 2020  ') as file: ..  
-00013d90: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
-00013da0: 6974 6528 7265 7375 6c74 290d 0a0d 0a20  ite(result).... 
-00013db0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00013dc0: 7375 6c74 2020 200d 0a0d 0a0d 0a64 6566  sult   ......def
-00013dd0: 2064 6f6f 6372 6d61 696e 2866 696c 656e   doocrmain(filen
-00013de0: 616d 6529 3a0d 0a0d 0a20 2020 2072 6561  ame):....    rea
-00013df0: 6465 7220 3d20 6561 7379 6f63 722e 5265  der = easyocr.Re
-00013e00: 6164 6572 285b 2765 6e27 5d29 2020 200d  ader(['en'])   .
-00013e10: 0a20 2020 2062 6f75 6e64 203d 2072 6561  .    bound = rea
-00013e20: 6465 722e 7265 6164 7465 7874 2866 696c  der.readtext(fil
-00013e30: 656e 616d 6529 0d0a 2020 2020 7265 7475  ename)..    retu
-00013e40: 726e 2062 6f75 6e64 0d0a 2020 2020 0d0a  rn bound..    ..
-00013e50: 2366 696c 656e 616d 653d 2774 6573 742d  #filename='test-
-00013e60: 7461 782e 7064 6627 2020 2020 200d 0a23  tax.pdf'     ..#
-00013e70: 7064 666a 736f 6e3d 6578 7472 6163 7466  pdfjson=extractf
-00013e80: 6965 6c64 7328 6669 6c65 6e61 6d65 290d  ields(filename).
-00013e90: 0a23 6e61 6d65 7465 7874 3d6c 6162 656c  .#nametext=label
-00013ea0: 6669 656c 6473 2866 696c 656e 616d 652c  fields(filename,
-00013eb0: 2242 7573 696e 6573 7320 6e75 6d62 6572  "Business number
-00013ec0: 222c 224c 5454 6578 744c 696e 6548 6f72  ","LTTextLineHor
-00013ed0: 697a 6f6e 7461 6c22 290d 0a23 7072 696e  izontal")..#prin
-00013ee0: 7428 6e61 6d65 7465 7874 290d 0a0d 0a    t(nametext)....
+00013ad0: 2323 2323 2323 2323 2323 2323 230d 0a69  #############..i
+00013ae0: 6d70 6f72 7420 6561 7379 6f63 720d 0a69  mport easyocr..i
+00013af0: 6d70 6f72 7420 7370 6565 6368 5f72 6563  mport speech_rec
+00013b00: 6f67 6e69 7469 6f6e 2061 7320 7372 0d0a  ognition as sr..
+00013b10: 696d 706f 7274 206d 6f76 6965 7079 2e65  import moviepy.e
+00013b20: 6469 746f 7220 6173 206d 7065 0d0a 0d0a  ditor as mpe....
+00013b30: 6465 6620 636f 6e76 6572 7476 6964 656f  def convertvideo
+00013b40: 746f 7465 7874 2866 696c 656e 616d 6529  totext(filename)
+00013b50: 3a0d 0a20 2020 2020 2020 2023 636f 6e76  :..        #conv
+00013b60: 6572 7420 746f 2061 7564 696f 0d0a 2020  ert to audio..  
+00013b70: 2020 2020 2020 7669 6465 6f20 3d20 6d70        video = mp
+00013b80: 652e 5669 6465 6f46 696c 6543 6c69 7028  e.VideoFileClip(
+00013b90: 6669 6c65 6e61 6d65 290d 0a20 2020 2020  filename)..     
+00013ba0: 2020 2061 7564 696f 6669 6c65 3d66 696c     audiofile=fil
+00013bb0: 656e 616d 6520 2b20 222e 7761 7622 0d0a  ename + ".wav"..
+00013bc0: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00013bd0: 2020 7669 6465 6f2e 6175 6469 6f2e 7772    video.audio.wr
+00013be0: 6974 655f 6175 6469 6f66 696c 6528 6175  ite_audiofile(au
+00013bf0: 6469 6f66 696c 6529 0d0a 2020 2020 2020  diofile)..      
+00013c00: 2020 7265 7375 6c74 203d 2061 7564 696f    result = audio
+00013c10: 746f 7465 7874 2861 7564 696f 6669 6c65  totext(audiofile
+00013c20: 290d 0a20 2020 2020 2020 200d 0a20 2020  )..        ..   
+00013c30: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+00013c40: 6c74 0d0a 0d0a 6465 6620 6175 6469 6f74  lt....def audiot
+00013c50: 6f74 6578 7428 6669 6c65 6e61 6d65 293a  otext(filename):
+00013c60: 0d0a 2020 2020 2020 2020 7220 3d20 7372  ..        r = sr
+00013c70: 2e52 6563 6f67 6e69 7a65 7228 290d 0a20  .Recognizer().. 
+00013c80: 2020 2020 2020 2061 7564 696f 203d 2073         audio = s
+00013c90: 722e 4175 6469 6f46 696c 6528 6669 6c65  r.AudioFile(file
+00013ca0: 6e61 6d65 290d 0a20 2020 2020 2020 2077  name)..        w
+00013cb0: 6974 6820 6175 6469 6f20 6173 2073 6f75  ith audio as sou
+00013cc0: 7263 653a 0d0a 2020 2020 2020 2020 2020  rce:..          
+00013cd0: 6175 6469 6f5f 6669 6c65 203d 2072 2e72  audio_file = r.r
+00013ce0: 6563 6f72 6428 736f 7572 6365 290d 0a20  ecord(source).. 
+00013cf0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00013d00: 722e 7265 636f 676e 697a 655f 676f 6f67  r.recognize_goog
+00013d10: 6c65 2861 7564 696f 5f66 696c 6529 0d0a  le(audio_file)..
+00013d20: 2020 2020 2020 2020 7370 6565 6368 6669          speechfi
+00013d30: 6c65 203d 2066 696c 656e 616d 6520 2b20  le = filename + 
+00013d40: 272e 7370 6565 6368 2e74 7874 270d 0a20  '.speech.txt'.. 
+00013d50: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+00013d60: 2866 696c 656e 616d 6520 2b20 272e 7370  (filename + '.sp
+00013d70: 6565 6368 2e74 7874 272c 6d6f 6465 203d  eech.txt',mode =
+00013d80: 2777 2729 2061 7320 6669 6c65 3a20 0d0a  'w') as file: ..
+00013d90: 2020 2020 2020 2020 2020 2066 696c 652e             file.
+00013da0: 7772 6974 6528 7265 7375 6c74 290d 0a0d  write(result)...
+00013db0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013dc0: 7265 7375 6c74 2020 200d 0a0d 0a0d 0a64  result   ......d
+00013dd0: 6566 2064 6f6f 6372 6d61 696e 2866 696c  ef doocrmain(fil
+00013de0: 656e 616d 6529 3a0d 0a0d 0a20 2020 2072  ename):....    r
+00013df0: 6561 6465 7220 3d20 6561 7379 6f63 722e  eader = easyocr.
+00013e00: 5265 6164 6572 285b 2765 6e27 5d29 2020  Reader(['en'])  
+00013e10: 200d 0a20 2020 2062 6f75 6e64 203d 2072   ..    bound = r
+00013e20: 6561 6465 722e 7265 6164 7465 7874 2866  eader.readtext(f
+00013e30: 696c 656e 616d 6529 0d0a 2020 2020 7265  ilename)..    re
+00013e40: 7475 726e 2062 6f75 6e64 0d0a 2020 2020  turn bound..    
+00013e50: 0d0a 2366 696c 656e 616d 653d 2774 6573  ..#filename='tes
+00013e60: 742d 7461 782e 7064 6627 2020 2020 200d  t-tax.pdf'     .
+00013e70: 0a23 7064 666a 736f 6e3d 6578 7472 6163  .#pdfjson=extrac
+00013e80: 7466 6965 6c64 7328 6669 6c65 6e61 6d65  tfields(filename
+00013e90: 290d 0a23 6e61 6d65 7465 7874 3d6c 6162  )..#nametext=lab
+00013ea0: 656c 6669 656c 6473 2866 696c 656e 616d  elfields(filenam
+00013eb0: 652c 2242 7573 696e 6573 7320 6e75 6d62  e,"Business numb
+00013ec0: 6572 222c 224c 5454 6578 744c 696e 6548  er","LTTextLineH
+00013ed0: 6f72 697a 6f6e 7461 6c22 290d 0a23 7072  orizontal")..#pr
+00013ee0: 696e 7428 6e61 6d65 7465 7874 290d 0a0d  int(nametext)...
+00013ef0: 0a                                       .
```

### Comparing `maadstml-3.35/maadstml/tmltextsummary.py` & `maadstml-3.36/maadstml/tmltextsummary.py`

 * *Files identical despite different names*

### Comparing `maadstml-3.35/maadstml.egg-info/PKG-INFO` & `maadstml-3.36/maadstml.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: maadstml
-Version: 3.35
+Version: 3.36
 Summary: Multi-Agent Accelerator for Data Science (MAADS): Transactional Machine Learning
 Home-page: https://github.com/smaurice101/transactionalmachinelearning
 Author: Sebastian Maurice
 Author-email: sebastian.maurice@otics.ca
 License: MIT License
 Keywords: multi-agent, transactional machine learning, data streams, data science, optimization, prescriptive analytics, machine learning, automl,auto-ml,artificial intelligence,predictive analytics,advanced analytics
 Description-Content-Type: text/markdown
```

### Comparing `maadstml-3.35/setup.py` & `maadstml-3.36/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -10,15 +10,15 @@
 	
 
 with open("requirements.txt","r") as f:
     required = f.read().splitlines()
     
 setuptools.setup(
     name='maadstml',
-    version='3.35',
+    version='3.36',
     description='Multi-Agent Accelerator for Data Science (MAADS): Transactional Machine Learning',
     license='MIT License',
     packages=['maadstml'],
     author='Sebastian Maurice',
     author_email='sebastian.maurice@otics.ca',
     keywords=['multi-agent, transactional machine learning, data streams, data science, optimization, prescriptive analytics, machine learning, automl,auto-ml,artificial intelligence', 'predictive analytics', 'advanced analytics'],
     long_description=long_description,
```

