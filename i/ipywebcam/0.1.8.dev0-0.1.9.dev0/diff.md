# Comparing `tmp/ipywebcam-0.1.8.dev0.tar.gz` & `tmp/ipywebcam-0.1.9.dev0.tar.gz`

## Comparing `ipywebcam-0.1.8.dev0.tar` & `ipywebcam-0.1.9.dev0.tar`

### file list

```diff
@@ -1,82 +1,105 @@
--rw-r--r--   0        0        0       31 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.coveragerc
--rw-r--r--   0        0        0       42 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.eslintignore
--rw-r--r--   0        0        0     1379 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.eslintrc.js
--rw-r--r--   0        0        0      107 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.npmignore
--rw-r--r--   0        0        0       51 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.prettierignore
--rw-r--r--   0        0        0       27 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.prettierrc
--rw-r--r--   0        0        0      661 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/MANIFEST.in
--rw-r--r--   0        0        0      214 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/babel.config.js
--rw-r--r--   0        0        0      217 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/codecov.yml
--rw-r--r--   0        0        0      179 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/install.json
--rw-r--r--   0        0        0       63 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam.json
--rw-r--r--   0        0        0      532 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/jest.config.js
--rw-r--r--   0        0        0  1112618 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/package-lock.json
--rw-r--r--   0        0        0     2980 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/package.json
--rw-r--r--   0        0        0      126 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/pytest.ini
--rw-r--r--   0        0        0      140 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/readthedocs.yml
--rw-r--r--   0        0        0       92 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/setup.py
--rw-r--r--   0        0        0       97 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/tsconfig.eslint.json
--rw-r--r--   0        0        0      589 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/tsconfig.json
--rw-r--r--   0        0        0     2250 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/webpack.config.js
--rw-r--r--   0        0        0   401510 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/yarn.lock
--rw-r--r--   0        0        0     7373 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/css/video.css
--rw-r--r--   0        0        0       74 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/css/widget.css
--rw-r--r--   0        0        0      611 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/Makefile
--rw-r--r--   0        0        0      170 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/environment.yml
--rwxr-xr-x   0        0        0      781 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/make.bat
--rw-r--r--   0        0        0     6334 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/conf.py
--rw-r--r--   0        0        0      821 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/develop-install.rst
--rw-r--r--   0        0        0      656 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/index.rst
--rw-r--r--   0        0        0     1011 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/installing.rst
--rw-r--r--   0        0        0      109 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/introduction.rst
--rw-r--r--   0        0        0      120 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/_static/helper.js
--rw-r--r--   0        0        0      385 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/examples/index.rst
--rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/docs/source/examples/introduction.nblink
--rw-r--r--   0        0        0     8195 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/examples/introduction.ipynb
--rw-r--r--   0        0        0     1940 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/__init__.py
--rw-r--r--   0        0        0      246 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/_frontend.py
--rw-r--r--   0        0        0      695 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/_version.py
--rw-r--r--   0        0        0     2794 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/common.py
--rw-r--r--   0        0        0    39307 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/recorder.py
--rw-r--r--   0        0        0    30444 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/webcam.py
--rw-r--r--   0        0        0    20697 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/build_log.json
--rw-r--r--   0        0        0     3097 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/package.json
--rw-r--r--   0        0        0     1331 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js
--rw-r--r--   0        0        0     1304 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js.map
--rw-r--r--   0        0        0     3514 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js
--rw-r--r--   0        0        0     3827 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js.map
--rw-r--r--   0        0        0   116479 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.2c9276c21e75d417d68e.js
--rw-r--r--   0        0        0   133927 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.2c9276c21e75d417d68e.js.map
--rw-r--r--   0        0        0   116479 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.f229668a6df6f0256c34.js
--rw-r--r--   0        0        0   133927 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.f229668a6df6f0256c34.js.map
--rw-r--r--   0        0        0    25948 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/remoteEntry.d5b4713515a5ec1ca820.js.map
--rw-r--r--   0        0        0    27197 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/remoteEntry.de2e30b4afcc045c5dab.js
--rw-r--r--   0        0        0    25948 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/remoteEntry.de2e30b4afcc045c5dab.js.map
--rw-r--r--   0        0        0      118 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/style.js
--rw-r--r--   0        0        0    32928 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js
--rw-r--r--   0        0        0    39913 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js.map
--rw-r--r--   0        0        0      408 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/nbextension/extension.js
--rw-r--r--   0        0        0   147530 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/nbextension/index.js
--rw-r--r--   0        0        0   214364 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/nbextension/index.js.map
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/tests/__init__.py
--rw-r--r--   0        0        0     1411 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/tests/conftest.py
--rw-r--r--   0        0        0      462 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/tests/test_nbextension_path.py
--rw-r--r--   0        0        0      275 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/ipywebcam/tests/test_webcam.py
--rw-r--r--   0        0        0     3123 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/common.ts
--rw-r--r--   0        0        0      617 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/extension.ts
--rw-r--r--   0        0        0      173 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/index.ts
--rw-r--r--   0        0        0     1115 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/plugin.ts
--rw-r--r--   0        0        0     8357 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/recorder.ts
--rw-r--r--   0        0        0      430 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/utils.ts
--rw-r--r--   0        0        0      573 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/version.ts
--rw-r--r--   0        0        0    46126 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/video.ts
--rw-r--r--   0        0        0    13644 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/webcam.ts
--rw-r--r--   0        0        0     5139 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/webrtc.ts
--rw-r--r--   0        0        0      122 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/widgets.ts
--rw-r--r--   0        0        0      822 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/__tests__/index.spec.ts
--rw-r--r--   0        0        0     2909 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/src/__tests__/utils.ts
--rw-r--r--   0        0        0     1988 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/.gitignore
--rw-r--r--   0        0        0     1498 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/LICENSE.txt
--rw-r--r--   0        0        0     2391 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/README.md
--rw-r--r--   0        0        0     3125 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/pyproject.toml
--rw-r--r--   0        0        0     5607 2020-02-02 00:00:00.000000 ipywebcam-0.1.8.dev0/PKG-INFO
+-rw-r--r--   0        0        0       31 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.coveragerc
+-rw-r--r--   0        0        0       42 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.eslintignore
+-rw-r--r--   0        0        0     1379 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.eslintrc.js
+-rw-r--r--   0        0        0      107 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.npmignore
+-rw-r--r--   0        0        0       51 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.prettierignore
+-rw-r--r--   0        0        0       27 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.prettierrc
+-rw-r--r--   0        0        0      661 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/MANIFEST.in
+-rw-r--r--   0        0        0      214 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/babel.config.js
+-rw-r--r--   0        0        0      217 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/codecov.yml
+-rw-r--r--   0        0        0      179 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/install.json
+-rw-r--r--   0        0        0       63 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam.json
+-rw-r--r--   0        0        0      532 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/jest.config.js
+-rw-r--r--   0        0        0  1112618 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/package-lock.json
+-rw-r--r--   0        0        0     3027 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/package.json
+-rw-r--r--   0        0        0      126 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/pytest.ini
+-rw-r--r--   0        0        0      140 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/readthedocs.yml
+-rw-r--r--   0        0        0       92 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/setup.py
+-rw-r--r--   0        0        0       97 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/tsconfig.eslint.json
+-rw-r--r--   0        0        0      589 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/tsconfig.json
+-rw-r--r--   0        0        0     2250 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/webpack.config.js
+-rw-r--r--   0        0        0   423389 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/yarn.lock
+-rw-r--r--   0        0        0     8694 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/css/video.css
+-rw-r--r--   0        0        0       74 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/css/widget.css
+-rw-r--r--   0        0        0      611 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/Makefile
+-rw-r--r--   0        0        0      170 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/environment.yml
+-rwxr-xr-x   0        0        0      781 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/make.bat
+-rw-r--r--   0        0        0     6334 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/conf.py
+-rw-r--r--   0        0        0      821 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/develop-install.rst
+-rw-r--r--   0        0        0      656 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/index.rst
+-rw-r--r--   0        0        0     1011 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/installing.rst
+-rw-r--r--   0        0        0      109 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/introduction.rst
+-rw-r--r--   0        0        0      120 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/_static/helper.js
+-rw-r--r--   0        0        0      385 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/examples/index.rst
+-rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/docs/source/examples/introduction.nblink
+-rw-r--r--   0        0        0     9734 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/examples/introduction.ipynb
+-rw-r--r--   0        0        0     1940 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/__init__.py
+-rw-r--r--   0        0        0      246 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/_frontend.py
+-rw-r--r--   0        0        0      695 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/_version.py
+-rw-r--r--   0        0        0     3540 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/common.py
+-rw-r--r--   0        0        0    49929 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/recorder.py
+-rw-r--r--   0        0        0    30444 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/webcam.py
+-rw-r--r--   0        0        0    20719 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/build_log.json
+-rw-r--r--   0        0        0     3144 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/package.json
+-rw-r--r--   0        0        0     1331 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js
+-rw-r--r--   0        0        0     1304 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js.map
+-rw-r--r--   0        0        0     3514 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js
+-rw-r--r--   0        0        0     3827 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js.map
+-rw-r--r--   0        0        0   148414 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js
+-rw-r--r--   0        0        0   171396 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js.map
+-rw-r--r--   0        0        0   148312 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js
+-rw-r--r--   0        0        0   171280 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js.map
+-rw-r--r--   0        0        0   148342 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.6d987905f923e46131a3.js
+-rw-r--r--   0        0        0   171317 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.6d987905f923e46131a3.js.map
+-rw-r--r--   0        0        0   148482 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.7a3d4d0be8cc612a307a.js
+-rw-r--r--   0        0        0   171471 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.7a3d4d0be8cc612a307a.js.map
+-rw-r--r--   0        0        0   148389 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.8c4e4e3e5f01476b92ce.js
+-rw-r--r--   0        0        0   171371 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.8c4e4e3e5f01476b92ce.js.map
+-rw-r--r--   0        0        0   148290 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.a040a2f3858bd9db8237.js
+-rw-r--r--   0        0        0   171251 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.a040a2f3858bd9db8237.js.map
+-rw-r--r--   0        0        0   148574 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.bee145437cd81aad24f9.js
+-rw-r--r--   0        0        0   171570 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.bee145437cd81aad24f9.js.map
+-rw-r--r--   0        0        0   148574 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.d9afb47ed94251c5ea55.js
+-rw-r--r--   0        0        0   171570 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.d9afb47ed94251c5ea55.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.24ce354e1bd94e69211d.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.33601f351ee2e9c8c22a.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.5b470e48e56a617973b6.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.7cc83670f9d33b086433.js.map
+-rw-r--r--   0        0        0    28267 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.90f2b2dbfce5b0361bf7.js
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.90f2b2dbfce5b0361bf7.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.a34aeb0b6ea8ab641d82.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.be18ac7ea8cd44c23aa1.js.map
+-rw-r--r--   0        0        0    26996 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.db714db7aa42b7dbe196.js.map
+-rw-r--r--   0        0        0      118 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/style.js
+-rw-r--r--   0        0        0  1407322 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/vendors-node_modules_d3_src_index_js.c640e379b3e18688cd74.js
+-rw-r--r--   0        0        0   925794 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/vendors-node_modules_d3_src_index_js.c640e379b3e18688cd74.js.map
+-rw-r--r--   0        0        0    32928 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js
+-rw-r--r--   0        0        0    39913 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js.map
+-rw-r--r--   0        0        0      408 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/nbextension/extension.js
+-rw-r--r--   0        0        0     3614 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/nbextension/index.js
+-rw-r--r--   0        0        0     2254 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/nbextension/index.js.map
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/tests/__init__.py
+-rw-r--r--   0        0        0     1411 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/tests/conftest.py
+-rw-r--r--   0        0        0      462 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/tests/test_nbextension_path.py
+-rw-r--r--   0        0        0      275 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/ipywebcam/tests/test_webcam.py
+-rw-r--r--   0        0        0     1591 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/charts.ts
+-rw-r--r--   0        0        0     3661 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/common.ts
+-rw-r--r--   0        0        0      617 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/extension.ts
+-rw-r--r--   0        0        0      173 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/index.ts
+-rw-r--r--   0        0        0     1115 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/plugin.ts
+-rw-r--r--   0        0        0    12059 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/range.ts
+-rw-r--r--   0        0        0    12080 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/recorder.ts
+-rw-r--r--   0        0        0      601 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/types.ts
+-rw-r--r--   0        0        0     1352 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/utils.ts
+-rw-r--r--   0        0        0      573 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/version.ts
+-rw-r--r--   0        0        0    52371 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/video.ts
+-rw-r--r--   0        0        0    13644 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/webcam.ts
+-rw-r--r--   0        0        0     5139 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/webrtc.ts
+-rw-r--r--   0        0        0      122 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/widgets.ts
+-rw-r--r--   0        0        0      822 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/__tests__/index.spec.ts
+-rw-r--r--   0        0        0     2909 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/src/__tests__/utils.ts
+-rw-r--r--   0        0        0     1988 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/.gitignore
+-rw-r--r--   0        0        0     1498 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/LICENSE.txt
+-rw-r--r--   0        0        0     2391 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/README.md
+-rw-r--r--   0        0        0     3125 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/pyproject.toml
+-rw-r--r--   0        0        0     5607 2020-02-02 00:00:00.000000 ipywebcam-0.1.9.dev0/PKG-INFO
```

### Comparing `ipywebcam-0.1.8.dev0/.eslintrc.js` & `ipywebcam-0.1.9.dev0/.eslintrc.js`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/MANIFEST.in` & `ipywebcam-0.1.9.dev0/MANIFEST.in`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/jest.config.js` & `ipywebcam-0.1.9.dev0/jest.config.js`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/package-lock.json` & `ipywebcam-0.1.9.dev0/package-lock.json`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/package.json` & `ipywebcam-0.1.9.dev0/package.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9572916666666667%*

 * *Differences: {"'dependencies'": "{'d3': '^7.8.2'}",*

 * * "'devDependencies'": "{'@types/d3': '^7.4.0'}",*

 * * "'version'": "'0.1.9'"}*

```diff
@@ -4,24 +4,26 @@
         "name": "Xiaojing Chen"
     },
     "bugs": {
         "url": "https://github.com/vipcxj/ipywebcam/issues"
     },
     "dependencies": {
         "@jupyter-widgets/base": "^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6",
+        "d3": "^7.8.2",
         "lru-cache": "^7.14.1"
     },
     "description": "A Custom Jupyter Widget Library for Web Camera using WebRTC",
     "devDependencies": {
         "@babel/core": "^7.5.0",
         "@babel/preset-env": "^7.5.0",
         "@jupyter-widgets/base-manager": "^1.0.2",
         "@jupyterlab/builder": "^3.0.0",
         "@lumino/application": "^1.6.0",
         "@lumino/widgets": "^1.6.0",
+        "@types/d3": "^7.4.0",
         "@types/jest": "^26.0.0",
         "@types/webpack-env": "^1.13.6",
         "@typescript-eslint/eslint-plugin": "^3.6.0",
         "@typescript-eslint/parser": "^3.6.0",
         "acorn": "^7.2.0",
         "css-loader": "^3.2.0",
         "eslint": "^7.4.0",
@@ -88,9 +90,9 @@
         "test": "jest",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.1.8"
+    "version": "0.1.9"
 }
```

### Comparing `ipywebcam-0.1.8.dev0/tsconfig.json` & `ipywebcam-0.1.9.dev0/tsconfig.json`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/webpack.config.js` & `ipywebcam-0.1.9.dev0/webpack.config.js`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/yarn.lock` & `ipywebcam-0.1.9.dev0/yarn.lock`

 * *Files 8% similar despite different names*

```diff
@@ -1600,14 +1600,224 @@
   version "1.4.14"
   resolved "https://registry.npmmirror.com/@types/backbone/-/backbone-1.4.14.tgz#4b71f0c25d89cfa9a10b18042f0b03d35a53364c"
   integrity sha512-85ldQ99fiYTJFBlZuAJRaCdvTZKZ2p1fSs3fVf+6Ub6k1X0g0hNJ0qJ/2FOByyyAQYLtbEz3shX5taKQfBKBDw==
   dependencies:
     "@types/jquery" "*"
     "@types/underscore" "*"
 
+"@types/d3-array@*":
+  version "3.0.4"
+  resolved "https://registry.npmmirror.com/@types/d3-array/-/d3-array-3.0.4.tgz#44eebe40be57476cad6a0cd6a85b0f57d54185a2"
+  integrity sha512-nwvEkG9vYOc0Ic7G7kwgviY4AQlTfYGIZ0fqB7CQHXGyYM6nO7kJh5EguSNA3jfh4rq7Sb7eMVq8isuvg2/miQ==
+
+"@types/d3-axis@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-axis/-/d3-axis-3.0.2.tgz#96e11d51256baf5bdb2fa73a17d302993e79df07"
+  integrity sha512-uGC7DBh0TZrU/LY43Fd8Qr+2ja1FKmH07q2FoZFHo1eYl8aj87GhfVoY1saJVJiq24rp1+wpI6BvQJMKgQm8oA==
+  dependencies:
+    "@types/d3-selection" "*"
+
+"@types/d3-brush@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-brush/-/d3-brush-3.0.2.tgz#a610aad5a1e76c375be63e11c5eee1ed9fd2fb40"
+  integrity sha512-2TEm8KzUG3N7z0TrSKPmbxByBx54M+S9lHoP2J55QuLU0VSQ9mE96EJSAOVNEqd1bbynMjeTS9VHmz8/bSw8rA==
+  dependencies:
+    "@types/d3-selection" "*"
+
+"@types/d3-chord@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-chord/-/d3-chord-3.0.2.tgz#cf6f05ad2d8faaad524e9e6f454b4fd06b200930"
+  integrity sha512-abT/iLHD3sGZwqMTX1TYCMEulr+wBd0SzyOQnjYNLp7sngdOHYtNkMRI5v3w5thoN+BWtlHVDx2Osvq6fxhZWw==
+
+"@types/d3-color@*":
+  version "3.1.0"
+  resolved "https://registry.npmmirror.com/@types/d3-color/-/d3-color-3.1.0.tgz#6594da178ded6c7c3842f3cc0ac84b156f12f2d4"
+  integrity sha512-HKuicPHJuvPgCD+np6Se9MQvS6OCbJmOjGvylzMJRlDwUXjKTTXs6Pwgk79O09Vj/ho3u1ofXnhFOaEWWPrlwA==
+
+"@types/d3-contour@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-contour/-/d3-contour-3.0.2.tgz#d8a0e4d12ec14f7d2bb6e59f3fbc1a527457d0b2"
+  integrity sha512-k6/bGDoAGJZnZWaKzeB+9glgXCYGvh6YlluxzBREiVo8f/X2vpTEdgPy9DN7Z2i42PZOZ4JDhVdlTSTSkLDPlQ==
+  dependencies:
+    "@types/d3-array" "*"
+    "@types/geojson" "*"
+
+"@types/d3-delaunay@*":
+  version "6.0.1"
+  resolved "https://registry.npmmirror.com/@types/d3-delaunay/-/d3-delaunay-6.0.1.tgz#006b7bd838baec1511270cb900bf4fc377bbbf41"
+  integrity sha512-tLxQ2sfT0p6sxdG75c6f/ekqxjyYR0+LwPrsO1mbC9YDBzPJhs2HbJJRrn8Ez1DBoHRo2yx7YEATI+8V1nGMnQ==
+
+"@types/d3-dispatch@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-dispatch/-/d3-dispatch-3.0.2.tgz#b2fa80bab3bcead68680766e966f59cd6cb9a69f"
+  integrity sha512-rxN6sHUXEZYCKV05MEh4z4WpPSqIw+aP7n9ZN6WYAAvZoEAghEK1WeVZMZcHRBwyaKflU43PCUAJNjFxCzPDjg==
+
+"@types/d3-drag@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-drag/-/d3-drag-3.0.2.tgz#5562da3e7b33d782c2c1f9e65c5e91bb01ee82cf"
+  integrity sha512-qmODKEDvyKWVHcWWCOVcuVcOwikLVsyc4q4EBJMREsoQnR2Qoc2cZQUyFUPgO9q4S3qdSqJKBsuefv+h0Qy+tw==
+  dependencies:
+    "@types/d3-selection" "*"
+
+"@types/d3-dsv@*":
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/@types/d3-dsv/-/d3-dsv-3.0.1.tgz#c51a3505cee42653454b74a00f8713dc3548c362"
+  integrity sha512-76pBHCMTvPLt44wFOieouXcGXWOF0AJCceUvaFkxSZEu4VDUdv93JfpMa6VGNFs01FHfuP4a5Ou68eRG1KBfTw==
+
+"@types/d3-ease@*":
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-ease/-/d3-ease-3.0.0.tgz#c29926f8b596f9dadaeca062a32a45365681eae0"
+  integrity sha512-aMo4eaAOijJjA6uU+GIeW018dvy9+oH5Y2VPPzjjfxevvGQ/oRDs+tfYC9b50Q4BygRR8yE2QCLsrT0WtAVseA==
+
+"@types/d3-fetch@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-fetch/-/d3-fetch-3.0.2.tgz#fe1f335243e07c9bd520c9a71756fed8330c54b1"
+  integrity sha512-gllwYWozWfbep16N9fByNBDTkJW/SyhH6SGRlXloR7WdtAaBui4plTP+gbUgiEot7vGw/ZZop1yDZlgXXSuzjA==
+  dependencies:
+    "@types/d3-dsv" "*"
+
+"@types/d3-force@*":
+  version "3.0.4"
+  resolved "https://registry.npmmirror.com/@types/d3-force/-/d3-force-3.0.4.tgz#2d50bd2b695f709797e1745644f6bc123e6e5f5a"
+  integrity sha512-q7xbVLrWcXvSBBEoadowIUJ7sRpS1yvgMWnzHJggFy5cUZBq2HZL5k/pBSm0GdYWS1vs5/EDwMjSKF55PDY4Aw==
+
+"@types/d3-format@*":
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/@types/d3-format/-/d3-format-3.0.1.tgz#194f1317a499edd7e58766f96735bdc0216bb89d"
+  integrity sha512-5KY70ifCCzorkLuIkDe0Z9YTf9RR2CjBX1iaJG+rgM/cPP+sO+q9YdQ9WdhQcgPj1EQiJ2/0+yUkkziTG6Lubg==
+
+"@types/d3-geo@*":
+  version "3.0.3"
+  resolved "https://registry.npmmirror.com/@types/d3-geo/-/d3-geo-3.0.3.tgz#535e5f24be13722964c52354301be09b752f5d6e"
+  integrity sha512-bK9uZJS3vuDCNeeXQ4z3u0E7OeJZXjUgzFdSOtNtMCJCLvDtWDwfpRVWlyt3y8EvRzI0ccOu9xlMVirawolSCw==
+  dependencies:
+    "@types/geojson" "*"
+
+"@types/d3-hierarchy@*":
+  version "3.1.2"
+  resolved "https://registry.npmmirror.com/@types/d3-hierarchy/-/d3-hierarchy-3.1.2.tgz#b3a446b5437faededb30ac32b7cc0486559ab1e2"
+  integrity sha512-9hjRTVoZjRFR6xo8igAJyNXQyPX6Aq++Nhb5ebrUF414dv4jr2MitM2fWiOY475wa3Za7TOS2Gh9fmqEhLTt0A==
+
+"@types/d3-interpolate@*":
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/@types/d3-interpolate/-/d3-interpolate-3.0.1.tgz#e7d17fa4a5830ad56fe22ce3b4fac8541a9572dc"
+  integrity sha512-jx5leotSeac3jr0RePOH1KdR9rISG91QIE4Q2PYTu4OymLTZfA3SrnURSLzKH48HmXVUru50b8nje4E79oQSQw==
+  dependencies:
+    "@types/d3-color" "*"
+
+"@types/d3-path@*":
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-path/-/d3-path-3.0.0.tgz#939e3a784ae4f80b1fde8098b91af1776ff1312b"
+  integrity sha512-0g/A+mZXgFkQxN3HniRDbXMN79K3CdTpLsevj+PXiTcb2hVyvkZUBg37StmgCQkaD84cUJ4uaDAWq7UJOQy2Tg==
+
+"@types/d3-polygon@*":
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-polygon/-/d3-polygon-3.0.0.tgz#5200a3fa793d7736fa104285fa19b0dbc2424b93"
+  integrity sha512-D49z4DyzTKXM0sGKVqiTDTYr+DHg/uxsiWDAkNrwXYuiZVd9o9wXZIo+YsHkifOiyBkmSWlEngHCQme54/hnHw==
+
+"@types/d3-quadtree@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-quadtree/-/d3-quadtree-3.0.2.tgz#433112a178eb7df123aab2ce11c67f51cafe8ff5"
+  integrity sha512-QNcK8Jguvc8lU+4OfeNx+qnVy7c0VrDJ+CCVFS9srBo2GL9Y18CnIxBdTF3v38flrGy5s1YggcoAiu6s4fLQIw==
+
+"@types/d3-random@*":
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/@types/d3-random/-/d3-random-3.0.1.tgz#5c8d42b36cd4c80b92e5626a252f994ca6bfc953"
+  integrity sha512-IIE6YTekGczpLYo/HehAy3JGF1ty7+usI97LqraNa8IiDur+L44d0VOjAvFQWJVdZOJHukUJw+ZdZBlgeUsHOQ==
+
+"@types/d3-scale-chromatic@*":
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-scale-chromatic/-/d3-scale-chromatic-3.0.0.tgz#103124777e8cdec85b20b51fd3397c682ee1e954"
+  integrity sha512-dsoJGEIShosKVRBZB0Vo3C8nqSDqVGujJU6tPznsBJxNJNwMF8utmS83nvCBKQYPpjCzaaHcrf66iTRpZosLPw==
+
+"@types/d3-scale@*":
+  version "4.0.3"
+  resolved "https://registry.npmmirror.com/@types/d3-scale/-/d3-scale-4.0.3.tgz#7a5780e934e52b6f63ad9c24b105e33dd58102b5"
+  integrity sha512-PATBiMCpvHJSMtZAMEhc2WyL+hnzarKzI6wAHYjhsonjWJYGq5BXTzQjv4l8m2jO183/4wZ90rKvSeT7o72xNQ==
+  dependencies:
+    "@types/d3-time" "*"
+
+"@types/d3-selection@*":
+  version "3.0.4"
+  resolved "https://registry.npmmirror.com/@types/d3-selection/-/d3-selection-3.0.4.tgz#923d7f8985718116de56f55307d26e5f00728dc5"
+  integrity sha512-ZeykX7286BCyMg9sH5fIAORyCB6hcATPSRQpN47jwBA2bMbAT0s+EvtDP5r1FZYJ95R8QoEE1CKJX+n0/M5Vhg==
+
+"@types/d3-shape@*":
+  version "3.1.1"
+  resolved "https://registry.npmmirror.com/@types/d3-shape/-/d3-shape-3.1.1.tgz#15cc497751dac31192d7aef4e67a8d2c62354b95"
+  integrity sha512-6Uh86YFF7LGg4PQkuO2oG6EMBRLuW9cbavUW46zkIO5kuS2PfTqo2o9SkgtQzguBHbLgNnU90UNsITpsX1My+A==
+  dependencies:
+    "@types/d3-path" "*"
+
+"@types/d3-time-format@*":
+  version "4.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-time-format/-/d3-time-format-4.0.0.tgz#ee7b6e798f8deb2d9640675f8811d0253aaa1946"
+  integrity sha512-yjfBUe6DJBsDin2BMIulhSHmr5qNR5Pxs17+oW4DoVPyVIXZ+m6bs7j1UVKP08Emv6jRmYrYqxYzO63mQxy1rw==
+
+"@types/d3-time@*":
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-time/-/d3-time-3.0.0.tgz#e1ac0f3e9e195135361fa1a1d62f795d87e6e819"
+  integrity sha512-sZLCdHvBUcNby1cB6Fd3ZBrABbjz3v1Vm90nysCQ6Vt7vd6e/h9Lt7SiJUoEX0l4Dzc7P5llKyhqSi1ycSf1Hg==
+
+"@types/d3-timer@*":
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/@types/d3-timer/-/d3-timer-3.0.0.tgz#e2505f1c21ec08bda8915238e397fb71d2fc54ce"
+  integrity sha512-HNB/9GHqu7Fo8AQiugyJbv6ZxYz58wef0esl4Mv828w1ZKpAshw/uFWVDUcIB9KKFeFKoxS3cHY07FFgtTRZ1g==
+
+"@types/d3-transition@*":
+  version "3.0.3"
+  resolved "https://registry.npmmirror.com/@types/d3-transition/-/d3-transition-3.0.3.tgz#d4ac37d08703fb039c87f92851a598ba77400402"
+  integrity sha512-/S90Od8Id1wgQNvIA8iFv9jRhCiZcGhPd2qX0bKF/PS+y0W5CrXKgIiELd2CvG1mlQrWK/qlYh3VxicqG1ZvgA==
+  dependencies:
+    "@types/d3-selection" "*"
+
+"@types/d3-zoom@*":
+  version "3.0.2"
+  resolved "https://registry.npmmirror.com/@types/d3-zoom/-/d3-zoom-3.0.2.tgz#067aa6a6ecbc75a78b753cc6f7a7f9f7e4e7d117"
+  integrity sha512-t09DDJVBI6AkM7N8kuPsnq/3d/ehtRKBN1xSiYjjMCgbiw6HM6Ged5VhvswmhprfKyGvzeTEL/4WBaK9llWvlA==
+  dependencies:
+    "@types/d3-interpolate" "*"
+    "@types/d3-selection" "*"
+
+"@types/d3@^7.4.0":
+  version "7.4.0"
+  resolved "https://registry.npmmirror.com/@types/d3/-/d3-7.4.0.tgz#fc5cac5b1756fc592a3cf1f3dc881bf08225f515"
+  integrity sha512-jIfNVK0ZlxcuRDKtRS/SypEyOQ6UHaFQBKv032X45VvxSJ6Yi5G9behy9h6tNTHTDGh5Vq+KbmBjUWLgY4meCA==
+  dependencies:
+    "@types/d3-array" "*"
+    "@types/d3-axis" "*"
+    "@types/d3-brush" "*"
+    "@types/d3-chord" "*"
+    "@types/d3-color" "*"
+    "@types/d3-contour" "*"
+    "@types/d3-delaunay" "*"
+    "@types/d3-dispatch" "*"
+    "@types/d3-drag" "*"
+    "@types/d3-dsv" "*"
+    "@types/d3-ease" "*"
+    "@types/d3-fetch" "*"
+    "@types/d3-force" "*"
+    "@types/d3-format" "*"
+    "@types/d3-geo" "*"
+    "@types/d3-hierarchy" "*"
+    "@types/d3-interpolate" "*"
+    "@types/d3-path" "*"
+    "@types/d3-polygon" "*"
+    "@types/d3-quadtree" "*"
+    "@types/d3-random" "*"
+    "@types/d3-scale" "*"
+    "@types/d3-scale-chromatic" "*"
+    "@types/d3-selection" "*"
+    "@types/d3-shape" "*"
+    "@types/d3-time" "*"
+    "@types/d3-time-format" "*"
+    "@types/d3-timer" "*"
+    "@types/d3-transition" "*"
+    "@types/d3-zoom" "*"
+
 "@types/eslint-scope@^3.7.3":
   version "3.7.4"
   resolved "https://registry.npmmirror.com/@types/eslint-scope/-/eslint-scope-3.7.4.tgz#37fc1223f0786c39627068a12e94d6e6fc61de16"
   integrity sha512-9K4zoImiZc3HlIp6AVUDE4CWYx22a+lhSZMYNpbjW04+YF0KWj4pJXnEMjdnFTiQibFFmElcsasJXDbdI/EPhA==
   dependencies:
     "@types/eslint" "*"
     "@types/estree" "*"
@@ -1631,14 +1841,19 @@
   integrity sha512-WulqXMDUTYAXCjZnk6JtIHPigp55cVtDgDrO2gHRwhyJto21+1zbVCtOYB2L1F9w4qCQ0rOGWBnBe0FNTiEJIQ==
 
 "@types/estree@^0.0.51":
   version "0.0.51"
   resolved "https://registry.npmmirror.com/@types/estree/-/estree-0.0.51.tgz#cfd70924a25a3fd32b218e5e420e6897e1ac4f40"
   integrity sha512-CuPgU6f3eT/XgKKPqKd/gLZV1Xmvf1a2R5POBOGQa6uv82xpls89HU5zKeVoyR8XzHd1RGNOlQlvUe3CFkjWNQ==
 
+"@types/geojson@*":
+  version "7946.0.10"
+  resolved "https://registry.npmmirror.com/@types/geojson/-/geojson-7946.0.10.tgz#6dfbf5ea17142f7f9a043809f1cd4c448cb68249"
+  integrity sha512-Nmh0K3iWQJzniTuPRcJn5hxXkfB1T1pgB89SBig5PlJQU5yocazeu4jATJlaA0GYFKWMqDdvYemoSnF2pXgLVA==
+
 "@types/glob@^7.1.1":
   version "7.2.0"
   resolved "https://registry.npmmirror.com/@types/glob/-/glob-7.2.0.tgz#bc1b5bf3aa92f25bd5dd39f35c57361bdce5b2eb"
   integrity sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==
   dependencies:
     "@types/minimatch" "*"
     "@types/node" "*"
@@ -2752,24 +2967,24 @@
 combined-stream@^1.0.6, combined-stream@^1.0.8, combined-stream@~1.0.6:
   version "1.0.8"
   resolved "https://registry.npmmirror.com/combined-stream/-/combined-stream-1.0.8.tgz#c3d45a8b34fd730631a110a8a2520682b31d5a7f"
   integrity sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==
   dependencies:
     delayed-stream "~1.0.0"
 
+commander@7, commander@^7.0.0:
+  version "7.2.0"
+  resolved "https://registry.npmmirror.com/commander/-/commander-7.2.0.tgz#a36cb57d0b501ce108e4d20559a150a391d97ab7"
+  integrity sha512-QrWXB+ZQSVPmIWIhtEO9H+gwHaMGYiF5ChvoJ+K9ZGHG/sVsa6yiesAD1GC/x46sET00Xlwo1u49RVVVzvcSkw==
+
 commander@^2.20.0:
   version "2.20.3"
   resolved "https://registry.npmmirror.com/commander/-/commander-2.20.3.tgz#fd485e84c03eb4881c20722ba48035e8531aeb33"
   integrity sha512-GpVkmM8vF2vQUkj2LvZmD35JxeJOLCwJ9cUkugyk2nuhbv3+mJvpLYYt+0+USMxE+oj+ey/lJEnhZw75x/OMcQ==
 
-commander@^7.0.0:
-  version "7.2.0"
-  resolved "https://registry.npmmirror.com/commander/-/commander-7.2.0.tgz#a36cb57d0b501ce108e4d20559a150a391d97ab7"
-  integrity sha512-QrWXB+ZQSVPmIWIhtEO9H+gwHaMGYiF5ChvoJ+K9ZGHG/sVsa6yiesAD1GC/x46sET00Xlwo1u49RVVVzvcSkw==
-
 commander@~6.0.0:
   version "6.0.0"
   resolved "https://registry.npmmirror.com/commander/-/commander-6.0.0.tgz#2b270da94f8fb9014455312f829a1129dbf8887e"
   integrity sha512-s7EA+hDtTYNhuXkTlhqew4txMZVdszBmKWSPEMxGr8ru8JXR7bLUFIAtPhcSuFdJQ0ILMxnJi8GkQL0yvDy/YA==
 
 commondir@^1.0.1:
   version "1.0.1"
@@ -2949,14 +3164,258 @@
 cssstyle@^2.3.0:
   version "2.3.0"
   resolved "https://registry.npmmirror.com/cssstyle/-/cssstyle-2.3.0.tgz#ff665a0ddbdc31864b09647f34163443d90b0852"
   integrity sha512-AZL67abkUzIuvcHqk7c09cezpGNcxUxU4Ioi/05xHk4DQeTkWmGYftIE6ctU6AEt+Gn4n1lDStOtj7FKycP71A==
   dependencies:
     cssom "~0.3.6"
 
+"d3-array@2 - 3", "d3-array@2.10.0 - 3", "d3-array@2.5.0 - 3", d3-array@3, d3-array@^3.2.0:
+  version "3.2.2"
+  resolved "https://registry.npmmirror.com/d3-array/-/d3-array-3.2.2.tgz#f8ac4705c5b06914a7e0025bbf8d5f1513f6a86e"
+  integrity sha512-yEEyEAbDrF8C6Ob2myOBLjwBLck1Z89jMGFee0oPsn95GqjerpaOA4ch+vc2l0FNFFwMD5N7OCSEN5eAlsUbgQ==
+  dependencies:
+    internmap "1 - 2"
+
+d3-axis@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-axis/-/d3-axis-3.0.0.tgz#c42a4a13e8131d637b745fc2973824cfeaf93322"
+  integrity sha512-IH5tgjV4jE/GhHkRV0HiVYPDtvfjHQlQfJHs0usq7M30XcSBvOotpmH1IgkcXsO/5gEQZD43B//fc7SRT5S+xw==
+
+d3-brush@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-brush/-/d3-brush-3.0.0.tgz#6f767c4ed8dcb79de7ede3e1c0f89e63ef64d31c"
+  integrity sha512-ALnjWlVYkXsVIGlOsuWH1+3udkYFI48Ljihfnh8FZPF2QS9o+PzGLBslO0PjzVoHLZ2KCVgAM8NVkXPJB2aNnQ==
+  dependencies:
+    d3-dispatch "1 - 3"
+    d3-drag "2 - 3"
+    d3-interpolate "1 - 3"
+    d3-selection "3"
+    d3-transition "3"
+
+d3-chord@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-chord/-/d3-chord-3.0.1.tgz#d156d61f485fce8327e6abf339cb41d8cbba6966"
+  integrity sha512-VE5S6TNa+j8msksl7HwjxMHDM2yNK3XCkusIlpX5kwauBfXuyLAtNg9jCp/iHH61tgI4sb6R/EIMWCqEIdjT/g==
+  dependencies:
+    d3-path "1 - 3"
+
+"d3-color@1 - 3", d3-color@3:
+  version "3.1.0"
+  resolved "https://registry.npmmirror.com/d3-color/-/d3-color-3.1.0.tgz#395b2833dfac71507f12ac2f7af23bf819de24e2"
+  integrity sha512-zg/chbXyeBtMQ1LbD/WSoW2DpC3I0mpmPdW+ynRTj/x2DAWYrIY7qeZIHidozwV24m4iavr15lNwIwLxRmOxhA==
+
+d3-contour@4:
+  version "4.0.2"
+  resolved "https://registry.npmmirror.com/d3-contour/-/d3-contour-4.0.2.tgz#bb92063bc8c5663acb2422f99c73cbb6c6ae3bcc"
+  integrity sha512-4EzFTRIikzs47RGmdxbeUvLWtGedDUNkTcmzoeyg4sP/dvCexO47AaQL7VKy/gul85TOxw+IBgA8US2xwbToNA==
+  dependencies:
+    d3-array "^3.2.0"
+
+d3-delaunay@6:
+  version "6.0.2"
+  resolved "https://registry.npmmirror.com/d3-delaunay/-/d3-delaunay-6.0.2.tgz#7fd3717ad0eade2fc9939f4260acfb503f984e92"
+  integrity sha512-IMLNldruDQScrcfT+MWnazhHbDJhcRJyOEBAJfwQnHle1RPh6WDuLvxNArUju2VSMSUuKlY5BGHRJ2cYyoFLQQ==
+  dependencies:
+    delaunator "5"
+
+"d3-dispatch@1 - 3", d3-dispatch@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-dispatch/-/d3-dispatch-3.0.1.tgz#5fc75284e9c2375c36c839411a0cf550cbfc4d5e"
+  integrity sha512-rzUyPU/S7rwUflMyLc1ETDeBj0NRuHKKAcvukozwhshr6g6c5d8zh4c2gQjY2bZ0dXeGLWc1PF174P2tVvKhfg==
+
+"d3-drag@2 - 3", d3-drag@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-drag/-/d3-drag-3.0.0.tgz#994aae9cd23c719f53b5e10e3a0a6108c69607ba"
+  integrity sha512-pWbUJLdETVA8lQNJecMxoXfH6x+mO2UQo8rSmZ+QqxcbyA3hfeprFgIT//HW2nlHChWeIIMwS2Fq+gEARkhTkg==
+  dependencies:
+    d3-dispatch "1 - 3"
+    d3-selection "3"
+
+"d3-dsv@1 - 3", d3-dsv@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-dsv/-/d3-dsv-3.0.1.tgz#c63af978f4d6a0d084a52a673922be2160789b73"
+  integrity sha512-UG6OvdI5afDIFP9w4G0mNq50dSOsXHJaRE8arAS5o9ApWnIElp8GZw1Dun8vP8OyHOZ/QJUKUJwxiiCCnUwm+Q==
+  dependencies:
+    commander "7"
+    iconv-lite "0.6"
+    rw "1"
+
+"d3-ease@1 - 3", d3-ease@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-ease/-/d3-ease-3.0.1.tgz#9658ac38a2140d59d346160f1f6c30fda0bd12f4"
+  integrity sha512-wR/XK3D3XcLIZwpbvQwQ5fK+8Ykds1ip7A2Txe0yxncXSdq1L9skcG7blcedkOX+ZcgxGAmLX1FrRGbADwzi0w==
+
+d3-fetch@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-fetch/-/d3-fetch-3.0.1.tgz#83141bff9856a0edb5e38de89cdcfe63d0a60a22"
+  integrity sha512-kpkQIM20n3oLVBKGg6oHrUchHM3xODkTzjMoj7aWQFq5QEM+R6E4WkzT5+tojDY7yjez8KgCBRoj4aEr99Fdqw==
+  dependencies:
+    d3-dsv "1 - 3"
+
+d3-force@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-force/-/d3-force-3.0.0.tgz#3e2ba1a61e70888fe3d9194e30d6d14eece155c4"
+  integrity sha512-zxV/SsA+U4yte8051P4ECydjD/S+qeYtnaIyAs9tgHCqfguma/aAQDjo85A9Z6EKhBirHRJHXIgJUlffT4wdLg==
+  dependencies:
+    d3-dispatch "1 - 3"
+    d3-quadtree "1 - 3"
+    d3-timer "1 - 3"
+
+"d3-format@1 - 3", d3-format@3:
+  version "3.1.0"
+  resolved "https://registry.npmmirror.com/d3-format/-/d3-format-3.1.0.tgz#9260e23a28ea5cb109e93b21a06e24e2ebd55641"
+  integrity sha512-YyUI6AEuY/Wpt8KWLgZHsIU86atmikuoOmCfommt0LYHiQSPjvX2AcFc38PX0CBpr2RCyZhjex+NS/LPOv6YqA==
+
+d3-geo@3:
+  version "3.1.0"
+  resolved "https://registry.npmmirror.com/d3-geo/-/d3-geo-3.1.0.tgz#74fd54e1f4cebd5185ac2039217a98d39b0a4c0e"
+  integrity sha512-JEo5HxXDdDYXCaWdwLRt79y7giK8SbhZJbFWXqbRTolCHFI5jRqteLzCsq51NKbUoX0PjBVSohxrx+NoOUujYA==
+  dependencies:
+    d3-array "2.5.0 - 3"
+
+d3-hierarchy@3:
+  version "3.1.2"
+  resolved "https://registry.npmmirror.com/d3-hierarchy/-/d3-hierarchy-3.1.2.tgz#b01cd42c1eed3d46db77a5966cf726f8c09160c6"
+  integrity sha512-FX/9frcub54beBdugHjDCdikxThEqjnR93Qt7PvQTOHxyiNCAlvMrHhclk3cD5VeAaq9fxmfRp+CnWw9rEMBuA==
+
+"d3-interpolate@1 - 3", "d3-interpolate@1.2.0 - 3", d3-interpolate@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-interpolate/-/d3-interpolate-3.0.1.tgz#3c47aa5b32c5b3dfb56ef3fd4342078a632b400d"
+  integrity sha512-3bYs1rOD33uo8aqJfKP3JWPAibgw8Zm2+L9vBKEHJ2Rg+viTR7o5Mmv5mZcieN+FRYaAOWX5SJATX6k1PWz72g==
+  dependencies:
+    d3-color "1 - 3"
+
+"d3-path@1 - 3", d3-path@3, d3-path@^3.1.0:
+  version "3.1.0"
+  resolved "https://registry.npmmirror.com/d3-path/-/d3-path-3.1.0.tgz#22df939032fb5a71ae8b1800d61ddb7851c42526"
+  integrity sha512-p3KP5HCf/bvjBSSKuXid6Zqijx7wIfNW+J/maPs+iwR35at5JCbLUT0LzF1cnjbCHWhqzQTIN2Jpe8pRebIEFQ==
+
+d3-polygon@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-polygon/-/d3-polygon-3.0.1.tgz#0b45d3dd1c48a29c8e057e6135693ec80bf16398"
+  integrity sha512-3vbA7vXYwfe1SYhED++fPUQlWSYTTGmFmQiany/gdbiWgU/iEyQzyymwL9SkJjFFuCS4902BSzewVGsHHmHtXg==
+
+"d3-quadtree@1 - 3", d3-quadtree@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-quadtree/-/d3-quadtree-3.0.1.tgz#6dca3e8be2b393c9a9d514dabbd80a92deef1a4f"
+  integrity sha512-04xDrxQTDTCFwP5H6hRhsRcb9xxv2RzkcsygFzmkSIOJy3PeRJP7sNk3VRIbKXcog561P9oU0/rVH6vDROAgUw==
+
+d3-random@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-random/-/d3-random-3.0.1.tgz#d4926378d333d9c0bfd1e6fa0194d30aebaa20f4"
+  integrity sha512-FXMe9GfxTxqd5D6jFsQ+DJ8BJS4E/fT5mqqdjovykEB2oFbTMDVdg1MGFxfQW+FBOGoB++k8swBrgwSHT1cUXQ==
+
+d3-scale-chromatic@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-scale-chromatic/-/d3-scale-chromatic-3.0.0.tgz#15b4ceb8ca2bb0dcb6d1a641ee03d59c3b62376a"
+  integrity sha512-Lx9thtxAKrO2Pq6OO2Ua474opeziKr279P/TKZsMAhYyNDD3EnCffdbgeSYN5O7m2ByQsxtuP2CSDczNUIZ22g==
+  dependencies:
+    d3-color "1 - 3"
+    d3-interpolate "1 - 3"
+
+d3-scale@4:
+  version "4.0.2"
+  resolved "https://registry.npmmirror.com/d3-scale/-/d3-scale-4.0.2.tgz#82b38e8e8ff7080764f8dcec77bd4be393689396"
+  integrity sha512-GZW464g1SH7ag3Y7hXjf8RoUuAFIqklOAq3MRl4OaWabTFJY9PN/E1YklhXLh+OQ3fM9yS2nOkCoS+WLZ6kvxQ==
+  dependencies:
+    d3-array "2.10.0 - 3"
+    d3-format "1 - 3"
+    d3-interpolate "1.2.0 - 3"
+    d3-time "2.1.1 - 3"
+    d3-time-format "2 - 4"
+
+"d3-selection@2 - 3", d3-selection@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-selection/-/d3-selection-3.0.0.tgz#c25338207efa72cc5b9bd1458a1a41901f1e1b31"
+  integrity sha512-fmTRWbNMmsmWq6xJV8D19U/gw/bwrHfNXxrIN+HfZgnzqTHp9jOmKMhsTUjXOJnZOdZY9Q28y4yebKzqDKlxlQ==
+
+d3-shape@3:
+  version "3.2.0"
+  resolved "https://registry.npmmirror.com/d3-shape/-/d3-shape-3.2.0.tgz#a1a839cbd9ba45f28674c69d7f855bcf91dfc6a5"
+  integrity sha512-SaLBuwGm3MOViRq2ABk3eLoxwZELpH6zhl3FbAoJ7Vm1gofKx6El1Ib5z23NUEhF9AsGl7y+dzLe5Cw2AArGTA==
+  dependencies:
+    d3-path "^3.1.0"
+
+"d3-time-format@2 - 4", d3-time-format@4:
+  version "4.1.0"
+  resolved "https://registry.npmmirror.com/d3-time-format/-/d3-time-format-4.1.0.tgz#7ab5257a5041d11ecb4fe70a5c7d16a195bb408a"
+  integrity sha512-dJxPBlzC7NugB2PDLwo9Q8JiTR3M3e4/XANkreKSUxF8vvXKqm1Yfq4Q5dl8budlunRVlUUaDUgFt7eA8D6NLg==
+  dependencies:
+    d3-time "1 - 3"
+
+"d3-time@1 - 3", "d3-time@2.1.1 - 3", d3-time@3:
+  version "3.1.0"
+  resolved "https://registry.npmmirror.com/d3-time/-/d3-time-3.1.0.tgz#9310db56e992e3c0175e1ef385e545e48a9bb5c7"
+  integrity sha512-VqKjzBLejbSMT4IgbmVgDjpkYrNWUYJnbCGo874u7MMKIWsILRX+OpX/gTk8MqjpT1A/c6HY2dCA77ZN0lkQ2Q==
+  dependencies:
+    d3-array "2 - 3"
+
+"d3-timer@1 - 3", d3-timer@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-timer/-/d3-timer-3.0.1.tgz#6284d2a2708285b1abb7e201eda4380af35e63b0"
+  integrity sha512-ndfJ/JxxMd3nw31uyKoY2naivF+r29V+Lc0svZxe1JvvIRmi8hUsrMvdOwgS1o6uBHmiz91geQ0ylPP0aj1VUA==
+
+"d3-transition@2 - 3", d3-transition@3:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/d3-transition/-/d3-transition-3.0.1.tgz#6869fdde1448868077fdd5989200cb61b2a1645f"
+  integrity sha512-ApKvfjsSR6tg06xrL434C0WydLr7JewBB3V+/39RMHsaXTOG0zmt/OAXeng5M5LBm0ojmxJrpomQVZ1aPvBL4w==
+  dependencies:
+    d3-color "1 - 3"
+    d3-dispatch "1 - 3"
+    d3-ease "1 - 3"
+    d3-interpolate "1 - 3"
+    d3-timer "1 - 3"
+
+d3-zoom@3:
+  version "3.0.0"
+  resolved "https://registry.npmmirror.com/d3-zoom/-/d3-zoom-3.0.0.tgz#d13f4165c73217ffeaa54295cd6969b3e7aee8f3"
+  integrity sha512-b8AmV3kfQaqWAuacbPuNbL6vahnOJflOhexLzMMNLga62+/nh0JzvJ0aO/5a5MVgUFGS7Hu1P9P03o3fJkDCyw==
+  dependencies:
+    d3-dispatch "1 - 3"
+    d3-drag "2 - 3"
+    d3-interpolate "1 - 3"
+    d3-selection "2 - 3"
+    d3-transition "2 - 3"
+
+d3@^7.8.2:
+  version "7.8.2"
+  resolved "https://registry.npmmirror.com/d3/-/d3-7.8.2.tgz#2bdb3c178d095ae03b107a18837ae049838e372d"
+  integrity sha512-WXty7qOGSHb7HR7CfOzwN1Gw04MUOzN8qh9ZUsvwycIMb4DYMpY9xczZ6jUorGtO6bR9BPMPaueIKwiDxu9uiQ==
+  dependencies:
+    d3-array "3"
+    d3-axis "3"
+    d3-brush "3"
+    d3-chord "3"
+    d3-color "3"
+    d3-contour "4"
+    d3-delaunay "6"
+    d3-dispatch "3"
+    d3-drag "3"
+    d3-dsv "3"
+    d3-ease "3"
+    d3-fetch "3"
+    d3-force "3"
+    d3-format "3"
+    d3-geo "3"
+    d3-hierarchy "3"
+    d3-interpolate "3"
+    d3-path "3"
+    d3-polygon "3"
+    d3-quadtree "3"
+    d3-random "3"
+    d3-scale "4"
+    d3-scale-chromatic "3"
+    d3-selection "3"
+    d3-shape "3"
+    d3-time "3"
+    d3-time-format "4"
+    d3-timer "3"
+    d3-transition "3"
+    d3-zoom "3"
+
 d@1, d@^1.0.1:
   version "1.0.1"
   resolved "https://registry.npmmirror.com/d/-/d-1.0.1.tgz#8698095372d58dbee346ffd0c7093f99f8f9eb5a"
   integrity sha512-m62ShEObQ39CfralilEQRjH6oAMtNCV1xJyEx5LpRYUVN+EviphDgUc/F3hnYbADmkiNs67Y+3ylmlG7Lnu+FA==
   dependencies:
     es5-ext "^0.10.50"
     type "^1.0.1"
@@ -3071,14 +3530,21 @@
   version "2.0.2"
   resolved "https://registry.npmmirror.com/define-property/-/define-property-2.0.2.tgz#d459689e8d654ba77e02a817f8710d702cb16e9d"
   integrity sha512-jwK2UV4cnPpbcG7+VRARKTZPUWowwXA8bzH5NP6ud0oeAxyYPuGZUAC7hMugpCdz4BeSZl2Dl9k66CHJ/46ZYQ==
   dependencies:
     is-descriptor "^1.0.2"
     isobject "^3.0.1"
 
+delaunator@5:
+  version "5.0.0"
+  resolved "https://registry.npmmirror.com/delaunator/-/delaunator-5.0.0.tgz#60f052b28bd91c9b4566850ebf7756efe821d81b"
+  integrity sha512-AyLvtyJdbv/U1GkiS6gUUzclRoAY4Gs75qkMygJJhU75LW4DNuSF2RMzpxs9jw9Oz1BobHjTdkG3zdP55VxAqw==
+  dependencies:
+    robust-predicates "^3.0.0"
+
 delayed-stream@~1.0.0:
   version "1.0.0"
   resolved "https://registry.npmmirror.com/delayed-stream/-/delayed-stream-1.0.0.tgz#df3ae199acadfb7d440aaae0b29e2272b24ec619"
   integrity sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==
 
 depd@2.0.0, depd@~2.0.0:
   version "2.0.0"
@@ -4366,15 +4832,15 @@
 iconv-lite@0.4.24, iconv-lite@^0.4.24:
   version "0.4.24"
   resolved "https://registry.npmmirror.com/iconv-lite/-/iconv-lite-0.4.24.tgz#2022b4b25fbddc21d2f524974a474aafe733908b"
   integrity sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==
   dependencies:
     safer-buffer ">= 2.1.2 < 3"
 
-iconv-lite@^0.6.2:
+iconv-lite@0.6, iconv-lite@^0.6.2:
   version "0.6.3"
   resolved "https://registry.npmmirror.com/iconv-lite/-/iconv-lite-0.6.3.tgz#a52f80bf38da1952eb5c681790719871a1a72501"
   integrity sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==
   dependencies:
     safer-buffer ">= 2.1.2 < 3.0.0"
 
 icss-utils@^4.0.0, icss-utils@^4.1.1:
@@ -4479,14 +4945,19 @@
   resolved "https://registry.npmmirror.com/internal-slot/-/internal-slot-1.0.4.tgz#8551e7baf74a7a6ba5f749cfb16aa60722f0d6f3"
   integrity sha512-tA8URYccNzMo94s5MQZgH8NB/XTa6HsOo0MLfXTKKEnHVVdegzaQoFZ7Jp44bdvLvY2waT5dc+j5ICEswhi7UQ==
   dependencies:
     get-intrinsic "^1.1.3"
     has "^1.0.3"
     side-channel "^1.0.4"
 
+"internmap@1 - 2":
+  version "2.0.3"
+  resolved "https://registry.npmmirror.com/internmap/-/internmap-2.0.3.tgz#6685f23755e43c524e251d29cbc97248e3061009"
+  integrity sha512-5Hh7Y1wQbvY5ooGgPbDaL5iYLAPzMTUrjMulskHLH6wnv/A+1q5rgEaiuqEjB+oxGXIVZs1FF+R/KPN3ZSQYYg==
+
 interpret@^2.2.0:
   version "2.2.0"
   resolved "https://registry.npmmirror.com/interpret/-/interpret-2.2.0.tgz#1a78a0b5965c40a5416d007ad6f50ad27c417df9"
   integrity sha512-Ju0Bz/cEia55xDwUWEa8+olFpCiQoypjnQySseKtmjNrnps3P+xfpUmGr90T7yjlVJmOtybRvPXhKMbHr+fWnw==
 
 ipaddr.js@1.9.1:
   version "1.9.1"
@@ -6928,14 +7399,19 @@
 rimraf@~2.4.0:
   version "2.4.5"
   resolved "https://registry.npmmirror.com/rimraf/-/rimraf-2.4.5.tgz#ee710ce5d93a8fdb856fb5ea8ff0e2d75934b2da"
   integrity sha512-J5xnxTyqaiw06JjMftq7L9ouA448dw/E7dKghkP9WpKNuwmARNNg+Gk8/u5ryb9N/Yo2+z3MCwuqFK/+qPOPfQ==
   dependencies:
     glob "^6.0.1"
 
+robust-predicates@^3.0.0:
+  version "3.0.1"
+  resolved "https://registry.npmmirror.com/robust-predicates/-/robust-predicates-3.0.1.tgz#ecde075044f7f30118682bd9fb3f123109577f9a"
+  integrity sha512-ndEIpszUHiG4HtDsQLeIuMvRsDnn8c8rYStabochtUeCvfuvNptb5TUbVD68LRAILPX7p9nqQGh4xJgn3EHS/g==
+
 rsvp@^4.8.4:
   version "4.8.5"
   resolved "https://registry.npmmirror.com/rsvp/-/rsvp-4.8.5.tgz#c8f155311d167f68f21e168df71ec5b083113734"
   integrity sha512-nfMOlASu9OnRJo1mbEk2cz0D56a1MBNrJ7orjRZQG10XDyuvwksKbuXNp6qa+kbn839HwjwhBzhFmdsaEAfauA==
 
 run-async@^2.4.0:
   version "2.4.1"
@@ -6945,14 +7421,19 @@
 run-parallel@^1.1.9:
   version "1.2.0"
   resolved "https://registry.npmmirror.com/run-parallel/-/run-parallel-1.2.0.tgz#66d1368da7bdf921eb9d95bd1a9229e7f21a43ee"
   integrity sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==
   dependencies:
     queue-microtask "^1.2.2"
 
+rw@1:
+  version "1.3.3"
+  resolved "https://registry.npmmirror.com/rw/-/rw-1.3.3.tgz#3f862dfa91ab766b14885ef4d01124bfda074fb4"
+  integrity sha512-PdhdWy89SiZogBLaw42zdeqtRJ//zFd2PgQavcICDUgJT5oW10QCRKbJ6bg4r0/UY2M6BWd5tkxuGFRvCkgfHQ==
+
 rxjs@^6.6.0:
   version "6.6.7"
   resolved "https://registry.npmmirror.com/rxjs/-/rxjs-6.6.7.tgz#90ac018acabf491bf65044235d5863c4dab804c9"
   integrity sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==
   dependencies:
     tslib "^1.9.0"
```

### Comparing `ipywebcam-0.1.8.dev0/css/video.css` & `ipywebcam-0.1.9.dev0/css/video.css`

 * *Files 10% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 /* ==========================================================================
    #Custom HTML5 Video Player
    ========================================================================== */
 
 :root {
-  --youtube-red: #FE0900;
+  --youtube-red: rgb(254, 9, 0);
 }
 
 .ipywebcam.video-container {
   width: 800px;
   border-radius: 4px;
   margin: 0 auto;
   position: relative;
@@ -81,24 +81,74 @@
 .ipywebcam.video-container .seek:hover+.seek-tooltip {
   display: block;
 }
 
 .ipywebcam.video-container .seek-tooltip {
   display: none;
   position: absolute;
-  top: -50px;
+  top: -30px;
   margin-left: -20px;
   font-size: 12px;
   padding: 3px;
   content: attr(data-title);
   font-weight: bold;
   color: #fff;
   background-color: rgba(0, 0, 0, 0.6);
 }
 
+.ipywebcam.video-container .range-bar {
+  position: absolute;
+  top: 12px;
+  width: 100%;
+  height: 8.4px;
+  background-color: #474545;
+  cursor: pointer;
+  border-radius: 2px;
+  overflow: visible;
+}
+
+.ipywebcam.video-container .range-bar .marker {
+  position: absolute;
+  width: 4px;
+  height: 10px;
+  top: -0.8px;
+  background-color: rgb(254, 9, 0);
+  border-radius: 1px;
+}
+
+.ipywebcam.video-container .range-bar .marker.floating {
+  background-color: rgba(254, 9, 0, 0.7);
+}
+
+.ipywebcam.video-container .range-bar .marker.selected {
+  background-color: rgba(254, 0, 120, 0.7);
+}
+
+.ipywebcam.video-container .range-bar .range-mask {
+  position: absolute;
+  height: 8.4px;
+  background-color: #00c569;
+  cursor: pointer;
+  border-radius: 2px;
+}
+
+.ipywebcam.video-container .statistics-container {
+  position: relative;
+}
+
+.ipywebcam.video-container .statistics-container svg {
+  display: block;
+  width: 100%;
+  height: 30px;
+}
+
+.ipywebcam.video-container .statistics-container.unused svg {
+  display: none;
+}
+
 .ipywebcam.video-container .bottom-controls {
   display: flex;
   justify-content: space-between;
   align-items: center;
 }
 
 .ipywebcam.video-container .left-controls {
@@ -157,14 +207,26 @@
   display: inline-block;
 }
 
 .ipywebcam.video-container .fullscreen-button {
   margin-right: 0;
 }
 
+.ipywebcam.video-container .stats-selector svg.icon {
+  display: inline;
+  margin-right: 2px;
+  vertical-align: middle;
+}
+
+.ipywebcam.video-container .stats-selector div.text {
+  display: inline;
+  color: #fff;
+  vertical-align: middle;
+}
+
 .ipywebcam.video-container .index-selector {
   min-width: 26px;
   height: 26px;
 }
 
 .ipywebcam.video-container .text-button {
   color: #fff;
```

### Comparing `ipywebcam-0.1.8.dev0/docs/Makefile` & `ipywebcam-0.1.9.dev0/docs/Makefile`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/docs/make.bat` & `ipywebcam-0.1.9.dev0/docs/make.bat`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/docs/source/conf.py` & `ipywebcam-0.1.9.dev0/docs/source/conf.py`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/docs/source/develop-install.rst` & `ipywebcam-0.1.9.dev0/docs/source/develop-install.rst`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/docs/source/index.rst` & `ipywebcam-0.1.9.dev0/docs/source/index.rst`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/docs/source/installing.rst` & `ipywebcam-0.1.9.dev0/docs/source/installing.rst`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/examples/introduction.ipynb` & `ipywebcam-0.1.9.dev0/examples/introduction.ipynb`

 * *Files 19% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9747721354166667%*

 * *Differences: {"'cells'": '{2: {\'source\': [\'factory = FileListFactory("test", '*

 * *            '"$i4-$Y-$m-$d-$H-${M}-${S}-$f-$uh6.mp4", '*

 * *            "condition=FileListFactory.create_frame_based_condition(100))']}, 10: "*

 * *            "{'execution_count': 3, 'outputs': {0: {'text': ['load 59 records\\n', '59\\n']}}}, "*

 * *            "11: {'execution_count': 6, 'source': ['recorder.factory.save()']}, 12: "*

 * *            "{'execution_count': 4, 'metadata': {replace: OrderedDict([('tags', [])])}, 'outputs': "*

 * *            "{0: { []*

```diff
@@ -18,15 +18,45 @@
         },
         {
             "cell_type": "code",
             "execution_count": 2,
             "metadata": {},
             "outputs": [],
             "source": [
-                "factory = FileListFactory(\"test\", \"$i4-$Y-$m-$d-$H-${M}-${S}-$f-$uh6.mp4\", base_path='test_dir/a/b/c', condition=FileListFactory.create_frame_based_condition(100))"
+                "factory = FileListFactory(\"test\", \"$i4-$Y-$m-$d-$H-${M}-${S}-$f-$uh6.mp4\", condition=FileListFactory.create_frame_based_condition(100))"
+            ]
+        },
+        {
+            "cell_type": "code",
+            "execution_count": 5,
+            "metadata": {},
+            "outputs": [
+                {
+                    "name": "stdout",
+                    "output_type": "stream",
+                    "text": [
+                        "load 59 records\n"
+                    ]
+                }
+            ],
+            "source": [
+                "import random\n",
+                "def add_random_stats(frame, record: Record, ctx):\n",
+                "    record.set_statistics('test1', frame.time, random.randint(0, 30), flush=False)\n",
+                "    record.set_statistics('test2', frame.time, random.randint(0, 15), flush=False)\n",
+                "    record.set_statistics('test3', frame.time, random.randint(-10, 10), flush=False)\n",
+                "transformer = Record.create_video_frame_transformer(add_random_stats)\n",
+                "\n",
+                "factory.load()\n",
+                "for r in factory:\n",
+                "    r.read([transformer])\n",
+                "    r.set_statistics_meta_item('test1', 'y_range', [0, 30])\n",
+                "    r.set_statistics_meta_item('test2', 'y_range', [-5, 20])\n",
+                "    r.set_statistics_meta_item('test3', 'y_range', [-5, 20])\n",
+                "factory.save()"
             ]
         },
         {
             "cell_type": "code",
             "execution_count": 3,
             "metadata": {},
             "outputs": [
@@ -135,23 +165,23 @@
             "outputs": [],
             "source": [
                 "w.close_peers()"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 8,
+            "execution_count": 3,
             "metadata": {},
             "outputs": [
                 {
                     "name": "stdout",
                     "output_type": "stream",
                     "text": [
-                        "load 2 records\n",
-                        "2\n"
+                        "load 59 records\n",
+                        "59\n"
                     ]
                 }
             ],
             "source": [
                 "import logging\n",
                 "import cv2\n",
                 "from av import VideoFrame\n",
@@ -214,48 +244,70 @@
                 "    return new_frame\n",
                 "\n",
                 "transformer = player.add_video_transformer(transform, 'test')"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 9,
+            "execution_count": 6,
             "metadata": {},
             "outputs": [],
             "source": [
-                "transformer = player.add_video_transformer(transform, 'test2')"
+                "recorder.factory.save()"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 10,
-            "metadata": {},
+            "execution_count": 4,
+            "metadata": {
+                "tags": []
+            },
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "ae2aea0ec43c466ea2539146e577d418",
+                            "model_id": "dbfcaab0e93f4e6a9706e8b032810bf6",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
-                            "RecordPlayer(loop=True)"
+                            "RecordPlayer(loop=True, selected_range=[0.0, 0.0])"
                         ]
                     },
-                    "execution_count": 10,
+                    "execution_count": 4,
                     "metadata": {},
                     "output_type": "execute_result"
                 }
             ],
             "source": [
                 "player"
             ]
         },
         {
             "cell_type": "code",
+            "execution_count": 6,
+            "metadata": {},
+            "outputs": [
+                {
+                    "data": {
+                        "text/plain": [
+                            "[4.0, 7.0]"
+                        ]
+                    },
+                    "execution_count": 6,
+                    "metadata": {},
+                    "output_type": "execute_result"
+                }
+            ],
+            "source": [
+                "player.selected_range"
+            ]
+        },
+        {
+            "cell_type": "code",
             "execution_count": 8,
             "metadata": {},
             "outputs": [
                 {
                     "name": "stdout",
                     "output_type": "stream",
                     "text": [
@@ -292,14 +344,31 @@
                 "print(path.normpath('/a/b/c'))\n",
                 "p = path.relpath(path.normpath('a/b/c'), path.normpath('a/d'))\n",
                 "print(p)"
             ]
         },
         {
             "cell_type": "code",
+            "execution_count": 5,
+            "metadata": {},
+            "outputs": [
+                {
+                    "name": "stdout",
+                    "output_type": "stream",
+                    "text": [
+                        "2\n"
+                    ]
+                }
+            ],
+            "source": [
+                "print(1 if {} else 2)"
+            ]
+        },
+        {
+            "cell_type": "code",
             "execution_count": null,
             "metadata": {},
             "outputs": [],
             "source": []
         }
     ],
     "metadata": {
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/__init__.py` & `ipywebcam-0.1.9.dev0/ipywebcam/__init__.py`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/_version.py` & `ipywebcam-0.1.9.dev0/ipywebcam/_version.py`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 # coding: utf-8
 
 # Copyright (c) Xiaojing Chen.
 # Distributed under the terms of the Modified BSD License.
 
 import re
 
-__version__ = "0.1.8.dev"
+__version__ = "0.1.9.dev"
 
 def extract_version_info(ver: str) -> tuple:
     res = re.match(r'(?P<major>\d+)\.(?P<minor>\d+)\.(?P<patch>\d+)(?P<channel>a|b|rc|.dev)?', ver)
     major = res.group('major')
     minor = res.group('minor')
     patch = res.group('patch')
     channel = res.group('channel')
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/common.py` & `ipywebcam-0.1.9.dev0/ipywebcam/common.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,27 +1,49 @@
+import bisect
 import os
 from logging import Logger
 from os import path
-from typing import Any, Callable
+from typing import Any, Callable, TypeVar
 
 from ipywidgets import Widget
 from traitlets import Unicode
 
 from ._frontend import module_name, module_version
 
 
 def normpath(p: str) -> str:
     return path.normpath(p.replace('\\', '/'))
 
 def makesure_path(p: str) -> str:
     p = normpath(p)
     dir = path.dirname(p)
-    if not path.exists(dir):
+    if dir and not path.exists(dir):
         os.makedirs(dir, exist_ok=True)
 
+V = TypeVar('V')
+K = TypeVar('K')
+def order_insert(seq: list[V], item: V, key_func: Callable[[V], K], keys: list[K] | None=None) -> None:
+    if keys is None:
+        t_keys = [key_func(v) for v in seq]
+    else:
+        t_keys = keys
+    key = key_func(item)
+    i = bisect.bisect_left(t_keys, key)
+    if keys is not None:
+        keys.insert(i, key)
+    seq.insert(i, item)
+    
+def bin_search(seq: list[V], target_key: K, key_func: Callable[[V], K], keys: list[K] | None=None) -> int:
+    keys = [key_func(v) for v in seq] if keys is None else keys
+    i = bisect.bisect_left(keys, target_key)
+    if i != len(keys) and keys[i] == target_key:
+        return i
+    else:
+        return -1
+
 Answer = Callable[[str, str, dict], None]
 
 class BaseWidget(Widget):
     
     _model_module = Unicode(module_name).tag(sync=True)
     _model_module_version = Unicode(module_version).tag(sync=True)
     _view_module = Unicode(module_name).tag(sync=True)
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/recorder.py` & `ipywebcam-0.1.9.dev0/ipywebcam/recorder.py`

 * *Files 23% similar despite different names*

```diff
@@ -9,26 +9,26 @@
 from dataclasses import dataclass
 from datetime import datetime, timedelta
 from enum import Enum
 from io import BytesIO
 from os import path
 from typing import IO
 from typing import Any as AnyType
-from typing import Callable, Generic, Tuple
+from typing import Callable, Generic, Tuple, TypeVar
 from urllib.parse import parse_qs, urlencode, urlparse, urlunparse
 
 from aiortc import RTCPeerConnection
 from aiortc.contrib.media import MediaStreamTrack
 from av import AudioFrame, VideoFrame
 from av import open as av_open
 from ipywidgets import DOMWidget
-from traitlets import Bool, CUnicode, Unicode
+from traitlets import List, Float, Bool, Int, CUnicode, Unicode
 
 from ._frontend import module_name, module_version
-from .common import BaseWidget, normpath, makesure_path
+from .common import BaseWidget, normpath, makesure_path, bin_search, order_insert
 from .webcam import MT, MediaTransformer, WebCamWidget
 
 logger = logging.getLogger("ipywebcam")
 
 class RecorderContext:
     def __init__(self, stream):
         self.started = False
@@ -75,54 +75,82 @@
         self.__context = {}
 
 class RecordVideoFrameTransformer(RecordFrameTransformer[VideoFrame]):
     kind: str = 'video'
     
 class RecordAudioFrameTransformer(RecordFrameTransformer[AudioFrame]):
     kind: str = 'audio'
+    
+def fix_time_transformer(frame: MT, record: "Record", context: dict):
+    if "__inited__" not in context:
+        context["__inited__"] = True
+        if frame.pts > 0:
+            offset = context["offset"] = frame.pts
+        else:
+            offset = 0
+    else:
+        offset = context.get("offset")
+        offset = 0 if offset is None else offset
+    if offset > 0:
+        pass
+        frame.pts -= offset
+    return frame
+
+V = TypeVar('V')
 
 class Record:
     file: str | IO
     format: str | None
     options: dict[str, str] | None
     meta: dict[str, str] | None
-    external_meta: dict[str, str]
+    external_meta: dict[str, bool]
     cached_external_meta: dict[str, AnyType]
     
-    
     __container: AnyType | None = None
     __mode: str | None = None
     __tracks: dict[MediaStreamTrack, RecorderContext] | None
     
     def __init__(
         self, file: str | IO,
         format: str | None=None,
         options: dict[str, str] | None=None,
         meta: dict[str, str] | None=None,
-        external_meta:dict[str, str] | None=None,
+        external_meta: list[str] | None=None,
     ) -> None:
         self.file = file
         self.format = format
         self.options = options
-        self.meta = meta
-        self.external_meta = external_meta
+        self.meta = meta if meta is not None else {}
+        self.external_meta = { name: False for name in external_meta } if external_meta is not None else {}
+        self.cached_external_meta = {}
+        
+    def flush(self) -> None:
+        for name in self.external_meta:
+            if self.external_meta[name]:
+                meta_path = self.calc_external_meta_path(name)
+                cachecd = self.cached_external_meta[name]
+                if cachecd is not None:
+                    with open(meta_path, 'w') as f:
+                        json.dump(cachecd, f)
+                    self.external_meta[name] = False
+                    
     
     def to_url(self, base: str = None) -> str:
         query = {}
         if self.format:
             query["format"] = self.format
         if self.options:
             for key in self.options.keys():
                 query[f"options.{key}"] = self.options[key]
         if self.meta:
             for key in self.meta.keys():
                 query[f"meta.{key}"] = self.meta[key]
         if self.external_meta:
             for key in self.external_meta.keys():
-                query[f"emeta.{key}"] = self.external_meta[key]
+                query[f"emeta.{key}"] = True
         base = '' if base is None else base
         url = normpath(path.relpath(normpath(self.file_path), normpath(base)))
         return urlunparse(('', '', url, '', urlencode(query=query), ''))
     
     def __repr__(self) -> str:
         return self.to_url()
     
@@ -155,51 +183,187 @@
                 stream.pix_fmt = "yuv420p"
         self.__tracks[track] = RecorderContext(stream)
         
     @property
     def file_path(self):
         return self.file if isinstance(self.file, str) else path.normpath(self.file.name)
     
-    def make_full_path(self, p: str) -> str:
-        return path.normpath(path.join(path.dirname(self.file_path.replace('\\', '/')), p.replace('\\', '/')))
+    def calc_external_meta_path(self, name:str) -> str:
+        return f"{self.file_path}.meta.{name}"
     
-    def set_meta(self, name: str, value: AnyType) -> None:
+    def _set_meta(self, name: str, value: AnyType) -> None:
         if value is None:
-            del self.meta[name]
+            if name in self.meta:
+                del self.meta[name]
         else:
             self.meta[name] = json.dumps(value)
         
-    def set_external_meta(self, name: str, value: AnyType) -> None:
-        meta_path = f"{self.file_path}.meta.{name}"
-        relative_meta_path = path.basename(meta_path.replace('\\', '/'))
+    def _set_external_meta(self, name: str, value: AnyType, flush: bool=True) -> None:
+        meta_path = self.calc_external_meta_path(name)
         if value is None:
-            del self.external_meta[name]
-            del self.cached_external_meta[name]
+            if name in self.external_meta:
+                del self.external_meta[name]
+            if name in self.cached_external_meta:
+                del self.cached_external_meta[name]
             if path.exists(meta_path):
                 os.remove(meta_path)
         else:
-            self.external_meta[name] = meta_path
             self.cached_external_meta[name] = value
-            with open(meta_path, 'w') as f:
-                json.dump(value, f)
+            if flush:
+                with open(meta_path, 'w') as f:
+                    json.dump(value, f)
+                self.external_meta[name] = False
+            else:
+                self.external_meta[name] = True
+                
+    def set_meta(self, name: str, value: AnyType, external: bool | None = None, flush: bool=True) -> AnyType:
+        external_check = self.is_external_meta(name)
+        if external is None:
+            external = False if not external_check else True
+        old = self.get_meta(name, external)
+        if external:
+            self._set_external_meta(name, value, flush)
+        else:
+            self._set_meta(name, value)
+        return old
                 
-    def get_meta(self, name: str) -> AnyType:
-        if name in self.meta:
+    def get_meta(self, name: str, external: bool | None = None) -> AnyType:
+        if name in self.meta and not external: # external == None or external == False
             return json.loads(self.meta[name])
-        elif name in self.external_meta:
+        elif name in self.external_meta and (external is None or external == True):
             if name in self.cached_external_meta:
                 return self.cached_external_meta[name]
             else:
-                meta_path = self.make_full_path(self.external_meta[name])
+                meta_path = self.calc_external_meta_path(name)
+                if not path.exists(meta_path):
+                    return None
                 with open(meta_path, 'r') as f:
                     data = json.load(f)
                 self.cached_external_meta[name] = data
                 return data
         else:
             return None
+        
+    def is_external_meta(self, name:str) -> bool | None:
+        """check whether a meta is external meta, simple meta or not exists
+
+        Args:
+            name (str): the name of the meta
+
+        Returns:
+            bool | None: True means external meta, False means simple meta, None means not a meta.
+        """        
+        if name in self.external_meta:
+            return True
+        elif name in self.meta:
+            return False
+        else:
+            return None
+        
+    def get_statistics_dict(self, external: bool | None = None) -> dict[str, list[tuple[float, float]]]:
+        statistics_dict = self.get_meta('statistics', external)
+        return statistics_dict if statistics_dict is not None else {}
+    
+    def set_statistics_dict(self, data: dict[str, list[tuple[float, float]]] | None, external: bool | None = None, flush: bool=True) -> dict[str, list[tuple[float, float]]] | None:
+        return self.set_meta('statistics', data, external, flush)
+        
+    def set_statistics(self, name: str, data: list[tuple[float, float] | list[float]] | None, external: bool | None = None, flush: bool=True, only_update=False) -> list[tuple[float, float]] | None:
+        statistics: dict[str, list[tuple[float, float]]] = self.get_meta('statistics', external)
+        if statistics is None:
+            if data is None or only_update:
+                return None
+            statistics = {}
+        old = statistics.get(name)
+        if data is None and old is not None:
+            del statistics[name]
+        elif data is not None:
+            statistics[name] = [(d[0], d[1]) for d in data]
+        self.set_meta('statistics', statistics, external, flush)
+        return old
+    
+    def get_statistics(self, name: str, external: bool | None = None) -> list[tuple[float, float]] | None:
+        statistics_dict = self.get_statistics_dict(self, external)
+        return statistics_dict.get(name) if statistics_dict is not None else None
+        
+    def set_statistics_item(self, name: str, time: float, value: float | None, external: bool | None = None, flush: bool=True, only_update=False) -> float | None:
+        statistics = self.get_meta('statistics', external)
+        if statistics is None:
+            if value is None or only_update:
+                return None
+            statistics = {}
+        stats: list[tuple[float, float]] = statistics.get(name)
+        if stats is None:
+            if value is None or only_update:
+                return None
+            statistics[name] = []
+            stats: list[tuple[float, float]] = statistics[name]
+        index = bin_search(stats, time, lambda v: v[0])
+        if index == -1:
+            if value is None:
+                return None
+            old = None
+        else:
+            old = stats[index][1]
+        if value is None:
+            stats.remove(old)
+        else:
+            order_insert(stats, (time, value), lambda v: v[0])
+        self.set_meta('statistics', statistics, external, flush)
+        return old
+    
+    def get_statistics_meta_dict(self) ->  dict[str, dict[str, AnyType]]:
+        statistics_meta_dict: dict[str, dict[str, AnyType]] | None = self.get_meta('statistics.meta', False)
+        return statistics_meta_dict if statistics_meta_dict is not None else {}
+    
+    def set_statistics_meta_dict(self, meta_dict: dict[str, dict[str, AnyType]] | None) -> dict[str, dict[str, AnyType]] | None:
+        return self.set_meta('statistics.meta', meta_dict, False)
+    
+    def set_statistics_meta(self, stats_name: str, data: dict[str, AnyType] | None) -> dict[str, AnyType] | None:
+        statistics_meta_dict: dict[str, dict[str, AnyType]] | None = self.get_meta('statistics.meta', False)
+        if statistics_meta_dict is None:
+            if data is None:
+                return None
+            statistics_meta_dict = {}
+        old = statistics_meta_dict.get(stats_name)
+        if data is None and old is not None:
+            del statistics_meta_dict[stats_name]
+        elif data is not None:
+            statistics_meta_dict[stats_name] = data
+        self._set_meta('statistics.meta', statistics_meta_dict)
+        return old
+    
+    def get_statistics_meta(self, stats_name: str) -> dict[str, AnyType]:
+        meta_dict = self.get_statistics_meta_dict()
+        metaes = meta_dict.get(stats_name)
+        return metaes if metaes is not None else {}
+    
+    def set_statistics_meta_item(self, stats_name: str, meta_name: str, value: AnyType) -> AnyType:
+        statistics_meta_dict: dict[str, dict[str, AnyType]] = self.get_meta('statistics.meta', False)
+        if statistics_meta_dict is None:
+            if value is None:
+                return None
+            statistics_meta_dict = {}
+        statistics_metaes = statistics_meta_dict.get(stats_name)
+        if statistics_metaes is None:
+            if value is None:
+                return None
+            statistics_meta_dict[stats_name] = {}
+            statistics_metaes = statistics_meta_dict[stats_name]
+        old = statistics_metaes.get(meta_name)
+        if value is None and old is not None:
+            del statistics_metaes[meta_name]
+        elif value is not None:
+            statistics_metaes[meta_name] = value
+        self._set_meta('statistics.meta', statistics_meta_dict)
+        return old
+    
+    def get_statistics_meta_item(self, stats_name: str, meta_name: str) -> AnyType:
+        metaes = self.get_statistics_meta(stats_name)
+        return metaes.get(meta_name)
+            
     
     async def on_frame(self, frame: VideoFrame | AudioFrame, ctx: dict, track: MediaStreamTrack, post: bool):
         context: RecorderContext = self.__tracks.get(track)
         if not context:
             return
         if not post:
             frame = ctx["_org_frame_"]
@@ -235,26 +399,38 @@
         codec_name = stream.codec_context.name  # Get the codec name from the input video stream.
         rate = stream.base_rate or stream.guessed_rate or stream.average_rate or 30  # Get the framerate from the input video stream.
         out_stream = container.add_stream(codec_name, rate)
         out_stream.width = stream.width  # Set frame width to be the same as the width of the input stream
         out_stream.height = stream.height  # Set frame height to be the same as the height of the input stream
         out_stream.pix_fmt = stream.pix_fmt  # Copy pixel format from input stream to output stream
         return out_stream
+    
+    @staticmethod
+    def create_video_frame_transformer(callback: FrameTransformerCallback, context: dict | None=None) -> RecordVideoFrameTransformer:
+        return RecordVideoFrameTransformer(callback=callback, context=context)
+    
+    @staticmethod
+    def create_audio_frame_transformer(callback: FrameTransformerCallback, context: dict | None=None) -> RecordAudioFrameTransformer:
+        return RecordAudioFrameTransformer(callback=callback, context=context)
             
-    def read(self, transformers: list[RecordFrameTransformer] | None=None) -> bytes:
-        if transformers is None or len(transformers) == 0:
+    def read(self, transformers: list[RecordFrameTransformer] | None=None, fix_time: bool=True) -> bytes:
+        if not fix_time and transformers is None or len(transformers) == 0:
             with open(file=self.file, mode='rb') as f:
                 return f.read()
         else:
             for transformer in transformers:
                 transformer.clear()
             video_transformers = [transformer for transformer in transformers if transformer.kind == "video"]
             logger.debug(f'got video transformers {len(video_transformers)}')
+            if fix_time:
+                video_transformers.insert(0, RecordVideoFrameTransformer(fix_time_transformer))
             audio_transformers = [transformer for transformer in transformers if transformer.kind == "audio"]
             logger.debug(f'got audio transformers {len(video_transformers)}')
+            if fix_time:
+                audio_transformers.insert(0, RecordAudioFrameTransformer(fix_time_transformer))
             out = BytesIO()
             with av_open(file=self.file, mode='r', format=self.format, options=self.options) as input_f:
                 with av_open(file=out, mode='w', format="mp4") as out_f:
                     for stream in input_f.streams.video:
                         out_stream = self._new_stream_from(out_f, stream)
                         for frame in input_f.decode(stream):
                             if stream.type == "video":
@@ -289,14 +465,29 @@
     track: MediaStreamTrack
     base_timestamp: float = 0.0
     recorded_frame_count: int = 0
     timestamp: float = 0.0
     on_frame: Callable[[VideoFrame | AudioFrame, dict, MediaStreamTrack], None] | None = None
     
 class RecordFactory(metaclass=ABCMeta):
+    __index: int
+    __count: int
+    
+    def __iter__(self) -> "RecordFactory":
+        self.__index = -1
+        self.__count = self.record_count()
+        return self
+    
+    def __next__(self) -> Record:
+        self.__index += 1
+        if self.__index >= self.__count:
+            raise StopIteration
+        else:
+            return self.get_record(self.__index)
+    
     @abstractmethod
     def load(self) -> "RecordFactory":
         pass
     
     @abstractmethod
     def save(self) -> None:
         pass
@@ -621,14 +812,16 @@
             self.__record_list = []
         return self
     
     def save(self) -> None:
         self._ensure_open()
         if self.flush_when_close:
             self.flush()
+        for record in self:
+            record.flush()
         record_list_path = self._full_path(f'{self.name}.record_list')
         makesure_path(record_list_path)
         with open(record_list_path, 'w') as f:
             f.writelines([f"{record.to_url(self.base_path)}\n" for record in self.__record_list])
         self.__record_list = None
         
     def get_record(self, index: int) -> Record | None:
@@ -654,26 +847,26 @@
     
     def restore_record_from_url(self, url: str):
         res = urlparse(url=url)
         query = res.query
         format: str | None = None
         options: dict[str, str] = {}
         meta: dict[str, str] = {}
-        external_meta: dict[str, str] = {}
+        external_meta: list[str] = []
         if res.query:
             query = parse_qs(res.query)
             if "format" in query and query['format']:
                 format = query['format'][0]
             for key in query.keys():
                 if key.startswith("options.") and query[key]:
                     options[key[8:]] = str(query[key][0])
                 elif key.startswith("meta.") and query[key]:
                     meta[key[5:]] = str(query[key][0])
-                elif key.startswith("emeta.") and query[key]:
-                    external_meta[key[6:]] = str(query[key][0])
+                elif key.startswith("emeta."):
+                    external_meta.append(key[6:])
             
         return Record(file=self._full_path(res.path), format=format, options=options, meta=meta, external_meta=external_meta)
     
     def get_or_create_pending_record(self) -> Record:
         self._ensure_open()
         if not self.__pending_record:
             self.__pending_record = self.create_next_record(self.base_index + len(self.__record_list))
@@ -807,55 +1000,44 @@
                     
     def start(self) -> None:
         asyncio.create_task(self.a_start())
         
     def stop(self) -> None:
         asyncio.create_task(self.a_stop())
         
-def fix_time_transformer(frame: MT, record: Record, context: dict):
-    if "__inited__" not in context:
-        context["__inited__"] = True
-        if frame.pts > 0:
-            offset = context["offset"] = frame.pts
-        else:
-            offset = 0
-    else:
-        offset = context.get("offset")
-        offset = 0 if offset is None else offset
-    if offset > 0:
-        pass
-        frame.pts -= offset
-    return frame
 
 class RecordPlayer(DOMWidget, BaseWidget):
     
     _model_name = Unicode('RecorderPlayerModel').tag(sync=True)
     _view_name = Unicode('RecorderPlayerView').tag(sync=True)
     
     # Define the custom state properties to sync with the front-end
     format = Unicode('mp4', help="The format of the video.").tag(sync=True)
     width = CUnicode(help="Width of the video in pixels.").tag(sync=True)
     height = CUnicode(help="Height of the video in pixels.").tag(sync=True)
     autoplay = Bool(True, help="When true, the video starts when it's displayed").tag(sync=True)
     loop = Bool(False, help="When true, the video will start from the beginning after finishing").tag(sync=True)
     autonext = Bool(True, help="When true, the video will start next after finishing").tag(sync=True)
     controls = Bool(True, help="Specifies that video controls should be displayed (such as a play/pause button etc)").tag(sync=True)
+    selected_index = Int(default_value=None, allow_none=True).tag(sync=True)
+    selected_channel = Unicode(default_value=None, allow_none=True).tag(sync=True)
+    selected_range = List(Float, default_value=[0, 0], minlen=2, maxlen=2).tag(sync=True)
+    fix_time: bool
     __base_transformers: list[RecordFrameTransformer]
     __channel_transformers: dict[str, list[RecordFrameTransformer]]
     
     def __init__(self, recorder: WebCamRecorder, fix_time:bool=True, **kwargs):
         super().__init__(logger=logger, **kwargs)
         self.recorder = recorder
         self.__base_transformers = []
         self.__channel_transformers = {}
         self.add_answer("fetch_meta", self.answer_fetch_meta)
         self.add_answer("fetch_data", self.answer_fetch_data)
-        if fix_time:
-            self.add_video_transformer(fix_time_transformer)
-            self.add_audio_transformer(fix_time_transformer)
+        self.add_answer("set_markers", self.answer_set_markers)
+        self.fix_time = fix_time
         
     def add_transformer(self, type: str, callback: FrameTransformerCallback, channel: str | None=None) -> RecordFrameTransformer:
         if type == "video":
             transformer = RecordVideoFrameTransformer(callback=callback)
         elif type == "audio":
             transformer = RecordAudioFrameTransformer(callback=callback)
         else:
@@ -904,31 +1086,79 @@
     def get_transformers(self, channel: str | None = None) -> list[RecordFrameTransformer]:
         if channel is None or channel not in self.__channel_transformers:
             return self.__base_transformers.copy()
         transformers = self.__base_transformers.copy()
         for transformer in self.__channel_transformers[channel]:
             transformers.append(transformer)
         return transformers
+    
+    def get_markers(self, index: int) -> list[float] | None:
+        record = self.recorder.factory.get_record(index=index)
+        if not record:
+            return None
+        return record.get_meta('markers')
+    
+    def set_markers(self, index: int, markers: list[float]) -> None:
+        record = self.recorder.factory.get_record(index=index)
+        if not record:
+            return
+        record.set_meta('markers', markers)
+        
+    def get_statistics(self, index: int) -> dict[str, list[tuple[float, float]]]:
+        record = self.recorder.factory.get_record(index=index)
+        if not record:
+            return None
+        return record.get_statistics_dict()
+    
+    def set_statistics(self, index: int, statistics: dict[str, list[tuple[float, float]]]) -> None:
+        record = self.recorder.factory.get_record(index=index)
+        if not record:
+            return
+        record.set_statistics_dict(statistics)
+        
+    def get_statistics_meta(self, index: int) -> dict[str, dict[str, AnyType]]:
+        record = self.recorder.factory.get_record(index=index)
+        if not record:
+            return None
+        return record.get_statistics_meta_dict()
+    
+    def set_statistics_meta(self, index: int, statistics_meta: dict[str, dict[str, AnyType]]) -> None:
+        record = self.recorder.factory.get_record(index=index)
+        if not record:
+            return
+        record.set_statistics_meta_dict(statistics_meta)
         
     def _get_media_data(self, index: int, channel: str) -> bytes | None:
         logger.debug(f'get media data for index {index} and channel {channel}')
         record = self.recorder.factory.get_record(index=index)
         if not record:
             return None
         transformers = self.get_transformers(channel=channel)
-        return record.read(transformers=transformers)
+        return record.read(transformers=transformers, fix_time=self.fix_time)
         
     
     def answer_fetch_meta(self, id: str, cmd: str, args: dict) -> None:
         meta = {
             "record_count": self.recorder.factory.record_count(),
             "chanels": self.__channel_transformers.keys(),
         }
+        if "index" in args:
+            index = args["index"]
+            meta["markers"] = self.get_markers(index=index)
+            meta["statistics"] = self.get_statistics(index=index)
+            meta["statistics_meta"] = self.get_statistics_meta(index=index)
         self.answer(cmd=cmd, target_id=id, content=meta)
     
     def answer_fetch_data(self, id: str, cmd: str, args: dict) -> None:
         if "index" in args:
             index = args["index"]
             channel = args.get("channel")
             data = self._get_media_data(index=index, channel=channel)
             self.answer(cmd=cmd, target_id=id, content={}, buffers=[data] if data is not None else None)
+            
+    def answer_set_markers(self, id: str, cmd: str, args: dict) -> None:
+        if "index" in args and "markers" in args:
+            index = args["index"]
+            markers = args["markers"]
+            self.set_markers(index=index, markers=markers)
+            self.answer(cmd=cmd, target_id=id, content={})
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/webcam.py` & `ipywebcam-0.1.9.dev0/ipywebcam/webcam.py`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/build_log.json` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/build_log.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9999910438712524%*

 * *Differences: {'0': "{'plugins': {1: {'_options': {'shared': {'ipywebcam': {'version': '0.1.8'}, 'd3': "*

 * *      'OrderedDict()}}}}}'}*

```diff
@@ -580,18 +580,19 @@
                             "singleton": true
                         },
                         "@lumino/widgets": {
                             "import": false,
                             "requiredVersion": "^1.33.0",
                             "singleton": true
                         },
+                        "d3": {},
                         "ipywebcam": {
                             "import": "D:\\project\\github\\ipywebcam\\lib\\index.js",
                             "singleton": true,
-                            "version": "0.1.7"
+                            "version": "0.1.8"
                         },
                         "lru-cache": {},
                         "react": {
                             "import": false,
                             "requiredVersion": "^17.0.1",
                             "singleton": true
                         },
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/package.json` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/package.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9563151041666667%*

 * *Differences: {"'dependencies'": "{'d3': '^7.8.2'}",*

 * * "'devDependencies'": "{'@types/d3': '^7.4.0'}",*

 * * "'jupyterlab'": "{'_build': {'load': 'static\\\\remoteEntry.90f2b2dbfce5b0361bf7.js'}}",*

 * * "'version'": "'0.1.8'"}*

```diff
@@ -4,24 +4,26 @@
         "name": "Xiaojing Chen"
     },
     "bugs": {
         "url": "https://github.com/vipcxj/ipywebcam/issues"
     },
     "dependencies": {
         "@jupyter-widgets/base": "^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6",
+        "d3": "^7.8.2",
         "lru-cache": "^7.14.1"
     },
     "description": "A Custom Jupyter Widget Library for Web Camera using WebRTC",
     "devDependencies": {
         "@babel/core": "^7.5.0",
         "@babel/preset-env": "^7.5.0",
         "@jupyter-widgets/base-manager": "^1.0.2",
         "@jupyterlab/builder": "^3.0.0",
         "@lumino/application": "^1.6.0",
         "@lumino/widgets": "^1.6.0",
+        "@types/d3": "^7.4.0",
         "@types/jest": "^26.0.0",
         "@types/webpack-env": "^1.13.6",
         "@typescript-eslint/eslint-plugin": "^3.6.0",
         "@typescript-eslint/parser": "^3.6.0",
         "acorn": "^7.2.0",
         "css-loader": "^3.2.0",
         "eslint": "^7.4.0",
@@ -47,15 +49,15 @@
         "dist/*.js",
         "css/*.css"
     ],
     "homepage": "https://github.com/vipcxj/ipywebcam",
     "jupyterlab": {
         "_build": {
             "extension": "./extension",
-            "load": "static\\remoteEntry.de2e30b4afcc045c5dab.js"
+            "load": "static\\remoteEntry.90f2b2dbfce5b0361bf7.js"
         },
         "extension": "lib/plugin",
         "outputDir": "ipywebcam/labextension/",
         "sharedPackages": {
             "@jupyter-widgets/base": {
                 "bundled": false,
                 "singleton": true
@@ -92,9 +94,9 @@
         "test": "jest",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.1.7"
+    "version": "0.1.8"
 }
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_index_js.9c3b5fbf4b9efeeb7001.js.map`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_plugin_js.0d80ab6fa0ba98b64288.js.map`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.2c9276c21e75d417d68e.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js`

 * *Files 14% similar despite different names*

#### js-beautify {}

```diff
@@ -1,11 +1,105 @@
 (self["webpackChunkipywebcam"] = self["webpackChunkipywebcam"] || []).push([
     ["lib_recorder_js-lib_webcam_js"], {
 
         /***/
+        "./lib/charts.js":
+            /*!***********************!*\
+              !*** ./lib/charts.js ***!
+              \***********************/
+            /***/
+            (function(__unused_webpack_module, exports, __webpack_require__) {
+
+                "use strict";
+
+                var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
+                    if (k2 === undefined) k2 = k;
+                    Object.defineProperty(o, k2, {
+                        enumerable: true,
+                        get: function() {
+                            return m[k];
+                        }
+                    });
+                }) : (function(o, m, k, k2) {
+                    if (k2 === undefined) k2 = k;
+                    o[k2] = m[k];
+                }));
+                var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
+                    Object.defineProperty(o, "default", {
+                        enumerable: true,
+                        value: v
+                    });
+                }) : function(o, v) {
+                    o["default"] = v;
+                });
+                var __importStar = (this && this.__importStar) || function(mod) {
+                    if (mod && mod.__esModule) return mod;
+                    var result = {};
+                    if (mod != null)
+                        for (var k in mod)
+                            if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
+                    __setModuleDefault(result, mod);
+                    return result;
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.makeLineChart = void 0;
+                const d3 = __importStar(__webpack_require__( /*! d3 */ "webpack/sharing/consume/default/d3/d3"));
+
+                function makeLineChart(node, data, xRange, yRange, width, height) {
+                    const svg = node ?
+                        d3.select(node) :
+                        d3.create('svg');
+                    width =
+                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                        width === undefined || width === null ? svg.node().clientWidth : width;
+                    height =
+                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                        height === undefined || height === null ? svg.node().clientHeight : height;
+                    if (height > 16) {
+                        height -= 4;
+                    }
+                    if (!xRange) {
+                        const xData = data.map((d) => d[0]);
+                        xRange = [Math.min(...xData), Math.max(...xData)];
+                    }
+                    if (xRange[0] === xRange[1]) {
+                        xRange[1] += 1;
+                    }
+                    if (!yRange) {
+                        const yData = data.map((d) => d[1]);
+                        yRange = [Math.min(...yData), Math.max(...yData)];
+                    }
+                    if (yRange[0] === yRange[1]) {
+                        yRange[1] += 1;
+                    }
+                    const xOffset = -xRange[0];
+                    const xScale = width / (xRange[1] - xRange[0]);
+                    const yOffset = -yRange[0];
+                    const yScale = height / (yRange[1] - yRange[0]);
+                    const lineFunc = d3
+                        .line()
+                        .x((d) => (d[0] + xOffset) * xScale)
+                        .y((d) => (d[1] + yOffset) * yScale);
+                    let path = svg.select('path');
+                    if (path.size() === 0) {
+                        path = svg.append('path').attr('fill', 'none');
+                    }
+                    path.attr('d', lineFunc(data));
+                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                    return svg.node();
+                }
+                exports.makeLineChart = makeLineChart;
+                //# sourceMappingURL=charts.js.map
+
+                /***/
+            }),
+
+        /***/
         "./lib/common.js":
             /*!***********************!*\
               !*** ./lib/common.js ***!
               \***********************/
             /***/
             (function(__unused_webpack_module, exports, __webpack_require__) {
 
@@ -41,36 +135,50 @@
                     });
                 };
                 Object.defineProperty(exports, "__esModule", ({
                     value: true
                 }));
                 exports.BaseModel = void 0;
                 const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
                 const version_1 = __webpack_require__( /*! ./version */ "./lib/version.js");
                 class BaseModel extends base_1.DOMWidgetModel {
                     constructor(...args) {
                         super(...args);
                         this.messageHandlers = {};
                         this.addMessageHandler = (cmd, handler) => {
-                            this.messageHandlers[cmd] = handler;
+                            let handlers = this.messageHandlers[cmd];
+                            if (!handlers) {
+                                handlers = this.messageHandlers[cmd] = [];
+                            }
+                            handlers.push(handler);
+                        };
+                        this.removeMessageHandler = (cmd, handler) => {
+                            const handlers = this.messageHandlers[cmd];
+                            if (handlers) {
+                                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                                utils_1.arrayRemove(handlers, handler);
+                            }
                         };
                         this.send_cmd = this.send_cmd.bind(this);
                         this.on('msg:custom', (msg, buffers) => {
                             const {
                                 id,
                                 cmd
                             } = msg;
                             if (id && id !== this.message_id) {
                                 return;
                             }
                             Object.keys(this.messageHandlers).forEach((key) => {
                                 if (key === cmd) {
-                                    const handler = this.messageHandlers[key];
-                                    if (handler) {
-                                        handler(msg, buffers);
+                                    const handlers = this.messageHandlers[key];
+                                    if (handlers) {
+                                        handlers.forEach((handler) => {
+                                            handler(msg, buffers);
+                                        });
                                     }
                                 }
                             });
                         });
                     }
                     defaults() {
                         return Object.assign(Object.assign({}, super.defaults()), {
@@ -124,14 +232,386 @@
                 exports.BaseModel = BaseModel;
                 //# sourceMappingURL=common.js.map
 
                 /***/
             }),
 
         /***/
+        "./lib/range.js":
+            /*!**********************!*\
+              !*** ./lib/range.js ***!
+              \**********************/
+            /***/
+            ((__unused_webpack_module, exports, __webpack_require__) => {
+
+                "use strict";
+
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.RangeBar = void 0;
+                /* eslint-disable @typescript-eslint/no-non-null-assertion */
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                class RangeBar {
+                    constructor(container, option = {}) {
+                        this.selectedRange = [0, 0];
+                        this.markersChangeCallbacks = [];
+                        this.rangeSelectedCallbacks = [];
+                        this.destroy = () => {
+                            document.removeEventListener('mousemove', this.onSelectedMove);
+                            document.removeEventListener('mouseup', this.removeSelect);
+                        };
+                        this.toggle = () => {
+                            if (this.container.classList.contains('hidden')) {
+                                this.container.classList.remove('hidden');
+                                if (this.container.parentElement) {
+                                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight + 12}px`;
+                                }
+                            } else {
+                                this.container.classList.add('hidden');
+                                if (this.container.parentElement) {
+                                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight - 12}px`;
+                                }
+                            }
+                        };
+                        this.isEnabled = () => {
+                            return this.max > this.min;
+                        };
+                        this.adjustPos = (pos) => {
+                            const width = this.container.clientWidth;
+                            if (width === 0) {
+                                return 0;
+                            }
+                            if (this.step <= 0) {
+                                return (pos / width) * 100;
+                            } else {
+                                let v = (pos / width) * (this.max - this.min);
+                                v = Math.round(v / this.step) * this.step;
+                                return (v / (this.max - this.min)) * 100;
+                            }
+                        };
+                        this.pos2value = (pos) => {
+                            return this.min + (pos * (this.max - this.min)) / 100;
+                        };
+                        this.value2pos = (value) => {
+                            return ((value - this.min) / (this.max - this.min)) * 100;
+                        };
+                        this.addRangeSelectedCallback = (callback) => {
+                            this.rangeSelectedCallbacks.push(callback);
+                        };
+                        this.removeRangeSelectedCallback = (callback) => {
+                            utils_1.arrayRemove(this.rangeSelectedCallbacks, callback);
+                        };
+                        this.addMarkersChangeCallback = (callback) => {
+                            this.markersChangeCallbacks.push(callback);
+                        };
+                        this.removeMarkersChangeCallback = (callback) => {
+                            utils_1.arrayRemove(this.markersChangeCallbacks, callback);
+                        };
+                        this.calcRange = (pos) => {
+                            const res = [this.min, this.max];
+                            const value = this.pos2value(pos);
+                            for (const key of Object.keys(this.markers)) {
+                                const v = this.pos2value(Number.parseFloat(key));
+                                if (pos === v) {
+                                    return [0, 0];
+                                } else if (value > v && v > res[0]) {
+                                    res[0] = v;
+                                } else if (value < v && v < res[1]) {
+                                    res[1] = v;
+                                }
+                            }
+                            return res;
+                        };
+                        this.makeFloatingMarker = (pos) => {
+                            if (this.isEnabled()) {
+                                pos = this.adjustPos(pos);
+                                if (!this.floatingMarker) {
+                                    this.floatingMarker = document.createElement('div');
+                                    this.floatingMarker.classList.add('marker', 'floating');
+                                    this.container.appendChild(this.floatingMarker);
+                                }
+                                this.floatingMarker.style.left = `${pos}%`;
+                                this.floatingMarker.style.translate = '-50%';
+                            }
+                        };
+                        this.releaseFloatingMarker = () => {
+                            if (this.floatingMarker) {
+                                this.container.removeChild(this.floatingMarker);
+                                this.floatingMarker = undefined;
+                            }
+                        };
+                        this.findMarkderKey = (marker) => {
+                            for (const key of Object.keys(this.markers)) {
+                                const pos = Number.parseFloat(key);
+                                if (marker === this.markers[pos]) {
+                                    return pos;
+                                }
+                            }
+                            return undefined;
+                        };
+                        this.getMarkers = () => {
+                            return Object.keys(this.markers)
+                                .map((key) => {
+                                    const pos = Number.parseFloat(key);
+                                    return this.pos2value(pos);
+                                })
+                                .sort();
+                        };
+                        this.setMarkers = (markers) => {
+                            if (!markers) {
+                                markers = [];
+                            }
+                            if (utils_1.arrayEqual(this.getMarkers(), markers)) {
+                                return;
+                            }
+                            this.unselectRange();
+                            this.removeSelect();
+                            for (const key of Object.keys(this.markers)) {
+                                const marker = this.markers[key];
+                                this.removeMarkerByNode(marker, false);
+                            }
+                            for (const marker of markers) {
+                                this.addMarker(this.value2pos(marker), false);
+                            }
+                            this.execuateMarkersCallbacks();
+                        };
+                        this.execuateMarkersCallbacks = () => {
+                            const markers = this.getMarkers();
+                            for (const callback of this.markersChangeCallbacks) {
+                                callback(markers, this);
+                            }
+                        };
+                        this.removeMarkerByNode = (marker, triggerCallback = true) => {
+                            const key = this.findMarkderKey(marker);
+                            if (key !== undefined) {
+                                delete this.markers[key];
+                                this.container.removeChild(marker);
+                                if (triggerCallback) {
+                                    this.execuateMarkersCallbacks();
+                                }
+                            }
+                        };
+                        this.addMarker = (pos, triggerCallback = true) => {
+                            if (this.isEnabled()) {
+                                let marker = this.markers[pos];
+                                if (!marker) {
+                                    this.markers[pos] = marker = document.createElement('div');
+                                    marker.setAttribute('draggable', 'false');
+                                    marker.classList.add('marker');
+                                    this.container.appendChild(marker);
+                                    marker.style.left = `${pos}%`;
+                                    marker.style.translate = '-50%';
+                                    marker.addEventListener('click', (evt) => {
+                                        evt.stopPropagation();
+                                        if (evt.altKey) {
+                                            this.removeMarkerByNode(marker);
+                                        }
+                                    });
+                                    marker.addEventListener('mousedown', (evt) => {
+                                        evt.stopPropagation();
+                                        const key = this.findMarkderKey(marker);
+                                        if (key !== undefined) {
+                                            this.setSelect(key);
+                                        }
+                                    });
+                                    marker.addEventListener('mouseup', () => {
+                                        this.removeSelect();
+                                    });
+                                    if (triggerCallback) {
+                                        this.execuateMarkersCallbacks();
+                                    }
+                                }
+                            }
+                        };
+                        this.setSelect = (pos) => {
+                            this.selectedKey = pos;
+                            const marker = this.markers[pos];
+                            if (marker) {
+                                marker.classList.add('selected');
+                            }
+                        };
+                        this.removeSelect = () => {
+                            if (this.selectedKey !== undefined) {
+                                const marker = this.markers[this.selectedKey];
+                                if (marker) {
+                                    marker.classList.remove('selected');
+                                }
+                                this.selectedKey = undefined;
+                            }
+                        };
+                        this.canKeyMove = (posFrom, posTo) => {
+                            if (posFrom === posTo) {
+                                return false;
+                            }
+                            if (posTo < 0 || posTo > 100) {
+                                return false;
+                            }
+                            const keys = Object.keys(this.markers);
+                            for (const key of keys) {
+                                const pos = Number.parseFloat(key);
+                                if (pos === posFrom) {
+                                    continue;
+                                }
+                                if (pos === posTo) {
+                                    return false;
+                                }
+                                if (pos < posFrom && posTo > posFrom) {
+                                    continue;
+                                }
+                                if (pos > posFrom && posTo < posFrom) {
+                                    continue;
+                                }
+                                if (pos < posFrom && pos > posTo) {
+                                    return false;
+                                }
+                                if (pos > posFrom && pos < posTo) {
+                                    return false;
+                                }
+                            }
+                            return true;
+                        };
+                        this.onSelectedMove = (evt) => {
+                            let pos = utils_1.calcMouseOffsetX(evt, this.container);
+                            pos = this.adjustPos(pos);
+                            if (this.selectedKey !== undefined &&
+                                this.canKeyMove(this.selectedKey, pos)) {
+                                const marker = this.markers[this.selectedKey];
+                                if (marker) {
+                                    marker.style.left = `${pos}%`;
+                                    marker.style.translate = '-50%';
+                                    delete this.markers[this.selectedKey];
+                                    this.updateRangeSelectBecauseOfKeyChagne(this.selectedKey, pos);
+                                    this.selectedKey = pos;
+                                    this.markers[pos] = marker;
+                                    this.execuateMarkersCallbacks();
+                                }
+                            }
+                        };
+                        this.isRangeSelected = (range) => {
+                            if (!range) {
+                                range = this.selectedRange;
+                            }
+                            return range[1] > range[0];
+                        };
+                        this.updateRangeSelectBecauseOfKeyChagne = (posFrom, posTo) => {
+                            const valueFrom = this.pos2value(posFrom);
+                            if (this.isRangeSelected() &&
+                                (valueFrom === this.selectedRange[0] ||
+                                    valueFrom === this.selectedRange[1])) {
+                                const valueTo = this.pos2value(posTo);
+                                let valueOther;
+                                if (valueFrom === this.selectedRange[0]) {
+                                    valueOther = this.selectedRange[1];
+                                } else {
+                                    valueOther = this.selectedRange[0];
+                                }
+                                const newRange = valueTo <= valueOther ? [valueTo, valueOther] : [valueOther, valueTo];
+                                this.updateRangeSelect(newRange);
+                            }
+                        };
+                        this.updateRangeSelect = (newRange) => {
+                            if (this.isRangeSelected(newRange)) {
+                                const cWidth = this.container.clientWidth;
+                                const left = ((newRange[0] - this.min) / (this.max - this.min)) * cWidth;
+                                const right = ((newRange[1] - this.min) / (this.max - this.min)) * cWidth;
+                                this.rangeMasker.style.left = `${left}px`;
+                                this.rangeMasker.style.width = `${right - left}px`;
+                                this.rangeMasker.classList.remove('hidden');
+                            }
+                            this.selectedRange = newRange;
+                            for (const callback of this.rangeSelectedCallbacks) {
+                                callback(this.selectedRange, this);
+                            }
+                        };
+                        this.onMouseRangeSelect = (evt) => {
+                            if (this.selectedKey !== undefined) {
+                                // when moving key point, do nothing.
+                                return;
+                            }
+                            const cWidth = this.container.clientWidth;
+                            if (cWidth === 0) {
+                                return;
+                            }
+                            const pos = (utils_1.calcMouseOffsetX(evt, this.container) / cWidth) * 100;
+                            const range = this.calcRange(pos);
+                            this.updateRangeSelect(range);
+                        };
+                        this.selectRange = (range) => {
+                            if (utils_1.arrayEqual(this.selectedRange, range)) {
+                                return;
+                            }
+                            const posFrom = this.value2pos(range[0]);
+                            const posTo = this.value2pos(range[1]);
+                            if (this.markers[posFrom] && this.markers[posTo]) {
+                                this.updateRangeSelect(range);
+                            }
+                        };
+                        this.unselectRange = () => {
+                            this.rangeMasker.style.left = '0px';
+                            this.rangeMasker.style.width = '0px';
+                            this.rangeMasker.classList.add('hidden');
+                            this.selectedRange = [0, 0];
+                            for (const callback of this.rangeSelectedCallbacks) {
+                                callback(this.selectedRange, this);
+                            }
+                        };
+                        this.container = container;
+                        this.rangeMasker = document.createElement('div');
+                        this.rangeMasker.classList.add('range-mask', 'hidden');
+                        this.rangeMasker.addEventListener('click', (evt) => {
+                            evt.stopPropagation();
+                            this.unselectRange();
+                        });
+                        this.container.appendChild(this.rangeMasker);
+                        this.container.addEventListener('click', (evt) => {
+                            if (evt.ctrlKey) {
+                                const pos = this.adjustPos(evt.offsetX);
+                                this.addMarker(pos);
+                            } else {
+                                this.onMouseRangeSelect(evt);
+                            }
+                        });
+                        this.container.addEventListener('mouseover', (evt) => {
+                            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);
+                            if (evt.ctrlKey) {
+                                this.makeFloatingMarker(offsetX);
+                            } else {
+                                this.releaseFloatingMarker();
+                            }
+                        });
+                        this.container.addEventListener('mousemove', (evt) => {
+                            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);
+                            if (evt.ctrlKey) {
+                                this.makeFloatingMarker(offsetX);
+                            } else {
+                                this.releaseFloatingMarker();
+                            }
+                        });
+                        this.container.addEventListener('mouseout', () => {
+                            this.releaseFloatingMarker();
+                        });
+                        document.addEventListener('mousemove', this.onSelectedMove);
+                        document.addEventListener('mouseup', this.removeSelect);
+                        const {
+                            min = 0, max = 0, step = 1
+                        } = option;
+                        this.min = min;
+                        this.max = max;
+                        this.step = step;
+                        this.markers = {};
+                    }
+                }
+                exports.RangeBar = RangeBar;
+                //# sourceMappingURL=range.js.map
+
+                /***/
+            }),
+
+        /***/
         "./lib/recorder.js":
             /*!*************************!*\
               !*** ./lib/recorder.js ***!
               \*************************/
             /***/
             (function(__unused_webpack_module, exports, __webpack_require__) {
 
@@ -175,19 +655,23 @@
                     value: true
                 }));
                 exports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;
                 const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
                 const lru_cache_1 = __importDefault(__webpack_require__( /*! lru-cache */ "webpack/sharing/consume/default/lru-cache/lru-cache"));
                 const common_1 = __webpack_require__( /*! ./common */ "./lib/common.js");
                 const video_1 = __webpack_require__( /*! ./video */ "./lib/video.js");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
                 class RecorderPlayerModel extends common_1.BaseModel {
                     constructor(...args) {
                         super(...args);
                         this.cache = new lru_cache_1.default({
-                            max: 6,
+                            max: 10,
+                        });
+                        this.metaCache = new lru_cache_1.default({
+                            max: 100,
                         });
                         this.fetchStates = {};
                         this.refresh_callbacks = [];
                         this.addRefereshCallback = (callback) => {
                             this.refresh_callbacks.push(callback);
                         };
                         this.removeRefreshCallback = (callback) => {
@@ -197,24 +681,32 @@
                             }
                         };
                         this.triggerRefresh = (index, channel) => {
                             this.refresh_callbacks.forEach((cb) => {
                                 cb(index, channel);
                             });
                         };
-                        this.fetchMeta = () => __awaiter(this, void 0, void 0, function*() {
-                            if (this.meta) {
-                                return this.meta;
+                        this.createIndexKey = (index) => {
+                            return index === undefined || index === null ? 'global' : `${index}`;
+                        };
+                        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function*() {
+                            const key = this.createIndexKey(index);
+                            const cached = this.metaCache.get(key);
+                            if (cached) {
+                                return cached;
+                            }
+                            const args = {};
+                            if (index !== undefined) {
+                                args['index'] = index;
                             }
                             const {
                                 content
-                            } = yield this.send_cmd('fetch_meta', {});
-                            this.meta = content;
-                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
-                            return this.meta;
+                            } = yield this.send_cmd('fetch_meta', args);
+                            this.metaCache.set(key, content);
+                            return content;
                         });
                         this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function*() {
                             const key = channel ? `${index}-${channel}` : `${index}`;
                             const cached = this.cache.get(key);
                             if (cached) {
                                 return cached;
                             }
@@ -251,14 +743,25 @@
                                     }
                                 });
                                 return new Promise((resolve) => {
                                     theResolve = resolve;
                                 });
                             }
                         });
+                        this.invalidateMeta = (index) => {
+                            const key = this.createIndexKey(index);
+                            this.metaCache.delete(key);
+                        };
+                        this.setMarkers = (index, markers) => __awaiter(this, void 0, void 0, function*() {
+                            yield this.send_cmd('set_markers', {
+                                index,
+                                markers
+                            });
+                            this.invalidateMeta(index);
+                        });
                         this.addMessageHandler('channel_stale', (cmdMsg) => {
                             const {
                                 args = {}
                             } = cmdMsg;
                             const {
                                 channel
                             } = args;
@@ -267,29 +770,31 @@
                                     if (key.endsWith(`-${channel}`)) {
                                         this.cache.delete(key);
                                     }
                                 }
                             } else {
                                 this.cache.clear();
                             }
-                            this.meta = undefined;
                             this.triggerRefresh(undefined, channel);
                         });
                     }
                     defaults() {
                         return Object.assign(Object.assign({}, super.defaults()), {
                             _model_name: RecorderPlayerModel.model_name,
                             _view_name: RecorderPlayerModel.view_name,
                             format: 'mp4',
                             width: '',
                             height: '',
                             autoplay: true,
                             loop: false,
                             controls: true,
-                            autonext: true
+                            autonext: true,
+                            selected_index: null,
+                            selected_channel: null,
+                            selected_range: [0, 0]
                         });
                     }
                 }
                 exports.RecorderPlayerModel = RecorderPlayerModel;
                 RecorderPlayerModel.model_name = 'RecorderPlayerModel';
                 RecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view
                 class RecorderPlayerView extends base_1.DOMWidgetView {
@@ -297,57 +802,131 @@
                         super(...args);
                         this.index = -1;
                         this.indexSize = 0;
                         this.channel = '';
                         this.channels = [];
                         this.loading = false;
                         this.loadStateOnceCallbacks = [];
+                        this.selectedRange = [0, 0];
+                        this.isRangeSelected = () => {
+                            return this.selectedRange[1] > this.selectedRange[0];
+                        };
                         this.addLoadStateOnceCallback = (callback) => {
                             this.loadStateOnceCallbacks.push(callback);
                         };
                         this.setLoading = (loading) => {
                             if (this.loading !== loading) {
                                 this.loading = loading;
                                 this.loadStateOnceCallbacks.forEach((callback) => callback(loading));
                                 this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);
                             }
                         };
-                        this.fetchMeta = () => __awaiter(this, void 0, void 0, function*() {
+                        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function*() {
                             const {
-                                record_count = 0, chanels = []
-                            } = yield this.model.fetchMeta();
+                                record_count = 0, chanels = [], markers, statistics,
+                            } = yield this.model.fetchMeta(index);
                             this.indexSize = record_count;
                             this.channels = chanels;
+                            this.markers = markers;
+                            this.statistics = statistics;
                         });
                         this.initVideo = () => __awaiter(this, void 0, void 0, function*() {
                             if (!this.video) {
                                 this.video = new video_1.Video();
+                                this.video.addVideoInitHandler((video) => {
+                                    video.rangeBar.setMarkers(this.markers);
+                                });
                                 this.video.addIndexSelectHandler((i) => {
                                     this.load(i, undefined);
                                 });
                                 this.video.addChannelSelectHandler((channel) => {
                                     this.load(undefined, channel, false, true);
                                 });
+                                this.video.rangeBar.addRangeSelectedCallback((range) => {
+                                    var _a;
+                                    this.selectedRange = range;
+                                    if (this.isRangeSelected()) {
+                                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                                        if (video) {
+                                            video.currentTime = range[0];
+                                        }
+                                        this.model.set('selected_index', this.index);
+                                        this.model.set('selected_channel', this.channel);
+                                    } else {
+                                        this.model.set('selected_index', null);
+                                        this.model.set('selected_channel', null);
+                                    }
+                                    this.model.set('selected_range', range);
+                                    this.model.save_changes();
+                                });
+                                this.video.rangeBar.addMarkersChangeCallback((markers) => {
+                                    this.markers = markers;
+                                    this.model.setMarkers(this.index, markers);
+                                });
+                                this.model.on('change:selected_index', this.onSelectedIndexChange);
+                                this.model.on('change:selected_channel', this.onSelectedChannelChange);
+                                this.model.on('change:selected_range', this.onSelectedRangeChange);
                                 this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function*() {
+                                    if (this.isRangeSelected()) {
+                                        return;
+                                    }
                                     const autonext = this.model.get('autonext');
                                     const loop = this.model.get('loop');
                                     if (autonext) {
                                         if (this.index < this.indexSize - 1) {
                                             this.load(this.index + 1, undefined);
                                         } else if (this.index === this.indexSize - 1 && loop) {
                                             this.load(0, undefined);
                                         }
                                     }
                                 }));
+                                this.video.video.addEventListener('timeupdate', () => {
+                                    var _a;
+                                    if (this.isRangeSelected()) {
+                                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                                        if (video) {
+                                            if (video.currentTime >= this.selectedRange[1]) {
+                                                const loop = this.model.get('loop');
+                                                if (loop) {
+                                                    video.currentTime = this.selectedRange[0];
+                                                } else {
+                                                    video.pause();
+                                                }
+                                            }
+                                        }
+                                    }
+                                });
                                 this.el.appendChild(this.video.container);
                                 this.update();
-                                yield this.fetchMeta();
                                 yield this.load(0, '');
                             }
                         });
+                        this.onSelectedIndexChange = () => {
+                            const index = this.model.get('selected_index');
+                            if (index !== undefined && index !== null && this.index !== index) {
+                                this.load(index, undefined);
+                            }
+                        };
+                        this.onSelectedChannelChange = () => {
+                            const channel = this.model.get('selected_channel');
+                            if (channel && this.channel !== channel) {
+                                this.load(undefined, channel);
+                            }
+                        };
+                        this.onSelectedRangeChange = () => {
+                            var _a;
+                            const range = this.model.get('selected_range');
+                            if (!utils_1.arrayEqual(this.selectedRange, range)) {
+                                this.selectedRange = range;
+                                const rangeBar = (_a = this.video) === null || _a === void 0 ? void 0 : _a.rangeBar;
+                                if (rangeBar) {
+                                    rangeBar.selectRange(range);
+                                }
+                            }
+                        };
                         this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function*() {
                             return new Promise((resolve) => {
                                 if (this.loading === loading) {
                                     resolve();
                                 } else {
                                     this.addLoadStateOnceCallback((state) => {
                                         if (state === loading) {
@@ -366,25 +945,27 @@
                                     channel = this.channel;
                                 }
                                 if (this.index === index && this.channel === channel && !force) {
                                     return;
                                 }
                                 yield this.waitForLoading(false);
                                 this.setLoading(true);
-                                yield this.fetchMeta();
+                                yield this.fetchMeta(index);
                                 try {
                                     if (this.indexSize > 0) {
                                         const blob = yield this.model.fetchData(index, channel);
                                         this.video.updateData(blob, resumeTime);
                                     }
                                     this.index = index;
                                     this.channel = channel;
+                                    this.video.rangeBar.unselectRange();
                                     this.video.updateIndexerSize(this.indexSize);
                                     this.video.updateIndexerIndex(this.index);
                                     this.video.updateChannels(this.channels);
+                                    this.video.updateStatistics(this.statistics);
                                 } catch (e) {
                                     console.error(e);
                                 } finally {
                                     this.setLoading(false);
                                 }
                             }
                         });
@@ -415,14 +996,15 @@
                                     video.loop = false;
                                 } else {
                                     video.loop = this.model.get('loop') ? true : false;
                                 }
                             }
                             (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));
                         };
+                        this.selectedRange = this.model.get('selected_range');
                         this.model.addRefereshCallback((i, c) => {
                             if (this.index === i &&
                                 ((!this.channel && !c) || (this.channel && c && this.channel === c))) {
                                 this.load(undefined, undefined, true);
                             }
                         });
                     }
@@ -434,14 +1016,17 @@
                         this.updateWidth();
                         this.updateHeight();
                         this.updateOtherVideoAttributes();
                         return super.update();
                     }
                     remove() {
                         var _a;
+                        this.model.off('change:selected_index', this.onSelectedIndexChange);
+                        this.model.off('change:selected_channel', this.onSelectedChannelChange);
+                        this.model.off('change:selected_range', this.onSelectedRangeChange);
                         (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();
                         this.video = undefined;
                     }
                 }
                 exports.RecorderPlayerView = RecorderPlayerView;
                 //# sourceMappingURL=recorder.js.map
 
@@ -457,15 +1042,15 @@
             ((__unused_webpack_module, exports) => {
 
                 "use strict";
 
                 Object.defineProperty(exports, "__esModule", ({
                     value: true
                 }));
-                exports.isMac = exports.arrayFind = exports.arrayInclude = void 0;
+                exports.calcMouseOffsetX = exports.calcPageX = exports.isMac = exports.arrayEqual = exports.arrayRemove = exports.arrayIndexOf = exports.arrayFind = exports.arrayInclude = void 0;
 
                 function arrayInclude(arr, target) {
                     return !!~arr.indexOf(target);
                 }
                 exports.arrayInclude = arrayInclude;
 
                 function arrayFind(arr, cond) {
@@ -475,18 +1060,63 @@
                             return e;
                         }
                     }
                     return undefined;
                 }
                 exports.arrayFind = arrayFind;
 
+                function arrayIndexOf(arr, target) {
+                    for (let i = 0; i < arr.length; ++i) {
+                        if (arr[i] === target) {
+                            return i;
+                        }
+                    }
+                    return -1;
+                }
+                exports.arrayIndexOf = arrayIndexOf;
+
+                function arrayRemove(arr, target) {
+                    const index = arrayIndexOf(arr, target);
+                    if (index !== -1) {
+                        arr.splice(index, 1);
+                        return true;
+                    } else {
+                        return false;
+                    }
+                }
+                exports.arrayRemove = arrayRemove;
+
+                function arrayEqual(arr1, arr2) {
+                    if (arr1 === arr2) {
+                        return true;
+                    }
+                    return (Array.isArray(arr1) &&
+                        Array.isArray(arr2) &&
+                        arr1.length === arr2.length &&
+                        arr1.every((val, index) => val === arr2[index]));
+                }
+                exports.arrayEqual = arrayEqual;
+
                 function isMac() {
                     return window.navigator.userAgent.indexOf('Mac') !== -1;
                 }
                 exports.isMac = isMac;
+
+                function calcPageX(element) {
+                    const {
+                        left
+                    } = element.getBoundingClientRect();
+                    return left + document.body.scrollLeft;
+                }
+                exports.calcPageX = calcPageX;
+
+                function calcMouseOffsetX(evt, target) {
+                    return evt.pageX - calcPageX(target);
+                }
+                exports.calcMouseOffsetX = calcMouseOffsetX;
                 //# sourceMappingURL=utils.js.map
 
                 /***/
             }),
 
         /***/
         "./lib/version.js":
@@ -563,32 +1193,47 @@
                         }
                         step((generator = generator.apply(thisArg, _arguments || [])).next());
                     });
                 };
                 Object.defineProperty(exports, "__esModule", ({
                     value: true
                 }));
-                exports.Video = exports.createVideoContainer = exports.createVideoProgress = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;
+                exports.Video = exports.createVideoContainer = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;
                 __webpack_require__( /*! ../css/video.css */ "./css/video.css");
+                const charts_1 = __webpack_require__( /*! ./charts */ "./lib/charts.js");
+                const range_1 = __webpack_require__( /*! ./range */ "./lib/range.js");
                 const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
                 const svgNS = 'http://www.w3.org/2000/svg';
                 const prefix = 'ipywebcam-video-';
 
                 function makeId(id) {
                     return `${prefix}${id}`;
                 }
                 exports.makeId = makeId;
 
-                function createSymbol(id, pathD, viewBox = '0 0 24 24') {
+                function createSymbol(id, pathD, viewBox = '0 0 24 24', gTrans = '') {
                     const symbol = document.createElementNS(svgNS, 'symbol');
                     symbol.id = makeId(id);
                     symbol.setAttribute('viewBox', viewBox);
-                    const path = document.createElementNS(svgNS, 'path');
-                    path.setAttribute('d', pathD);
-                    symbol.appendChild(path);
+                    if (Array.isArray(pathD)) {
+                        const group = document.createElementNS(svgNS, 'g');
+                        if (gTrans) {
+                            group.setAttribute('transform', gTrans);
+                        }
+                        for (const p of pathD) {
+                            const path = document.createElementNS(svgNS, 'path');
+                            path.setAttribute('d', p);
+                            group.appendChild(path);
+                        }
+                        symbol.appendChild(group);
+                    } else {
+                        const path = document.createElementNS(svgNS, 'path');
+                        path.setAttribute('d', pathD);
+                        symbol.appendChild(path);
+                    }
                     return symbol;
                 }
 
                 function createControlsSvg() {
                     const svg = document.createElementNS(svgNS, 'svg');
                     svg.id = makeId('icons');
                     svg.setAttribute('style', 'display: none');
@@ -600,14 +1245,20 @@
                     defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));
                     defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));
                     defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));
                     defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));
                     defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));
                     defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));
                     defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));
+                    defs.appendChild(createSymbol('statistics', [
+                        'M2096 2741 c-15 -10 -37 -32 -47 -47 -18 -28 -19 -65 -19 -984 l0 -955 25 -37 c32 -48 47 -50 268 -46 l179 3 29 33 29 32 0 969 c0 967 0 968 -21 995 -40 50 -64 56 -246 56 -148 0 -171 -2 -197 -19z',
+                        'M1308 2088 c-30 -8 -41 -18 -58 -52 -19 -41 -20 -58 -20 -643 0 -330 3 -613 6 -629 3 -16 16 -42 30 -59 l24 -30 210 0 210 0 24 30 c14 17 27 43 30 59 3 16 6 299 6 629 0 584 -1 602 -20 643 -18 36 -27 43 -65 53 -53 13 -326 13 -377 -1z',
+                        'M504 1426 c-64 -28 -64 -28 -64 -373 l0 -313 29 -32 29 -33 179 -3 c221 -4 236 -2 268 46 l25 37 0 293 c0 328 -3 347 -65 376 -44 21 -353 22 -401 2z',
+                        'M42 468 c-39 -32 -41 -35 -41 -91 -1 -42 3 -59 14 -63 8 -3 17 -13 20 -23 3 -9 18 -24 34 -34 27 -16 124 -17 1431 -17 1307 0 1404 1 1431 17 16 10 31 25 34 34 3 10 12 20 20 23 11 4 15 21 15 58 0 49 -3 56 -40 91 l-40 37 -1419 0 -1419 0 -40 -32z',
+                    ], '0 0 1000 1000', 'translate(100, 900) scale(0.25, -0.25)'));
                     return svg;
                 }
 
                 function createSelectiveUses(active, ...ids) {
                     const svg = document.createElementNS(svgNS, 'svg');
                     ids.forEach((id) => {
                         const use = document.createElementNS(svgNS, 'use');
@@ -643,24 +1294,35 @@
                     const input = document.createElement('input');
                     input.id = makeId('seek');
                     input.classList.add('seek');
                     input.type = 'range';
                     input.value = '0';
                     input.min = '0';
                     input.step = '1';
+                    const rangeBar = document.createElement('div');
+                    rangeBar.setAttribute('draggable', 'false');
+                    rangeBar.classList.add('range-bar', 'hidden');
                     const tooltip = document.createElement('div');
                     tooltip.id = makeId('seek-tooltip');
                     tooltip.classList.add('seek-tooltip');
                     tooltip.innerText = '00:00';
                     container.appendChild(progress);
                     container.appendChild(input);
                     container.appendChild(tooltip);
+                    container.appendChild(rangeBar);
+                    return container;
+                }
+
+                function createStatisticsContainer() {
+                    const container = document.createElement('div');
+                    container.classList.add('statistics-container', 'hidden', 'unused');
+                    const svg = document.createElementNS(svgNS, 'svg');
+                    container.appendChild(svg);
                     return container;
                 }
-                exports.createVideoProgress = createVideoProgress;
 
                 function createPlaybackButton(options) {
                     const button = document.createElement('button');
                     button.id = makeId('play');
                     button.classList.add('play');
                     button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);
                     const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');
@@ -768,14 +1430,27 @@
                     container.setAttribute('data-title', 'Select Channel');
                     const text = document.createElement('div');
                     text.classList.add('text');
                     container.appendChild(text);
                     return container;
                 }
 
+                function createStatsSelector() {
+                    const container = document.createElement('button');
+                    container.classList.add('stats-selector', 'hidden');
+                    container.setAttribute('data-title', 'Select Statistics Type');
+                    const icon = createSelectiveUses('statistics', 'statistics');
+                    icon.classList.add('icon');
+                    container.appendChild(icon);
+                    const text = document.createElement('div');
+                    text.classList.add('text');
+                    container.appendChild(text);
+                    return container;
+                }
+
                 function createPipButton(options) {
                     const button = document.createElement('button');
                     button.id = makeId('pip-button');
                     button.classList.add('pip-button');
                     if (!isPipEnabled()) {
                         button.classList.add('hidden');
                     }
@@ -794,14 +1469,16 @@
                     button.appendChild(svg);
                     return button;
                 }
 
                 function createRightControls(options) {
                     const container = document.createElement('div');
                     container.classList.add('right-controls');
+                    const statsSelector = createStatsSelector();
+                    container.appendChild(statsSelector);
                     const indexSelector = createIndexSelector();
                     container.appendChild(indexSelector);
                     const channelSelector = createChannelSelector();
                     container.appendChild(channelSelector);
                     const speedSelector = createSpeedSelector();
                     container.appendChild(speedSelector);
                     const pipButton = createPipButton(options);
@@ -819,18 +1496,21 @@
                     const rightControls = createRightControls(options);
                     container.appendChild(rightControls);
                     return container;
                 }
 
                 function createVideoControls(options) {
                     const container = document.createElement('div');
+                    container.setAttribute('draggable', 'false');
                     container.classList.add('video-controls');
                     container.tabIndex = 0;
                     const videoProgress = createVideoProgress();
                     container.appendChild(videoProgress);
+                    const statistics = createStatisticsContainer();
+                    container.appendChild(statistics);
                     const bottomControls = createBottomControls(options);
                     container.appendChild(bottomControls);
                     return container;
                 }
                 const VIDEO_WORKS = !!document.createElement('video').canPlayType;
 
                 function createVideoContainer(options) {
@@ -1236,14 +1916,16 @@
                 }
                 const DEFAULT_OPTIONS = {
                     shortcuts: {
                         play: 'k',
                         mute: 'm',
                         fullscreen: 'f',
                         pip: 'p',
+                        range: 'v',
+                        stats: 's',
                     },
                 };
 
                 function makeShortcut(shortcut) {
                     if (typeof shortcut === 'string') {
                         return {
                             key: shortcut,
@@ -1264,14 +1946,16 @@
                 function makeOptions(otps) {
                     const options = Object.assign({}, DEFAULT_OPTIONS, otps);
                     options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);
                     options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);
                     options.shortcuts.mute = makeShortcut(options.shortcuts.mute);
                     options.shortcuts.pip = makeShortcut(options.shortcuts.pip);
                     options.shortcuts.play = makeShortcut(options.shortcuts.play);
+                    options.shortcuts.range = makeShortcut(options.shortcuts.range);
+                    options.shortcuts.stats = makeShortcut(options.shortcuts.stats);
                     return options;
                 }
                 const SpeedOptions = [{
                     label: '0.25x',
                     value: 0.25
                 }, {
                     label: '0.5x',
@@ -1302,24 +1986,55 @@
                     value: 3
                 }, ];
                 class Video {
                     constructor(opts = {}) {
                         this.indexSelectHandlers = [];
                         this.indexerIndex = -1;
                         this.indexerSize = 0;
+                        this.stats = '';
+                        this.statsData = {};
+                        this.statsMeta = {};
                         this.speed = 1;
                         this.channelSelectHandlers = [];
                         this.channel = '';
+                        this.videoInitHandlers = [];
                         this.destroy = () => {
                             document.removeEventListener('keyup', this.keyboardShortcuts);
                             const url = this.video.src;
                             this.video.src = '';
                             if (url) {
                                 URL.revokeObjectURL(url);
                             }
+                            this.rangeBar.destroy();
+                        };
+                        this.addVideoInitHandler = (handler) => {
+                            this.videoInitHandlers.push(handler);
+                        };
+                        this.removeVideoInitHandler = (handler) => {
+                            utils_1.arrayRemove(this.videoInitHandlers, handler);
+                        };
+                        this.updateStatistics = (statistics = {}, statistics_meta = {}) => {
+                            this.statsData = statistics;
+                            this.statsMeta = statistics_meta;
+                            const keys = Object.keys(statistics);
+                            if (keys.length > 0) {
+                                this.statsSelector.classList.remove('hidden');
+                                this.statsSelectorPannel.updateView(keys.map((key) => ({
+                                    label: key,
+                                    value: key
+                                })));
+                                this.statisticsBar.classList.remove('unused');
+                                if (!utils_1.arrayInclude(keys, this.stats)) {
+                                    this.statsSelectorPannel.select(keys[0]);
+                                }
+                            } else {
+                                this.statsSelector.classList.add('hidden');
+                                this.statsSelectorPannel.updateView([]);
+                                this.statisticsBar.classList.add('unused');
+                            }
                         };
                         this.updateChannels = (channels = []) => {
                             if (channels.length > 0) {
                                 this.channelSelector.classList.remove('hidden');
                                 const options = [{
                                     label: 'Default',
                                     value: ''
@@ -1444,14 +2159,21 @@
                         this.initializeVideo = () => {
                             const videoDuration = Math.floor(this.video.duration);
                             this.seek.setAttribute('max', `${videoDuration}`);
                             this.progress.setAttribute('max', `${videoDuration}`);
                             const time = formatTime(videoDuration);
                             this.duration.innerText = `${time.minutes}:${time.seconds}`;
                             this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
+                            this.rangeBar.max = videoDuration;
+                            for (const handler of this.videoInitHandlers) {
+                                handler(this);
+                            }
+                            if (this.stats) {
+                                this.statsSelectorPannel.select(this.stats);
+                            }
                         };
                         this.updateCurrentTime = () => {
                             this.currentTime = this.video.currentTime;
                         };
                         // updateTimeElapsed indicates how far through the video
                         // the current playback is by updating the timeElapsed element
                         this.updateTimeElapsed = () => {
@@ -1578,14 +2300,20 @@
                                 }
                             } catch (error) {
                                 console.error(error);
                             } finally {
                                 this.pipButton.disabled = false;
                             }
                         });
+                        this.toggleRangeBar = () => {
+                            this.rangeBar.toggle();
+                        };
+                        this.toggleStatisticsBar = () => {
+                            this.statisticsBar.classList.toggle('hidden');
+                        };
                         // hideControls hides the video controls when not in use
                         // if the video is paused, the controls must remain visible
                         this.hideControls = () => {
                             if (this.video.paused) {
                                 return;
                             }
                             this.videoControls.classList.add('hide');
@@ -1610,15 +2338,17 @@
                                 altKey,
                                 shiftKey
                             } = event;
                             const {
                                 play,
                                 mute,
                                 fullscreen,
-                                pip
+                                pip,
+                                range,
+                                stats
                             } = this.options.shortcuts;
                             if (key === play.key &&
                                 (play.ctrl === !!ctrlKey ||
                                     play.alt === !!altKey ||
                                     play.shift === !!shiftKey)) {
                                 this.togglePlay();
                                 this.animatePlayback();
@@ -1640,35 +2370,57 @@
                                     fullscreen.shift === !!shiftKey)) {
                                 this.toggleFullScreen();
                             } else if (key === pip.key &&
                                 (pip.ctrl === !!ctrlKey ||
                                     pip.alt === !!altKey ||
                                     pip.shift === !!shiftKey)) {
                                 this.togglePip();
+                            } else if (key === range.key &&
+                                (range.ctrl === !!ctrlKey ||
+                                    range.alt === !!altKey ||
+                                    range.shift === !!shiftKey)) {
+                                this.toggleRangeBar();
+                            } else if (key === stats.key &&
+                                (stats.ctrl === !!ctrlKey ||
+                                    stats.alt === !!altKey ||
+                                    stats.shift === !!shiftKey)) {
+                                this.toggleStatisticsBar();
                             }
                         };
                         this.options = makeOptions(opts);
                         this.installSvg();
                         this.container = createVideoContainer(this.options);
                         this.video = this.container.querySelector('video.video');
                         this.videoControls = this.container.querySelector('div.video-controls');
                         this.playButton = this.container.querySelector('button.play');
                         this.timeElapsed = this.container.querySelector('time.time-elapsed');
                         this.duration = this.container.querySelector('time.duration');
                         this.progress = this.container.querySelector('progress.progress-bar');
                         this.seek = this.container.querySelector('input.seek');
                         this.seekTooltip = this.container.querySelector('div.seek-tooltip');
+                        this.rangeBar = new range_1.RangeBar(this.container.querySelector('div.range-bar'));
+                        this.statisticsBar = this.container.querySelector('div.statistics-container');
+                        this.statisticsSvg = this.statisticsBar.querySelector('svg');
                         this.volume = this.container.querySelector('input.volume');
                         this.volumeButton = this.container.querySelector('button.volume-button');
                         this.volumeIcons = this.volumeButton.querySelector('svg');
                         this.playbackAnimation = this.container.querySelector('div.playback-animation');
                         this.fullscreenButton = this.container.querySelector('button.fullscreen-button');
                         this.fullscreenIcons = this.fullscreenButton.querySelector('svg');
                         this.pipButton = this.container.querySelector('button.pip-button');
                         this.indexSelector = this.container.querySelector('button.index-selector');
+                        this.statsSelector = this.container.querySelector('button.stats-selector');
+                        this.statsSelectorPannel = new SelectorPannel([]).install(this.statsSelector, (option) => {
+                            const text = this.statsSelector.querySelector('div.text');
+                            text.innerText = option.label;
+                            this.stats = option.value;
+                            if (this.video.duration > 0) {
+                                charts_1.makeLineChart(this.statisticsSvg, this.statsData[this.stats], [0, this.video.duration], this.statsMeta[this.stats].y_range, this.video.clientWidth - 20, 30);
+                            }
+                        });
                         this.speedSelector = this.container.querySelector('button.speed-selector');
                         this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {
                             const text = this.speedSelector.querySelector('div.text');
                             text.innerText = option.label;
                             this.video.playbackRate = option.value;
                             this.speed = option.value;
                         }, '1.0x');
@@ -2415,15 +3167,15 @@
             /***/
             ((module, exports, __webpack_require__) => {
 
                 // Imports
                 var ___CSS_LOADER_API_IMPORT___ = __webpack_require__( /*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
                 exports = ___CSS_LOADER_API_IMPORT___(false);
                 // Module
-                exports.push([module.id, "/* ==========================================================================\r\n   #Custom HTML5 Video Player\r\n   ========================================================================== */\r\n\r\n:root {\r\n  --youtube-red: #FE0900;\r\n}\r\n\r\n.ipywebcam.video-container {\r\n  width: 800px;\r\n  border-radius: 4px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.ipywebcam.video-container .video {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ipywebcam.video-container .video-controls {\r\n  right: 0;\r\n  left: 0;\r\n  padding: 10px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  transition: all 0.2s ease;\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\r\n}\r\n\r\n.ipywebcam.video-container .video-controls.hide {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container .video-progress {\r\n  position: relative;\r\n  height: 8.4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ipywebcam.video-container progress {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-bar {\r\n  background-color: #474545;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-value {\r\n  background: var(--youtube-red);\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-moz-progress-bar {\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n}\r\n\r\n.ipywebcam.video-container .seek {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\r\n  display: block;\r\n}\r\n\r\n.ipywebcam.video-container .seek-tooltip {\r\n  display: none;\r\n  position: absolute;\r\n  top: -50px;\r\n  margin-left: -20px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  content: attr(data-title);\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.ipywebcam.video-container .bottom-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .left-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls input {\r\n  width: 100px;\r\n  opacity: 1;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\r\n  width: 100px;\r\n  opacity: 1;\r\n}\r\n\r\n.ipywebcam.video-container button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin-right: 7px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  border: none;\r\n  outline: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container button * {\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip)::before {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  display: none;\r\n  right: 0;\r\n  top: -50px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  font-weight: bold;\r\n  padding: 4px 6px;\r\n  word-break: keep-all;\r\n  white-space: pre;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container .fullscreen-button {\r\n  margin-right: 0;\r\n}\r\n\r\n.ipywebcam.video-container .index-selector {\r\n  min-width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .text-button {\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .selector-panel {\r\n  position: absolute;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: rgba(21, 21, 21, .9);\r\n  padding: 6px 12px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  flex-direction: column;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options.grid {\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button.disabled svg {\r\n  fill: #999;\r\n  stroke: #999;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button {\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option {\r\n  color: #fff;\r\n  min-width: 26px;\r\n  height: 26px;\r\n  margin: 3px;\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option .text {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option:hover {\r\n  background: rgba(120, 120, 120, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option.selected {\r\n  background: rgba(81, 81, 81, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container .pip-button svg {\r\n  width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .playback-animation {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -40px;\r\n  margin-top: -40px;\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 80px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  opacity: 0;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range] {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  height: 8.4px;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  border-radius: 1.3px;\r\n  -webkit-appearance: none;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 16px;\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-left: -1px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\r\n  background: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume {\r\n  height: 5px;\r\n  background-color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\r\n  margin-left: 0;\r\n  height: 14px;\r\n  width: 14px;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 8.4px;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  background: transparent;\r\n  border-radius: 1.3px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\r\n  height: 14px;\r\n  width: 14px;\r\n  border-radius: 50px;\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\r\n  border: 1px solid #fff;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .hidden {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container svg {\r\n  width: 28px;\r\n  height: 28px;\r\n  fill: #fff;\r\n  stroke: #fff;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n}", ""]);
+                exports.push([module.id, "/* ==========================================================================\r\n   #Custom HTML5 Video Player\r\n   ========================================================================== */\r\n\r\n:root {\r\n  --youtube-red: rgb(254, 9, 0);\r\n}\r\n\r\n.ipywebcam.video-container {\r\n  width: 800px;\r\n  border-radius: 4px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.ipywebcam.video-container .video {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ipywebcam.video-container .video-controls {\r\n  right: 0;\r\n  left: 0;\r\n  padding: 10px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  transition: all 0.2s ease;\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\r\n}\r\n\r\n.ipywebcam.video-container .video-controls.hide {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container .video-progress {\r\n  position: relative;\r\n  height: 8.4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ipywebcam.video-container progress {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-bar {\r\n  background-color: #474545;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-value {\r\n  background: var(--youtube-red);\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-moz-progress-bar {\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n}\r\n\r\n.ipywebcam.video-container .seek {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\r\n  display: block;\r\n}\r\n\r\n.ipywebcam.video-container .seek-tooltip {\r\n  display: none;\r\n  position: absolute;\r\n  top: -30px;\r\n  margin-left: -20px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  content: attr(data-title);\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar {\r\n  position: absolute;\r\n  top: 12px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  background-color: #474545;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n  overflow: visible;\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker {\r\n  position: absolute;\r\n  width: 4px;\r\n  height: 10px;\r\n  top: -0.8px;\r\n  background-color: rgb(254, 9, 0);\r\n  border-radius: 1px;\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker.floating {\r\n  background-color: rgba(254, 9, 0, 0.7);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker.selected {\r\n  background-color: rgba(254, 0, 120, 0.7);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .range-mask {\r\n  position: absolute;\r\n  height: 8.4px;\r\n  background-color: #00c569;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container {\r\n  position: relative;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container svg {\r\n  display: block;\r\n  width: 100%;\r\n  height: 30px;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container.unused svg {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container .bottom-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .left-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls input {\r\n  width: 100px;\r\n  opacity: 1;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\r\n  width: 100px;\r\n  opacity: 1;\r\n}\r\n\r\n.ipywebcam.video-container button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin-right: 7px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  border: none;\r\n  outline: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container button * {\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip)::before {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  display: none;\r\n  right: 0;\r\n  top: -50px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  font-weight: bold;\r\n  padding: 4px 6px;\r\n  word-break: keep-all;\r\n  white-space: pre;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container .fullscreen-button {\r\n  margin-right: 0;\r\n}\r\n\r\n.ipywebcam.video-container .stats-selector svg.icon {\r\n  display: inline;\r\n  margin-right: 2px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ipywebcam.video-container .stats-selector div.text {\r\n  display: inline;\r\n  color: #fff;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ipywebcam.video-container .index-selector {\r\n  min-width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .text-button {\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .selector-panel {\r\n  position: absolute;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: rgba(21, 21, 21, .9);\r\n  padding: 6px 12px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  flex-direction: column;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options.grid {\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button.disabled svg {\r\n  fill: #999;\r\n  stroke: #999;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button {\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option {\r\n  color: #fff;\r\n  min-width: 26px;\r\n  height: 26px;\r\n  margin: 3px;\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option .text {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option:hover {\r\n  background: rgba(120, 120, 120, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option.selected {\r\n  background: rgba(81, 81, 81, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container .pip-button svg {\r\n  width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .playback-animation {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -40px;\r\n  margin-top: -40px;\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 80px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  opacity: 0;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range] {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  height: 8.4px;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  border-radius: 1.3px;\r\n  -webkit-appearance: none;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 16px;\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-left: -1px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\r\n  background: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume {\r\n  height: 5px;\r\n  background-color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\r\n  margin-left: 0;\r\n  height: 14px;\r\n  width: 14px;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 8.4px;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  background: transparent;\r\n  border-radius: 1.3px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\r\n  height: 14px;\r\n  width: 14px;\r\n  border-radius: 50px;\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\r\n  border: 1px solid #fff;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .hidden {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container svg {\r\n  width: 28px;\r\n  height: 28px;\r\n  fill: #fff;\r\n  stroke: #fff;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n}", ""]);
                 // Exports
                 module.exports = exports;
 
 
                 /***/
             }),
 
@@ -2909,15 +3661,15 @@
             /*!**********************!*\
               !*** ./package.json ***!
               \**********************/
             /***/
             ((module) => {
 
                 "use strict";
-                module.exports = JSON.parse('{"name":"ipywebcam","version":"0.1.8","description":"A Custom Jupyter Widget Library for Web Camera using WebRTC","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/vipcxj/ipywebcam","bugs":{"url":"https://github.com/vipcxj/ipywebcam/issues"},"license":"BSD-3-Clause","author":{"name":"Xiaojing Chen","email":"vipcxj@126.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/vipcxj/ipywebcam"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebcam/labextension","clean:nbextension":"rimraf ipywebcam/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","lru-cache":"^7.14.1"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebcam/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
+                module.exports = JSON.parse('{"name":"ipywebcam","version":"0.1.8","description":"A Custom Jupyter Widget Library for Web Camera using WebRTC","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/vipcxj/ipywebcam","bugs":{"url":"https://github.com/vipcxj/ipywebcam/issues"},"license":"BSD-3-Clause","author":{"name":"Xiaojing Chen","email":"vipcxj@126.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/vipcxj/ipywebcam"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebcam/labextension","clean:nbextension":"rimraf ipywebcam/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","d3":"^7.8.2","lru-cache":"^7.14.1"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/d3":"^7.4.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebcam/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
 
                 /***/
             })
 
     }
 ]);
-//# sourceMappingURL=lib_recorder_js-lib_webcam_js.2c9276c21e75d417d68e.js.map
+//# sourceMappingURL=lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js.map
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.2c9276c21e75d417d68e.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js.map`

 * *Files 8% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8047619047619048%*

 * *Differences: {"'file'": "'lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js'",*

 * * "'mappings'": "';;;;;;;;;AAAa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,wBAAwB,mBAAO,CAAC,iDAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC []*

```diff
@@ -1,36 +1,40 @@
 {
-    "file": "lib_recorder_js-lib_webcam_js.2c9276c21e75d417d68e.js",
-    "mappings": ";;;;;;;;;AAAa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4KAA4K;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe,IAAI;AACnD,wCAAwC,qBAAqB;AAC7D;AACA,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,4BAA4B,eAAe,IAAI;AAC/C;AACA,SAAS;AACT;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;ACnEa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,2BAA2B;AACxD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,oCAAoC,mBAAO,CAAC,sEAAW;AACvD,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU,sCAAsC;AACpE;AACA;AACA;AACA,SAAS;AACT;AACA,qCAAqC,MAAM,GAAG,QAAQ,OAAO,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA,iBAAiB;AACjB,wBAAwB,8BAA8B;AACtD,iDAAiD,eAAe,OAAO,GAAG;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA,oBAAoB,YAAY;AAChC,oBAAoB,UAAU;AAC9B;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,2LAA2L;AAC/P;AACA;AACA,2BAA2B;AAC3B;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;;;;;;;;;;;AC5Qa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,iBAAiB,GAAG,oBAAoB;AACxD;AACA;AACA;AACA,oBAAoB;AACpB;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;;;;;;;;;;;ACrBa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,cAAc;AAC3J,mBAAO,CAAC,yCAAkB;AAC1B,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA,cAAc,OAAO,EAAE,GAAG;AAC1B;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,GAAG;AACpC,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,oCAAoC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,2CAA2C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,0CAA0C,GAAG;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC,4CAA4C,UAAU;AACtD,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA,4DAA4D,EAAE;AAC9D,yDAAyD,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D,6CAA6C,OAAO;AACpD,2CAA2C,uBAAuB;AAClE,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA,oEAAoE,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,QAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,WAAW,IAAI,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wDAAwD,WAAW,IAAI,cAAc;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,2BAA2B;AACjC,MAAM,yBAAyB;AAC/B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,6BAA6B;AAChE;AACA,mCAAmC,gCAAgC;AACnE,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,MAAM;AACtC,6DAA6D,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E;AACA;AACA;AACA,qEAAqE,SAAS;AAC9E;AACA;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D,iDAAiD,cAAc;AAC/D;AACA,yCAAyC,aAAa,GAAG,aAAa;AACtE,sDAAsD,aAAa,IAAI,aAAa;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,aAAa,GAAG,aAAa;AACzE,yDAAyD,aAAa,IAAI,aAAa;AACvF;AACA;AACA;AACA;AACA,iCAAiC,mCAAmC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA,8CAA8C,UAAU,GAAG,UAAU;AACrE;AACA,6CAA6C,wBAAwB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,wEAAwE,SAAS;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,kBAAkB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,SAAS;AAC/F;AACA;AACA;AACA,iFAAiF,SAAS;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD,oBAAoB,8BAA8B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnnCa;AACb;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,mBAAmB;AACxC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,uBAAuB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT;AACA,oBAAoB,gBAAgB;AACpC,oBAAoB,OAAO;AAC3B;AACA;AACA,4BAA4B,4BAA4B,IAAI;AAC5D,aAAa;AACb,SAAS;AACT;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4TAA4T;AAChY;AACA;AACA,mBAAmB;AACnB,0CAA0C;AAC1C;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gBAAgB,WAAW;AAC3B;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB;AAClB;;;;;;;;;;;AC/Ya;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,8BAA8B,GAAG,4BAA4B;AACjF,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,MAAM,wCAAwC;AAC9C,MAAM,8BAA8B;AACpC,MAAM,oCAAoC;AAC1C,MAAM,+BAA+B;AACrC,MAAM,gCAAgC;AACtC,MAAM,iCAAiC;AACvC,MAAM,+BAA+B;AACrC,MAAM,mCAAmC;AACzC,MAAM,gCAAgC;AACtC,MAAM,+BAA+B;AACrC,MAAM,kCAAkC;AACxC,MAAM,oCAAoC;AAC1C,MAAM,oCAAoC;AAC1C,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,8BAA8B;AACpC;AACA;AACA,qDAAqD,IAAI,iCAAiC,cAAc;AACxG;AACA,qCAAqC,mBAAmB;AACxD,KAAK;AACL;AACA;AACA,uCAAuC,qBAAqB;AAC5D,KAAK;AACL;AACA,wCAAwC,sBAAsB;AAC9D,KAAK;AACL;AACA,oCAAoC,kBAAkB;AACtD,KAAK;AACL;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB;AACvD;AACA;;;;;;;;;;AClKA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,2OAA2O,6BAA6B,KAAK,oCAAoC,mBAAmB,yBAAyB,qBAAqB,yBAAyB,oBAAoB,6BAA6B,8BAA8B,KAAK,2CAA2C,kBAAkB,mBAAmB,yBAAyB,KAAK,oDAAoD,eAAe,cAAc,oBAAoB,yBAAyB,gBAAgB,gCAAgC,2FAA2F,KAAK,yDAAyD,iBAAiB,2BAA2B,KAAK,oDAAoD,yBAAyB,oBAAoB,0BAA0B,KAAK,6CAA6C,+BAA+B,4BAA4B,uBAAuB,yBAAyB,kBAAkB,oBAAoB,2BAA2B,yBAAyB,aAAa,KAAK,mEAAmE,gCAAgC,yBAAyB,KAAK,qEAAqE,qCAAqC,yBAAyB,KAAK,gEAAgE,2CAA2C,qCAAqC,KAAK,0CAA0C,yBAAyB,aAAa,kBAAkB,sBAAsB,gBAAgB,KAAK,8DAA8D,qBAAqB,KAAK,kDAAkD,oBAAoB,yBAAyB,iBAAiB,yBAAyB,sBAAsB,mBAAmB,gCAAgC,wBAAwB,kBAAkB,2CAA2C,KAAK,qDAAqD,oBAAoB,qCAAqC,0BAA0B,KAAK,mDAAmD,oBAAoB,0BAA0B,kBAAkB,KAAK,qDAAqD,oBAAoB,0BAA0B,yBAAyB,KAAK,2DAA2D,mBAAmB,iBAAiB,gCAAgC,KAAK,+FAA+F,mBAAmB,iBAAiB,KAAK,2CAA2C,sBAAsB,yBAAyB,wBAAwB,sBAAsB,mBAAmB,mBAAmB,oBAAoB,oCAAoC,KAAK,6CAA6C,2BAA2B,KAAK,oEAAoE,gCAAgC,yBAAyB,oBAAoB,eAAe,iBAAiB,2CAA2C,kBAAkB,wBAAwB,uBAAuB,2BAA2B,uBAAuB,KAAK,0EAA0E,4BAA4B,KAAK,uDAAuD,sBAAsB,KAAK,oDAAoD,sBAAsB,mBAAmB,KAAK,iDAAiD,kBAAkB,KAAK,oDAAoD,yBAAyB,mBAAmB,yBAAyB,uCAAuC,wBAAwB,KAAK,sDAAsD,oBAAoB,wBAAwB,6BAA6B,KAAK,2DAA2D,sBAAsB,0BAA0B,KAAK,oDAAoD,oBAAoB,qCAAqC,0BAA0B,KAAK,wDAAwD,kBAAkB,mBAAmB,KAAK,wEAAwE,iBAAiB,mBAAmB,KAAK,2DAA2D,2BAA2B,KAAK,2DAA2D,kBAAkB,sBAAsB,mBAAmB,kBAAkB,2BAA2B,KAAK,iEAAiE,4BAA4B,KAAK,iEAAiE,2CAA2C,KAAK,oEAAoE,wCAAwC,KAAK,oDAAoD,kBAAkB,mBAAmB,KAAK,wDAAwD,2BAA2B,yBAAyB,eAAe,gBAAgB,yBAAyB,wBAAwB,kBAAkB,mBAAmB,0BAA0B,2CAA2C,oBAAoB,8BAA8B,0BAA0B,iBAAiB,KAAK,sDAAsD,+BAA+B,4BAA4B,oBAAoB,8BAA8B,sBAAsB,KAAK,4DAA4D,oBAAoB,KAAK,qFAAqF,kBAAkB,sBAAsB,2BAA2B,+BAA+B,gCAAgC,KAAK,4EAA4E,mBAAmB,kBAAkB,0BAA0B,qCAAqC,sBAAsB,+BAA+B,wBAAwB,KAAK,2FAA2F,8BAA8B,KAAK,6DAA6D,kBAAkB,6BAA6B,KAAK,4FAA4F,oCAAoC,KAAK,mFAAmF,qBAAqB,mBAAmB,kBAAkB,uBAAuB,KAAK,wEAAwE,kBAAkB,oBAAoB,sBAAsB,oCAAoC,8BAA8B,2BAA2B,KAAK,wEAAwE,mBAAmB,kBAAkB,0BAA0B,2CAA2C,qCAAqC,sBAAsB,sBAAsB,KAAK,8EAA8E,oBAAoB,KAAK,+EAA+E,6BAA6B,uBAAuB,KAAK,4CAA4C,oBAAoB,KAAK,wCAAwC,kBAAkB,mBAAmB,iBAAiB,mBAAmB,sBAAsB,6BAA6B,KAAK;AACn5P;AACA;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,0CAA0C,oCAAoC,qBAAqB,GAAG;AACtG;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,mHAAsD;;AAExF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;AClBA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
+    "file": "lib_recorder_js-lib_webcam_js.02ca3c415851a03f87ff.js",
+    "mappings": ";;;;;;;;;AAAa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,wBAAwB,mBAAO,CAAC,iDAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;;;;;;;;;;ACnEa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4KAA4K;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe,IAAI;AACnD,wCAAwC,qBAAqB;AAC7D;AACA,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,4BAA4B,eAAe,IAAI;AAC/C;AACA,SAAS;AACT;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;ACjFa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB;AACA,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,+CAA+C;AAClH;AACA;AACA;AACA;AACA;AACA,mEAAmE,+CAA+C;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,IAAI;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,KAAK;AACtD,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,6BAA6B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;;;;;;;;;;AC1Wa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,2BAA2B;AACxD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,oCAAoC,mBAAO,CAAC,sEAAW;AACvD,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yEAAyE,MAAM;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA,SAAS;AACT;AACA,qCAAqC,MAAM,GAAG,QAAQ,OAAO,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA,iBAAiB;AACjB,wBAAwB,8BAA8B;AACtD,iDAAiD,eAAe,OAAO,GAAG;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA,SAAS;AACT;AACA,oBAAoB,YAAY;AAChC,oBAAoB,UAAU;AAC9B;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,iQAAiQ;AACrU;AACA;AACA,2BAA2B;AAC3B;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uDAAuD;AAC3E;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;;;;;;;;;;;ACjXa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,iBAAiB,GAAG,aAAa,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,iBAAiB,GAAG,oBAAoB;AACzK;AACA;AACA;AACA,oBAAoB;AACpB;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,aAAa;AACb;AACA,YAAY,OAAO;AACnB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,wBAAwB;AACxB;;;;;;;;;;;AC5Da;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,4BAA4B,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,cAAc;AAC7H,mBAAO,CAAC,yCAAkB;AAC1B,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA,cAAc,OAAO,EAAE,GAAG;AAC1B;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,GAAG;AACpC,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,oCAAoC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,2CAA2C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,0CAA0C,GAAG;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC,4CAA4C,UAAU;AACtD,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA,4DAA4D,EAAE;AAC9D,yDAAyD,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D,6CAA6C,OAAO;AACpD,2CAA2C,uBAAuB;AAClE,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA,oEAAoE,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,QAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,WAAW,IAAI,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wDAAwD,WAAW,IAAI,cAAc;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,2BAA2B;AACjC,MAAM,yBAAyB;AAC/B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA;AACA;AACA;AACA,yEAAyE,wBAAwB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,6BAA6B;AAChE;AACA,mCAAmC,gCAAgC;AACnE,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,MAAM;AACtC,6DAA6D,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E;AACA;AACA;AACA,qEAAqE,SAAS;AAC9E;AACA;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D,iDAAiD,cAAc;AAC/D;AACA,yCAAyC,aAAa,GAAG,aAAa;AACtE,sDAAsD,aAAa,IAAI,aAAa;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,aAAa,GAAG,aAAa;AACzE,yDAAyD,aAAa,IAAI,aAAa;AACvF;AACA;AACA;AACA;AACA,iCAAiC,mCAAmC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA,8CAA8C,UAAU,GAAG,UAAU;AACrE;AACA,6CAA6C,wBAAwB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,wEAAwE,SAAS;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,kBAAkB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,SAAS;AAC/F;AACA;AACA;AACA,iFAAiF,SAAS;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD,oBAAoB,4CAA4C;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1uCa;AACb;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,mBAAmB;AACxC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,uBAAuB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT;AACA,oBAAoB,gBAAgB;AACpC,oBAAoB,OAAO;AAC3B;AACA;AACA,4BAA4B,4BAA4B,IAAI;AAC5D,aAAa;AACb,SAAS;AACT;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4TAA4T;AAChY;AACA;AACA,mBAAmB;AACnB,0CAA0C;AAC1C;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gBAAgB,WAAW;AAC3B;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB;AAClB;;;;;;;;;;;AC/Ya;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,8BAA8B,GAAG,4BAA4B;AACjF,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,MAAM,wCAAwC;AAC9C,MAAM,8BAA8B;AACpC,MAAM,oCAAoC;AAC1C,MAAM,+BAA+B;AACrC,MAAM,gCAAgC;AACtC,MAAM,iCAAiC;AACvC,MAAM,+BAA+B;AACrC,MAAM,mCAAmC;AACzC,MAAM,gCAAgC;AACtC,MAAM,+BAA+B;AACrC,MAAM,kCAAkC;AACxC,MAAM,oCAAoC;AAC1C,MAAM,oCAAoC;AAC1C,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,8BAA8B;AACpC;AACA;AACA,qDAAqD,IAAI,iCAAiC,cAAc;AACxG;AACA,qCAAqC,mBAAmB;AACxD,KAAK;AACL;AACA;AACA,uCAAuC,qBAAqB;AAC5D,KAAK;AACL;AACA,wCAAwC,sBAAsB;AAC9D,KAAK;AACL;AACA,oCAAoC,kBAAkB;AACtD,KAAK;AACL;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB;AACvD;AACA;;;;;;;;;;AClKA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,2OAA2O,oCAAoC,KAAK,oCAAoC,mBAAmB,yBAAyB,qBAAqB,yBAAyB,oBAAoB,6BAA6B,8BAA8B,KAAK,2CAA2C,kBAAkB,mBAAmB,yBAAyB,KAAK,oDAAoD,eAAe,cAAc,oBAAoB,yBAAyB,gBAAgB,gCAAgC,2FAA2F,KAAK,yDAAyD,iBAAiB,2BAA2B,KAAK,oDAAoD,yBAAyB,oBAAoB,0BAA0B,KAAK,6CAA6C,+BAA+B,4BAA4B,uBAAuB,yBAAyB,kBAAkB,oBAAoB,2BAA2B,yBAAyB,aAAa,KAAK,mEAAmE,gCAAgC,yBAAyB,KAAK,qEAAqE,qCAAqC,yBAAyB,KAAK,gEAAgE,2CAA2C,qCAAqC,KAAK,0CAA0C,yBAAyB,aAAa,kBAAkB,sBAAsB,gBAAgB,KAAK,8DAA8D,qBAAqB,KAAK,kDAAkD,oBAAoB,yBAAyB,iBAAiB,yBAAyB,sBAAsB,mBAAmB,gCAAgC,wBAAwB,kBAAkB,2CAA2C,KAAK,+CAA+C,yBAAyB,gBAAgB,kBAAkB,oBAAoB,gCAAgC,sBAAsB,yBAAyB,wBAAwB,KAAK,uDAAuD,yBAAyB,iBAAiB,mBAAmB,kBAAkB,uCAAuC,yBAAyB,KAAK,gEAAgE,6CAA6C,KAAK,gEAAgE,+CAA+C,KAAK,2DAA2D,yBAAyB,oBAAoB,gCAAgC,sBAAsB,yBAAyB,KAAK,0DAA0D,yBAAyB,KAAK,8DAA8D,qBAAqB,kBAAkB,mBAAmB,KAAK,qEAAqE,oBAAoB,KAAK,qDAAqD,oBAAoB,qCAAqC,0BAA0B,KAAK,mDAAmD,oBAAoB,0BAA0B,kBAAkB,KAAK,qDAAqD,oBAAoB,0BAA0B,yBAAyB,KAAK,2DAA2D,mBAAmB,iBAAiB,gCAAgC,KAAK,+FAA+F,mBAAmB,iBAAiB,KAAK,2CAA2C,sBAAsB,yBAAyB,wBAAwB,sBAAsB,mBAAmB,mBAAmB,oBAAoB,oCAAoC,KAAK,6CAA6C,2BAA2B,KAAK,oEAAoE,gCAAgC,yBAAyB,oBAAoB,eAAe,iBAAiB,2CAA2C,kBAAkB,wBAAwB,uBAAuB,2BAA2B,uBAAuB,KAAK,0EAA0E,4BAA4B,KAAK,uDAAuD,sBAAsB,KAAK,6DAA6D,sBAAsB,wBAAwB,6BAA6B,KAAK,6DAA6D,sBAAsB,kBAAkB,6BAA6B,KAAK,oDAAoD,sBAAsB,mBAAmB,KAAK,iDAAiD,kBAAkB,KAAK,oDAAoD,yBAAyB,mBAAmB,yBAAyB,uCAAuC,wBAAwB,KAAK,sDAAsD,oBAAoB,wBAAwB,6BAA6B,KAAK,2DAA2D,sBAAsB,0BAA0B,KAAK,oDAAoD,oBAAoB,qCAAqC,0BAA0B,KAAK,wDAAwD,kBAAkB,mBAAmB,KAAK,wEAAwE,iBAAiB,mBAAmB,KAAK,2DAA2D,2BAA2B,KAAK,2DAA2D,kBAAkB,sBAAsB,mBAAmB,kBAAkB,2BAA2B,KAAK,iEAAiE,4BAA4B,KAAK,iEAAiE,2CAA2C,KAAK,oEAAoE,wCAAwC,KAAK,oDAAoD,kBAAkB,mBAAmB,KAAK,wDAAwD,2BAA2B,yBAAyB,eAAe,gBAAgB,yBAAyB,wBAAwB,kBAAkB,mBAAmB,0BAA0B,2CAA2C,oBAAoB,8BAA8B,0BAA0B,iBAAiB,KAAK,sDAAsD,+BAA+B,4BAA4B,oBAAoB,8BAA8B,sBAAsB,KAAK,4DAA4D,oBAAoB,KAAK,qFAAqF,kBAAkB,sBAAsB,2BAA2B,+BAA+B,gCAAgC,KAAK,4EAA4E,mBAAmB,kBAAkB,0BAA0B,qCAAqC,sBAAsB,+BAA+B,wBAAwB,KAAK,2FAA2F,8BAA8B,KAAK,6DAA6D,kBAAkB,6BAA6B,KAAK,4FAA4F,oCAAoC,KAAK,mFAAmF,qBAAqB,mBAAmB,kBAAkB,uBAAuB,KAAK,wEAAwE,kBAAkB,oBAAoB,sBAAsB,oCAAoC,8BAA8B,2BAA2B,KAAK,wEAAwE,mBAAmB,kBAAkB,0BAA0B,2CAA2C,qCAAqC,sBAAsB,sBAAsB,KAAK,8EAA8E,oBAAoB,KAAK,+EAA+E,6BAA6B,uBAAuB,KAAK,4CAA4C,oBAAoB,KAAK,wCAAwC,kBAAkB,mBAAmB,iBAAiB,mBAAmB,sBAAsB,6BAA6B,KAAK;AACxzS;AACA;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,0CAA0C,oCAAoC,qBAAqB,GAAG;AACtG;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,mHAAsD;;AAExF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;AClBA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
+        "webpack://ipywebcam/./lib/charts.js",
         "webpack://ipywebcam/./lib/common.js",
+        "webpack://ipywebcam/./lib/range.js",
         "webpack://ipywebcam/./lib/recorder.js",
         "webpack://ipywebcam/./lib/utils.js",
         "webpack://ipywebcam/./lib/version.js",
         "webpack://ipywebcam/./lib/video.js",
         "webpack://ipywebcam/./lib/webcam.js",
         "webpack://ipywebcam/./lib/webrtc.js",
         "webpack://ipywebcam/./css/video.css",
         "webpack://ipywebcam/./css/widget.css",
         "webpack://ipywebcam/./node_modules/css-loader/dist/runtime/api.js",
         "webpack://ipywebcam/./css/video.css?3e6c",
         "webpack://ipywebcam/./css/widget.css?a195",
         "webpack://ipywebcam/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
     ],
     "sourcesContent": [
-        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\nclass BaseModel extends base_1.DOMWidgetModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.messageHandlers = {};\r\n        this.addMessageHandler = (cmd, handler) => {\r\n            this.messageHandlers[cmd] = handler;\r\n        };\r\n        this.send_cmd = this.send_cmd.bind(this);\r\n        this.on('msg:custom', (msg, buffers) => {\r\n            const { id, cmd } = msg;\r\n            if (id && id !== this.message_id) {\r\n                return;\r\n            }\r\n            Object.keys(this.messageHandlers).forEach((key) => {\r\n                if (key === cmd) {\r\n                    const handler = this.messageHandlers[key];\r\n                    if (handler) {\r\n                        handler(msg, buffers);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _view_module: version_1.MODULE_NAME, _model_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, _model_module_version: version_1.MODULE_VERSION });\r\n    }\r\n    get message_id() {\r\n        return this.model_id;\r\n    }\r\n    send_cmd(cmd, args, wait = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const id = this.message_id;\r\n            if (wait) {\r\n                return new Promise((resolve) => {\r\n                    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n                    const self = this;\r\n                    this.send({ cmd, id, args }, {});\r\n                    function callback({ ans, id: t_id, res, }, buffers) {\r\n                        if (ans === cmd && t_id === id) {\r\n                            resolve({ content: res, buffers });\r\n                            self.off('msg:custom', callback);\r\n                        }\r\n                    }\r\n                    this.on('msg:custom', callback);\r\n                });\r\n            }\r\n            else {\r\n                this.send({ cmd, id, args }, {});\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.BaseModel = BaseModel;\r\n//# sourceMappingURL=common.js.map",
-        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst lru_cache_1 = __importDefault(require(\"lru-cache\"));\r\nconst common_1 = require(\"./common\");\r\nconst video_1 = require(\"./video\");\r\nclass RecorderPlayerModel extends common_1.BaseModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.cache = new lru_cache_1.default({\r\n            max: 6,\r\n        });\r\n        this.fetchStates = {};\r\n        this.refresh_callbacks = [];\r\n        this.addRefereshCallback = (callback) => {\r\n            this.refresh_callbacks.push(callback);\r\n        };\r\n        this.removeRefreshCallback = (callback) => {\r\n            const index = this.refresh_callbacks.indexOf(callback);\r\n            if (index >= 0) {\r\n                this.refresh_callbacks.splice(index, 1);\r\n            }\r\n        };\r\n        this.triggerRefresh = (index, channel) => {\r\n            this.refresh_callbacks.forEach((cb) => {\r\n                cb(index, channel);\r\n            });\r\n        };\r\n        this.fetchMeta = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.meta) {\r\n                return this.meta;\r\n            }\r\n            const { content } = yield this.send_cmd('fetch_meta', {});\r\n            this.meta = content;\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            return this.meta;\r\n        });\r\n        this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function* () {\r\n            const key = channel ? `${index}-${channel}` : `${index}`;\r\n            const cached = this.cache.get(key);\r\n            if (cached) {\r\n                return cached;\r\n            }\r\n            let fetchState = this.fetchStates[key];\r\n            if (!fetchState) {\r\n                fetchState = {\r\n                    callbacks: [],\r\n                };\r\n                this.fetchStates[key] = fetchState;\r\n                const { content, buffers } = yield this.send_cmd('fetch_data', {\r\n                    index,\r\n                    channel,\r\n                });\r\n                const { format = this.get('format') } = content;\r\n                const blob = new Blob(buffers, { type: `video/${format}` });\r\n                this.cache.set(key, blob);\r\n                fetchState.callbacks.forEach((callback) => callback(blob));\r\n                delete this.fetchStates[key];\r\n                return blob;\r\n            }\r\n            else {\r\n                let theResolve = undefined;\r\n                fetchState.callbacks.push((blob) => {\r\n                    if (theResolve) {\r\n                        theResolve(blob);\r\n                    }\r\n                    else {\r\n                        throw new Error('This is impossible! No resovle method found. It seems that the promise is not invoked yet.');\r\n                    }\r\n                });\r\n                return new Promise((resolve) => {\r\n                    theResolve = resolve;\r\n                });\r\n            }\r\n        });\r\n        this.addMessageHandler('channel_stale', (cmdMsg) => {\r\n            const { args = {} } = cmdMsg;\r\n            const { channel } = args;\r\n            if (channel) {\r\n                for (const key of this.cache.keys()) {\r\n                    if (key.endsWith(`-${channel}`)) {\r\n                        this.cache.delete(key);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.cache.clear();\r\n            }\r\n            this.meta = undefined;\r\n            this.triggerRefresh(undefined, channel);\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: RecorderPlayerModel.model_name, _view_name: RecorderPlayerModel.view_name, format: 'mp4', width: '', height: '', autoplay: true, loop: false, controls: true, autonext: true });\r\n    }\r\n}\r\nexports.RecorderPlayerModel = RecorderPlayerModel;\r\nRecorderPlayerModel.model_name = 'RecorderPlayerModel';\r\nRecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view\r\nclass RecorderPlayerView extends base_1.DOMWidgetView {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.index = -1;\r\n        this.indexSize = 0;\r\n        this.channel = '';\r\n        this.channels = [];\r\n        this.loading = false;\r\n        this.loadStateOnceCallbacks = [];\r\n        this.addLoadStateOnceCallback = (callback) => {\r\n            this.loadStateOnceCallbacks.push(callback);\r\n        };\r\n        this.setLoading = (loading) => {\r\n            if (this.loading !== loading) {\r\n                this.loading = loading;\r\n                this.loadStateOnceCallbacks.forEach((callback) => callback(loading));\r\n                this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);\r\n            }\r\n        };\r\n        this.fetchMeta = () => __awaiter(this, void 0, void 0, function* () {\r\n            const { record_count = 0, chanels = [] } = yield this.model.fetchMeta();\r\n            this.indexSize = record_count;\r\n            this.channels = chanels;\r\n        });\r\n        this.initVideo = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.video) {\r\n                this.video = new video_1.Video();\r\n                this.video.addIndexSelectHandler((i) => {\r\n                    this.load(i, undefined);\r\n                });\r\n                this.video.addChannelSelectHandler((channel) => {\r\n                    this.load(undefined, channel, false, true);\r\n                });\r\n                this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function* () {\r\n                    const autonext = this.model.get('autonext');\r\n                    const loop = this.model.get('loop');\r\n                    if (autonext) {\r\n                        if (this.index < this.indexSize - 1) {\r\n                            this.load(this.index + 1, undefined);\r\n                        }\r\n                        else if (this.index === this.indexSize - 1 && loop) {\r\n                            this.load(0, undefined);\r\n                        }\r\n                    }\r\n                }));\r\n                this.el.appendChild(this.video.container);\r\n                this.update();\r\n                yield this.fetchMeta();\r\n                yield this.load(0, '');\r\n            }\r\n        });\r\n        this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                if (this.loading === loading) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    this.addLoadStateOnceCallback((state) => {\r\n                        if (state === loading) {\r\n                            resolve();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        this.load = (index, channel, force = false, resumeTime = false) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.video) {\r\n                if (typeof index === 'undefined') {\r\n                    index = this.index;\r\n                }\r\n                if (typeof channel === 'undefined') {\r\n                    channel = this.channel;\r\n                }\r\n                if (this.index === index && this.channel === channel && !force) {\r\n                    return;\r\n                }\r\n                yield this.waitForLoading(false);\r\n                this.setLoading(true);\r\n                yield this.fetchMeta();\r\n                try {\r\n                    if (this.indexSize > 0) {\r\n                        const blob = yield this.model.fetchData(index, channel);\r\n                        this.video.updateData(blob, resumeTime);\r\n                    }\r\n                    this.index = index;\r\n                    this.channel = channel;\r\n                    this.video.updateIndexerSize(this.indexSize);\r\n                    this.video.updateIndexerIndex(this.index);\r\n                    this.video.updateChannels(this.channels);\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n                finally {\r\n                    this.setLoading(false);\r\n                }\r\n            }\r\n        });\r\n        this.updateWidth = () => {\r\n            var _a, _b;\r\n            const width = this.model.get('width');\r\n            if (width !== undefined && width.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('width', width);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('width');\r\n            }\r\n        };\r\n        this.updateHeight = () => {\r\n            var _a, _b;\r\n            const height = this.model.get('height');\r\n            if (height !== undefined && height.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('height', height);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('height');\r\n            }\r\n        };\r\n        this.updateOtherVideoAttributes = () => {\r\n            var _a, _b;\r\n            const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n            if (video) {\r\n                video.autoplay = this.model.get('autoplay') ? true : false;\r\n                if (this.model.get('autonext')) {\r\n                    video.loop = false;\r\n                }\r\n                else {\r\n                    video.loop = this.model.get('loop') ? true : false;\r\n                }\r\n            }\r\n            (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));\r\n        };\r\n        this.model.addRefereshCallback((i, c) => {\r\n            if (this.index === i &&\r\n                ((!this.channel && !c) || (this.channel && c && this.channel === c))) {\r\n                this.load(undefined, undefined, true);\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        super.render();\r\n        this.initVideo();\r\n    }\r\n    update() {\r\n        this.updateWidth();\r\n        this.updateHeight();\r\n        this.updateOtherVideoAttributes();\r\n        return super.update();\r\n    }\r\n    remove() {\r\n        var _a;\r\n        (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();\r\n        this.video = undefined;\r\n    }\r\n}\r\nexports.RecorderPlayerView = RecorderPlayerView;\r\n//# sourceMappingURL=recorder.js.map",
-        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isMac = exports.arrayFind = exports.arrayInclude = void 0;\r\nfunction arrayInclude(arr, target) {\r\n    return !!~arr.indexOf(target);\r\n}\r\nexports.arrayInclude = arrayInclude;\r\nfunction arrayFind(arr, cond) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        const e = arr[i];\r\n        if (cond(e, i)) {\r\n            return e;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.arrayFind = arrayFind;\r\nfunction isMac() {\r\n    return window.navigator.userAgent.indexOf('Mac') !== -1;\r\n}\r\nexports.isMac = isMac;\r\n//# sourceMappingURL=utils.js.map",
+        "\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.makeLineChart = void 0;\r\nconst d3 = __importStar(require(\"d3\"));\r\nfunction makeLineChart(node, data, xRange, yRange, width, height) {\r\n    const svg = node\r\n        ? d3.select(node)\r\n        : d3.create('svg');\r\n    width =\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        width === undefined || width === null ? svg.node().clientWidth : width;\r\n    height =\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        height === undefined || height === null ? svg.node().clientHeight : height;\r\n    if (height > 16) {\r\n        height -= 4;\r\n    }\r\n    if (!xRange) {\r\n        const xData = data.map((d) => d[0]);\r\n        xRange = [Math.min(...xData), Math.max(...xData)];\r\n    }\r\n    if (xRange[0] === xRange[1]) {\r\n        xRange[1] += 1;\r\n    }\r\n    if (!yRange) {\r\n        const yData = data.map((d) => d[1]);\r\n        yRange = [Math.min(...yData), Math.max(...yData)];\r\n    }\r\n    if (yRange[0] === yRange[1]) {\r\n        yRange[1] += 1;\r\n    }\r\n    const xOffset = -xRange[0];\r\n    const xScale = width / (xRange[1] - xRange[0]);\r\n    const yOffset = -yRange[0];\r\n    const yScale = height / (yRange[1] - yRange[0]);\r\n    const lineFunc = d3\r\n        .line()\r\n        .x((d) => (d[0] + xOffset) * xScale)\r\n        .y((d) => (d[1] + yOffset) * yScale);\r\n    let path = svg.select('path');\r\n    if (path.size() === 0) {\r\n        path = svg.append('path').attr('fill', 'none');\r\n    }\r\n    path.attr('d', lineFunc(data));\r\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n    return svg.node();\r\n}\r\nexports.makeLineChart = makeLineChart;\r\n//# sourceMappingURL=charts.js.map",
+        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst utils_1 = require(\"./utils\");\r\nconst version_1 = require(\"./version\");\r\nclass BaseModel extends base_1.DOMWidgetModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.messageHandlers = {};\r\n        this.addMessageHandler = (cmd, handler) => {\r\n            let handlers = this.messageHandlers[cmd];\r\n            if (!handlers) {\r\n                handlers = this.messageHandlers[cmd] = [];\r\n            }\r\n            handlers.push(handler);\r\n        };\r\n        this.removeMessageHandler = (cmd, handler) => {\r\n            const handlers = this.messageHandlers[cmd];\r\n            if (handlers) {\r\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                utils_1.arrayRemove(handlers, handler);\r\n            }\r\n        };\r\n        this.send_cmd = this.send_cmd.bind(this);\r\n        this.on('msg:custom', (msg, buffers) => {\r\n            const { id, cmd } = msg;\r\n            if (id && id !== this.message_id) {\r\n                return;\r\n            }\r\n            Object.keys(this.messageHandlers).forEach((key) => {\r\n                if (key === cmd) {\r\n                    const handlers = this.messageHandlers[key];\r\n                    if (handlers) {\r\n                        handlers.forEach((handler) => {\r\n                            handler(msg, buffers);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _view_module: version_1.MODULE_NAME, _model_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, _model_module_version: version_1.MODULE_VERSION });\r\n    }\r\n    get message_id() {\r\n        return this.model_id;\r\n    }\r\n    send_cmd(cmd, args, wait = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const id = this.message_id;\r\n            if (wait) {\r\n                return new Promise((resolve) => {\r\n                    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n                    const self = this;\r\n                    this.send({ cmd, id, args }, {});\r\n                    function callback({ ans, id: t_id, res, }, buffers) {\r\n                        if (ans === cmd && t_id === id) {\r\n                            resolve({ content: res, buffers });\r\n                            self.off('msg:custom', callback);\r\n                        }\r\n                    }\r\n                    this.on('msg:custom', callback);\r\n                });\r\n            }\r\n            else {\r\n                this.send({ cmd, id, args }, {});\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.BaseModel = BaseModel;\r\n//# sourceMappingURL=common.js.map",
+        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RangeBar = void 0;\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nconst utils_1 = require(\"./utils\");\r\nclass RangeBar {\r\n    constructor(container, option = {}) {\r\n        this.selectedRange = [0, 0];\r\n        this.markersChangeCallbacks = [];\r\n        this.rangeSelectedCallbacks = [];\r\n        this.destroy = () => {\r\n            document.removeEventListener('mousemove', this.onSelectedMove);\r\n            document.removeEventListener('mouseup', this.removeSelect);\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.container.classList.remove('hidden');\r\n                if (this.container.parentElement) {\r\n                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight + 12}px`;\r\n                }\r\n            }\r\n            else {\r\n                this.container.classList.add('hidden');\r\n                if (this.container.parentElement) {\r\n                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight - 12}px`;\r\n                }\r\n            }\r\n        };\r\n        this.isEnabled = () => {\r\n            return this.max > this.min;\r\n        };\r\n        this.adjustPos = (pos) => {\r\n            const width = this.container.clientWidth;\r\n            if (width === 0) {\r\n                return 0;\r\n            }\r\n            if (this.step <= 0) {\r\n                return (pos / width) * 100;\r\n            }\r\n            else {\r\n                let v = (pos / width) * (this.max - this.min);\r\n                v = Math.round(v / this.step) * this.step;\r\n                return (v / (this.max - this.min)) * 100;\r\n            }\r\n        };\r\n        this.pos2value = (pos) => {\r\n            return this.min + (pos * (this.max - this.min)) / 100;\r\n        };\r\n        this.value2pos = (value) => {\r\n            return ((value - this.min) / (this.max - this.min)) * 100;\r\n        };\r\n        this.addRangeSelectedCallback = (callback) => {\r\n            this.rangeSelectedCallbacks.push(callback);\r\n        };\r\n        this.removeRangeSelectedCallback = (callback) => {\r\n            utils_1.arrayRemove(this.rangeSelectedCallbacks, callback);\r\n        };\r\n        this.addMarkersChangeCallback = (callback) => {\r\n            this.markersChangeCallbacks.push(callback);\r\n        };\r\n        this.removeMarkersChangeCallback = (callback) => {\r\n            utils_1.arrayRemove(this.markersChangeCallbacks, callback);\r\n        };\r\n        this.calcRange = (pos) => {\r\n            const res = [this.min, this.max];\r\n            const value = this.pos2value(pos);\r\n            for (const key of Object.keys(this.markers)) {\r\n                const v = this.pos2value(Number.parseFloat(key));\r\n                if (pos === v) {\r\n                    return [0, 0];\r\n                }\r\n                else if (value > v && v > res[0]) {\r\n                    res[0] = v;\r\n                }\r\n                else if (value < v && v < res[1]) {\r\n                    res[1] = v;\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        this.makeFloatingMarker = (pos) => {\r\n            if (this.isEnabled()) {\r\n                pos = this.adjustPos(pos);\r\n                if (!this.floatingMarker) {\r\n                    this.floatingMarker = document.createElement('div');\r\n                    this.floatingMarker.classList.add('marker', 'floating');\r\n                    this.container.appendChild(this.floatingMarker);\r\n                }\r\n                this.floatingMarker.style.left = `${pos}%`;\r\n                this.floatingMarker.style.translate = '-50%';\r\n            }\r\n        };\r\n        this.releaseFloatingMarker = () => {\r\n            if (this.floatingMarker) {\r\n                this.container.removeChild(this.floatingMarker);\r\n                this.floatingMarker = undefined;\r\n            }\r\n        };\r\n        this.findMarkderKey = (marker) => {\r\n            for (const key of Object.keys(this.markers)) {\r\n                const pos = Number.parseFloat(key);\r\n                if (marker === this.markers[pos]) {\r\n                    return pos;\r\n                }\r\n            }\r\n            return undefined;\r\n        };\r\n        this.getMarkers = () => {\r\n            return Object.keys(this.markers)\r\n                .map((key) => {\r\n                const pos = Number.parseFloat(key);\r\n                return this.pos2value(pos);\r\n            })\r\n                .sort();\r\n        };\r\n        this.setMarkers = (markers) => {\r\n            if (!markers) {\r\n                markers = [];\r\n            }\r\n            if (utils_1.arrayEqual(this.getMarkers(), markers)) {\r\n                return;\r\n            }\r\n            this.unselectRange();\r\n            this.removeSelect();\r\n            for (const key of Object.keys(this.markers)) {\r\n                const marker = this.markers[key];\r\n                this.removeMarkerByNode(marker, false);\r\n            }\r\n            for (const marker of markers) {\r\n                this.addMarker(this.value2pos(marker), false);\r\n            }\r\n            this.execuateMarkersCallbacks();\r\n        };\r\n        this.execuateMarkersCallbacks = () => {\r\n            const markers = this.getMarkers();\r\n            for (const callback of this.markersChangeCallbacks) {\r\n                callback(markers, this);\r\n            }\r\n        };\r\n        this.removeMarkerByNode = (marker, triggerCallback = true) => {\r\n            const key = this.findMarkderKey(marker);\r\n            if (key !== undefined) {\r\n                delete this.markers[key];\r\n                this.container.removeChild(marker);\r\n                if (triggerCallback) {\r\n                    this.execuateMarkersCallbacks();\r\n                }\r\n            }\r\n        };\r\n        this.addMarker = (pos, triggerCallback = true) => {\r\n            if (this.isEnabled()) {\r\n                let marker = this.markers[pos];\r\n                if (!marker) {\r\n                    this.markers[pos] = marker = document.createElement('div');\r\n                    marker.setAttribute('draggable', 'false');\r\n                    marker.classList.add('marker');\r\n                    this.container.appendChild(marker);\r\n                    marker.style.left = `${pos}%`;\r\n                    marker.style.translate = '-50%';\r\n                    marker.addEventListener('click', (evt) => {\r\n                        evt.stopPropagation();\r\n                        if (evt.altKey) {\r\n                            this.removeMarkerByNode(marker);\r\n                        }\r\n                    });\r\n                    marker.addEventListener('mousedown', (evt) => {\r\n                        evt.stopPropagation();\r\n                        const key = this.findMarkderKey(marker);\r\n                        if (key !== undefined) {\r\n                            this.setSelect(key);\r\n                        }\r\n                    });\r\n                    marker.addEventListener('mouseup', () => {\r\n                        this.removeSelect();\r\n                    });\r\n                    if (triggerCallback) {\r\n                        this.execuateMarkersCallbacks();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.setSelect = (pos) => {\r\n            this.selectedKey = pos;\r\n            const marker = this.markers[pos];\r\n            if (marker) {\r\n                marker.classList.add('selected');\r\n            }\r\n        };\r\n        this.removeSelect = () => {\r\n            if (this.selectedKey !== undefined) {\r\n                const marker = this.markers[this.selectedKey];\r\n                if (marker) {\r\n                    marker.classList.remove('selected');\r\n                }\r\n                this.selectedKey = undefined;\r\n            }\r\n        };\r\n        this.canKeyMove = (posFrom, posTo) => {\r\n            if (posFrom === posTo) {\r\n                return false;\r\n            }\r\n            if (posTo < 0 || posTo > 100) {\r\n                return false;\r\n            }\r\n            const keys = Object.keys(this.markers);\r\n            for (const key of keys) {\r\n                const pos = Number.parseFloat(key);\r\n                if (pos === posFrom) {\r\n                    continue;\r\n                }\r\n                if (pos === posTo) {\r\n                    return false;\r\n                }\r\n                if (pos < posFrom && posTo > posFrom) {\r\n                    continue;\r\n                }\r\n                if (pos > posFrom && posTo < posFrom) {\r\n                    continue;\r\n                }\r\n                if (pos < posFrom && pos > posTo) {\r\n                    return false;\r\n                }\r\n                if (pos > posFrom && pos < posTo) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        this.onSelectedMove = (evt) => {\r\n            let pos = utils_1.calcMouseOffsetX(evt, this.container);\r\n            pos = this.adjustPos(pos);\r\n            if (this.selectedKey !== undefined &&\r\n                this.canKeyMove(this.selectedKey, pos)) {\r\n                const marker = this.markers[this.selectedKey];\r\n                if (marker) {\r\n                    marker.style.left = `${pos}%`;\r\n                    marker.style.translate = '-50%';\r\n                    delete this.markers[this.selectedKey];\r\n                    this.updateRangeSelectBecauseOfKeyChagne(this.selectedKey, pos);\r\n                    this.selectedKey = pos;\r\n                    this.markers[pos] = marker;\r\n                    this.execuateMarkersCallbacks();\r\n                }\r\n            }\r\n        };\r\n        this.isRangeSelected = (range) => {\r\n            if (!range) {\r\n                range = this.selectedRange;\r\n            }\r\n            return range[1] > range[0];\r\n        };\r\n        this.updateRangeSelectBecauseOfKeyChagne = (posFrom, posTo) => {\r\n            const valueFrom = this.pos2value(posFrom);\r\n            if (this.isRangeSelected() &&\r\n                (valueFrom === this.selectedRange[0] ||\r\n                    valueFrom === this.selectedRange[1])) {\r\n                const valueTo = this.pos2value(posTo);\r\n                let valueOther;\r\n                if (valueFrom === this.selectedRange[0]) {\r\n                    valueOther = this.selectedRange[1];\r\n                }\r\n                else {\r\n                    valueOther = this.selectedRange[0];\r\n                }\r\n                const newRange = valueTo <= valueOther ? [valueTo, valueOther] : [valueOther, valueTo];\r\n                this.updateRangeSelect(newRange);\r\n            }\r\n        };\r\n        this.updateRangeSelect = (newRange) => {\r\n            if (this.isRangeSelected(newRange)) {\r\n                const cWidth = this.container.clientWidth;\r\n                const left = ((newRange[0] - this.min) / (this.max - this.min)) * cWidth;\r\n                const right = ((newRange[1] - this.min) / (this.max - this.min)) * cWidth;\r\n                this.rangeMasker.style.left = `${left}px`;\r\n                this.rangeMasker.style.width = `${right - left}px`;\r\n                this.rangeMasker.classList.remove('hidden');\r\n            }\r\n            this.selectedRange = newRange;\r\n            for (const callback of this.rangeSelectedCallbacks) {\r\n                callback(this.selectedRange, this);\r\n            }\r\n        };\r\n        this.onMouseRangeSelect = (evt) => {\r\n            if (this.selectedKey !== undefined) {\r\n                // when moving key point, do nothing.\r\n                return;\r\n            }\r\n            const cWidth = this.container.clientWidth;\r\n            if (cWidth === 0) {\r\n                return;\r\n            }\r\n            const pos = (utils_1.calcMouseOffsetX(evt, this.container) / cWidth) * 100;\r\n            const range = this.calcRange(pos);\r\n            this.updateRangeSelect(range);\r\n        };\r\n        this.selectRange = (range) => {\r\n            if (utils_1.arrayEqual(this.selectedRange, range)) {\r\n                return;\r\n            }\r\n            const posFrom = this.value2pos(range[0]);\r\n            const posTo = this.value2pos(range[1]);\r\n            if (this.markers[posFrom] && this.markers[posTo]) {\r\n                this.updateRangeSelect(range);\r\n            }\r\n        };\r\n        this.unselectRange = () => {\r\n            this.rangeMasker.style.left = '0px';\r\n            this.rangeMasker.style.width = '0px';\r\n            this.rangeMasker.classList.add('hidden');\r\n            this.selectedRange = [0, 0];\r\n            for (const callback of this.rangeSelectedCallbacks) {\r\n                callback(this.selectedRange, this);\r\n            }\r\n        };\r\n        this.container = container;\r\n        this.rangeMasker = document.createElement('div');\r\n        this.rangeMasker.classList.add('range-mask', 'hidden');\r\n        this.rangeMasker.addEventListener('click', (evt) => {\r\n            evt.stopPropagation();\r\n            this.unselectRange();\r\n        });\r\n        this.container.appendChild(this.rangeMasker);\r\n        this.container.addEventListener('click', (evt) => {\r\n            if (evt.ctrlKey) {\r\n                const pos = this.adjustPos(evt.offsetX);\r\n                this.addMarker(pos);\r\n            }\r\n            else {\r\n                this.onMouseRangeSelect(evt);\r\n            }\r\n        });\r\n        this.container.addEventListener('mouseover', (evt) => {\r\n            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);\r\n            if (evt.ctrlKey) {\r\n                this.makeFloatingMarker(offsetX);\r\n            }\r\n            else {\r\n                this.releaseFloatingMarker();\r\n            }\r\n        });\r\n        this.container.addEventListener('mousemove', (evt) => {\r\n            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);\r\n            if (evt.ctrlKey) {\r\n                this.makeFloatingMarker(offsetX);\r\n            }\r\n            else {\r\n                this.releaseFloatingMarker();\r\n            }\r\n        });\r\n        this.container.addEventListener('mouseout', () => {\r\n            this.releaseFloatingMarker();\r\n        });\r\n        document.addEventListener('mousemove', this.onSelectedMove);\r\n        document.addEventListener('mouseup', this.removeSelect);\r\n        const { min = 0, max = 0, step = 1 } = option;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.markers = {};\r\n    }\r\n}\r\nexports.RangeBar = RangeBar;\r\n//# sourceMappingURL=range.js.map",
+        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst lru_cache_1 = __importDefault(require(\"lru-cache\"));\r\nconst common_1 = require(\"./common\");\r\nconst video_1 = require(\"./video\");\r\nconst utils_1 = require(\"./utils\");\r\nclass RecorderPlayerModel extends common_1.BaseModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.cache = new lru_cache_1.default({\r\n            max: 10,\r\n        });\r\n        this.metaCache = new lru_cache_1.default({\r\n            max: 100,\r\n        });\r\n        this.fetchStates = {};\r\n        this.refresh_callbacks = [];\r\n        this.addRefereshCallback = (callback) => {\r\n            this.refresh_callbacks.push(callback);\r\n        };\r\n        this.removeRefreshCallback = (callback) => {\r\n            const index = this.refresh_callbacks.indexOf(callback);\r\n            if (index >= 0) {\r\n                this.refresh_callbacks.splice(index, 1);\r\n            }\r\n        };\r\n        this.triggerRefresh = (index, channel) => {\r\n            this.refresh_callbacks.forEach((cb) => {\r\n                cb(index, channel);\r\n            });\r\n        };\r\n        this.createIndexKey = (index) => {\r\n            return index === undefined || index === null ? 'global' : `${index}`;\r\n        };\r\n        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function* () {\r\n            const key = this.createIndexKey(index);\r\n            const cached = this.metaCache.get(key);\r\n            if (cached) {\r\n                return cached;\r\n            }\r\n            const args = {};\r\n            if (index !== undefined) {\r\n                args['index'] = index;\r\n            }\r\n            const { content } = yield this.send_cmd('fetch_meta', args);\r\n            this.metaCache.set(key, content);\r\n            return content;\r\n        });\r\n        this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function* () {\r\n            const key = channel ? `${index}-${channel}` : `${index}`;\r\n            const cached = this.cache.get(key);\r\n            if (cached) {\r\n                return cached;\r\n            }\r\n            let fetchState = this.fetchStates[key];\r\n            if (!fetchState) {\r\n                fetchState = {\r\n                    callbacks: [],\r\n                };\r\n                this.fetchStates[key] = fetchState;\r\n                const { content, buffers } = yield this.send_cmd('fetch_data', {\r\n                    index,\r\n                    channel,\r\n                });\r\n                const { format = this.get('format') } = content;\r\n                const blob = new Blob(buffers, { type: `video/${format}` });\r\n                this.cache.set(key, blob);\r\n                fetchState.callbacks.forEach((callback) => callback(blob));\r\n                delete this.fetchStates[key];\r\n                return blob;\r\n            }\r\n            else {\r\n                let theResolve = undefined;\r\n                fetchState.callbacks.push((blob) => {\r\n                    if (theResolve) {\r\n                        theResolve(blob);\r\n                    }\r\n                    else {\r\n                        throw new Error('This is impossible! No resovle method found. It seems that the promise is not invoked yet.');\r\n                    }\r\n                });\r\n                return new Promise((resolve) => {\r\n                    theResolve = resolve;\r\n                });\r\n            }\r\n        });\r\n        this.invalidateMeta = (index) => {\r\n            const key = this.createIndexKey(index);\r\n            this.metaCache.delete(key);\r\n        };\r\n        this.setMarkers = (index, markers) => __awaiter(this, void 0, void 0, function* () {\r\n            yield this.send_cmd('set_markers', { index, markers });\r\n            this.invalidateMeta(index);\r\n        });\r\n        this.addMessageHandler('channel_stale', (cmdMsg) => {\r\n            const { args = {} } = cmdMsg;\r\n            const { channel } = args;\r\n            if (channel) {\r\n                for (const key of this.cache.keys()) {\r\n                    if (key.endsWith(`-${channel}`)) {\r\n                        this.cache.delete(key);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.cache.clear();\r\n            }\r\n            this.triggerRefresh(undefined, channel);\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: RecorderPlayerModel.model_name, _view_name: RecorderPlayerModel.view_name, format: 'mp4', width: '', height: '', autoplay: true, loop: false, controls: true, autonext: true, selected_index: null, selected_channel: null, selected_range: [0, 0] });\r\n    }\r\n}\r\nexports.RecorderPlayerModel = RecorderPlayerModel;\r\nRecorderPlayerModel.model_name = 'RecorderPlayerModel';\r\nRecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view\r\nclass RecorderPlayerView extends base_1.DOMWidgetView {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.index = -1;\r\n        this.indexSize = 0;\r\n        this.channel = '';\r\n        this.channels = [];\r\n        this.loading = false;\r\n        this.loadStateOnceCallbacks = [];\r\n        this.selectedRange = [0, 0];\r\n        this.isRangeSelected = () => {\r\n            return this.selectedRange[1] > this.selectedRange[0];\r\n        };\r\n        this.addLoadStateOnceCallback = (callback) => {\r\n            this.loadStateOnceCallbacks.push(callback);\r\n        };\r\n        this.setLoading = (loading) => {\r\n            if (this.loading !== loading) {\r\n                this.loading = loading;\r\n                this.loadStateOnceCallbacks.forEach((callback) => callback(loading));\r\n                this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);\r\n            }\r\n        };\r\n        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function* () {\r\n            const { record_count = 0, chanels = [], markers, statistics, } = yield this.model.fetchMeta(index);\r\n            this.indexSize = record_count;\r\n            this.channels = chanels;\r\n            this.markers = markers;\r\n            this.statistics = statistics;\r\n        });\r\n        this.initVideo = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.video) {\r\n                this.video = new video_1.Video();\r\n                this.video.addVideoInitHandler((video) => {\r\n                    video.rangeBar.setMarkers(this.markers);\r\n                });\r\n                this.video.addIndexSelectHandler((i) => {\r\n                    this.load(i, undefined);\r\n                });\r\n                this.video.addChannelSelectHandler((channel) => {\r\n                    this.load(undefined, channel, false, true);\r\n                });\r\n                this.video.rangeBar.addRangeSelectedCallback((range) => {\r\n                    var _a;\r\n                    this.selectedRange = range;\r\n                    if (this.isRangeSelected()) {\r\n                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n                        if (video) {\r\n                            video.currentTime = range[0];\r\n                        }\r\n                        this.model.set('selected_index', this.index);\r\n                        this.model.set('selected_channel', this.channel);\r\n                    }\r\n                    else {\r\n                        this.model.set('selected_index', null);\r\n                        this.model.set('selected_channel', null);\r\n                    }\r\n                    this.model.set('selected_range', range);\r\n                    this.model.save_changes();\r\n                });\r\n                this.video.rangeBar.addMarkersChangeCallback((markers) => {\r\n                    this.markers = markers;\r\n                    this.model.setMarkers(this.index, markers);\r\n                });\r\n                this.model.on('change:selected_index', this.onSelectedIndexChange);\r\n                this.model.on('change:selected_channel', this.onSelectedChannelChange);\r\n                this.model.on('change:selected_range', this.onSelectedRangeChange);\r\n                this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function* () {\r\n                    if (this.isRangeSelected()) {\r\n                        return;\r\n                    }\r\n                    const autonext = this.model.get('autonext');\r\n                    const loop = this.model.get('loop');\r\n                    if (autonext) {\r\n                        if (this.index < this.indexSize - 1) {\r\n                            this.load(this.index + 1, undefined);\r\n                        }\r\n                        else if (this.index === this.indexSize - 1 && loop) {\r\n                            this.load(0, undefined);\r\n                        }\r\n                    }\r\n                }));\r\n                this.video.video.addEventListener('timeupdate', () => {\r\n                    var _a;\r\n                    if (this.isRangeSelected()) {\r\n                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n                        if (video) {\r\n                            if (video.currentTime >= this.selectedRange[1]) {\r\n                                const loop = this.model.get('loop');\r\n                                if (loop) {\r\n                                    video.currentTime = this.selectedRange[0];\r\n                                }\r\n                                else {\r\n                                    video.pause();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                this.el.appendChild(this.video.container);\r\n                this.update();\r\n                yield this.load(0, '');\r\n            }\r\n        });\r\n        this.onSelectedIndexChange = () => {\r\n            const index = this.model.get('selected_index');\r\n            if (index !== undefined && index !== null && this.index !== index) {\r\n                this.load(index, undefined);\r\n            }\r\n        };\r\n        this.onSelectedChannelChange = () => {\r\n            const channel = this.model.get('selected_channel');\r\n            if (channel && this.channel !== channel) {\r\n                this.load(undefined, channel);\r\n            }\r\n        };\r\n        this.onSelectedRangeChange = () => {\r\n            var _a;\r\n            const range = this.model.get('selected_range');\r\n            if (!utils_1.arrayEqual(this.selectedRange, range)) {\r\n                this.selectedRange = range;\r\n                const rangeBar = (_a = this.video) === null || _a === void 0 ? void 0 : _a.rangeBar;\r\n                if (rangeBar) {\r\n                    rangeBar.selectRange(range);\r\n                }\r\n            }\r\n        };\r\n        this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                if (this.loading === loading) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    this.addLoadStateOnceCallback((state) => {\r\n                        if (state === loading) {\r\n                            resolve();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        this.load = (index, channel, force = false, resumeTime = false) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.video) {\r\n                if (typeof index === 'undefined') {\r\n                    index = this.index;\r\n                }\r\n                if (typeof channel === 'undefined') {\r\n                    channel = this.channel;\r\n                }\r\n                if (this.index === index && this.channel === channel && !force) {\r\n                    return;\r\n                }\r\n                yield this.waitForLoading(false);\r\n                this.setLoading(true);\r\n                yield this.fetchMeta(index);\r\n                try {\r\n                    if (this.indexSize > 0) {\r\n                        const blob = yield this.model.fetchData(index, channel);\r\n                        this.video.updateData(blob, resumeTime);\r\n                    }\r\n                    this.index = index;\r\n                    this.channel = channel;\r\n                    this.video.rangeBar.unselectRange();\r\n                    this.video.updateIndexerSize(this.indexSize);\r\n                    this.video.updateIndexerIndex(this.index);\r\n                    this.video.updateChannels(this.channels);\r\n                    this.video.updateStatistics(this.statistics);\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n                finally {\r\n                    this.setLoading(false);\r\n                }\r\n            }\r\n        });\r\n        this.updateWidth = () => {\r\n            var _a, _b;\r\n            const width = this.model.get('width');\r\n            if (width !== undefined && width.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('width', width);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('width');\r\n            }\r\n        };\r\n        this.updateHeight = () => {\r\n            var _a, _b;\r\n            const height = this.model.get('height');\r\n            if (height !== undefined && height.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('height', height);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('height');\r\n            }\r\n        };\r\n        this.updateOtherVideoAttributes = () => {\r\n            var _a, _b;\r\n            const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n            if (video) {\r\n                video.autoplay = this.model.get('autoplay') ? true : false;\r\n                if (this.model.get('autonext')) {\r\n                    video.loop = false;\r\n                }\r\n                else {\r\n                    video.loop = this.model.get('loop') ? true : false;\r\n                }\r\n            }\r\n            (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));\r\n        };\r\n        this.selectedRange = this.model.get('selected_range');\r\n        this.model.addRefereshCallback((i, c) => {\r\n            if (this.index === i &&\r\n                ((!this.channel && !c) || (this.channel && c && this.channel === c))) {\r\n                this.load(undefined, undefined, true);\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        super.render();\r\n        this.initVideo();\r\n    }\r\n    update() {\r\n        this.updateWidth();\r\n        this.updateHeight();\r\n        this.updateOtherVideoAttributes();\r\n        return super.update();\r\n    }\r\n    remove() {\r\n        var _a;\r\n        this.model.off('change:selected_index', this.onSelectedIndexChange);\r\n        this.model.off('change:selected_channel', this.onSelectedChannelChange);\r\n        this.model.off('change:selected_range', this.onSelectedRangeChange);\r\n        (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();\r\n        this.video = undefined;\r\n    }\r\n}\r\nexports.RecorderPlayerView = RecorderPlayerView;\r\n//# sourceMappingURL=recorder.js.map",
+        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcMouseOffsetX = exports.calcPageX = exports.isMac = exports.arrayEqual = exports.arrayRemove = exports.arrayIndexOf = exports.arrayFind = exports.arrayInclude = void 0;\r\nfunction arrayInclude(arr, target) {\r\n    return !!~arr.indexOf(target);\r\n}\r\nexports.arrayInclude = arrayInclude;\r\nfunction arrayFind(arr, cond) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        const e = arr[i];\r\n        if (cond(e, i)) {\r\n            return e;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.arrayFind = arrayFind;\r\nfunction arrayIndexOf(arr, target) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        if (arr[i] === target) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexports.arrayIndexOf = arrayIndexOf;\r\nfunction arrayRemove(arr, target) {\r\n    const index = arrayIndexOf(arr, target);\r\n    if (index !== -1) {\r\n        arr.splice(index, 1);\r\n        return true;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nexports.arrayRemove = arrayRemove;\r\nfunction arrayEqual(arr1, arr2) {\r\n    if (arr1 === arr2) {\r\n        return true;\r\n    }\r\n    return (Array.isArray(arr1) &&\r\n        Array.isArray(arr2) &&\r\n        arr1.length === arr2.length &&\r\n        arr1.every((val, index) => val === arr2[index]));\r\n}\r\nexports.arrayEqual = arrayEqual;\r\nfunction isMac() {\r\n    return window.navigator.userAgent.indexOf('Mac') !== -1;\r\n}\r\nexports.isMac = isMac;\r\nfunction calcPageX(element) {\r\n    const { left } = element.getBoundingClientRect();\r\n    return left + document.body.scrollLeft;\r\n}\r\nexports.calcPageX = calcPageX;\r\nfunction calcMouseOffsetX(evt, target) {\r\n    return evt.pageX - calcPageX(target);\r\n}\r\nexports.calcMouseOffsetX = calcMouseOffsetX;\r\n//# sourceMappingURL=utils.js.map",
         "\"use strict\";\r\n// Copyright (c) Xiaojing Chen\r\n// Distributed under the terms of the Modified BSD License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst data = require('../package.json');\r\n/**\r\n * The _model_module_version/_view_module_version this package implements.\r\n *\r\n * The html widget manager assumes that this is the same as the npm package\r\n * version number.\r\n */\r\nexports.MODULE_VERSION = data.version;\r\n/*\r\n * The current package name.\r\n */\r\nexports.MODULE_NAME = data.name;\r\n//# sourceMappingURL=version.js.map",
-        "\"use strict\";\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Video = exports.createVideoContainer = exports.createVideoProgress = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;\r\nrequire(\"../css/video.css\");\r\nconst utils_1 = require(\"./utils\");\r\nconst svgNS = 'http://www.w3.org/2000/svg';\r\nconst prefix = 'ipywebcam-video-';\r\nfunction makeId(id) {\r\n    return `${prefix}${id}`;\r\n}\r\nexports.makeId = makeId;\r\nfunction createSymbol(id, pathD, viewBox = '0 0 24 24') {\r\n    const symbol = document.createElementNS(svgNS, 'symbol');\r\n    symbol.id = makeId(id);\r\n    symbol.setAttribute('viewBox', viewBox);\r\n    const path = document.createElementNS(svgNS, 'path');\r\n    path.setAttribute('d', pathD);\r\n    symbol.appendChild(path);\r\n    return symbol;\r\n}\r\nfunction createControlsSvg() {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    svg.id = makeId('icons');\r\n    svg.setAttribute('style', 'display: none');\r\n    const defs = document.createElementNS(svgNS, 'defs');\r\n    svg.appendChild(defs);\r\n    defs.appendChild(createSymbol('pause', 'M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z'));\r\n    defs.appendChild(createSymbol('play-icon', 'M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z'));\r\n    defs.appendChild(createSymbol('volume-high', 'M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z'));\r\n    defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));\r\n    defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));\r\n    defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));\r\n    defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));\r\n    defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));\r\n    defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));\r\n    defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));\r\n    return svg;\r\n}\r\nfunction createSelectiveUses(active, ...ids) {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    ids.forEach((id) => {\r\n        const use = document.createElementNS(svgNS, 'use');\r\n        use.classList.add(`use-${id}`);\r\n        use.setAttribute('href', `#${makeId(id)}`);\r\n        if (id !== active) {\r\n            use.classList.add('hidden');\r\n        }\r\n        svg.appendChild(use);\r\n    });\r\n    return svg;\r\n}\r\nexports.createSelectiveUses = createSelectiveUses;\r\nfunction createPlaybackAnimation() {\r\n    const div = document.createElement('div');\r\n    div.id = makeId('playback-animation');\r\n    div.className = 'playback-animation';\r\n    const svg = createSelectiveUses('pause', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    div.appendChild(svg);\r\n    return div;\r\n}\r\nexports.createPlaybackAnimation = createPlaybackAnimation;\r\nfunction createVideoProgress() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('video-progress');\r\n    const progress = document.createElement('progress');\r\n    progress.id = makeId('progress-bar');\r\n    progress.classList.add('progress-bar');\r\n    progress.value = progress.max = 0;\r\n    const input = document.createElement('input');\r\n    input.id = makeId('seek');\r\n    input.classList.add('seek');\r\n    input.type = 'range';\r\n    input.value = '0';\r\n    input.min = '0';\r\n    input.step = '1';\r\n    const tooltip = document.createElement('div');\r\n    tooltip.id = makeId('seek-tooltip');\r\n    tooltip.classList.add('seek-tooltip');\r\n    tooltip.innerText = '00:00';\r\n    container.appendChild(progress);\r\n    container.appendChild(input);\r\n    container.appendChild(tooltip);\r\n    return container;\r\n}\r\nexports.createVideoProgress = createVideoProgress;\r\nfunction createPlaybackButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('play');\r\n    button.classList.add('play');\r\n    button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);\r\n    const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('volume-button');\r\n    button.classList.add('volume-button');\r\n    button.setAttribute('data-title', `Mute (${descShortcut(options.shortcuts.mute)})`);\r\n    const svg = createSelectiveUses('volume-high', 'volume-mute', 'volume-low', 'volume-high');\r\n    svg.classList.add('volume-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeInput() {\r\n    const input = document.createElement('input');\r\n    input.id = makeId('volume');\r\n    input.classList.add('volume');\r\n    input.value = '1';\r\n    input.type = 'range';\r\n    input.min = '0';\r\n    input.max = '1';\r\n    input.step = '0.01';\r\n    input.setAttribute('data-mute', '0.5');\r\n    return input;\r\n}\r\nfunction createVolumeControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('volume-controls');\r\n    const button = createVolumeButton(options);\r\n    container.appendChild(button);\r\n    const input = createVolumeInput();\r\n    container.appendChild(input);\r\n    return container;\r\n}\r\nfunction createTime() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('time');\r\n    const elapsed = document.createElement('time');\r\n    elapsed.id = makeId('time-elapsed');\r\n    elapsed.classList.add('time-elapsed');\r\n    elapsed.innerText = '00:00';\r\n    container.appendChild(elapsed);\r\n    const span = document.createElement('span');\r\n    span.innerText = ' / ';\r\n    container.appendChild(span);\r\n    const duration = document.createElement('time');\r\n    duration.id = makeId('duration');\r\n    duration.classList.add('duration');\r\n    duration.innerText = '00:00';\r\n    container.appendChild(duration);\r\n    return container;\r\n}\r\nfunction createLeftControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('left-controls');\r\n    const playbackButton = createPlaybackButton(options);\r\n    container.appendChild(playbackButton);\r\n    const volumeControls = createVolumeControls(options);\r\n    container.appendChild(volumeControls);\r\n    const time = createTime();\r\n    container.appendChild(time);\r\n    return container;\r\n}\r\nfunction createIndexSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('index-selector');\r\n    container.classList.add('index-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Index');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createSpeedSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('speed-selector');\r\n    container.classList.add('speed-selector');\r\n    container.classList.add('text-button');\r\n    container.setAttribute('data-title', 'Select Speed');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createChannelSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('channel-selector');\r\n    container.classList.add('channel-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Channel');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createPipButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('pip-button');\r\n    button.classList.add('pip-button');\r\n    if (!isPipEnabled()) {\r\n        button.classList.add('hidden');\r\n    }\r\n    button.setAttribute('data-title', `PIP (${descShortcut(options.shortcuts.pip)})`);\r\n    const svg = createSelectiveUses('pip', 'pip');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createFullscreenButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('fullscreen-button');\r\n    button.classList.add('fullscreen-button');\r\n    button.setAttribute('data-title', `Full screen (${descShortcut(options.shortcuts.fullscreen)})`);\r\n    const svg = createSelectiveUses('fullscreen', 'fullscreen', 'fullscreen-exit');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createRightControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('right-controls');\r\n    const indexSelector = createIndexSelector();\r\n    container.appendChild(indexSelector);\r\n    const channelSelector = createChannelSelector();\r\n    container.appendChild(channelSelector);\r\n    const speedSelector = createSpeedSelector();\r\n    container.appendChild(speedSelector);\r\n    const pipButton = createPipButton(options);\r\n    container.appendChild(pipButton);\r\n    const fullscreenButton = createFullscreenButton(options);\r\n    container.appendChild(fullscreenButton);\r\n    return container;\r\n}\r\nfunction createBottomControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('bottom-controls');\r\n    const leftControls = createLeftControls(options);\r\n    container.appendChild(leftControls);\r\n    const rightControls = createRightControls(options);\r\n    container.appendChild(rightControls);\r\n    return container;\r\n}\r\nfunction createVideoControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('video-controls');\r\n    container.tabIndex = 0;\r\n    const videoProgress = createVideoProgress();\r\n    container.appendChild(videoProgress);\r\n    const bottomControls = createBottomControls(options);\r\n    container.appendChild(bottomControls);\r\n    return container;\r\n}\r\nconst VIDEO_WORKS = !!document.createElement('video').canPlayType;\r\nfunction createVideoContainer(options) {\r\n    const container = document.createElement('div');\r\n    container.id = makeId('container');\r\n    container.classList.add('ipywebcam');\r\n    container.classList.add('video-container');\r\n    const playbackAnimation = createPlaybackAnimation();\r\n    container.appendChild(playbackAnimation);\r\n    const video = document.createElement('video');\r\n    video.id = makeId('video');\r\n    video.classList.add('video');\r\n    container.appendChild(video);\r\n    const videoControls = createVideoControls(options);\r\n    container.appendChild(videoControls);\r\n    return container;\r\n}\r\nexports.createVideoContainer = createVideoContainer;\r\nfunction iconShow(svg, id) {\r\n    const uses = svg.getElementsByTagNameNS(svgNS, 'use');\r\n    for (let i = 0; i < uses.length; ++i) {\r\n        const use = uses[i];\r\n        if (use.classList.contains(`use-${id}`)) {\r\n            use.classList.remove('hidden');\r\n        }\r\n        else {\r\n            use.classList.add('hidden');\r\n        }\r\n    }\r\n}\r\nfunction isPipEnabled() {\r\n    return !!document.pictureInPictureEnabled;\r\n}\r\nclass SelectorPannel {\r\n    constructor(options) {\r\n        this.options = [];\r\n        this.optionButtons = [];\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.layout = () => {\r\n            const { width, height } = this.container.getBoundingClientRect();\r\n            this.container.style.left = `-${width / 2}px`;\r\n            this.container.style.top = `-${height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.layout();\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.findOption = (options, label) => {\r\n            for (let i = 0; i < options.length; ++i) {\r\n                const option = options[i];\r\n                if (option.label === label) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        this.updateViewAfterSelect = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.select = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index !== -1) {\r\n                const option = this.options[index];\r\n                (this.clickHandlers || []).forEach((handler) => {\r\n                    handler(option);\r\n                });\r\n                this.updateViewAfterSelect(option.label);\r\n            }\r\n        };\r\n        this.install = (element, handler, initLabel = undefined) => {\r\n            this.trigger = element;\r\n            this.hidden();\r\n            this.addClickHandler(handler);\r\n            element.appendChild(this.container);\r\n            element.addEventListener('click', () => {\r\n                this.toggle();\r\n            });\r\n            if (initLabel) {\r\n                this.select(initLabel);\r\n            }\r\n            return this;\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.createHandler = (option) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    this.select(option.label);\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updateView = (options) => {\r\n            const buttons = this.optionButtons;\r\n            const handlers = this.realClickHandlers;\r\n            const newLen = options.length;\r\n            const oldLen = buttons.length;\r\n            for (let i = 0; i < oldLen; ++i) {\r\n                const button = buttons[i];\r\n                const handler = handlers[i];\r\n                if (i < newLen) {\r\n                    const option = options[i];\r\n                    button.innerText = option.label;\r\n                    button.removeEventListener('click', handler);\r\n                    const newHandler = this.createHandler(option);\r\n                    button.addEventListener('click', newHandler);\r\n                    handlers[i] = newHandler;\r\n                }\r\n                else {\r\n                    button.removeEventListener('click', handler);\r\n                    this.container.removeChild(button);\r\n                }\r\n            }\r\n            if (oldLen > newLen) {\r\n                buttons.splice(newLen, oldLen - newLen);\r\n                handlers.splice(newLen, oldLen - newLen);\r\n            }\r\n            if (oldLen < newLen) {\r\n                for (let i = oldLen; i < newLen; ++i) {\r\n                    const option = options[i];\r\n                    const button = document.createElement('button');\r\n                    button.innerText = option.label;\r\n                    button.classList.add('selector-option');\r\n                    button.classList.add('no-tooltip');\r\n                    button.classList.add(`selector-option-${i}`);\r\n                    button.setAttribute('data-index', `${i}`);\r\n                    const handler = this.createHandler(option);\r\n                    button.addEventListener('click', handler);\r\n                    this.container.appendChild(button);\r\n                    buttons.push(button);\r\n                    handlers.push(handler);\r\n                }\r\n            }\r\n            this.options = options;\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.classList.add('selector-options');\r\n        this.container.tabIndex = -1;\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateView(options);\r\n    }\r\n}\r\nclass IndexSelectorPannel {\r\n    constructor(size) {\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.calcLayout = (pageIndex) => {\r\n            this.row = Math.ceil(this.size / 4);\r\n            this.column = Math.min(this.size, 4);\r\n            this.hasPager = this.row > 6;\r\n            this.pageIndex = pageIndex;\r\n            this.pageSize = Math.ceil(this.size / 24);\r\n            const curRow = this.pageIndex < this.pageSize ? 6 : this.row - (this.pageIndex - 1) * 6;\r\n            this.optionsWidth = this.column * 32 + (this.column - 1) * 6 + 6;\r\n            this.optionsHeight = curRow * 32 + (curRow - 1) * 6 + 6;\r\n            const height = this.optionsHeight + (this.hasPager ? 32 : 0);\r\n            this.container.style.width = `${this.optionsWidth}px`;\r\n            this.container.style.height = `${height}px`;\r\n            this.container.style.left = `${-this.optionsWidth / 2}px`;\r\n            this.container.style.top = `${-height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.calcPageIndexFromIndex = (index) => {\r\n            if (index < 0 || index >= this.size) {\r\n                throw new Error(`Invalid index ${index}`);\r\n            }\r\n            return Math.ceil((index + 1) / 24);\r\n        };\r\n        this.setSelectIndex = (index) => {\r\n            this.updatePage(this.calcPageIndexFromIndex(index));\r\n            this.selected = index;\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.createHandler = (index) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    (this.clickHandlers || []).forEach((handler) => {\r\n                        handler(index);\r\n                    });\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updatePage = (pageIndex) => {\r\n            if (pageIndex !== this.pageIndex) {\r\n                this.calcLayout(pageIndex);\r\n                const optNum = this.pageIndex < this.pageSize ? 24 : this.size % 24;\r\n                let len = this.options.children.length;\r\n                let idx = 0;\r\n                for (let i = 0; i < len; ++i) {\r\n                    const child = this.options.children.item(i);\r\n                    if (child === null || child === void 0 ? void 0 : child.classList.contains('selector-option')) {\r\n                        const button = child;\r\n                        const oldHandler = this.realClickHandlers[idx];\r\n                        const dataIdx = idx + (pageIndex - 1) * 24;\r\n                        if (idx < optNum) {\r\n                            const newHandler = (this.realClickHandlers[idx] =\r\n                                this.createHandler(dataIdx));\r\n                            button.removeEventListener('click', oldHandler);\r\n                            button.addEventListener('click', newHandler);\r\n                            button.innerText = `${dataIdx}`;\r\n                            button.className = '';\r\n                            button.classList.add('selector-option');\r\n                            button.classList.add('no-tooltip');\r\n                            button.classList.add(`selector-option-${dataIdx}`);\r\n                            if (dataIdx === this.selected) {\r\n                                button.classList.add('selected');\r\n                            }\r\n                            else {\r\n                                button.classList.remove('selected');\r\n                            }\r\n                            ++idx;\r\n                        }\r\n                        else {\r\n                            button.removeEventListener('click', oldHandler);\r\n                            this.options.removeChild(button);\r\n                            --i;\r\n                            --len;\r\n                        }\r\n                    }\r\n                }\r\n                if (this.realClickHandlers.length > optNum) {\r\n                    this.realClickHandlers.splice(optNum, this.realClickHandlers.length - optNum);\r\n                }\r\n                if (idx < optNum) {\r\n                    for (let i = idx; i < optNum; ++i) {\r\n                        const dataIdx = i + (pageIndex - 1) * 24;\r\n                        const option = document.createElement('button');\r\n                        option.innerText = `${dataIdx}`;\r\n                        option.classList.add('selector-option');\r\n                        option.classList.add('no-tooltip');\r\n                        option.classList.add(`selector-option-${dataIdx}`);\r\n                        if (dataIdx === this.selected) {\r\n                            option.classList.add('selected');\r\n                        }\r\n                        else {\r\n                            option.classList.remove('selected');\r\n                        }\r\n                        option.setAttribute('data-index', `${dataIdx}`);\r\n                        const handler = this.createHandler(dataIdx);\r\n                        this.realClickHandlers.push(handler);\r\n                        option.addEventListener('click', handler);\r\n                        this.options.appendChild(option);\r\n                    }\r\n                }\r\n                if (this.hasPager) {\r\n                    if (this.pager) {\r\n                        if (this.pagerLeft && this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerLeft) {\r\n                            this.pagerLeft.classList.remove('disabled');\r\n                        }\r\n                        if (this.pagerNumber) {\r\n                            this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        }\r\n                        if (this.pagerRight && this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerRight) {\r\n                            this.pagerRight.classList.remove('disabled');\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.pager = document.createElement('div');\r\n                        this.pager.classList.add('selector-pager');\r\n                        this.pagerLeft = document.createElement('button');\r\n                        this.pagerLeft.classList.add('page-left');\r\n                        this.pagerLeft.classList.add('no-tooltip');\r\n                        this.pagerLeft.tabIndex = -1;\r\n                        this.pagerLeft.appendChild(createSelectiveUses('left-arrow', 'left-arrow'));\r\n                        if (this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        this.pagerLeft.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex > 1) {\r\n                                this.updatePage(this.pageIndex - 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerLeft);\r\n                        this.pagerNumber = document.createElement('div');\r\n                        this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        this.pager.appendChild(this.pagerNumber);\r\n                        this.pagerRight = document.createElement('button');\r\n                        this.pagerRight.classList.add('page-right');\r\n                        this.pagerRight.classList.add('no-tooltip');\r\n                        this.pagerRight.tabIndex = -1;\r\n                        this.pagerRight.appendChild(createSelectiveUses('right-arrow', 'right-arrow'));\r\n                        if (this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        this.pagerRight.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex < this.pageSize) {\r\n                                this.updatePage(this.pageIndex + 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerRight);\r\n                        this.container.appendChild(this.pager);\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.pager) {\r\n                        this.container.removeChild(this.pager);\r\n                        this.pager = undefined;\r\n                        this.pagerNumber = undefined;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.updateSize = (size) => {\r\n            if (this.size !== size) {\r\n                this.size = size;\r\n                this.pageIndex = 0;\r\n                this.updatePage(1);\r\n            }\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.id = makeId('selector-panel');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.tabIndex = -1;\r\n        this.options = document.createElement('div');\r\n        this.options.classList.add('selector-options');\r\n        this.options.classList.add('grid');\r\n        this.container.appendChild(this.options);\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateSize(size);\r\n    }\r\n}\r\nfunction descShortcut(shortcut) {\r\n    const parts = [];\r\n    if (shortcut.ctrl) {\r\n        parts.push('ctrl');\r\n    }\r\n    if (shortcut.alt) {\r\n        parts.push('alt');\r\n    }\r\n    if (shortcut.shift) {\r\n        parts.push('shift');\r\n    }\r\n    parts.push(shortcut.key);\r\n    return parts.join(' + ');\r\n}\r\nconst DEFAULT_OPTIONS = {\r\n    shortcuts: {\r\n        play: 'k',\r\n        mute: 'm',\r\n        fullscreen: 'f',\r\n        pip: 'p',\r\n    },\r\n};\r\nfunction makeShortcut(shortcut) {\r\n    if (typeof shortcut === 'string') {\r\n        return {\r\n            key: shortcut,\r\n            ctrl: false,\r\n            alt: false,\r\n            shift: false,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            key: shortcut.key,\r\n            ctrl: shortcut.ctrl || false,\r\n            alt: shortcut.alt || false,\r\n            shift: shortcut.shift || false,\r\n        };\r\n    }\r\n}\r\nfunction makeOptions(otps) {\r\n    const options = Object.assign({}, DEFAULT_OPTIONS, otps);\r\n    options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);\r\n    options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);\r\n    options.shortcuts.mute = makeShortcut(options.shortcuts.mute);\r\n    options.shortcuts.pip = makeShortcut(options.shortcuts.pip);\r\n    options.shortcuts.play = makeShortcut(options.shortcuts.play);\r\n    return options;\r\n}\r\nconst SpeedOptions = [\r\n    { label: '0.25x', value: 0.25 },\r\n    { label: '0.5x', value: 0.5 },\r\n    { label: '0.75x', value: 0.75 },\r\n    { label: '1.0x', value: 1 },\r\n    { label: '1.25x', value: 1.25 },\r\n    { label: '1.5x', value: 1.5 },\r\n    { label: '1.75x', value: 1.75 },\r\n    { label: '2.0x', value: 2 },\r\n    { label: '2.5x', value: 2.5 },\r\n    { label: '3.0x', value: 3 },\r\n];\r\nclass Video {\r\n    constructor(opts = {}) {\r\n        this.indexSelectHandlers = [];\r\n        this.indexerIndex = -1;\r\n        this.indexerSize = 0;\r\n        this.speed = 1;\r\n        this.channelSelectHandlers = [];\r\n        this.channel = '';\r\n        this.destroy = () => {\r\n            document.removeEventListener('keyup', this.keyboardShortcuts);\r\n            const url = this.video.src;\r\n            this.video.src = '';\r\n            if (url) {\r\n                URL.revokeObjectURL(url);\r\n            }\r\n        };\r\n        this.updateChannels = (channels = []) => {\r\n            if (channels.length > 0) {\r\n                this.channelSelector.classList.remove('hidden');\r\n                const options = [{ label: 'Default', value: '' }];\r\n                channels.forEach((channel) => {\r\n                    options.push({ label: channel, value: channel });\r\n                });\r\n                this.channelSelectorPannel.updateView(options);\r\n                if (!utils_1.arrayInclude(channels, this.channel)) {\r\n                    this.channelSelectorPannel.select('Default');\r\n                }\r\n            }\r\n            else {\r\n                this.channelSelector.classList.add('hidden');\r\n                this.channelSelectorPannel.updateView([]);\r\n            }\r\n        };\r\n        this.addChannelSelectHandler = (handler) => {\r\n            this.channelSelectHandlers.push(handler);\r\n        };\r\n        this.updateIndexerSize = (size) => {\r\n            if (!this.indexSelectorPannel) {\r\n                if (size > 0) {\r\n                    this.indexSelectorPannel = new IndexSelectorPannel(size);\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelectHandlers.forEach((handler) => {\r\n                        var _a;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.addClickHandler(handler);\r\n                    });\r\n                    this.indexSelectorPannel.trigger = this.indexSelector;\r\n                    this.indexSelector.appendChild(this.indexSelectorPannel.container);\r\n                    this.indexSelector.addEventListener('click', () => {\r\n                        var _a, _b;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.toggle();\r\n                        const index = this.indexSelector.getAttribute('data-index');\r\n                        if (index) {\r\n                            (_b = this.indexSelectorPannel) === null || _b === void 0 ? void 0 : _b.setSelectIndex(Number.parseInt(index));\r\n                        }\r\n                    });\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                if (size <= 0) {\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelectorPannel.updateSize(size);\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n            }\r\n            this.indexerSize = size;\r\n        };\r\n        this.updateIndexerIndex = (index) => {\r\n            var _a;\r\n            const text = this.indexSelector.querySelector('div.text');\r\n            text.innerText = `${index}`;\r\n            this.indexSelector.setAttribute('data-index', `${index}`);\r\n            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.setSelectIndex(index);\r\n            this.indexerIndex = index;\r\n        };\r\n        this.addIndexSelectHandler = (handler) => {\r\n            this.indexSelectHandlers.push(handler);\r\n            if (this.indexSelectorPannel) {\r\n                this.indexSelectorPannel.addClickHandler(handler);\r\n            }\r\n        };\r\n        this.updateData = (blob, resumeTime = false) => {\r\n            const oldUrl = this.video.src;\r\n            const url = URL.createObjectURL(blob);\r\n            this.video.src = url;\r\n            if (oldUrl) {\r\n                this.video.load();\r\n                if (resumeTime && this.currentTime) {\r\n                    this.video.currentTime = this.currentTime;\r\n                }\r\n                URL.revokeObjectURL(oldUrl);\r\n            }\r\n        };\r\n        this.installSvg = () => {\r\n            const id = makeId('icons');\r\n            const svg = document.getElementById(id);\r\n            if (!svg) {\r\n                document.body.appendChild(createControlsSvg());\r\n            }\r\n        };\r\n        this.togglePlay = () => {\r\n            if (this.video.paused || this.video.ended) {\r\n                this.video.play();\r\n            }\r\n            else {\r\n                this.video.pause();\r\n            }\r\n        };\r\n        this.enableControls = (enabled) => {\r\n            if (enabled) {\r\n                if (VIDEO_WORKS) {\r\n                    this.video.controls = false;\r\n                    this.videoControls.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.video.controls = true;\r\n                    this.videoControls.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                this.video.controls = false;\r\n                this.videoControls.classList.add('hidden');\r\n            }\r\n        };\r\n        this.updatePlayButton = () => {\r\n            const svg = this.playButton.getElementsByClassName('playback-icons')[0];\r\n            const shortcut = descShortcut(this.options.shortcuts.play);\r\n            if (this.video.paused || this.video.ended) {\r\n                iconShow(svg, 'play-icon');\r\n                this.playButton.setAttribute('data-title', `Play (${shortcut})`);\r\n            }\r\n            else {\r\n                iconShow(svg, 'pause');\r\n                this.playButton.setAttribute('data-title', `Pause (${shortcut})`);\r\n            }\r\n        };\r\n        this.initializeVideo = () => {\r\n            const videoDuration = Math.floor(this.video.duration);\r\n            this.seek.setAttribute('max', `${videoDuration}`);\r\n            this.progress.setAttribute('max', `${videoDuration}`);\r\n            const time = formatTime(videoDuration);\r\n            this.duration.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n        };\r\n        this.updateCurrentTime = () => {\r\n            this.currentTime = this.video.currentTime;\r\n        };\r\n        // updateTimeElapsed indicates how far through the video\r\n        // the current playback is by updating the timeElapsed element\r\n        this.updateTimeElapsed = () => {\r\n            const time = formatTime(Math.floor(this.video.currentTime));\r\n            this.timeElapsed.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n        };\r\n        // updateProgress indicates how far through the video\r\n        // the current playback is by updating the progress bar\r\n        this.updateProgress = () => {\r\n            this.seek.value = `${Math.floor(this.video.currentTime)}`;\r\n            this.progress.value = Math.floor(this.video.currentTime);\r\n        };\r\n        // updateSeekTooltip uses the position of the mouse on the progress bar to\r\n        // roughly work out what point in the video the user will skip to if\r\n        // the progress bar is clicked at that point\r\n        this.updateSeekTooltip = (event) => {\r\n            const skipTo = Math.round((event.offsetX / this.seek.clientWidth) *\r\n                parseInt(this.seek.getAttribute('max') || '0', 10));\r\n            this.seek.setAttribute('data-seek', `${skipTo}`);\r\n            const t = formatTime(skipTo);\r\n            this.seekTooltip.textContent = `${t.minutes}:${t.seconds}`;\r\n            const rect = this.video.getBoundingClientRect();\r\n            this.seekTooltip.style.left = `${event.pageX - rect.left}px`;\r\n        };\r\n        // skipAhead jumps to a different point in the video when the progress bar\r\n        // is clicked\r\n        this.skipAhead = () => {\r\n            const skipTo = this.seek.dataset.seek\r\n                ? this.seek.dataset.seek\r\n                : this.seek.value;\r\n            this.video.currentTime = Number.parseFloat(skipTo);\r\n            this.progress.value = Number.parseFloat(skipTo);\r\n            this.seek.value = skipTo;\r\n        };\r\n        // updateVolume updates the video's volume\r\n        // and disables the muted state if active\r\n        this.updateVolume = () => {\r\n            if (this.video.muted) {\r\n                this.video.muted = false;\r\n            }\r\n            this.video.volume = Number.parseFloat(this.volume.value);\r\n        };\r\n        // updateVolumeIcon updates the volume icon so that it correctly reflects\r\n        // the volume of the video\r\n        this.updateVolumeIcon = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.mute);\r\n            this.volumeButton.setAttribute('data-title', `Mute (${shortcut})`);\r\n            if (this.video.muted || this.video.volume === 0) {\r\n                this.volumeButton.setAttribute('data-title', `Unmute (${shortcut})`);\r\n                iconShow(this.volumeIcons, 'volume-mute');\r\n            }\r\n            else if (this.video.volume > 0 && this.video.volume <= 0.5) {\r\n                iconShow(this.volumeIcons, 'volume-low');\r\n            }\r\n            else {\r\n                iconShow(this.volumeIcons, 'volume-high');\r\n            }\r\n        };\r\n        // toggleMute mutes or unmutes the video when executed\r\n        // When the video is unmuted, the volume is returned to the value\r\n        // it was set to before the video was muted\r\n        this.toggleMute = () => {\r\n            this.video.muted = !this.video.muted;\r\n            if (this.video.muted) {\r\n                this.volume.setAttribute('data-volume', this.volume.value);\r\n                this.volume.value = '0';\r\n            }\r\n            else {\r\n                this.volume.value = this.volume.dataset.volume || `${this.video.volume}`;\r\n            }\r\n        };\r\n        // animatePlayback displays an animation when\r\n        // the video is played or paused\r\n        this.animatePlayback = () => {\r\n            this.playbackAnimation.animate([\r\n                {\r\n                    opacity: 1,\r\n                    transform: 'scale(1)',\r\n                },\r\n                {\r\n                    opacity: 0,\r\n                    transform: 'scale(1.3)',\r\n                },\r\n            ], {\r\n                duration: 500,\r\n            });\r\n        };\r\n        // toggleFullScreen toggles the full screen state of the video\r\n        // If the browser is currently in fullscreen mode,\r\n        // then it should exit and vice versa.\r\n        this.toggleFullScreen = () => {\r\n            if (document.fullscreenElement) {\r\n                document.exitFullscreen();\r\n            }\r\n            else if (document.webkitFullscreenElement) {\r\n                // Need this to support Safari\r\n                document.webkitExitFullscreen();\r\n            }\r\n            else if (this.container.webkitRequestFullscreen) {\r\n                // Need this to support Safari\r\n                this.container.webkitRequestFullscreen();\r\n            }\r\n            else {\r\n                this.container.requestFullscreen();\r\n            }\r\n        };\r\n        this.isFullscreen = () => {\r\n            return (document.fullscreenElement ||\r\n                document.webkitFullscreenElement ||\r\n                this.container.webkitRequestFullscreen);\r\n        };\r\n        // updateFullscreenButton changes the icon of the full screen button\r\n        // and tooltip to reflect the current full screen state of the video\r\n        this.updateFullscreenButton = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.fullscreen);\r\n            if (this.isFullscreen()) {\r\n                this.fullscreenButton.setAttribute('data-title', `Exit full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen-exit');\r\n            }\r\n            else {\r\n                this.fullscreenButton.setAttribute('data-title', `Full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen');\r\n            }\r\n        };\r\n        // togglePip toggles Picture-in-Picture mode on the video\r\n        this.togglePip = () => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                if (this.video !== document.pictureInPictureElement) {\r\n                    this.pipButton.disabled = true;\r\n                    yield this.video.requestPictureInPicture();\r\n                }\r\n                else {\r\n                    yield document.exitPictureInPicture();\r\n                }\r\n            }\r\n            catch (error) {\r\n                console.error(error);\r\n            }\r\n            finally {\r\n                this.pipButton.disabled = false;\r\n            }\r\n        });\r\n        // hideControls hides the video controls when not in use\r\n        // if the video is paused, the controls must remain visible\r\n        this.hideControls = () => {\r\n            if (this.video.paused) {\r\n                return;\r\n            }\r\n            this.videoControls.classList.add('hide');\r\n        };\r\n        // showControls displays the video controls\r\n        this.showControls = () => {\r\n            this.videoControls.classList.remove('hide');\r\n        };\r\n        this.isInFocus = () => {\r\n            var _a;\r\n            return ((_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.contains(this.container)) || false;\r\n        };\r\n        // keyboardShortcuts executes the relevant functions for\r\n        // each supported shortcut key\r\n        this.keyboardShortcuts = (event) => {\r\n            if (!this.isInFocus()) {\r\n                return;\r\n            }\r\n            const { key, ctrlKey, altKey, shiftKey } = event;\r\n            const { play, mute, fullscreen, pip } = this.options.shortcuts;\r\n            if (key === play.key &&\r\n                (play.ctrl === !!ctrlKey ||\r\n                    play.alt === !!altKey ||\r\n                    play.shift === !!shiftKey)) {\r\n                this.togglePlay();\r\n                this.animatePlayback();\r\n                if (this.video.paused) {\r\n                    this.showControls();\r\n                }\r\n                else {\r\n                    setTimeout(() => {\r\n                        this.hideControls();\r\n                    }, 2000);\r\n                }\r\n            }\r\n            else if (key === mute.key &&\r\n                (mute.ctrl === !!ctrlKey ||\r\n                    mute.alt === !!altKey ||\r\n                    mute.shift === !!shiftKey)) {\r\n                this.toggleMute();\r\n            }\r\n            else if (key === fullscreen.key &&\r\n                (fullscreen.ctrl === !!ctrlKey ||\r\n                    fullscreen.alt === !!altKey ||\r\n                    fullscreen.shift === !!shiftKey)) {\r\n                this.toggleFullScreen();\r\n            }\r\n            else if (key === pip.key &&\r\n                (pip.ctrl === !!ctrlKey ||\r\n                    pip.alt === !!altKey ||\r\n                    pip.shift === !!shiftKey)) {\r\n                this.togglePip();\r\n            }\r\n        };\r\n        this.options = makeOptions(opts);\r\n        this.installSvg();\r\n        this.container = createVideoContainer(this.options);\r\n        this.video = this.container.querySelector('video.video');\r\n        this.videoControls = this.container.querySelector('div.video-controls');\r\n        this.playButton = this.container.querySelector('button.play');\r\n        this.timeElapsed = this.container.querySelector('time.time-elapsed');\r\n        this.duration = this.container.querySelector('time.duration');\r\n        this.progress = this.container.querySelector('progress.progress-bar');\r\n        this.seek = this.container.querySelector('input.seek');\r\n        this.seekTooltip = this.container.querySelector('div.seek-tooltip');\r\n        this.volume = this.container.querySelector('input.volume');\r\n        this.volumeButton = this.container.querySelector('button.volume-button');\r\n        this.volumeIcons = this.volumeButton.querySelector('svg');\r\n        this.playbackAnimation = this.container.querySelector('div.playback-animation');\r\n        this.fullscreenButton = this.container.querySelector('button.fullscreen-button');\r\n        this.fullscreenIcons = this.fullscreenButton.querySelector('svg');\r\n        this.pipButton = this.container.querySelector('button.pip-button');\r\n        this.indexSelector = this.container.querySelector('button.index-selector');\r\n        this.speedSelector = this.container.querySelector('button.speed-selector');\r\n        this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {\r\n            const text = this.speedSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.video.playbackRate = option.value;\r\n            this.speed = option.value;\r\n        }, '1.0x');\r\n        this.channelSelector = this.container.querySelector('button.channel-selector');\r\n        this.channelSelectorPannel = new SelectorPannel([]).install(this.channelSelector, (option) => {\r\n            const text = this.channelSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.channelSelectHandlers.forEach((handler) => {\r\n                handler(option.value);\r\n            });\r\n            this.channel = option.value;\r\n        });\r\n        this.playButton.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('play', this.updateCurrentTime);\r\n        this.video.addEventListener('play', this.updatePlayButton);\r\n        this.video.addEventListener('play', () => {\r\n            this.video.playbackRate = this.speed;\r\n        });\r\n        this.video.addEventListener('pause', this.updatePlayButton);\r\n        this.video.addEventListener('loadedmetadata', this.initializeVideo);\r\n        this.video.addEventListener('timeupdate', this.updateCurrentTime);\r\n        this.video.addEventListener('timeupdate', this.updateTimeElapsed);\r\n        this.video.addEventListener('timeupdate', this.updateProgress);\r\n        this.video.addEventListener('volumechange', this.updateVolumeIcon);\r\n        this.video.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('click', this.animatePlayback);\r\n        this.video.addEventListener('mouseenter', this.showControls);\r\n        this.video.addEventListener('mouseleave', this.hideControls);\r\n        this.videoControls.addEventListener('mouseenter', this.showControls);\r\n        this.videoControls.addEventListener('mouseleave', this.hideControls);\r\n        this.seek.addEventListener('mousemove', this.updateSeekTooltip);\r\n        this.seek.addEventListener('input', this.skipAhead);\r\n        this.volume.addEventListener('input', this.updateVolume);\r\n        this.volumeButton.addEventListener('click', this.toggleMute);\r\n        this.fullscreenButton.addEventListener('click', this.toggleFullScreen);\r\n        this.container.addEventListener('fullscreenchange', this.updateFullscreenButton);\r\n        this.pipButton.addEventListener('click', this.togglePip);\r\n        document.addEventListener('keyup', this.keyboardShortcuts);\r\n    }\r\n}\r\nexports.Video = Video;\r\n// formatTime takes a time length in seconds and returns the time in\r\n// minutes and seconds\r\nfunction formatTime(timeInSeconds) {\r\n    const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);\r\n    return {\r\n        minutes: result.substr(3, 2),\r\n        seconds: result.substr(6, 2),\r\n    };\r\n}\r\n//# sourceMappingURL=video.js.map",
+        "\"use strict\";\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Video = exports.createVideoContainer = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;\r\nrequire(\"../css/video.css\");\r\nconst charts_1 = require(\"./charts\");\r\nconst range_1 = require(\"./range\");\r\nconst utils_1 = require(\"./utils\");\r\nconst svgNS = 'http://www.w3.org/2000/svg';\r\nconst prefix = 'ipywebcam-video-';\r\nfunction makeId(id) {\r\n    return `${prefix}${id}`;\r\n}\r\nexports.makeId = makeId;\r\nfunction createSymbol(id, pathD, viewBox = '0 0 24 24', gTrans = '') {\r\n    const symbol = document.createElementNS(svgNS, 'symbol');\r\n    symbol.id = makeId(id);\r\n    symbol.setAttribute('viewBox', viewBox);\r\n    if (Array.isArray(pathD)) {\r\n        const group = document.createElementNS(svgNS, 'g');\r\n        if (gTrans) {\r\n            group.setAttribute('transform', gTrans);\r\n        }\r\n        for (const p of pathD) {\r\n            const path = document.createElementNS(svgNS, 'path');\r\n            path.setAttribute('d', p);\r\n            group.appendChild(path);\r\n        }\r\n        symbol.appendChild(group);\r\n    }\r\n    else {\r\n        const path = document.createElementNS(svgNS, 'path');\r\n        path.setAttribute('d', pathD);\r\n        symbol.appendChild(path);\r\n    }\r\n    return symbol;\r\n}\r\nfunction createControlsSvg() {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    svg.id = makeId('icons');\r\n    svg.setAttribute('style', 'display: none');\r\n    const defs = document.createElementNS(svgNS, 'defs');\r\n    svg.appendChild(defs);\r\n    defs.appendChild(createSymbol('pause', 'M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z'));\r\n    defs.appendChild(createSymbol('play-icon', 'M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z'));\r\n    defs.appendChild(createSymbol('volume-high', 'M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z'));\r\n    defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));\r\n    defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));\r\n    defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));\r\n    defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));\r\n    defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));\r\n    defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));\r\n    defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));\r\n    defs.appendChild(createSymbol('statistics', [\r\n        'M2096 2741 c-15 -10 -37 -32 -47 -47 -18 -28 -19 -65 -19 -984 l0 -955 25 -37 c32 -48 47 -50 268 -46 l179 3 29 33 29 32 0 969 c0 967 0 968 -21 995 -40 50 -64 56 -246 56 -148 0 -171 -2 -197 -19z',\r\n        'M1308 2088 c-30 -8 -41 -18 -58 -52 -19 -41 -20 -58 -20 -643 0 -330 3 -613 6 -629 3 -16 16 -42 30 -59 l24 -30 210 0 210 0 24 30 c14 17 27 43 30 59 3 16 6 299 6 629 0 584 -1 602 -20 643 -18 36 -27 43 -65 53 -53 13 -326 13 -377 -1z',\r\n        'M504 1426 c-64 -28 -64 -28 -64 -373 l0 -313 29 -32 29 -33 179 -3 c221 -4 236 -2 268 46 l25 37 0 293 c0 328 -3 347 -65 376 -44 21 -353 22 -401 2z',\r\n        'M42 468 c-39 -32 -41 -35 -41 -91 -1 -42 3 -59 14 -63 8 -3 17 -13 20 -23 3 -9 18 -24 34 -34 27 -16 124 -17 1431 -17 1307 0 1404 1 1431 17 16 10 31 25 34 34 3 10 12 20 20 23 11 4 15 21 15 58 0 49 -3 56 -40 91 l-40 37 -1419 0 -1419 0 -40 -32z',\r\n    ], '0 0 1000 1000', 'translate(100, 900) scale(0.25, -0.25)'));\r\n    return svg;\r\n}\r\nfunction createSelectiveUses(active, ...ids) {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    ids.forEach((id) => {\r\n        const use = document.createElementNS(svgNS, 'use');\r\n        use.classList.add(`use-${id}`);\r\n        use.setAttribute('href', `#${makeId(id)}`);\r\n        if (id !== active) {\r\n            use.classList.add('hidden');\r\n        }\r\n        svg.appendChild(use);\r\n    });\r\n    return svg;\r\n}\r\nexports.createSelectiveUses = createSelectiveUses;\r\nfunction createPlaybackAnimation() {\r\n    const div = document.createElement('div');\r\n    div.id = makeId('playback-animation');\r\n    div.className = 'playback-animation';\r\n    const svg = createSelectiveUses('pause', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    div.appendChild(svg);\r\n    return div;\r\n}\r\nexports.createPlaybackAnimation = createPlaybackAnimation;\r\nfunction createVideoProgress() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('video-progress');\r\n    const progress = document.createElement('progress');\r\n    progress.id = makeId('progress-bar');\r\n    progress.classList.add('progress-bar');\r\n    progress.value = progress.max = 0;\r\n    const input = document.createElement('input');\r\n    input.id = makeId('seek');\r\n    input.classList.add('seek');\r\n    input.type = 'range';\r\n    input.value = '0';\r\n    input.min = '0';\r\n    input.step = '1';\r\n    const rangeBar = document.createElement('div');\r\n    rangeBar.setAttribute('draggable', 'false');\r\n    rangeBar.classList.add('range-bar', 'hidden');\r\n    const tooltip = document.createElement('div');\r\n    tooltip.id = makeId('seek-tooltip');\r\n    tooltip.classList.add('seek-tooltip');\r\n    tooltip.innerText = '00:00';\r\n    container.appendChild(progress);\r\n    container.appendChild(input);\r\n    container.appendChild(tooltip);\r\n    container.appendChild(rangeBar);\r\n    return container;\r\n}\r\nfunction createStatisticsContainer() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('statistics-container', 'hidden', 'unused');\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    container.appendChild(svg);\r\n    return container;\r\n}\r\nfunction createPlaybackButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('play');\r\n    button.classList.add('play');\r\n    button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);\r\n    const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('volume-button');\r\n    button.classList.add('volume-button');\r\n    button.setAttribute('data-title', `Mute (${descShortcut(options.shortcuts.mute)})`);\r\n    const svg = createSelectiveUses('volume-high', 'volume-mute', 'volume-low', 'volume-high');\r\n    svg.classList.add('volume-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeInput() {\r\n    const input = document.createElement('input');\r\n    input.id = makeId('volume');\r\n    input.classList.add('volume');\r\n    input.value = '1';\r\n    input.type = 'range';\r\n    input.min = '0';\r\n    input.max = '1';\r\n    input.step = '0.01';\r\n    input.setAttribute('data-mute', '0.5');\r\n    return input;\r\n}\r\nfunction createVolumeControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('volume-controls');\r\n    const button = createVolumeButton(options);\r\n    container.appendChild(button);\r\n    const input = createVolumeInput();\r\n    container.appendChild(input);\r\n    return container;\r\n}\r\nfunction createTime() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('time');\r\n    const elapsed = document.createElement('time');\r\n    elapsed.id = makeId('time-elapsed');\r\n    elapsed.classList.add('time-elapsed');\r\n    elapsed.innerText = '00:00';\r\n    container.appendChild(elapsed);\r\n    const span = document.createElement('span');\r\n    span.innerText = ' / ';\r\n    container.appendChild(span);\r\n    const duration = document.createElement('time');\r\n    duration.id = makeId('duration');\r\n    duration.classList.add('duration');\r\n    duration.innerText = '00:00';\r\n    container.appendChild(duration);\r\n    return container;\r\n}\r\nfunction createLeftControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('left-controls');\r\n    const playbackButton = createPlaybackButton(options);\r\n    container.appendChild(playbackButton);\r\n    const volumeControls = createVolumeControls(options);\r\n    container.appendChild(volumeControls);\r\n    const time = createTime();\r\n    container.appendChild(time);\r\n    return container;\r\n}\r\nfunction createIndexSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('index-selector');\r\n    container.classList.add('index-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Index');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createSpeedSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('speed-selector');\r\n    container.classList.add('speed-selector');\r\n    container.classList.add('text-button');\r\n    container.setAttribute('data-title', 'Select Speed');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createChannelSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('channel-selector');\r\n    container.classList.add('channel-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Channel');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createStatsSelector() {\r\n    const container = document.createElement('button');\r\n    container.classList.add('stats-selector', 'hidden');\r\n    container.setAttribute('data-title', 'Select Statistics Type');\r\n    const icon = createSelectiveUses('statistics', 'statistics');\r\n    icon.classList.add('icon');\r\n    container.appendChild(icon);\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createPipButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('pip-button');\r\n    button.classList.add('pip-button');\r\n    if (!isPipEnabled()) {\r\n        button.classList.add('hidden');\r\n    }\r\n    button.setAttribute('data-title', `PIP (${descShortcut(options.shortcuts.pip)})`);\r\n    const svg = createSelectiveUses('pip', 'pip');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createFullscreenButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('fullscreen-button');\r\n    button.classList.add('fullscreen-button');\r\n    button.setAttribute('data-title', `Full screen (${descShortcut(options.shortcuts.fullscreen)})`);\r\n    const svg = createSelectiveUses('fullscreen', 'fullscreen', 'fullscreen-exit');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createRightControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('right-controls');\r\n    const statsSelector = createStatsSelector();\r\n    container.appendChild(statsSelector);\r\n    const indexSelector = createIndexSelector();\r\n    container.appendChild(indexSelector);\r\n    const channelSelector = createChannelSelector();\r\n    container.appendChild(channelSelector);\r\n    const speedSelector = createSpeedSelector();\r\n    container.appendChild(speedSelector);\r\n    const pipButton = createPipButton(options);\r\n    container.appendChild(pipButton);\r\n    const fullscreenButton = createFullscreenButton(options);\r\n    container.appendChild(fullscreenButton);\r\n    return container;\r\n}\r\nfunction createBottomControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('bottom-controls');\r\n    const leftControls = createLeftControls(options);\r\n    container.appendChild(leftControls);\r\n    const rightControls = createRightControls(options);\r\n    container.appendChild(rightControls);\r\n    return container;\r\n}\r\nfunction createVideoControls(options) {\r\n    const container = document.createElement('div');\r\n    container.setAttribute('draggable', 'false');\r\n    container.classList.add('video-controls');\r\n    container.tabIndex = 0;\r\n    const videoProgress = createVideoProgress();\r\n    container.appendChild(videoProgress);\r\n    const statistics = createStatisticsContainer();\r\n    container.appendChild(statistics);\r\n    const bottomControls = createBottomControls(options);\r\n    container.appendChild(bottomControls);\r\n    return container;\r\n}\r\nconst VIDEO_WORKS = !!document.createElement('video').canPlayType;\r\nfunction createVideoContainer(options) {\r\n    const container = document.createElement('div');\r\n    container.id = makeId('container');\r\n    container.classList.add('ipywebcam');\r\n    container.classList.add('video-container');\r\n    const playbackAnimation = createPlaybackAnimation();\r\n    container.appendChild(playbackAnimation);\r\n    const video = document.createElement('video');\r\n    video.id = makeId('video');\r\n    video.classList.add('video');\r\n    container.appendChild(video);\r\n    const videoControls = createVideoControls(options);\r\n    container.appendChild(videoControls);\r\n    return container;\r\n}\r\nexports.createVideoContainer = createVideoContainer;\r\nfunction iconShow(svg, id) {\r\n    const uses = svg.getElementsByTagNameNS(svgNS, 'use');\r\n    for (let i = 0; i < uses.length; ++i) {\r\n        const use = uses[i];\r\n        if (use.classList.contains(`use-${id}`)) {\r\n            use.classList.remove('hidden');\r\n        }\r\n        else {\r\n            use.classList.add('hidden');\r\n        }\r\n    }\r\n}\r\nfunction isPipEnabled() {\r\n    return !!document.pictureInPictureEnabled;\r\n}\r\nclass SelectorPannel {\r\n    constructor(options) {\r\n        this.options = [];\r\n        this.optionButtons = [];\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.layout = () => {\r\n            const { width, height } = this.container.getBoundingClientRect();\r\n            this.container.style.left = `-${width / 2}px`;\r\n            this.container.style.top = `-${height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.layout();\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.findOption = (options, label) => {\r\n            for (let i = 0; i < options.length; ++i) {\r\n                const option = options[i];\r\n                if (option.label === label) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        this.updateViewAfterSelect = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.select = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index !== -1) {\r\n                const option = this.options[index];\r\n                (this.clickHandlers || []).forEach((handler) => {\r\n                    handler(option);\r\n                });\r\n                this.updateViewAfterSelect(option.label);\r\n            }\r\n        };\r\n        this.install = (element, handler, initLabel = undefined) => {\r\n            this.trigger = element;\r\n            this.hidden();\r\n            this.addClickHandler(handler);\r\n            element.appendChild(this.container);\r\n            element.addEventListener('click', () => {\r\n                this.toggle();\r\n            });\r\n            if (initLabel) {\r\n                this.select(initLabel);\r\n            }\r\n            return this;\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.createHandler = (option) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    this.select(option.label);\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updateView = (options) => {\r\n            const buttons = this.optionButtons;\r\n            const handlers = this.realClickHandlers;\r\n            const newLen = options.length;\r\n            const oldLen = buttons.length;\r\n            for (let i = 0; i < oldLen; ++i) {\r\n                const button = buttons[i];\r\n                const handler = handlers[i];\r\n                if (i < newLen) {\r\n                    const option = options[i];\r\n                    button.innerText = option.label;\r\n                    button.removeEventListener('click', handler);\r\n                    const newHandler = this.createHandler(option);\r\n                    button.addEventListener('click', newHandler);\r\n                    handlers[i] = newHandler;\r\n                }\r\n                else {\r\n                    button.removeEventListener('click', handler);\r\n                    this.container.removeChild(button);\r\n                }\r\n            }\r\n            if (oldLen > newLen) {\r\n                buttons.splice(newLen, oldLen - newLen);\r\n                handlers.splice(newLen, oldLen - newLen);\r\n            }\r\n            if (oldLen < newLen) {\r\n                for (let i = oldLen; i < newLen; ++i) {\r\n                    const option = options[i];\r\n                    const button = document.createElement('button');\r\n                    button.innerText = option.label;\r\n                    button.classList.add('selector-option');\r\n                    button.classList.add('no-tooltip');\r\n                    button.classList.add(`selector-option-${i}`);\r\n                    button.setAttribute('data-index', `${i}`);\r\n                    const handler = this.createHandler(option);\r\n                    button.addEventListener('click', handler);\r\n                    this.container.appendChild(button);\r\n                    buttons.push(button);\r\n                    handlers.push(handler);\r\n                }\r\n            }\r\n            this.options = options;\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.classList.add('selector-options');\r\n        this.container.tabIndex = -1;\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateView(options);\r\n    }\r\n}\r\nclass IndexSelectorPannel {\r\n    constructor(size) {\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.calcLayout = (pageIndex) => {\r\n            this.row = Math.ceil(this.size / 4);\r\n            this.column = Math.min(this.size, 4);\r\n            this.hasPager = this.row > 6;\r\n            this.pageIndex = pageIndex;\r\n            this.pageSize = Math.ceil(this.size / 24);\r\n            const curRow = this.pageIndex < this.pageSize ? 6 : this.row - (this.pageIndex - 1) * 6;\r\n            this.optionsWidth = this.column * 32 + (this.column - 1) * 6 + 6;\r\n            this.optionsHeight = curRow * 32 + (curRow - 1) * 6 + 6;\r\n            const height = this.optionsHeight + (this.hasPager ? 32 : 0);\r\n            this.container.style.width = `${this.optionsWidth}px`;\r\n            this.container.style.height = `${height}px`;\r\n            this.container.style.left = `${-this.optionsWidth / 2}px`;\r\n            this.container.style.top = `${-height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.calcPageIndexFromIndex = (index) => {\r\n            if (index < 0 || index >= this.size) {\r\n                throw new Error(`Invalid index ${index}`);\r\n            }\r\n            return Math.ceil((index + 1) / 24);\r\n        };\r\n        this.setSelectIndex = (index) => {\r\n            this.updatePage(this.calcPageIndexFromIndex(index));\r\n            this.selected = index;\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.createHandler = (index) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    (this.clickHandlers || []).forEach((handler) => {\r\n                        handler(index);\r\n                    });\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updatePage = (pageIndex) => {\r\n            if (pageIndex !== this.pageIndex) {\r\n                this.calcLayout(pageIndex);\r\n                const optNum = this.pageIndex < this.pageSize ? 24 : this.size % 24;\r\n                let len = this.options.children.length;\r\n                let idx = 0;\r\n                for (let i = 0; i < len; ++i) {\r\n                    const child = this.options.children.item(i);\r\n                    if (child === null || child === void 0 ? void 0 : child.classList.contains('selector-option')) {\r\n                        const button = child;\r\n                        const oldHandler = this.realClickHandlers[idx];\r\n                        const dataIdx = idx + (pageIndex - 1) * 24;\r\n                        if (idx < optNum) {\r\n                            const newHandler = (this.realClickHandlers[idx] =\r\n                                this.createHandler(dataIdx));\r\n                            button.removeEventListener('click', oldHandler);\r\n                            button.addEventListener('click', newHandler);\r\n                            button.innerText = `${dataIdx}`;\r\n                            button.className = '';\r\n                            button.classList.add('selector-option');\r\n                            button.classList.add('no-tooltip');\r\n                            button.classList.add(`selector-option-${dataIdx}`);\r\n                            if (dataIdx === this.selected) {\r\n                                button.classList.add('selected');\r\n                            }\r\n                            else {\r\n                                button.classList.remove('selected');\r\n                            }\r\n                            ++idx;\r\n                        }\r\n                        else {\r\n                            button.removeEventListener('click', oldHandler);\r\n                            this.options.removeChild(button);\r\n                            --i;\r\n                            --len;\r\n                        }\r\n                    }\r\n                }\r\n                if (this.realClickHandlers.length > optNum) {\r\n                    this.realClickHandlers.splice(optNum, this.realClickHandlers.length - optNum);\r\n                }\r\n                if (idx < optNum) {\r\n                    for (let i = idx; i < optNum; ++i) {\r\n                        const dataIdx = i + (pageIndex - 1) * 24;\r\n                        const option = document.createElement('button');\r\n                        option.innerText = `${dataIdx}`;\r\n                        option.classList.add('selector-option');\r\n                        option.classList.add('no-tooltip');\r\n                        option.classList.add(`selector-option-${dataIdx}`);\r\n                        if (dataIdx === this.selected) {\r\n                            option.classList.add('selected');\r\n                        }\r\n                        else {\r\n                            option.classList.remove('selected');\r\n                        }\r\n                        option.setAttribute('data-index', `${dataIdx}`);\r\n                        const handler = this.createHandler(dataIdx);\r\n                        this.realClickHandlers.push(handler);\r\n                        option.addEventListener('click', handler);\r\n                        this.options.appendChild(option);\r\n                    }\r\n                }\r\n                if (this.hasPager) {\r\n                    if (this.pager) {\r\n                        if (this.pagerLeft && this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerLeft) {\r\n                            this.pagerLeft.classList.remove('disabled');\r\n                        }\r\n                        if (this.pagerNumber) {\r\n                            this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        }\r\n                        if (this.pagerRight && this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerRight) {\r\n                            this.pagerRight.classList.remove('disabled');\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.pager = document.createElement('div');\r\n                        this.pager.classList.add('selector-pager');\r\n                        this.pagerLeft = document.createElement('button');\r\n                        this.pagerLeft.classList.add('page-left');\r\n                        this.pagerLeft.classList.add('no-tooltip');\r\n                        this.pagerLeft.tabIndex = -1;\r\n                        this.pagerLeft.appendChild(createSelectiveUses('left-arrow', 'left-arrow'));\r\n                        if (this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        this.pagerLeft.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex > 1) {\r\n                                this.updatePage(this.pageIndex - 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerLeft);\r\n                        this.pagerNumber = document.createElement('div');\r\n                        this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        this.pager.appendChild(this.pagerNumber);\r\n                        this.pagerRight = document.createElement('button');\r\n                        this.pagerRight.classList.add('page-right');\r\n                        this.pagerRight.classList.add('no-tooltip');\r\n                        this.pagerRight.tabIndex = -1;\r\n                        this.pagerRight.appendChild(createSelectiveUses('right-arrow', 'right-arrow'));\r\n                        if (this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        this.pagerRight.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex < this.pageSize) {\r\n                                this.updatePage(this.pageIndex + 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerRight);\r\n                        this.container.appendChild(this.pager);\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.pager) {\r\n                        this.container.removeChild(this.pager);\r\n                        this.pager = undefined;\r\n                        this.pagerNumber = undefined;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.updateSize = (size) => {\r\n            if (this.size !== size) {\r\n                this.size = size;\r\n                this.pageIndex = 0;\r\n                this.updatePage(1);\r\n            }\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.id = makeId('selector-panel');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.tabIndex = -1;\r\n        this.options = document.createElement('div');\r\n        this.options.classList.add('selector-options');\r\n        this.options.classList.add('grid');\r\n        this.container.appendChild(this.options);\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateSize(size);\r\n    }\r\n}\r\nfunction descShortcut(shortcut) {\r\n    const parts = [];\r\n    if (shortcut.ctrl) {\r\n        parts.push('ctrl');\r\n    }\r\n    if (shortcut.alt) {\r\n        parts.push('alt');\r\n    }\r\n    if (shortcut.shift) {\r\n        parts.push('shift');\r\n    }\r\n    parts.push(shortcut.key);\r\n    return parts.join(' + ');\r\n}\r\nconst DEFAULT_OPTIONS = {\r\n    shortcuts: {\r\n        play: 'k',\r\n        mute: 'm',\r\n        fullscreen: 'f',\r\n        pip: 'p',\r\n        range: 'v',\r\n        stats: 's',\r\n    },\r\n};\r\nfunction makeShortcut(shortcut) {\r\n    if (typeof shortcut === 'string') {\r\n        return {\r\n            key: shortcut,\r\n            ctrl: false,\r\n            alt: false,\r\n            shift: false,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            key: shortcut.key,\r\n            ctrl: shortcut.ctrl || false,\r\n            alt: shortcut.alt || false,\r\n            shift: shortcut.shift || false,\r\n        };\r\n    }\r\n}\r\nfunction makeOptions(otps) {\r\n    const options = Object.assign({}, DEFAULT_OPTIONS, otps);\r\n    options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);\r\n    options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);\r\n    options.shortcuts.mute = makeShortcut(options.shortcuts.mute);\r\n    options.shortcuts.pip = makeShortcut(options.shortcuts.pip);\r\n    options.shortcuts.play = makeShortcut(options.shortcuts.play);\r\n    options.shortcuts.range = makeShortcut(options.shortcuts.range);\r\n    options.shortcuts.stats = makeShortcut(options.shortcuts.stats);\r\n    return options;\r\n}\r\nconst SpeedOptions = [\r\n    { label: '0.25x', value: 0.25 },\r\n    { label: '0.5x', value: 0.5 },\r\n    { label: '0.75x', value: 0.75 },\r\n    { label: '1.0x', value: 1 },\r\n    { label: '1.25x', value: 1.25 },\r\n    { label: '1.5x', value: 1.5 },\r\n    { label: '1.75x', value: 1.75 },\r\n    { label: '2.0x', value: 2 },\r\n    { label: '2.5x', value: 2.5 },\r\n    { label: '3.0x', value: 3 },\r\n];\r\nclass Video {\r\n    constructor(opts = {}) {\r\n        this.indexSelectHandlers = [];\r\n        this.indexerIndex = -1;\r\n        this.indexerSize = 0;\r\n        this.stats = '';\r\n        this.statsData = {};\r\n        this.statsMeta = {};\r\n        this.speed = 1;\r\n        this.channelSelectHandlers = [];\r\n        this.channel = '';\r\n        this.videoInitHandlers = [];\r\n        this.destroy = () => {\r\n            document.removeEventListener('keyup', this.keyboardShortcuts);\r\n            const url = this.video.src;\r\n            this.video.src = '';\r\n            if (url) {\r\n                URL.revokeObjectURL(url);\r\n            }\r\n            this.rangeBar.destroy();\r\n        };\r\n        this.addVideoInitHandler = (handler) => {\r\n            this.videoInitHandlers.push(handler);\r\n        };\r\n        this.removeVideoInitHandler = (handler) => {\r\n            utils_1.arrayRemove(this.videoInitHandlers, handler);\r\n        };\r\n        this.updateStatistics = (statistics = {}, statistics_meta = {}) => {\r\n            this.statsData = statistics;\r\n            this.statsMeta = statistics_meta;\r\n            const keys = Object.keys(statistics);\r\n            if (keys.length > 0) {\r\n                this.statsSelector.classList.remove('hidden');\r\n                this.statsSelectorPannel.updateView(keys.map((key) => ({ label: key, value: key })));\r\n                this.statisticsBar.classList.remove('unused');\r\n                if (!utils_1.arrayInclude(keys, this.stats)) {\r\n                    this.statsSelectorPannel.select(keys[0]);\r\n                }\r\n            }\r\n            else {\r\n                this.statsSelector.classList.add('hidden');\r\n                this.statsSelectorPannel.updateView([]);\r\n                this.statisticsBar.classList.add('unused');\r\n            }\r\n        };\r\n        this.updateChannels = (channels = []) => {\r\n            if (channels.length > 0) {\r\n                this.channelSelector.classList.remove('hidden');\r\n                const options = [{ label: 'Default', value: '' }];\r\n                channels.forEach((channel) => {\r\n                    options.push({ label: channel, value: channel });\r\n                });\r\n                this.channelSelectorPannel.updateView(options);\r\n                if (!utils_1.arrayInclude(channels, this.channel)) {\r\n                    this.channelSelectorPannel.select('Default');\r\n                }\r\n            }\r\n            else {\r\n                this.channelSelector.classList.add('hidden');\r\n                this.channelSelectorPannel.updateView([]);\r\n            }\r\n        };\r\n        this.addChannelSelectHandler = (handler) => {\r\n            this.channelSelectHandlers.push(handler);\r\n        };\r\n        this.updateIndexerSize = (size) => {\r\n            if (!this.indexSelectorPannel) {\r\n                if (size > 0) {\r\n                    this.indexSelectorPannel = new IndexSelectorPannel(size);\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelectHandlers.forEach((handler) => {\r\n                        var _a;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.addClickHandler(handler);\r\n                    });\r\n                    this.indexSelectorPannel.trigger = this.indexSelector;\r\n                    this.indexSelector.appendChild(this.indexSelectorPannel.container);\r\n                    this.indexSelector.addEventListener('click', () => {\r\n                        var _a, _b;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.toggle();\r\n                        const index = this.indexSelector.getAttribute('data-index');\r\n                        if (index) {\r\n                            (_b = this.indexSelectorPannel) === null || _b === void 0 ? void 0 : _b.setSelectIndex(Number.parseInt(index));\r\n                        }\r\n                    });\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                if (size <= 0) {\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelectorPannel.updateSize(size);\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n            }\r\n            this.indexerSize = size;\r\n        };\r\n        this.updateIndexerIndex = (index) => {\r\n            var _a;\r\n            const text = this.indexSelector.querySelector('div.text');\r\n            text.innerText = `${index}`;\r\n            this.indexSelector.setAttribute('data-index', `${index}`);\r\n            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.setSelectIndex(index);\r\n            this.indexerIndex = index;\r\n        };\r\n        this.addIndexSelectHandler = (handler) => {\r\n            this.indexSelectHandlers.push(handler);\r\n            if (this.indexSelectorPannel) {\r\n                this.indexSelectorPannel.addClickHandler(handler);\r\n            }\r\n        };\r\n        this.updateData = (blob, resumeTime = false) => {\r\n            const oldUrl = this.video.src;\r\n            const url = URL.createObjectURL(blob);\r\n            this.video.src = url;\r\n            if (oldUrl) {\r\n                this.video.load();\r\n                if (resumeTime && this.currentTime) {\r\n                    this.video.currentTime = this.currentTime;\r\n                }\r\n                URL.revokeObjectURL(oldUrl);\r\n            }\r\n        };\r\n        this.installSvg = () => {\r\n            const id = makeId('icons');\r\n            const svg = document.getElementById(id);\r\n            if (!svg) {\r\n                document.body.appendChild(createControlsSvg());\r\n            }\r\n        };\r\n        this.togglePlay = () => {\r\n            if (this.video.paused || this.video.ended) {\r\n                this.video.play();\r\n            }\r\n            else {\r\n                this.video.pause();\r\n            }\r\n        };\r\n        this.enableControls = (enabled) => {\r\n            if (enabled) {\r\n                if (VIDEO_WORKS) {\r\n                    this.video.controls = false;\r\n                    this.videoControls.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.video.controls = true;\r\n                    this.videoControls.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                this.video.controls = false;\r\n                this.videoControls.classList.add('hidden');\r\n            }\r\n        };\r\n        this.updatePlayButton = () => {\r\n            const svg = this.playButton.getElementsByClassName('playback-icons')[0];\r\n            const shortcut = descShortcut(this.options.shortcuts.play);\r\n            if (this.video.paused || this.video.ended) {\r\n                iconShow(svg, 'play-icon');\r\n                this.playButton.setAttribute('data-title', `Play (${shortcut})`);\r\n            }\r\n            else {\r\n                iconShow(svg, 'pause');\r\n                this.playButton.setAttribute('data-title', `Pause (${shortcut})`);\r\n            }\r\n        };\r\n        this.initializeVideo = () => {\r\n            const videoDuration = Math.floor(this.video.duration);\r\n            this.seek.setAttribute('max', `${videoDuration}`);\r\n            this.progress.setAttribute('max', `${videoDuration}`);\r\n            const time = formatTime(videoDuration);\r\n            this.duration.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n            this.rangeBar.max = videoDuration;\r\n            for (const handler of this.videoInitHandlers) {\r\n                handler(this);\r\n            }\r\n            if (this.stats) {\r\n                this.statsSelectorPannel.select(this.stats);\r\n            }\r\n        };\r\n        this.updateCurrentTime = () => {\r\n            this.currentTime = this.video.currentTime;\r\n        };\r\n        // updateTimeElapsed indicates how far through the video\r\n        // the current playback is by updating the timeElapsed element\r\n        this.updateTimeElapsed = () => {\r\n            const time = formatTime(Math.floor(this.video.currentTime));\r\n            this.timeElapsed.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n        };\r\n        // updateProgress indicates how far through the video\r\n        // the current playback is by updating the progress bar\r\n        this.updateProgress = () => {\r\n            this.seek.value = `${Math.floor(this.video.currentTime)}`;\r\n            this.progress.value = Math.floor(this.video.currentTime);\r\n        };\r\n        // updateSeekTooltip uses the position of the mouse on the progress bar to\r\n        // roughly work out what point in the video the user will skip to if\r\n        // the progress bar is clicked at that point\r\n        this.updateSeekTooltip = (event) => {\r\n            const skipTo = Math.round((event.offsetX / this.seek.clientWidth) *\r\n                parseInt(this.seek.getAttribute('max') || '0', 10));\r\n            this.seek.setAttribute('data-seek', `${skipTo}`);\r\n            const t = formatTime(skipTo);\r\n            this.seekTooltip.textContent = `${t.minutes}:${t.seconds}`;\r\n            const rect = this.video.getBoundingClientRect();\r\n            this.seekTooltip.style.left = `${event.pageX - rect.left}px`;\r\n        };\r\n        // skipAhead jumps to a different point in the video when the progress bar\r\n        // is clicked\r\n        this.skipAhead = () => {\r\n            const skipTo = this.seek.dataset.seek\r\n                ? this.seek.dataset.seek\r\n                : this.seek.value;\r\n            this.video.currentTime = Number.parseFloat(skipTo);\r\n            this.progress.value = Number.parseFloat(skipTo);\r\n            this.seek.value = skipTo;\r\n        };\r\n        // updateVolume updates the video's volume\r\n        // and disables the muted state if active\r\n        this.updateVolume = () => {\r\n            if (this.video.muted) {\r\n                this.video.muted = false;\r\n            }\r\n            this.video.volume = Number.parseFloat(this.volume.value);\r\n        };\r\n        // updateVolumeIcon updates the volume icon so that it correctly reflects\r\n        // the volume of the video\r\n        this.updateVolumeIcon = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.mute);\r\n            this.volumeButton.setAttribute('data-title', `Mute (${shortcut})`);\r\n            if (this.video.muted || this.video.volume === 0) {\r\n                this.volumeButton.setAttribute('data-title', `Unmute (${shortcut})`);\r\n                iconShow(this.volumeIcons, 'volume-mute');\r\n            }\r\n            else if (this.video.volume > 0 && this.video.volume <= 0.5) {\r\n                iconShow(this.volumeIcons, 'volume-low');\r\n            }\r\n            else {\r\n                iconShow(this.volumeIcons, 'volume-high');\r\n            }\r\n        };\r\n        // toggleMute mutes or unmutes the video when executed\r\n        // When the video is unmuted, the volume is returned to the value\r\n        // it was set to before the video was muted\r\n        this.toggleMute = () => {\r\n            this.video.muted = !this.video.muted;\r\n            if (this.video.muted) {\r\n                this.volume.setAttribute('data-volume', this.volume.value);\r\n                this.volume.value = '0';\r\n            }\r\n            else {\r\n                this.volume.value = this.volume.dataset.volume || `${this.video.volume}`;\r\n            }\r\n        };\r\n        // animatePlayback displays an animation when\r\n        // the video is played or paused\r\n        this.animatePlayback = () => {\r\n            this.playbackAnimation.animate([\r\n                {\r\n                    opacity: 1,\r\n                    transform: 'scale(1)',\r\n                },\r\n                {\r\n                    opacity: 0,\r\n                    transform: 'scale(1.3)',\r\n                },\r\n            ], {\r\n                duration: 500,\r\n            });\r\n        };\r\n        // toggleFullScreen toggles the full screen state of the video\r\n        // If the browser is currently in fullscreen mode,\r\n        // then it should exit and vice versa.\r\n        this.toggleFullScreen = () => {\r\n            if (document.fullscreenElement) {\r\n                document.exitFullscreen();\r\n            }\r\n            else if (document.webkitFullscreenElement) {\r\n                // Need this to support Safari\r\n                document.webkitExitFullscreen();\r\n            }\r\n            else if (this.container.webkitRequestFullscreen) {\r\n                // Need this to support Safari\r\n                this.container.webkitRequestFullscreen();\r\n            }\r\n            else {\r\n                this.container.requestFullscreen();\r\n            }\r\n        };\r\n        this.isFullscreen = () => {\r\n            return (document.fullscreenElement ||\r\n                document.webkitFullscreenElement ||\r\n                this.container.webkitRequestFullscreen);\r\n        };\r\n        // updateFullscreenButton changes the icon of the full screen button\r\n        // and tooltip to reflect the current full screen state of the video\r\n        this.updateFullscreenButton = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.fullscreen);\r\n            if (this.isFullscreen()) {\r\n                this.fullscreenButton.setAttribute('data-title', `Exit full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen-exit');\r\n            }\r\n            else {\r\n                this.fullscreenButton.setAttribute('data-title', `Full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen');\r\n            }\r\n        };\r\n        // togglePip toggles Picture-in-Picture mode on the video\r\n        this.togglePip = () => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                if (this.video !== document.pictureInPictureElement) {\r\n                    this.pipButton.disabled = true;\r\n                    yield this.video.requestPictureInPicture();\r\n                }\r\n                else {\r\n                    yield document.exitPictureInPicture();\r\n                }\r\n            }\r\n            catch (error) {\r\n                console.error(error);\r\n            }\r\n            finally {\r\n                this.pipButton.disabled = false;\r\n            }\r\n        });\r\n        this.toggleRangeBar = () => {\r\n            this.rangeBar.toggle();\r\n        };\r\n        this.toggleStatisticsBar = () => {\r\n            this.statisticsBar.classList.toggle('hidden');\r\n        };\r\n        // hideControls hides the video controls when not in use\r\n        // if the video is paused, the controls must remain visible\r\n        this.hideControls = () => {\r\n            if (this.video.paused) {\r\n                return;\r\n            }\r\n            this.videoControls.classList.add('hide');\r\n        };\r\n        // showControls displays the video controls\r\n        this.showControls = () => {\r\n            this.videoControls.classList.remove('hide');\r\n        };\r\n        this.isInFocus = () => {\r\n            var _a;\r\n            return ((_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.contains(this.container)) || false;\r\n        };\r\n        // keyboardShortcuts executes the relevant functions for\r\n        // each supported shortcut key\r\n        this.keyboardShortcuts = (event) => {\r\n            if (!this.isInFocus()) {\r\n                return;\r\n            }\r\n            const { key, ctrlKey, altKey, shiftKey } = event;\r\n            const { play, mute, fullscreen, pip, range, stats } = this.options.shortcuts;\r\n            if (key === play.key &&\r\n                (play.ctrl === !!ctrlKey ||\r\n                    play.alt === !!altKey ||\r\n                    play.shift === !!shiftKey)) {\r\n                this.togglePlay();\r\n                this.animatePlayback();\r\n                if (this.video.paused) {\r\n                    this.showControls();\r\n                }\r\n                else {\r\n                    setTimeout(() => {\r\n                        this.hideControls();\r\n                    }, 2000);\r\n                }\r\n            }\r\n            else if (key === mute.key &&\r\n                (mute.ctrl === !!ctrlKey ||\r\n                    mute.alt === !!altKey ||\r\n                    mute.shift === !!shiftKey)) {\r\n                this.toggleMute();\r\n            }\r\n            else if (key === fullscreen.key &&\r\n                (fullscreen.ctrl === !!ctrlKey ||\r\n                    fullscreen.alt === !!altKey ||\r\n                    fullscreen.shift === !!shiftKey)) {\r\n                this.toggleFullScreen();\r\n            }\r\n            else if (key === pip.key &&\r\n                (pip.ctrl === !!ctrlKey ||\r\n                    pip.alt === !!altKey ||\r\n                    pip.shift === !!shiftKey)) {\r\n                this.togglePip();\r\n            }\r\n            else if (key === range.key &&\r\n                (range.ctrl === !!ctrlKey ||\r\n                    range.alt === !!altKey ||\r\n                    range.shift === !!shiftKey)) {\r\n                this.toggleRangeBar();\r\n            }\r\n            else if (key === stats.key &&\r\n                (stats.ctrl === !!ctrlKey ||\r\n                    stats.alt === !!altKey ||\r\n                    stats.shift === !!shiftKey)) {\r\n                this.toggleStatisticsBar();\r\n            }\r\n        };\r\n        this.options = makeOptions(opts);\r\n        this.installSvg();\r\n        this.container = createVideoContainer(this.options);\r\n        this.video = this.container.querySelector('video.video');\r\n        this.videoControls = this.container.querySelector('div.video-controls');\r\n        this.playButton = this.container.querySelector('button.play');\r\n        this.timeElapsed = this.container.querySelector('time.time-elapsed');\r\n        this.duration = this.container.querySelector('time.duration');\r\n        this.progress = this.container.querySelector('progress.progress-bar');\r\n        this.seek = this.container.querySelector('input.seek');\r\n        this.seekTooltip = this.container.querySelector('div.seek-tooltip');\r\n        this.rangeBar = new range_1.RangeBar(this.container.querySelector('div.range-bar'));\r\n        this.statisticsBar = this.container.querySelector('div.statistics-container');\r\n        this.statisticsSvg = this.statisticsBar.querySelector('svg');\r\n        this.volume = this.container.querySelector('input.volume');\r\n        this.volumeButton = this.container.querySelector('button.volume-button');\r\n        this.volumeIcons = this.volumeButton.querySelector('svg');\r\n        this.playbackAnimation = this.container.querySelector('div.playback-animation');\r\n        this.fullscreenButton = this.container.querySelector('button.fullscreen-button');\r\n        this.fullscreenIcons = this.fullscreenButton.querySelector('svg');\r\n        this.pipButton = this.container.querySelector('button.pip-button');\r\n        this.indexSelector = this.container.querySelector('button.index-selector');\r\n        this.statsSelector = this.container.querySelector('button.stats-selector');\r\n        this.statsSelectorPannel = new SelectorPannel([]).install(this.statsSelector, (option) => {\r\n            const text = this.statsSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.stats = option.value;\r\n            if (this.video.duration > 0) {\r\n                charts_1.makeLineChart(this.statisticsSvg, this.statsData[this.stats], [0, this.video.duration], this.statsMeta[this.stats].y_range, this.video.clientWidth - 20, 30);\r\n            }\r\n        });\r\n        this.speedSelector = this.container.querySelector('button.speed-selector');\r\n        this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {\r\n            const text = this.speedSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.video.playbackRate = option.value;\r\n            this.speed = option.value;\r\n        }, '1.0x');\r\n        this.channelSelector = this.container.querySelector('button.channel-selector');\r\n        this.channelSelectorPannel = new SelectorPannel([]).install(this.channelSelector, (option) => {\r\n            const text = this.channelSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.channelSelectHandlers.forEach((handler) => {\r\n                handler(option.value);\r\n            });\r\n            this.channel = option.value;\r\n        });\r\n        this.playButton.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('play', this.updateCurrentTime);\r\n        this.video.addEventListener('play', this.updatePlayButton);\r\n        this.video.addEventListener('play', () => {\r\n            this.video.playbackRate = this.speed;\r\n        });\r\n        this.video.addEventListener('pause', this.updatePlayButton);\r\n        this.video.addEventListener('loadedmetadata', this.initializeVideo);\r\n        this.video.addEventListener('timeupdate', this.updateCurrentTime);\r\n        this.video.addEventListener('timeupdate', this.updateTimeElapsed);\r\n        this.video.addEventListener('timeupdate', this.updateProgress);\r\n        this.video.addEventListener('volumechange', this.updateVolumeIcon);\r\n        this.video.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('click', this.animatePlayback);\r\n        this.video.addEventListener('mouseenter', this.showControls);\r\n        this.video.addEventListener('mouseleave', this.hideControls);\r\n        this.videoControls.addEventListener('mouseenter', this.showControls);\r\n        this.videoControls.addEventListener('mouseleave', this.hideControls);\r\n        this.seek.addEventListener('mousemove', this.updateSeekTooltip);\r\n        this.seek.addEventListener('input', this.skipAhead);\r\n        this.volume.addEventListener('input', this.updateVolume);\r\n        this.volumeButton.addEventListener('click', this.toggleMute);\r\n        this.fullscreenButton.addEventListener('click', this.toggleFullScreen);\r\n        this.container.addEventListener('fullscreenchange', this.updateFullscreenButton);\r\n        this.pipButton.addEventListener('click', this.togglePip);\r\n        document.addEventListener('keyup', this.keyboardShortcuts);\r\n    }\r\n}\r\nexports.Video = Video;\r\n// formatTime takes a time length in seconds and returns the time in\r\n// minutes and seconds\r\nfunction formatTime(timeInSeconds) {\r\n    const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);\r\n    return {\r\n        minutes: result.substr(3, 2),\r\n        seconds: result.substr(6, 2),\r\n    };\r\n}\r\n//# sourceMappingURL=video.js.map",
         "\"use strict\";\r\n// Copyright (c) Xiaojing Chen\r\n// Distributed under the terms of the Modified BSD License.\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WebCamView = exports.WebCamModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst common_1 = require(\"./common\");\r\nconst webrtc_1 = require(\"./webrtc\");\r\nconst utils_1 = require(\"./utils\");\r\n// Import the CSS\r\nrequire(\"../css/widget.css\");\r\nconst supportsSetCodecPreferences = window.RTCRtpTransceiver &&\r\n    'setCodecPreferences' in window.RTCRtpTransceiver.prototype;\r\nclass WebCamModel extends common_1.BaseModel {\r\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.getDevice = (type) => __awaiter(this, void 0, void 0, function* () {\r\n            const stream = yield navigator.mediaDevices.getUserMedia({\r\n                video: type === 'video_input',\r\n                audio: type === 'audio_input' || type === 'audio_output',\r\n            });\r\n            try {\r\n                const n_type = type.replace('_', '');\r\n                const devices = yield navigator.mediaDevices.enumerateDevices();\r\n                return devices.filter((device) => device.kind === n_type && device.deviceId);\r\n            }\r\n            finally {\r\n                stream.getTracks().forEach((track) => track.stop());\r\n            }\r\n        });\r\n        this.resetPeer = () => {\r\n            this.pc = undefined;\r\n            this.client_stream = undefined;\r\n            this.server_stream = undefined;\r\n        };\r\n        this.waitForStateWhen = (checker) => __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                const state = this.get('state');\r\n                if (checker(state)) {\r\n                    resolve(state);\r\n                }\r\n                else {\r\n                    const checkState = () => {\r\n                        const state = this.get('state');\r\n                        if (checker(state)) {\r\n                            this.off('change:state', checkState);\r\n                            resolve(state);\r\n                        }\r\n                    };\r\n                    this.on('change:state', checkState);\r\n                }\r\n            });\r\n        });\r\n        this.waitForStateIn = (...states) => __awaiter(this, void 0, void 0, function* () {\r\n            return this.waitForStateWhen((state) => states.indexOf(state) !== -1);\r\n        });\r\n        this.getState = () => this.get('state');\r\n        this.setState = (state) => {\r\n            this.set('state', state);\r\n        };\r\n        this.getConstraints = () => {\r\n            let { video, audio } = this.get('constraints') || { audio: false, video: true };\r\n            const videoId = this.videoInput;\r\n            const audioId = this.audioInput;\r\n            if (audio && audioId) {\r\n                if (typeof audio === 'boolean') {\r\n                    audio = {\r\n                        deviceId: audioId,\r\n                    };\r\n                }\r\n                else {\r\n                    audio.deviceId = audioId;\r\n                }\r\n            }\r\n            if (video && videoId) {\r\n                if (typeof video === 'boolean') {\r\n                    video = {\r\n                        deviceId: videoId,\r\n                    };\r\n                }\r\n                else {\r\n                    video.deviceId = videoId;\r\n                }\r\n            }\r\n            return { video, audio };\r\n        };\r\n        this.closePeer = () => __awaiter(this, void 0, void 0, function* () {\r\n            const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new', 'error');\r\n            if (state === 'new') {\r\n                throw new Error(`This should not happen. We can't close the peer when the state is ${state}. Because at this time, we haven't start the peer.`);\r\n            }\r\n            if (state === 'closed' || state === 'error') {\r\n                return;\r\n            }\r\n            const pc = this.pc;\r\n            if (!pc) {\r\n                this.setState('closed');\r\n                return;\r\n            }\r\n            this.setState('closing');\r\n            try {\r\n                pc.close();\r\n                if (pc.connectionState !== 'closed') {\r\n                    yield new Promise((resolve) => {\r\n                        pc.addEventListener('connectionstatechange', () => {\r\n                            if (pc.connectionState === 'closed') {\r\n                                resolve();\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n                this.resetPeer();\r\n                this.setState('closed');\r\n            }\r\n            catch (err) {\r\n                this.setState('error');\r\n            }\r\n        });\r\n        this.fetchCodecs = () => {\r\n            const codecs = this.getCodecs();\r\n            this.set('video_codecs', codecs);\r\n            this.save_changes();\r\n        };\r\n        this.getCodecs = () => {\r\n            if (supportsSetCodecPreferences) {\r\n                const { codecs = [] } = RTCRtpSender.getCapabilities('video') || {};\r\n                return codecs\r\n                    .filter((codec) => !utils_1.arrayInclude(['video/red', 'video/ulpfec', 'video/rtx'], codec.mimeType))\r\n                    .map((codec) => {\r\n                    return (codec.mimeType + ' ' + (codec.sdpFmtpLine || '')).trim();\r\n                });\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        };\r\n        this.getPeerConfig = () => {\r\n            const config = {};\r\n            const iceServers = this.get('iceServers');\r\n            if (iceServers && iceServers.length > 0) {\r\n                config.iceServers = iceServers.map((server) => {\r\n                    if (typeof server === 'string') {\r\n                        return { urls: server };\r\n                    }\r\n                    else {\r\n                        return server;\r\n                    }\r\n                });\r\n            }\r\n            return config;\r\n        };\r\n        this.syncDevice = (track) => {\r\n            const type = track.kind === 'video' ? 'video_input' : 'audio_input';\r\n            let curDeviceId;\r\n            if (typeof track.getCapabilities !== 'undefined') {\r\n                curDeviceId = track.getCapabilities().deviceId;\r\n            }\r\n            else {\r\n                curDeviceId = track.getSettings().deviceId;\r\n            }\r\n            if (type === 'video_input') {\r\n                this.videoInput = curDeviceId;\r\n            }\r\n            else {\r\n                this.audioInput = curDeviceId;\r\n            }\r\n            this.send_cmd('sync_device', { type, id: curDeviceId }, false);\r\n        };\r\n        this.connect = (video, force_reconnect = false, only_reconnect = false) => __awaiter(this, void 0, void 0, function* () {\r\n            const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new');\r\n            if (state === 'closed' || state === 'error' || state === 'new') {\r\n                if (only_reconnect) {\r\n                    return;\r\n                }\r\n                try {\r\n                    this.setState('connecting');\r\n                    const pc = webrtc_1.createPeerConnection(this.getPeerConfig());\r\n                    this.pc = pc;\r\n                    this.bindVideo(video);\r\n                    pc.addEventListener('connectionstatechange', () => {\r\n                        const state = pc.connectionState;\r\n                        if (state === 'failed' ||\r\n                            state === 'disconnected' ||\r\n                            state === 'closed') {\r\n                            pc.close();\r\n                            if (this.pc === pc) {\r\n                                this.resetPeer();\r\n                            }\r\n                        }\r\n                    });\r\n                    pc.addEventListener('track', (evt) => {\r\n                        if (evt.track.kind === 'video') {\r\n                            console.log('track gotten');\r\n                            this.server_stream = evt.streams[0];\r\n                        }\r\n                    });\r\n                    const stream = yield navigator.mediaDevices.getUserMedia(this.getConstraints());\r\n                    this.client_stream = stream;\r\n                    stream.getTracks().forEach((track) => {\r\n                        this.syncDevice(track);\r\n                        pc.addTrack(track, stream);\r\n                    });\r\n                    yield webrtc_1.negotiate(pc, (offer) => __awaiter(this, void 0, void 0, function* () {\r\n                        console.log(offer);\r\n                        const { content } = yield this.send_cmd('exchange_peer', {\r\n                            desc: offer,\r\n                        });\r\n                        return content;\r\n                    }));\r\n                    const pcState = yield webrtc_1.waitForConnectionState(pc, (state) => state !== 'connecting' && state !== 'new');\r\n                    if (pcState === 'connected') {\r\n                        this.setState('connected');\r\n                    }\r\n                    else {\r\n                        yield this.closePeer();\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    this.setState('error');\r\n                    console.error(err);\r\n                }\r\n            }\r\n            else if (force_reconnect) {\r\n                yield this.closePeer();\r\n                yield this.connect(video, force_reconnect);\r\n            }\r\n            else {\r\n                this.bindVideo(video);\r\n            }\r\n        });\r\n        this.bindVideo = (video) => {\r\n            const pc = this.pc;\r\n            if (!pc || !video) {\r\n                return;\r\n            }\r\n            if (pc.connectionState === 'connected' && this.server_stream) {\r\n                video.srcObject = this.server_stream;\r\n            }\r\n            else {\r\n                const handler = (evt) => {\r\n                    if (evt.track.kind === 'video') {\r\n                        console.log('track gotten');\r\n                        this.server_stream = evt.streams[0];\r\n                        video.srcObject = this.server_stream;\r\n                        pc.removeEventListener('track', handler);\r\n                    }\r\n                };\r\n                pc.addEventListener('track', handler);\r\n            }\r\n        };\r\n        this.fetchCodecs();\r\n        // this.fetchDevices();\r\n        // this.on('change:video_input_device', (...args) => {\r\n        //   console.log('change:video_input_device');\r\n        //   console.log(args);\r\n        //   this.connect(undefined, true, true);\r\n        // });\r\n        // this.on('change:audio_input_device', (...args) => {\r\n        //   console.log('change:audio_input_device');\r\n        //   console.log(args);\r\n        //   this.connect(undefined, true, true);\r\n        // });\r\n        this.on('change:iceServers', () => {\r\n            this.connect(undefined, true, true);\r\n        });\r\n        this.addMessageHandler('request_devices', (cmdMsg) => {\r\n            const { cmd, id, args } = cmdMsg;\r\n            const { type } = args;\r\n            this.getDevice(type).then((devices) => {\r\n                console.log(devices);\r\n                this.send({ ans: cmd, id, res: devices }, {});\r\n            });\r\n        });\r\n        this.addMessageHandler('notify_device_change', (cmdMsg) => {\r\n            const { args } = cmdMsg;\r\n            const { type, change } = args;\r\n            if (type === 'video_input') {\r\n                if (this.videoInput !== change.new) {\r\n                    this.videoInput = change.new;\r\n                    this.connect(undefined, true, true);\r\n                }\r\n            }\r\n            else if (type === 'audio_input') {\r\n                if (this.audioInput !== change.new) {\r\n                    this.audioInput = change.new;\r\n                    this.connect(undefined, true, true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: WebCamModel.model_name, _view_name: WebCamModel.view_name, server_desc: null, client_desc: null, iceServers: [], constraints: null, video_codecs: [], video_codec: null, state: 'new', autoplay: true, controls: true, crossOrigin: 'not-support', width: null, height: null, playsInline: true, muted: false });\r\n    }\r\n}\r\nexports.WebCamModel = WebCamModel;\r\nWebCamModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\r\nWebCamModel.model_name = 'WebCamModel';\r\nWebCamModel.view_name = 'WebCamView'; // Set to null if no view\r\nfunction attachSinkId(element, sinkId) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (typeof element.sinkId !== 'undefined') {\r\n            if (sinkId) {\r\n                yield element.setSinkId(sinkId);\r\n            }\r\n        }\r\n        else {\r\n            console.warn('Browser does not support output device selection.');\r\n        }\r\n    });\r\n}\r\nclass WebCamView extends base_1.DOMWidgetView {\r\n    render() {\r\n        const video = document.createElement('video');\r\n        video.playsInline = true;\r\n        this.el.appendChild(video);\r\n        this.model.connect(video);\r\n        this.model.on('change:state', () => {\r\n            const model = this.model;\r\n            if (model.getState() === 'connected') {\r\n                model.connect(video);\r\n            }\r\n        });\r\n        const { deviceId } = this.model.get('audio_output_device') || {};\r\n        attachSinkId(video, deviceId);\r\n        this.model.on('change:audio_output_device', () => {\r\n            const { deviceId } = this.model.get('audio_output_device') || {};\r\n            attachSinkId(video, deviceId);\r\n        });\r\n        video.autoplay = this.model.get('autoplay');\r\n        this.model.on('change:autoplay', () => {\r\n            video.autoplay = this.model.get('autoplay');\r\n        });\r\n        video.controls = this.model.get('controls');\r\n        this.model.on('change:controls', () => {\r\n            video.controls = this.model.get('controls');\r\n        });\r\n        const width = this.model.get('width');\r\n        if (width) {\r\n            video.width = width;\r\n        }\r\n        this.model.on('change:width', () => {\r\n            const width = this.model.get('width');\r\n            if (width) {\r\n                video.width = width;\r\n            }\r\n            else {\r\n                video.removeAttribute('width');\r\n            }\r\n        });\r\n        const height = this.model.get('height');\r\n        if (height) {\r\n            video.height = height;\r\n        }\r\n        this.model.on('change:height', () => {\r\n            const height = this.model.get('height');\r\n            if (height) {\r\n                video.height = height;\r\n            }\r\n            else {\r\n                video.removeAttribute('height');\r\n            }\r\n        });\r\n        video.playsInline = this.model.get('playsInline');\r\n        this.model.on('change:playsInline', () => {\r\n            video.playsInline = this.model.get('playsInline');\r\n        });\r\n        video.muted = this.model.get('muted');\r\n        this.model.on('change:muted', () => {\r\n            video.muted = this.model.get('muted');\r\n        });\r\n        const crossOrigin = this.model.get('crossOrigin');\r\n        if (crossOrigin === 'not-support') {\r\n            video.crossOrigin = null;\r\n        }\r\n        else {\r\n            video.crossOrigin = crossOrigin;\r\n        }\r\n        this.model.on('change:crossOrigin', () => {\r\n            const crossOrigin = this.model.get('crossOrigin');\r\n            if (crossOrigin === 'not-support') {\r\n                video.crossOrigin = null;\r\n            }\r\n            else {\r\n                video.crossOrigin = crossOrigin;\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.WebCamView = WebCamView;\r\n//# sourceMappingURL=webcam.js.map",
         "\"use strict\";\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.negotiate = exports.waitForConnectionState = exports.createPeerConnection = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst DEFAULT_ICE_SERVERS = [\r\n    { urls: ['stun:stun.l.google.com:19302'] },\r\n    { urls: ['stun:23.21.150.121'] },\r\n    { urls: ['stun:stun01.sipphone.com'] },\r\n    { urls: ['stun:stun.ekiga.net'] },\r\n    { urls: ['stun:stun.fwdnet.net'] },\r\n    { urls: ['stun:stun.ideasip.com'] },\r\n    { urls: ['stun:stun.iptel.org'] },\r\n    { urls: ['stun:stun.rixtelecom.se'] },\r\n    { urls: ['stun:stun.schlund.de'] },\r\n    { urls: ['stun:stunserver.org'] },\r\n    { urls: ['stun:stun.softjoys.com'] },\r\n    { urls: ['stun:stun.voiparound.com'] },\r\n    { urls: ['stun:stun.voipbuster.com'] },\r\n    { urls: ['stun:stun.voipstunt.com'] },\r\n    { urls: ['stun:stun.voxgratia.org'] },\r\n    { urls: ['stun:stun.xten.com'] },\r\n];\r\nfunction createPeerConnection(config) {\r\n    const pc = new RTCPeerConnection(Object.assign({}, { iceServers: DEFAULT_ICE_SERVERS }, config || {}));\r\n    pc.addEventListener('connectionstatechange', () => {\r\n        console.log(`connection -> ${pc.connectionState}`);\r\n    }, false);\r\n    // register some listeners to help debugging\r\n    pc.addEventListener('icegatheringstatechange', () => {\r\n        console.log(`iceGathering -> ${pc.iceGatheringState}`);\r\n    }, false);\r\n    pc.addEventListener('iceconnectionstatechange', () => {\r\n        console.log(`iceConnection -> ${pc.iceConnectionState}`);\r\n    }, false);\r\n    pc.addEventListener('signalingstatechange', () => {\r\n        console.log(`signaling -> ${pc.signalingState}`);\r\n    }, false);\r\n    return pc;\r\n}\r\nexports.createPeerConnection = createPeerConnection;\r\nfunction waitForConnectionState(pc, checker) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve) => {\r\n            if (checker(pc.connectionState)) {\r\n                resolve(pc.connectionState);\r\n            }\r\n            else {\r\n                const checkState = () => {\r\n                    if (checker(pc.connectionState)) {\r\n                        pc.removeEventListener('connectionstatechange', checkState);\r\n                        resolve(pc.connectionState);\r\n                    }\r\n                };\r\n                pc.addEventListener('connectionstatechange', checkState);\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.waitForConnectionState = waitForConnectionState;\r\nfunction waitIceGathering(pc) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve) => {\r\n            if (pc.iceGatheringState === 'complete') {\r\n                resolve();\r\n            }\r\n            else {\r\n                const checkState = () => {\r\n                    if (pc.iceGatheringState === 'complete') {\r\n                        pc.removeEventListener('icegatheringstatechange', checkState);\r\n                        resolve();\r\n                    }\r\n                };\r\n                pc.addEventListener('icegatheringstatechange', checkState);\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction negotiate(pc, answerFunc, codec) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let offer = yield pc.createOffer();\r\n        yield pc.setLocalDescription(offer);\r\n        yield waitIceGathering(pc);\r\n        offer = pc.localDescription;\r\n        if (codec) {\r\n            if (codec.audio && codec.audio !== 'default') {\r\n                offer.sdp = sdpFilterCodec('audio', codec.audio, offer.sdp);\r\n            }\r\n            if (codec.video && codec.video !== 'default') {\r\n                offer.sdp = sdpFilterCodec('video', codec.video, offer.sdp);\r\n            }\r\n        }\r\n        const answer = yield answerFunc(offer);\r\n        yield pc.setRemoteDescription(answer);\r\n    });\r\n}\r\nexports.negotiate = negotiate;\r\nfunction sdpFilterCodec(kind, codec, realSdp) {\r\n    const allowed = [];\r\n    const rtxRegex = new RegExp('a=fmtp:(\\\\d+) apt=(\\\\d+)\\\\r$');\r\n    const codecRegex = new RegExp('a=rtpmap:([0-9]+) ' + escapeRegExp(codec));\r\n    const videoRegex = new RegExp('(m=' + kind + ' .*?)( ([0-9]+))*\\\\s*$');\r\n    const lines = realSdp.split('\\n');\r\n    let isKind = false;\r\n    for (let i = 0; i < lines.length; i++) {\r\n        if (lines[i].startsWith('m=' + kind + ' ')) {\r\n            isKind = true;\r\n        }\r\n        else if (lines[i].startsWith('m=')) {\r\n            isKind = false;\r\n        }\r\n        if (isKind) {\r\n            let match = lines[i].match(codecRegex);\r\n            if (match) {\r\n                allowed.push(parseInt(match[1]));\r\n            }\r\n            match = lines[i].match(rtxRegex);\r\n            if (match && utils_1.arrayInclude(allowed, parseInt(match[2]))) {\r\n                allowed.push(parseInt(match[1]));\r\n            }\r\n        }\r\n    }\r\n    const skipRegex = 'a=(fmtp|rtcp-fb|rtpmap):([0-9]+)';\r\n    let sdp = '';\r\n    isKind = false;\r\n    for (let i = 0; i < lines.length; i++) {\r\n        if (lines[i].startsWith('m=' + kind + ' ')) {\r\n            isKind = true;\r\n        }\r\n        else if (lines[i].startsWith('m=')) {\r\n            isKind = false;\r\n        }\r\n        if (isKind) {\r\n            const skipMatch = lines[i].match(skipRegex);\r\n            if (skipMatch && !utils_1.arrayInclude(allowed, parseInt(skipMatch[2]))) {\r\n                continue;\r\n            }\r\n            else if (lines[i].match(videoRegex)) {\r\n                sdp += lines[i].replace(videoRegex, '$1 ' + allowed.join(' ')) + '\\n';\r\n            }\r\n            else {\r\n                sdp += lines[i] + '\\n';\r\n            }\r\n        }\r\n        else {\r\n            sdp += lines[i] + '\\n';\r\n        }\r\n    }\r\n    return sdp;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\r\n}\r\n//# sourceMappingURL=webrtc.js.map",
-        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* ==========================================================================\\r\\n   #Custom HTML5 Video Player\\r\\n   ========================================================================== */\\r\\n\\r\\n:root {\\r\\n  --youtube-red: #FE0900;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container {\\r\\n  width: 800px;\\r\\n  border-radius: 4px;\\r\\n  margin: 0 auto;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  justify-content: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls {\\r\\n  right: 0;\\r\\n  left: 0;\\r\\n  padding: 10px;\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  transition: all 0.2s ease;\\r\\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls.hide {\\r\\n  opacity: 0;\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-progress {\\r\\n  position: relative;\\r\\n  height: 8.4px;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  appearance: none;\\r\\n  border-radius: 2px;\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-bar {\\r\\n  background-color: #474545;\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-value {\\r\\n  background: var(--youtube-red);\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-moz-progress-bar {\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek-tooltip {\\r\\n  display: none;\\r\\n  position: absolute;\\r\\n  top: -50px;\\r\\n  margin-left: -20px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  content: attr(data-title);\\r\\n  font-weight: bold;\\r\\n  color: #fff;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .bottom-controls {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .left-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls input {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button {\\r\\n  cursor: pointer;\\r\\n  position: relative;\\r\\n  margin-right: 7px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  border: none;\\r\\n  outline: none;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button * {\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip)::before {\\r\\n  content: attr(data-title);\\r\\n  position: absolute;\\r\\n  display: none;\\r\\n  right: 0;\\r\\n  top: -50px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  color: #fff;\\r\\n  font-weight: bold;\\r\\n  padding: 4px 6px;\\r\\n  word-break: keep-all;\\r\\n  white-space: pre;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .fullscreen-button {\\r\\n  margin-right: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .index-selector {\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .text-button {\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-panel {\\r\\n  position: absolute;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  background: rgba(21, 21, 21, .9);\\r\\n  padding: 6px 12px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options {\\r\\n  display: flex;\\r\\n  flex-wrap: nowrap;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options.grid {\\r\\n  flex-wrap: wrap;\\r\\n  flex-direction: row;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager svg {\\r\\n  width: 20px;\\r\\n  height: 20px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button.disabled svg {\\r\\n  fill: #999;\\r\\n  stroke: #999;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button {\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option {\\r\\n  color: #fff;\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n  margin: 3px;\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option .text {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option:hover {\\r\\n  background: rgba(120, 120, 120, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option.selected {\\r\\n  background: rgba(81, 81, 81, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .pip-button svg {\\r\\n  width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .playback-animation {\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  margin-left: -40px;\\r\\n  margin-top: -40px;\\r\\n  width: 80px;\\r\\n  height: 80px;\\r\\n  border-radius: 80px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range] {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  height: 8.4px;\\r\\n  background: transparent;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  border-radius: 1.3px;\\r\\n  -webkit-appearance: none;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\\r\\n  height: 16px;\\r\\n  width: 16px;\\r\\n  border-radius: 16px;\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  -webkit-appearance: none;\\r\\n  margin-left: -1px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\\r\\n  background: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume {\\r\\n  height: 5px;\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\\r\\n  margin-left: 0;\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-track {\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  cursor: pointer;\\r\\n  border: 1px solid transparent;\\r\\n  background: transparent;\\r\\n  border-radius: 1.3px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  border-radius: 50px;\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  margin-top: 5px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\\r\\n  border: 1px solid #fff;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .hidden {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container svg {\\r\\n  width: 28px;\\r\\n  height: 28px;\\r\\n  fill: #fff;\\r\\n  stroke: #fff;\\r\\n  cursor: pointer;\\r\\n  vertical-align: middle;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
+        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* ==========================================================================\\r\\n   #Custom HTML5 Video Player\\r\\n   ========================================================================== */\\r\\n\\r\\n:root {\\r\\n  --youtube-red: rgb(254, 9, 0);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container {\\r\\n  width: 800px;\\r\\n  border-radius: 4px;\\r\\n  margin: 0 auto;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  justify-content: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls {\\r\\n  right: 0;\\r\\n  left: 0;\\r\\n  padding: 10px;\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  transition: all 0.2s ease;\\r\\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls.hide {\\r\\n  opacity: 0;\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-progress {\\r\\n  position: relative;\\r\\n  height: 8.4px;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  appearance: none;\\r\\n  border-radius: 2px;\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-bar {\\r\\n  background-color: #474545;\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-value {\\r\\n  background: var(--youtube-red);\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-moz-progress-bar {\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek-tooltip {\\r\\n  display: none;\\r\\n  position: absolute;\\r\\n  top: -30px;\\r\\n  margin-left: -20px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  content: attr(data-title);\\r\\n  font-weight: bold;\\r\\n  color: #fff;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar {\\r\\n  position: absolute;\\r\\n  top: 12px;\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  background-color: #474545;\\r\\n  cursor: pointer;\\r\\n  border-radius: 2px;\\r\\n  overflow: visible;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .marker {\\r\\n  position: absolute;\\r\\n  width: 4px;\\r\\n  height: 10px;\\r\\n  top: -0.8px;\\r\\n  background-color: rgb(254, 9, 0);\\r\\n  border-radius: 1px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .marker.floating {\\r\\n  background-color: rgba(254, 9, 0, 0.7);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .marker.selected {\\r\\n  background-color: rgba(254, 0, 120, 0.7);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .range-mask {\\r\\n  position: absolute;\\r\\n  height: 8.4px;\\r\\n  background-color: #00c569;\\r\\n  cursor: pointer;\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .statistics-container {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .statistics-container svg {\\r\\n  display: block;\\r\\n  width: 100%;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .statistics-container.unused svg {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .bottom-controls {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .left-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls input {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button {\\r\\n  cursor: pointer;\\r\\n  position: relative;\\r\\n  margin-right: 7px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  border: none;\\r\\n  outline: none;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button * {\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip)::before {\\r\\n  content: attr(data-title);\\r\\n  position: absolute;\\r\\n  display: none;\\r\\n  right: 0;\\r\\n  top: -50px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  color: #fff;\\r\\n  font-weight: bold;\\r\\n  padding: 4px 6px;\\r\\n  word-break: keep-all;\\r\\n  white-space: pre;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .fullscreen-button {\\r\\n  margin-right: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .stats-selector svg.icon {\\r\\n  display: inline;\\r\\n  margin-right: 2px;\\r\\n  vertical-align: middle;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .stats-selector div.text {\\r\\n  display: inline;\\r\\n  color: #fff;\\r\\n  vertical-align: middle;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .index-selector {\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .text-button {\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-panel {\\r\\n  position: absolute;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  background: rgba(21, 21, 21, .9);\\r\\n  padding: 6px 12px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options {\\r\\n  display: flex;\\r\\n  flex-wrap: nowrap;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options.grid {\\r\\n  flex-wrap: wrap;\\r\\n  flex-direction: row;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager svg {\\r\\n  width: 20px;\\r\\n  height: 20px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button.disabled svg {\\r\\n  fill: #999;\\r\\n  stroke: #999;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button {\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option {\\r\\n  color: #fff;\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n  margin: 3px;\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option .text {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option:hover {\\r\\n  background: rgba(120, 120, 120, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option.selected {\\r\\n  background: rgba(81, 81, 81, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .pip-button svg {\\r\\n  width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .playback-animation {\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  margin-left: -40px;\\r\\n  margin-top: -40px;\\r\\n  width: 80px;\\r\\n  height: 80px;\\r\\n  border-radius: 80px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range] {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  height: 8.4px;\\r\\n  background: transparent;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  border-radius: 1.3px;\\r\\n  -webkit-appearance: none;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\\r\\n  height: 16px;\\r\\n  width: 16px;\\r\\n  border-radius: 16px;\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  -webkit-appearance: none;\\r\\n  margin-left: -1px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\\r\\n  background: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume {\\r\\n  height: 5px;\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\\r\\n  margin-left: 0;\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-track {\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  cursor: pointer;\\r\\n  border: 1px solid transparent;\\r\\n  background: transparent;\\r\\n  border-radius: 1.3px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  border-radius: 50px;\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  margin-top: 5px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\\r\\n  border: 1px solid #fff;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .hidden {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container svg {\\r\\n  width: 28px;\\r\\n  height: 28px;\\r\\n  fill: #fff;\\r\\n  stroke: #fff;\\r\\n  cursor: pointer;\\r\\n  vertical-align: middle;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./video.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};"
     ],
     "version": 3
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.f229668a6df6f0256c34.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js`

 * *Files 14% similar despite different names*

#### js-beautify {}

```diff
@@ -1,11 +1,105 @@
 (self["webpackChunkipywebcam"] = self["webpackChunkipywebcam"] || []).push([
     ["lib_recorder_js-lib_webcam_js"], {
 
         /***/
+        "./lib/charts.js":
+            /*!***********************!*\
+              !*** ./lib/charts.js ***!
+              \***********************/
+            /***/
+            (function(__unused_webpack_module, exports, __webpack_require__) {
+
+                "use strict";
+
+                var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
+                    if (k2 === undefined) k2 = k;
+                    Object.defineProperty(o, k2, {
+                        enumerable: true,
+                        get: function() {
+                            return m[k];
+                        }
+                    });
+                }) : (function(o, m, k, k2) {
+                    if (k2 === undefined) k2 = k;
+                    o[k2] = m[k];
+                }));
+                var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
+                    Object.defineProperty(o, "default", {
+                        enumerable: true,
+                        value: v
+                    });
+                }) : function(o, v) {
+                    o["default"] = v;
+                });
+                var __importStar = (this && this.__importStar) || function(mod) {
+                    if (mod && mod.__esModule) return mod;
+                    var result = {};
+                    if (mod != null)
+                        for (var k in mod)
+                            if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
+                    __setModuleDefault(result, mod);
+                    return result;
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.makeLineChart = void 0;
+                const d3 = __importStar(__webpack_require__( /*! d3 */ "webpack/sharing/consume/default/d3/d3"));
+
+                function makeLineChart(node, data, xRange, yRange, width, height) {
+                    const svg = node ?
+                        d3.select(node) :
+                        d3.create('svg');
+                    width =
+                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                        width === undefined || width === null ? svg.node().clientWidth : width;
+                    height =
+                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                        height === undefined || height === null ? svg.node().clientHeight : height;
+                    if (height > 16) {
+                        height -= 4;
+                    }
+                    if (!xRange) {
+                        const xData = data.map((d) => d[0]);
+                        xRange = [Math.min(...xData), Math.max(...xData)];
+                    }
+                    if (xRange[0] === xRange[1]) {
+                        xRange[1] += 1;
+                    }
+                    if (!yRange) {
+                        const yData = data.map((d) => d[1]);
+                        yRange = [Math.min(...yData), Math.max(...yData)];
+                    }
+                    if (yRange[0] === yRange[1]) {
+                        yRange[1] += 1;
+                    }
+                    const xOffset = -xRange[0];
+                    const xScale = width / (xRange[1] - xRange[0]);
+                    const yOffset = -yRange[0];
+                    const yScale = height / (yRange[1] - yRange[0]);
+                    const lineFunc = d3
+                        .line()
+                        .x((d) => (d[0] + xOffset) * xScale)
+                        .y((d) => (d[1] + yOffset) * yScale);
+                    let path = svg.select('path');
+                    if (path.size() === 0) {
+                        path = svg.append('path').attr('fill', 'none');
+                    }
+                    path.attr('d', lineFunc(data));
+                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                    return svg.node();
+                }
+                exports.makeLineChart = makeLineChart;
+                //# sourceMappingURL=charts.js.map
+
+                /***/
+            }),
+
+        /***/
         "./lib/common.js":
             /*!***********************!*\
               !*** ./lib/common.js ***!
               \***********************/
             /***/
             (function(__unused_webpack_module, exports, __webpack_require__) {
 
@@ -41,36 +135,50 @@
                     });
                 };
                 Object.defineProperty(exports, "__esModule", ({
                     value: true
                 }));
                 exports.BaseModel = void 0;
                 const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
                 const version_1 = __webpack_require__( /*! ./version */ "./lib/version.js");
                 class BaseModel extends base_1.DOMWidgetModel {
                     constructor(...args) {
                         super(...args);
                         this.messageHandlers = {};
                         this.addMessageHandler = (cmd, handler) => {
-                            this.messageHandlers[cmd] = handler;
+                            let handlers = this.messageHandlers[cmd];
+                            if (!handlers) {
+                                handlers = this.messageHandlers[cmd] = [];
+                            }
+                            handlers.push(handler);
+                        };
+                        this.removeMessageHandler = (cmd, handler) => {
+                            const handlers = this.messageHandlers[cmd];
+                            if (handlers) {
+                                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                                utils_1.arrayRemove(handlers, handler);
+                            }
                         };
                         this.send_cmd = this.send_cmd.bind(this);
                         this.on('msg:custom', (msg, buffers) => {
                             const {
                                 id,
                                 cmd
                             } = msg;
                             if (id && id !== this.message_id) {
                                 return;
                             }
                             Object.keys(this.messageHandlers).forEach((key) => {
                                 if (key === cmd) {
-                                    const handler = this.messageHandlers[key];
-                                    if (handler) {
-                                        handler(msg, buffers);
+                                    const handlers = this.messageHandlers[key];
+                                    if (handlers) {
+                                        handlers.forEach((handler) => {
+                                            handler(msg, buffers);
+                                        });
                                     }
                                 }
                             });
                         });
                     }
                     defaults() {
                         return Object.assign(Object.assign({}, super.defaults()), {
@@ -124,14 +232,386 @@
                 exports.BaseModel = BaseModel;
                 //# sourceMappingURL=common.js.map
 
                 /***/
             }),
 
         /***/
+        "./lib/range.js":
+            /*!**********************!*\
+              !*** ./lib/range.js ***!
+              \**********************/
+            /***/
+            ((__unused_webpack_module, exports, __webpack_require__) => {
+
+                "use strict";
+
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.RangeBar = void 0;
+                /* eslint-disable @typescript-eslint/no-non-null-assertion */
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                class RangeBar {
+                    constructor(container, option = {}) {
+                        this.selectedRange = [0, 0];
+                        this.markersChangeCallbacks = [];
+                        this.rangeSelectedCallbacks = [];
+                        this.destroy = () => {
+                            document.removeEventListener('mousemove', this.onSelectedMove);
+                            document.removeEventListener('mouseup', this.removeSelect);
+                        };
+                        this.toggle = () => {
+                            if (this.container.classList.contains('hidden')) {
+                                this.container.classList.remove('hidden');
+                                if (this.container.parentElement) {
+                                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight + 12}px`;
+                                }
+                            } else {
+                                this.container.classList.add('hidden');
+                                if (this.container.parentElement) {
+                                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight - 12}px`;
+                                }
+                            }
+                        };
+                        this.isEnabled = () => {
+                            return this.max > this.min;
+                        };
+                        this.adjustPos = (pos) => {
+                            const width = this.container.clientWidth;
+                            if (width === 0) {
+                                return 0;
+                            }
+                            if (this.step <= 0) {
+                                return (pos / width) * 100;
+                            } else {
+                                let v = (pos / width) * (this.max - this.min);
+                                v = Math.round(v / this.step) * this.step;
+                                return (v / (this.max - this.min)) * 100;
+                            }
+                        };
+                        this.pos2value = (pos) => {
+                            return this.min + (pos * (this.max - this.min)) / 100;
+                        };
+                        this.value2pos = (value) => {
+                            return ((value - this.min) / (this.max - this.min)) * 100;
+                        };
+                        this.addRangeSelectedCallback = (callback) => {
+                            this.rangeSelectedCallbacks.push(callback);
+                        };
+                        this.removeRangeSelectedCallback = (callback) => {
+                            utils_1.arrayRemove(this.rangeSelectedCallbacks, callback);
+                        };
+                        this.addMarkersChangeCallback = (callback) => {
+                            this.markersChangeCallbacks.push(callback);
+                        };
+                        this.removeMarkersChangeCallback = (callback) => {
+                            utils_1.arrayRemove(this.markersChangeCallbacks, callback);
+                        };
+                        this.calcRange = (pos) => {
+                            const res = [this.min, this.max];
+                            const value = this.pos2value(pos);
+                            for (const key of Object.keys(this.markers)) {
+                                const v = this.pos2value(Number.parseFloat(key));
+                                if (pos === v) {
+                                    return [0, 0];
+                                } else if (value > v && v > res[0]) {
+                                    res[0] = v;
+                                } else if (value < v && v < res[1]) {
+                                    res[1] = v;
+                                }
+                            }
+                            return res;
+                        };
+                        this.makeFloatingMarker = (pos) => {
+                            if (this.isEnabled()) {
+                                pos = this.adjustPos(pos);
+                                if (!this.floatingMarker) {
+                                    this.floatingMarker = document.createElement('div');
+                                    this.floatingMarker.classList.add('marker', 'floating');
+                                    this.container.appendChild(this.floatingMarker);
+                                }
+                                this.floatingMarker.style.left = `${pos}%`;
+                                this.floatingMarker.style.translate = '-50%';
+                            }
+                        };
+                        this.releaseFloatingMarker = () => {
+                            if (this.floatingMarker) {
+                                this.container.removeChild(this.floatingMarker);
+                                this.floatingMarker = undefined;
+                            }
+                        };
+                        this.findMarkderKey = (marker) => {
+                            for (const key of Object.keys(this.markers)) {
+                                const pos = Number.parseFloat(key);
+                                if (marker === this.markers[pos]) {
+                                    return pos;
+                                }
+                            }
+                            return undefined;
+                        };
+                        this.getMarkers = () => {
+                            return Object.keys(this.markers)
+                                .map((key) => {
+                                    const pos = Number.parseFloat(key);
+                                    return this.pos2value(pos);
+                                })
+                                .sort();
+                        };
+                        this.setMarkers = (markers) => {
+                            if (!markers) {
+                                markers = [];
+                            }
+                            if (utils_1.arrayEqual(this.getMarkers(), markers)) {
+                                return;
+                            }
+                            this.unselectRange();
+                            this.removeSelect();
+                            for (const key of Object.keys(this.markers)) {
+                                const marker = this.markers[key];
+                                this.removeMarkerByNode(marker, false);
+                            }
+                            for (const marker of markers) {
+                                this.addMarker(this.value2pos(marker), false);
+                            }
+                            this.execuateMarkersCallbacks();
+                        };
+                        this.execuateMarkersCallbacks = () => {
+                            const markers = this.getMarkers();
+                            for (const callback of this.markersChangeCallbacks) {
+                                callback(markers, this);
+                            }
+                        };
+                        this.removeMarkerByNode = (marker, triggerCallback = true) => {
+                            const key = this.findMarkderKey(marker);
+                            if (key !== undefined) {
+                                delete this.markers[key];
+                                this.container.removeChild(marker);
+                                if (triggerCallback) {
+                                    this.execuateMarkersCallbacks();
+                                }
+                            }
+                        };
+                        this.addMarker = (pos, triggerCallback = true) => {
+                            if (this.isEnabled()) {
+                                let marker = this.markers[pos];
+                                if (!marker) {
+                                    this.markers[pos] = marker = document.createElement('div');
+                                    marker.setAttribute('draggable', 'false');
+                                    marker.classList.add('marker');
+                                    this.container.appendChild(marker);
+                                    marker.style.left = `${pos}%`;
+                                    marker.style.translate = '-50%';
+                                    marker.addEventListener('click', (evt) => {
+                                        evt.stopPropagation();
+                                        if (evt.altKey) {
+                                            this.removeMarkerByNode(marker);
+                                        }
+                                    });
+                                    marker.addEventListener('mousedown', (evt) => {
+                                        evt.stopPropagation();
+                                        const key = this.findMarkderKey(marker);
+                                        if (key !== undefined) {
+                                            this.setSelect(key);
+                                        }
+                                    });
+                                    marker.addEventListener('mouseup', () => {
+                                        this.removeSelect();
+                                    });
+                                    if (triggerCallback) {
+                                        this.execuateMarkersCallbacks();
+                                    }
+                                }
+                            }
+                        };
+                        this.setSelect = (pos) => {
+                            this.selectedKey = pos;
+                            const marker = this.markers[pos];
+                            if (marker) {
+                                marker.classList.add('selected');
+                            }
+                        };
+                        this.removeSelect = () => {
+                            if (this.selectedKey !== undefined) {
+                                const marker = this.markers[this.selectedKey];
+                                if (marker) {
+                                    marker.classList.remove('selected');
+                                }
+                                this.selectedKey = undefined;
+                            }
+                        };
+                        this.canKeyMove = (posFrom, posTo) => {
+                            if (posFrom === posTo) {
+                                return false;
+                            }
+                            if (posTo < 0 || posTo > 100) {
+                                return false;
+                            }
+                            const keys = Object.keys(this.markers);
+                            for (const key of keys) {
+                                const pos = Number.parseFloat(key);
+                                if (pos === posFrom) {
+                                    continue;
+                                }
+                                if (pos === posTo) {
+                                    return false;
+                                }
+                                if (pos < posFrom && posTo > posFrom) {
+                                    continue;
+                                }
+                                if (pos > posFrom && posTo < posFrom) {
+                                    continue;
+                                }
+                                if (pos < posFrom && pos > posTo) {
+                                    return false;
+                                }
+                                if (pos > posFrom && pos < posTo) {
+                                    return false;
+                                }
+                            }
+                            return true;
+                        };
+                        this.onSelectedMove = (evt) => {
+                            let pos = utils_1.calcMouseOffsetX(evt, this.container);
+                            pos = this.adjustPos(pos);
+                            if (this.selectedKey !== undefined &&
+                                this.canKeyMove(this.selectedKey, pos)) {
+                                const marker = this.markers[this.selectedKey];
+                                if (marker) {
+                                    marker.style.left = `${pos}%`;
+                                    marker.style.translate = '-50%';
+                                    delete this.markers[this.selectedKey];
+                                    this.updateRangeSelectBecauseOfKeyChagne(this.selectedKey, pos);
+                                    this.selectedKey = pos;
+                                    this.markers[pos] = marker;
+                                    this.execuateMarkersCallbacks();
+                                }
+                            }
+                        };
+                        this.isRangeSelected = (range) => {
+                            if (!range) {
+                                range = this.selectedRange;
+                            }
+                            return range[1] > range[0];
+                        };
+                        this.updateRangeSelectBecauseOfKeyChagne = (posFrom, posTo) => {
+                            const valueFrom = this.pos2value(posFrom);
+                            if (this.isRangeSelected() &&
+                                (valueFrom === this.selectedRange[0] ||
+                                    valueFrom === this.selectedRange[1])) {
+                                const valueTo = this.pos2value(posTo);
+                                let valueOther;
+                                if (valueFrom === this.selectedRange[0]) {
+                                    valueOther = this.selectedRange[1];
+                                } else {
+                                    valueOther = this.selectedRange[0];
+                                }
+                                const newRange = valueTo <= valueOther ? [valueTo, valueOther] : [valueOther, valueTo];
+                                this.updateRangeSelect(newRange);
+                            }
+                        };
+                        this.updateRangeSelect = (newRange) => {
+                            if (this.isRangeSelected(newRange)) {
+                                const cWidth = this.container.clientWidth;
+                                const left = ((newRange[0] - this.min) / (this.max - this.min)) * cWidth;
+                                const right = ((newRange[1] - this.min) / (this.max - this.min)) * cWidth;
+                                this.rangeMasker.style.left = `${left}px`;
+                                this.rangeMasker.style.width = `${right - left}px`;
+                                this.rangeMasker.classList.remove('hidden');
+                            }
+                            this.selectedRange = newRange;
+                            for (const callback of this.rangeSelectedCallbacks) {
+                                callback(this.selectedRange, this);
+                            }
+                        };
+                        this.onMouseRangeSelect = (evt) => {
+                            if (this.selectedKey !== undefined) {
+                                // when moving key point, do nothing.
+                                return;
+                            }
+                            const cWidth = this.container.clientWidth;
+                            if (cWidth === 0) {
+                                return;
+                            }
+                            const pos = (utils_1.calcMouseOffsetX(evt, this.container) / cWidth) * 100;
+                            const range = this.calcRange(pos);
+                            this.updateRangeSelect(range);
+                        };
+                        this.selectRange = (range) => {
+                            if (utils_1.arrayEqual(this.selectedRange, range)) {
+                                return;
+                            }
+                            const posFrom = this.value2pos(range[0]);
+                            const posTo = this.value2pos(range[1]);
+                            if (this.markers[posFrom] && this.markers[posTo]) {
+                                this.updateRangeSelect(range);
+                            }
+                        };
+                        this.unselectRange = () => {
+                            this.rangeMasker.style.left = '0px';
+                            this.rangeMasker.style.width = '0px';
+                            this.rangeMasker.classList.add('hidden');
+                            this.selectedRange = [0, 0];
+                            for (const callback of this.rangeSelectedCallbacks) {
+                                callback(this.selectedRange, this);
+                            }
+                        };
+                        this.container = container;
+                        this.rangeMasker = document.createElement('div');
+                        this.rangeMasker.classList.add('range-mask', 'hidden');
+                        this.rangeMasker.addEventListener('click', (evt) => {
+                            evt.stopPropagation();
+                            this.unselectRange();
+                        });
+                        this.container.appendChild(this.rangeMasker);
+                        this.container.addEventListener('click', (evt) => {
+                            if (evt.ctrlKey) {
+                                const pos = this.adjustPos(evt.offsetX);
+                                this.addMarker(pos);
+                            } else {
+                                this.onMouseRangeSelect(evt);
+                            }
+                        });
+                        this.container.addEventListener('mouseover', (evt) => {
+                            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);
+                            if (evt.ctrlKey) {
+                                this.makeFloatingMarker(offsetX);
+                            } else {
+                                this.releaseFloatingMarker();
+                            }
+                        });
+                        this.container.addEventListener('mousemove', (evt) => {
+                            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);
+                            if (evt.ctrlKey) {
+                                this.makeFloatingMarker(offsetX);
+                            } else {
+                                this.releaseFloatingMarker();
+                            }
+                        });
+                        this.container.addEventListener('mouseout', () => {
+                            this.releaseFloatingMarker();
+                        });
+                        document.addEventListener('mousemove', this.onSelectedMove);
+                        document.addEventListener('mouseup', this.removeSelect);
+                        const {
+                            min = 0, max = 0, step = 1
+                        } = option;
+                        this.min = min;
+                        this.max = max;
+                        this.step = step;
+                        this.markers = {};
+                    }
+                }
+                exports.RangeBar = RangeBar;
+                //# sourceMappingURL=range.js.map
+
+                /***/
+            }),
+
+        /***/
         "./lib/recorder.js":
             /*!*************************!*\
               !*** ./lib/recorder.js ***!
               \*************************/
             /***/
             (function(__unused_webpack_module, exports, __webpack_require__) {
 
@@ -175,19 +655,23 @@
                     value: true
                 }));
                 exports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;
                 const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
                 const lru_cache_1 = __importDefault(__webpack_require__( /*! lru-cache */ "webpack/sharing/consume/default/lru-cache/lru-cache"));
                 const common_1 = __webpack_require__( /*! ./common */ "./lib/common.js");
                 const video_1 = __webpack_require__( /*! ./video */ "./lib/video.js");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
                 class RecorderPlayerModel extends common_1.BaseModel {
                     constructor(...args) {
                         super(...args);
                         this.cache = new lru_cache_1.default({
-                            max: 6,
+                            max: 10,
+                        });
+                        this.metaCache = new lru_cache_1.default({
+                            max: 100,
                         });
                         this.fetchStates = {};
                         this.refresh_callbacks = [];
                         this.addRefereshCallback = (callback) => {
                             this.refresh_callbacks.push(callback);
                         };
                         this.removeRefreshCallback = (callback) => {
@@ -197,24 +681,32 @@
                             }
                         };
                         this.triggerRefresh = (index, channel) => {
                             this.refresh_callbacks.forEach((cb) => {
                                 cb(index, channel);
                             });
                         };
-                        this.fetchMeta = () => __awaiter(this, void 0, void 0, function*() {
-                            if (this.meta) {
-                                return this.meta;
+                        this.createIndexKey = (index) => {
+                            return index === undefined || index === null ? 'global' : `${index}`;
+                        };
+                        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function*() {
+                            const key = this.createIndexKey(index);
+                            const cached = this.metaCache.get(key);
+                            if (cached) {
+                                return cached;
+                            }
+                            const args = {};
+                            if (index !== undefined) {
+                                args['index'] = index;
                             }
                             const {
                                 content
-                            } = yield this.send_cmd('fetch_meta', {});
-                            this.meta = content;
-                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
-                            return this.meta;
+                            } = yield this.send_cmd('fetch_meta', args);
+                            this.metaCache.set(key, content);
+                            return content;
                         });
                         this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function*() {
                             const key = channel ? `${index}-${channel}` : `${index}`;
                             const cached = this.cache.get(key);
                             if (cached) {
                                 return cached;
                             }
@@ -251,14 +743,25 @@
                                     }
                                 });
                                 return new Promise((resolve) => {
                                     theResolve = resolve;
                                 });
                             }
                         });
+                        this.invalidateMeta = (index) => {
+                            const key = this.createIndexKey(index);
+                            this.metaCache.delete(key);
+                        };
+                        this.setMarkers = (index, markers) => __awaiter(this, void 0, void 0, function*() {
+                            yield this.send_cmd('set_markers', {
+                                index,
+                                markers
+                            });
+                            this.invalidateMeta(index);
+                        });
                         this.addMessageHandler('channel_stale', (cmdMsg) => {
                             const {
                                 args = {}
                             } = cmdMsg;
                             const {
                                 channel
                             } = args;
@@ -267,29 +770,31 @@
                                     if (key.endsWith(`-${channel}`)) {
                                         this.cache.delete(key);
                                     }
                                 }
                             } else {
                                 this.cache.clear();
                             }
-                            this.meta = undefined;
                             this.triggerRefresh(undefined, channel);
                         });
                     }
                     defaults() {
                         return Object.assign(Object.assign({}, super.defaults()), {
                             _model_name: RecorderPlayerModel.model_name,
                             _view_name: RecorderPlayerModel.view_name,
                             format: 'mp4',
                             width: '',
                             height: '',
                             autoplay: true,
                             loop: false,
                             controls: true,
-                            autonext: true
+                            autonext: true,
+                            selected_index: null,
+                            selected_channel: null,
+                            selected_range: [0, 0]
                         });
                     }
                 }
                 exports.RecorderPlayerModel = RecorderPlayerModel;
                 RecorderPlayerModel.model_name = 'RecorderPlayerModel';
                 RecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view
                 class RecorderPlayerView extends base_1.DOMWidgetView {
@@ -297,57 +802,131 @@
                         super(...args);
                         this.index = -1;
                         this.indexSize = 0;
                         this.channel = '';
                         this.channels = [];
                         this.loading = false;
                         this.loadStateOnceCallbacks = [];
+                        this.selectedRange = [0, 0];
+                        this.isRangeSelected = () => {
+                            return this.selectedRange[1] > this.selectedRange[0];
+                        };
                         this.addLoadStateOnceCallback = (callback) => {
                             this.loadStateOnceCallbacks.push(callback);
                         };
                         this.setLoading = (loading) => {
                             if (this.loading !== loading) {
                                 this.loading = loading;
                                 this.loadStateOnceCallbacks.forEach((callback) => callback(loading));
                                 this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);
                             }
                         };
-                        this.fetchMeta = () => __awaiter(this, void 0, void 0, function*() {
+                        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function*() {
                             const {
-                                record_count = 0, chanels = []
-                            } = yield this.model.fetchMeta();
+                                record_count = 0, chanels = [], markers, statistics,
+                            } = yield this.model.fetchMeta(index);
                             this.indexSize = record_count;
                             this.channels = chanels;
+                            this.markers = markers;
+                            this.statistics = statistics;
                         });
                         this.initVideo = () => __awaiter(this, void 0, void 0, function*() {
                             if (!this.video) {
                                 this.video = new video_1.Video();
+                                this.video.addVideoInitHandler((video) => {
+                                    video.rangeBar.setMarkers(this.markers);
+                                });
                                 this.video.addIndexSelectHandler((i) => {
                                     this.load(i, undefined);
                                 });
                                 this.video.addChannelSelectHandler((channel) => {
                                     this.load(undefined, channel, false, true);
                                 });
+                                this.video.rangeBar.addRangeSelectedCallback((range) => {
+                                    var _a;
+                                    this.selectedRange = range;
+                                    if (this.isRangeSelected()) {
+                                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                                        if (video) {
+                                            video.currentTime = range[0];
+                                        }
+                                        this.model.set('selected_index', this.index);
+                                        this.model.set('selected_channel', this.channel);
+                                    } else {
+                                        this.model.set('selected_index', null);
+                                        this.model.set('selected_channel', null);
+                                    }
+                                    this.model.set('selected_range', range);
+                                    this.model.save_changes();
+                                });
+                                this.video.rangeBar.addMarkersChangeCallback((markers) => {
+                                    this.markers = markers;
+                                    this.model.setMarkers(this.index, markers);
+                                });
+                                this.model.on('change:selected_index', this.onSelectedIndexChange);
+                                this.model.on('change:selected_channel', this.onSelectedChannelChange);
+                                this.model.on('change:selected_range', this.onSelectedRangeChange);
                                 this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function*() {
+                                    if (this.isRangeSelected()) {
+                                        return;
+                                    }
                                     const autonext = this.model.get('autonext');
                                     const loop = this.model.get('loop');
                                     if (autonext) {
                                         if (this.index < this.indexSize - 1) {
                                             this.load(this.index + 1, undefined);
                                         } else if (this.index === this.indexSize - 1 && loop) {
                                             this.load(0, undefined);
                                         }
                                     }
                                 }));
+                                this.video.video.addEventListener('timeupdate', () => {
+                                    var _a;
+                                    if (this.isRangeSelected()) {
+                                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                                        if (video) {
+                                            if (video.currentTime >= this.selectedRange[1]) {
+                                                const loop = this.model.get('loop');
+                                                if (loop) {
+                                                    video.currentTime = this.selectedRange[0];
+                                                } else {
+                                                    video.pause();
+                                                }
+                                            }
+                                        }
+                                    }
+                                });
                                 this.el.appendChild(this.video.container);
                                 this.update();
-                                yield this.fetchMeta();
                                 yield this.load(0, '');
                             }
                         });
+                        this.onSelectedIndexChange = () => {
+                            const index = this.model.get('selected_index');
+                            if (index !== undefined && index !== null && this.index !== index) {
+                                this.load(index, undefined);
+                            }
+                        };
+                        this.onSelectedChannelChange = () => {
+                            const channel = this.model.get('selected_channel');
+                            if (channel && this.channel !== channel) {
+                                this.load(undefined, channel);
+                            }
+                        };
+                        this.onSelectedRangeChange = () => {
+                            var _a;
+                            const range = this.model.get('selected_range');
+                            if (!utils_1.arrayEqual(this.selectedRange, range)) {
+                                this.selectedRange = range;
+                                const rangeBar = (_a = this.video) === null || _a === void 0 ? void 0 : _a.rangeBar;
+                                if (rangeBar) {
+                                    rangeBar.selectRange(range);
+                                }
+                            }
+                        };
                         this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function*() {
                             return new Promise((resolve) => {
                                 if (this.loading === loading) {
                                     resolve();
                                 } else {
                                     this.addLoadStateOnceCallback((state) => {
                                         if (state === loading) {
@@ -366,25 +945,27 @@
                                     channel = this.channel;
                                 }
                                 if (this.index === index && this.channel === channel && !force) {
                                     return;
                                 }
                                 yield this.waitForLoading(false);
                                 this.setLoading(true);
-                                yield this.fetchMeta();
+                                yield this.fetchMeta(index);
                                 try {
                                     if (this.indexSize > 0) {
                                         const blob = yield this.model.fetchData(index, channel);
                                         this.video.updateData(blob, resumeTime);
                                     }
                                     this.index = index;
                                     this.channel = channel;
+                                    this.video.rangeBar.unselectRange();
                                     this.video.updateIndexerSize(this.indexSize);
                                     this.video.updateIndexerIndex(this.index);
                                     this.video.updateChannels(this.channels);
+                                    this.video.updateStatistics(this.statistics);
                                 } catch (e) {
                                     console.error(e);
                                 } finally {
                                     this.setLoading(false);
                                 }
                             }
                         });
@@ -415,14 +996,15 @@
                                     video.loop = false;
                                 } else {
                                     video.loop = this.model.get('loop') ? true : false;
                                 }
                             }
                             (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));
                         };
+                        this.selectedRange = this.model.get('selected_range');
                         this.model.addRefereshCallback((i, c) => {
                             if (this.index === i &&
                                 ((!this.channel && !c) || (this.channel && c && this.channel === c))) {
                                 this.load(undefined, undefined, true);
                             }
                         });
                     }
@@ -434,14 +1016,17 @@
                         this.updateWidth();
                         this.updateHeight();
                         this.updateOtherVideoAttributes();
                         return super.update();
                     }
                     remove() {
                         var _a;
+                        this.model.off('change:selected_index', this.onSelectedIndexChange);
+                        this.model.off('change:selected_channel', this.onSelectedChannelChange);
+                        this.model.off('change:selected_range', this.onSelectedRangeChange);
                         (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();
                         this.video = undefined;
                     }
                 }
                 exports.RecorderPlayerView = RecorderPlayerView;
                 //# sourceMappingURL=recorder.js.map
 
@@ -457,15 +1042,15 @@
             ((__unused_webpack_module, exports) => {
 
                 "use strict";
 
                 Object.defineProperty(exports, "__esModule", ({
                     value: true
                 }));
-                exports.isMac = exports.arrayFind = exports.arrayInclude = void 0;
+                exports.calcMouseOffsetX = exports.calcPageX = exports.isMac = exports.arrayEqual = exports.arrayRemove = exports.arrayIndexOf = exports.arrayFind = exports.arrayInclude = void 0;
 
                 function arrayInclude(arr, target) {
                     return !!~arr.indexOf(target);
                 }
                 exports.arrayInclude = arrayInclude;
 
                 function arrayFind(arr, cond) {
@@ -475,18 +1060,63 @@
                             return e;
                         }
                     }
                     return undefined;
                 }
                 exports.arrayFind = arrayFind;
 
+                function arrayIndexOf(arr, target) {
+                    for (let i = 0; i < arr.length; ++i) {
+                        if (arr[i] === target) {
+                            return i;
+                        }
+                    }
+                    return -1;
+                }
+                exports.arrayIndexOf = arrayIndexOf;
+
+                function arrayRemove(arr, target) {
+                    const index = arrayIndexOf(arr, target);
+                    if (index !== -1) {
+                        arr.splice(index, 1);
+                        return true;
+                    } else {
+                        return false;
+                    }
+                }
+                exports.arrayRemove = arrayRemove;
+
+                function arrayEqual(arr1, arr2) {
+                    if (arr1 === arr2) {
+                        return true;
+                    }
+                    return (Array.isArray(arr1) &&
+                        Array.isArray(arr2) &&
+                        arr1.length === arr2.length &&
+                        arr1.every((val, index) => val === arr2[index]));
+                }
+                exports.arrayEqual = arrayEqual;
+
                 function isMac() {
                     return window.navigator.userAgent.indexOf('Mac') !== -1;
                 }
                 exports.isMac = isMac;
+
+                function calcPageX(element) {
+                    const {
+                        left
+                    } = element.getBoundingClientRect();
+                    return left + document.body.scrollLeft;
+                }
+                exports.calcPageX = calcPageX;
+
+                function calcMouseOffsetX(evt, target) {
+                    return evt.pageX - calcPageX(target);
+                }
+                exports.calcMouseOffsetX = calcMouseOffsetX;
                 //# sourceMappingURL=utils.js.map
 
                 /***/
             }),
 
         /***/
         "./lib/version.js":
@@ -563,32 +1193,47 @@
                         }
                         step((generator = generator.apply(thisArg, _arguments || [])).next());
                     });
                 };
                 Object.defineProperty(exports, "__esModule", ({
                     value: true
                 }));
-                exports.Video = exports.createVideoContainer = exports.createVideoProgress = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;
+                exports.Video = exports.createVideoContainer = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;
                 __webpack_require__( /*! ../css/video.css */ "./css/video.css");
+                const charts_1 = __webpack_require__( /*! ./charts */ "./lib/charts.js");
+                const range_1 = __webpack_require__( /*! ./range */ "./lib/range.js");
                 const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
                 const svgNS = 'http://www.w3.org/2000/svg';
                 const prefix = 'ipywebcam-video-';
 
                 function makeId(id) {
                     return `${prefix}${id}`;
                 }
                 exports.makeId = makeId;
 
-                function createSymbol(id, pathD, viewBox = '0 0 24 24') {
+                function createSymbol(id, pathD, viewBox = '0 0 24 24', gTrans = '') {
                     const symbol = document.createElementNS(svgNS, 'symbol');
                     symbol.id = makeId(id);
                     symbol.setAttribute('viewBox', viewBox);
-                    const path = document.createElementNS(svgNS, 'path');
-                    path.setAttribute('d', pathD);
-                    symbol.appendChild(path);
+                    if (Array.isArray(pathD)) {
+                        const group = document.createElementNS(svgNS, 'g');
+                        if (gTrans) {
+                            group.setAttribute('transform', gTrans);
+                        }
+                        for (const p of pathD) {
+                            const path = document.createElementNS(svgNS, 'path');
+                            path.setAttribute('d', p);
+                            group.appendChild(path);
+                        }
+                        symbol.appendChild(group);
+                    } else {
+                        const path = document.createElementNS(svgNS, 'path');
+                        path.setAttribute('d', pathD);
+                        symbol.appendChild(path);
+                    }
                     return symbol;
                 }
 
                 function createControlsSvg() {
                     const svg = document.createElementNS(svgNS, 'svg');
                     svg.id = makeId('icons');
                     svg.setAttribute('style', 'display: none');
@@ -600,14 +1245,20 @@
                     defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));
                     defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));
                     defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));
                     defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));
                     defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));
                     defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));
                     defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));
+                    defs.appendChild(createSymbol('statistics', [
+                        'M2096 2741 c-15 -10 -37 -32 -47 -47 -18 -28 -19 -65 -19 -984 l0 -955 25 -37 c32 -48 47 -50 268 -46 l179 3 29 33 29 32 0 969 c0 967 0 968 -21 995 -40 50 -64 56 -246 56 -148 0 -171 -2 -197 -19z',
+                        'M1308 2088 c-30 -8 -41 -18 -58 -52 -19 -41 -20 -58 -20 -643 0 -330 3 -613 6 -629 3 -16 16 -42 30 -59 l24 -30 210 0 210 0 24 30 c14 17 27 43 30 59 3 16 6 299 6 629 0 584 -1 602 -20 643 -18 36 -27 43 -65 53 -53 13 -326 13 -377 -1z',
+                        'M504 1426 c-64 -28 -64 -28 -64 -373 l0 -313 29 -32 29 -33 179 -3 c221 -4 236 -2 268 46 l25 37 0 293 c0 328 -3 347 -65 376 -44 21 -353 22 -401 2z',
+                        'M42 468 c-39 -32 -41 -35 -41 -91 -1 -42 3 -59 14 -63 8 -3 17 -13 20 -23 3 -9 18 -24 34 -34 27 -16 124 -17 1431 -17 1307 0 1404 1 1431 17 16 10 31 25 34 34 3 10 12 20 20 23 11 4 15 21 15 58 0 49 -3 56 -40 91 l-40 37 -1419 0 -1419 0 -40 -32z',
+                    ], '0 0 1000 1000', 'translate(100, 900) scale(0.25, -0.25)'));
                     return svg;
                 }
 
                 function createSelectiveUses(active, ...ids) {
                     const svg = document.createElementNS(svgNS, 'svg');
                     ids.forEach((id) => {
                         const use = document.createElementNS(svgNS, 'use');
@@ -643,24 +1294,35 @@
                     const input = document.createElement('input');
                     input.id = makeId('seek');
                     input.classList.add('seek');
                     input.type = 'range';
                     input.value = '0';
                     input.min = '0';
                     input.step = '1';
+                    const rangeBar = document.createElement('div');
+                    rangeBar.setAttribute('draggable', 'false');
+                    rangeBar.classList.add('range-bar', 'hidden');
                     const tooltip = document.createElement('div');
                     tooltip.id = makeId('seek-tooltip');
                     tooltip.classList.add('seek-tooltip');
                     tooltip.innerText = '00:00';
                     container.appendChild(progress);
                     container.appendChild(input);
                     container.appendChild(tooltip);
+                    container.appendChild(rangeBar);
+                    return container;
+                }
+
+                function createStatisticsContainer() {
+                    const container = document.createElement('div');
+                    container.classList.add('statistics-container', 'hidden', 'unused');
+                    const svg = document.createElementNS(svgNS, 'svg');
+                    container.appendChild(svg);
                     return container;
                 }
-                exports.createVideoProgress = createVideoProgress;
 
                 function createPlaybackButton(options) {
                     const button = document.createElement('button');
                     button.id = makeId('play');
                     button.classList.add('play');
                     button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);
                     const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');
@@ -768,14 +1430,27 @@
                     container.setAttribute('data-title', 'Select Channel');
                     const text = document.createElement('div');
                     text.classList.add('text');
                     container.appendChild(text);
                     return container;
                 }
 
+                function createStatsSelector() {
+                    const container = document.createElement('button');
+                    container.classList.add('stats-selector', 'hidden');
+                    container.setAttribute('data-title', 'Select Statistics Type');
+                    const icon = createSelectiveUses('statistics', 'statistics');
+                    icon.classList.add('icon');
+                    container.appendChild(icon);
+                    const text = document.createElement('div');
+                    text.classList.add('text');
+                    container.appendChild(text);
+                    return container;
+                }
+
                 function createPipButton(options) {
                     const button = document.createElement('button');
                     button.id = makeId('pip-button');
                     button.classList.add('pip-button');
                     if (!isPipEnabled()) {
                         button.classList.add('hidden');
                     }
@@ -794,14 +1469,16 @@
                     button.appendChild(svg);
                     return button;
                 }
 
                 function createRightControls(options) {
                     const container = document.createElement('div');
                     container.classList.add('right-controls');
+                    const statsSelector = createStatsSelector();
+                    container.appendChild(statsSelector);
                     const indexSelector = createIndexSelector();
                     container.appendChild(indexSelector);
                     const channelSelector = createChannelSelector();
                     container.appendChild(channelSelector);
                     const speedSelector = createSpeedSelector();
                     container.appendChild(speedSelector);
                     const pipButton = createPipButton(options);
@@ -819,18 +1496,21 @@
                     const rightControls = createRightControls(options);
                     container.appendChild(rightControls);
                     return container;
                 }
 
                 function createVideoControls(options) {
                     const container = document.createElement('div');
+                    container.setAttribute('draggable', 'false');
                     container.classList.add('video-controls');
                     container.tabIndex = 0;
                     const videoProgress = createVideoProgress();
                     container.appendChild(videoProgress);
+                    const statistics = createStatisticsContainer();
+                    container.appendChild(statistics);
                     const bottomControls = createBottomControls(options);
                     container.appendChild(bottomControls);
                     return container;
                 }
                 const VIDEO_WORKS = !!document.createElement('video').canPlayType;
 
                 function createVideoContainer(options) {
@@ -1236,14 +1916,16 @@
                 }
                 const DEFAULT_OPTIONS = {
                     shortcuts: {
                         play: 'k',
                         mute: 'm',
                         fullscreen: 'f',
                         pip: 'p',
+                        range: 'v',
+                        stats: 's',
                     },
                 };
 
                 function makeShortcut(shortcut) {
                     if (typeof shortcut === 'string') {
                         return {
                             key: shortcut,
@@ -1264,14 +1946,16 @@
                 function makeOptions(otps) {
                     const options = Object.assign({}, DEFAULT_OPTIONS, otps);
                     options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);
                     options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);
                     options.shortcuts.mute = makeShortcut(options.shortcuts.mute);
                     options.shortcuts.pip = makeShortcut(options.shortcuts.pip);
                     options.shortcuts.play = makeShortcut(options.shortcuts.play);
+                    options.shortcuts.range = makeShortcut(options.shortcuts.range);
+                    options.shortcuts.stats = makeShortcut(options.shortcuts.stats);
                     return options;
                 }
                 const SpeedOptions = [{
                     label: '0.25x',
                     value: 0.25
                 }, {
                     label: '0.5x',
@@ -1302,24 +1986,53 @@
                     value: 3
                 }, ];
                 class Video {
                     constructor(opts = {}) {
                         this.indexSelectHandlers = [];
                         this.indexerIndex = -1;
                         this.indexerSize = 0;
+                        this.stats = '';
+                        this.statsData = {};
                         this.speed = 1;
                         this.channelSelectHandlers = [];
                         this.channel = '';
+                        this.videoInitHandlers = [];
                         this.destroy = () => {
                             document.removeEventListener('keyup', this.keyboardShortcuts);
                             const url = this.video.src;
                             this.video.src = '';
                             if (url) {
                                 URL.revokeObjectURL(url);
                             }
+                            this.rangeBar.destroy();
+                        };
+                        this.addVideoInitHandler = (handler) => {
+                            this.videoInitHandlers.push(handler);
+                        };
+                        this.removeVideoInitHandler = (handler) => {
+                            utils_1.arrayRemove(this.videoInitHandlers, handler);
+                        };
+                        this.updateStatistics = (statistics = {}, statistics_meta = {}) => {
+                            this.statsData = statistics;
+                            const keys = Object.keys(statistics);
+                            if (keys.length > 0) {
+                                this.statsSelector.classList.remove('hidden');
+                                this.statsSelectorPannel.updateView(keys.map((key) => ({
+                                    label: key,
+                                    value: key
+                                })));
+                                this.statisticsBar.classList.remove('unused');
+                                if (!utils_1.arrayInclude(keys, this.stats)) {
+                                    this.statsSelectorPannel.select(keys[0]);
+                                }
+                            } else {
+                                this.statsSelector.classList.add('hidden');
+                                this.statsSelectorPannel.updateView([]);
+                                this.statisticsBar.classList.add('unused');
+                            }
                         };
                         this.updateChannels = (channels = []) => {
                             if (channels.length > 0) {
                                 this.channelSelector.classList.remove('hidden');
                                 const options = [{
                                     label: 'Default',
                                     value: ''
@@ -1444,14 +2157,21 @@
                         this.initializeVideo = () => {
                             const videoDuration = Math.floor(this.video.duration);
                             this.seek.setAttribute('max', `${videoDuration}`);
                             this.progress.setAttribute('max', `${videoDuration}`);
                             const time = formatTime(videoDuration);
                             this.duration.innerText = `${time.minutes}:${time.seconds}`;
                             this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
+                            this.rangeBar.max = videoDuration;
+                            for (const handler of this.videoInitHandlers) {
+                                handler(this);
+                            }
+                            if (this.stats) {
+                                this.statsSelectorPannel.select(this.stats);
+                            }
                         };
                         this.updateCurrentTime = () => {
                             this.currentTime = this.video.currentTime;
                         };
                         // updateTimeElapsed indicates how far through the video
                         // the current playback is by updating the timeElapsed element
                         this.updateTimeElapsed = () => {
@@ -1578,14 +2298,20 @@
                                 }
                             } catch (error) {
                                 console.error(error);
                             } finally {
                                 this.pipButton.disabled = false;
                             }
                         });
+                        this.toggleRangeBar = () => {
+                            this.rangeBar.toggle();
+                        };
+                        this.toggleStatisticsBar = () => {
+                            this.statisticsBar.classList.toggle('hidden');
+                        };
                         // hideControls hides the video controls when not in use
                         // if the video is paused, the controls must remain visible
                         this.hideControls = () => {
                             if (this.video.paused) {
                                 return;
                             }
                             this.videoControls.classList.add('hide');
@@ -1610,15 +2336,17 @@
                                 altKey,
                                 shiftKey
                             } = event;
                             const {
                                 play,
                                 mute,
                                 fullscreen,
-                                pip
+                                pip,
+                                range,
+                                stats
                             } = this.options.shortcuts;
                             if (key === play.key &&
                                 (play.ctrl === !!ctrlKey ||
                                     play.alt === !!altKey ||
                                     play.shift === !!shiftKey)) {
                                 this.togglePlay();
                                 this.animatePlayback();
@@ -1640,35 +2368,57 @@
                                     fullscreen.shift === !!shiftKey)) {
                                 this.toggleFullScreen();
                             } else if (key === pip.key &&
                                 (pip.ctrl === !!ctrlKey ||
                                     pip.alt === !!altKey ||
                                     pip.shift === !!shiftKey)) {
                                 this.togglePip();
+                            } else if (key === range.key &&
+                                (range.ctrl === !!ctrlKey ||
+                                    range.alt === !!altKey ||
+                                    range.shift === !!shiftKey)) {
+                                this.toggleRangeBar();
+                            } else if (key === stats.key &&
+                                (stats.ctrl === !!ctrlKey ||
+                                    stats.alt === !!altKey ||
+                                    stats.shift === !!shiftKey)) {
+                                this.toggleStatisticsBar();
                             }
                         };
                         this.options = makeOptions(opts);
                         this.installSvg();
                         this.container = createVideoContainer(this.options);
                         this.video = this.container.querySelector('video.video');
                         this.videoControls = this.container.querySelector('div.video-controls');
                         this.playButton = this.container.querySelector('button.play');
                         this.timeElapsed = this.container.querySelector('time.time-elapsed');
                         this.duration = this.container.querySelector('time.duration');
                         this.progress = this.container.querySelector('progress.progress-bar');
                         this.seek = this.container.querySelector('input.seek');
                         this.seekTooltip = this.container.querySelector('div.seek-tooltip');
+                        this.rangeBar = new range_1.RangeBar(this.container.querySelector('div.range-bar'));
+                        this.statisticsBar = this.container.querySelector('div.statistics-container');
+                        this.statisticsSvg = this.statisticsBar.querySelector('svg');
                         this.volume = this.container.querySelector('input.volume');
                         this.volumeButton = this.container.querySelector('button.volume-button');
                         this.volumeIcons = this.volumeButton.querySelector('svg');
                         this.playbackAnimation = this.container.querySelector('div.playback-animation');
                         this.fullscreenButton = this.container.querySelector('button.fullscreen-button');
                         this.fullscreenIcons = this.fullscreenButton.querySelector('svg');
                         this.pipButton = this.container.querySelector('button.pip-button');
                         this.indexSelector = this.container.querySelector('button.index-selector');
+                        this.statsSelector = this.container.querySelector('button.stats-selector');
+                        this.statsSelectorPannel = new SelectorPannel([]).install(this.statsSelector, (option) => {
+                            const text = this.statsSelector.querySelector('div.text');
+                            text.innerText = option.label;
+                            this.stats = option.value;
+                            if (this.video.duration > 0) {
+                                charts_1.makeLineChart(this.statisticsSvg, this.statsData[this.stats], [0, this.video.duration], undefined, this.video.clientWidth - 20, 30);
+                            }
+                        });
                         this.speedSelector = this.container.querySelector('button.speed-selector');
                         this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {
                             const text = this.speedSelector.querySelector('div.text');
                             text.innerText = option.label;
                             this.video.playbackRate = option.value;
                             this.speed = option.value;
                         }, '1.0x');
@@ -2415,15 +3165,15 @@
             /***/
             ((module, exports, __webpack_require__) => {
 
                 // Imports
                 var ___CSS_LOADER_API_IMPORT___ = __webpack_require__( /*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
                 exports = ___CSS_LOADER_API_IMPORT___(false);
                 // Module
-                exports.push([module.id, "/* ==========================================================================\r\n   #Custom HTML5 Video Player\r\n   ========================================================================== */\r\n\r\n:root {\r\n  --youtube-red: #FE0900;\r\n}\r\n\r\n.ipywebcam.video-container {\r\n  width: 800px;\r\n  border-radius: 4px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.ipywebcam.video-container .video {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ipywebcam.video-container .video-controls {\r\n  right: 0;\r\n  left: 0;\r\n  padding: 10px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  transition: all 0.2s ease;\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\r\n}\r\n\r\n.ipywebcam.video-container .video-controls.hide {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container .video-progress {\r\n  position: relative;\r\n  height: 8.4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ipywebcam.video-container progress {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-bar {\r\n  background-color: #474545;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-value {\r\n  background: var(--youtube-red);\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-moz-progress-bar {\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n}\r\n\r\n.ipywebcam.video-container .seek {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\r\n  display: block;\r\n}\r\n\r\n.ipywebcam.video-container .seek-tooltip {\r\n  display: none;\r\n  position: absolute;\r\n  top: -50px;\r\n  margin-left: -20px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  content: attr(data-title);\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.ipywebcam.video-container .bottom-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .left-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls input {\r\n  width: 100px;\r\n  opacity: 1;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\r\n  width: 100px;\r\n  opacity: 1;\r\n}\r\n\r\n.ipywebcam.video-container button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin-right: 7px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  border: none;\r\n  outline: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container button * {\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip)::before {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  display: none;\r\n  right: 0;\r\n  top: -50px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  font-weight: bold;\r\n  padding: 4px 6px;\r\n  word-break: keep-all;\r\n  white-space: pre;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container .fullscreen-button {\r\n  margin-right: 0;\r\n}\r\n\r\n.ipywebcam.video-container .index-selector {\r\n  min-width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .text-button {\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .selector-panel {\r\n  position: absolute;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: rgba(21, 21, 21, .9);\r\n  padding: 6px 12px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  flex-direction: column;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options.grid {\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button.disabled svg {\r\n  fill: #999;\r\n  stroke: #999;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button {\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option {\r\n  color: #fff;\r\n  min-width: 26px;\r\n  height: 26px;\r\n  margin: 3px;\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option .text {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option:hover {\r\n  background: rgba(120, 120, 120, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option.selected {\r\n  background: rgba(81, 81, 81, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container .pip-button svg {\r\n  width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .playback-animation {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -40px;\r\n  margin-top: -40px;\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 80px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  opacity: 0;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range] {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  height: 8.4px;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  border-radius: 1.3px;\r\n  -webkit-appearance: none;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 16px;\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-left: -1px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\r\n  background: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume {\r\n  height: 5px;\r\n  background-color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\r\n  margin-left: 0;\r\n  height: 14px;\r\n  width: 14px;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 8.4px;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  background: transparent;\r\n  border-radius: 1.3px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\r\n  height: 14px;\r\n  width: 14px;\r\n  border-radius: 50px;\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\r\n  border: 1px solid #fff;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .hidden {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container svg {\r\n  width: 28px;\r\n  height: 28px;\r\n  fill: #fff;\r\n  stroke: #fff;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n}", ""]);
+                exports.push([module.id, "/* ==========================================================================\r\n   #Custom HTML5 Video Player\r\n   ========================================================================== */\r\n\r\n:root {\r\n  --youtube-red: rgb(254, 9, 0);\r\n}\r\n\r\n.ipywebcam.video-container {\r\n  width: 800px;\r\n  border-radius: 4px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.ipywebcam.video-container .video {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ipywebcam.video-container .video-controls {\r\n  right: 0;\r\n  left: 0;\r\n  padding: 10px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  transition: all 0.2s ease;\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\r\n}\r\n\r\n.ipywebcam.video-container .video-controls.hide {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container .video-progress {\r\n  position: relative;\r\n  height: 8.4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ipywebcam.video-container progress {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-bar {\r\n  background-color: #474545;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-value {\r\n  background: var(--youtube-red);\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-moz-progress-bar {\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n}\r\n\r\n.ipywebcam.video-container .seek {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\r\n  display: block;\r\n}\r\n\r\n.ipywebcam.video-container .seek-tooltip {\r\n  display: none;\r\n  position: absolute;\r\n  top: -30px;\r\n  margin-left: -20px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  content: attr(data-title);\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar {\r\n  position: absolute;\r\n  top: 12px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  background-color: #474545;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n  overflow: visible;\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker {\r\n  position: absolute;\r\n  width: 4px;\r\n  height: 10px;\r\n  top: -0.8px;\r\n  background-color: rgb(254, 9, 0);\r\n  border-radius: 1px;\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker.floating {\r\n  background-color: rgba(254, 9, 0, 0.7);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker.selected {\r\n  background-color: rgba(254, 0, 120, 0.7);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .range-mask {\r\n  position: absolute;\r\n  height: 8.4px;\r\n  background-color: #00c569;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container {\r\n  position: relative;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container svg {\r\n  display: block;\r\n  width: 100%;\r\n  height: 30px;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container.unused svg {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container .bottom-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .left-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls input {\r\n  width: 100px;\r\n  opacity: 1;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\r\n  width: 100px;\r\n  opacity: 1;\r\n}\r\n\r\n.ipywebcam.video-container button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin-right: 7px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  border: none;\r\n  outline: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container button * {\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip)::before {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  display: none;\r\n  right: 0;\r\n  top: -50px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  font-weight: bold;\r\n  padding: 4px 6px;\r\n  word-break: keep-all;\r\n  white-space: pre;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container .fullscreen-button {\r\n  margin-right: 0;\r\n}\r\n\r\n.ipywebcam.video-container .stats-selector svg.icon {\r\n  display: inline;\r\n  margin-right: 2px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ipywebcam.video-container .stats-selector div.text {\r\n  display: inline;\r\n  color: #fff;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ipywebcam.video-container .index-selector {\r\n  min-width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .text-button {\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .selector-panel {\r\n  position: absolute;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: rgba(21, 21, 21, .9);\r\n  padding: 6px 12px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  flex-direction: column;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options.grid {\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button.disabled svg {\r\n  fill: #999;\r\n  stroke: #999;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button {\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option {\r\n  color: #fff;\r\n  min-width: 26px;\r\n  height: 26px;\r\n  margin: 3px;\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option .text {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option:hover {\r\n  background: rgba(120, 120, 120, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option.selected {\r\n  background: rgba(81, 81, 81, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container .pip-button svg {\r\n  width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .playback-animation {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -40px;\r\n  margin-top: -40px;\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 80px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  opacity: 0;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range] {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  height: 8.4px;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  border-radius: 1.3px;\r\n  -webkit-appearance: none;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 16px;\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-left: -1px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\r\n  background: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume {\r\n  height: 5px;\r\n  background-color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\r\n  margin-left: 0;\r\n  height: 14px;\r\n  width: 14px;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 8.4px;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  background: transparent;\r\n  border-radius: 1.3px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\r\n  height: 14px;\r\n  width: 14px;\r\n  border-radius: 50px;\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\r\n  border: 1px solid #fff;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .hidden {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container svg {\r\n  width: 28px;\r\n  height: 28px;\r\n  fill: #fff;\r\n  stroke: #fff;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n}", ""]);
                 // Exports
                 module.exports = exports;
 
 
                 /***/
             }),
 
@@ -2909,15 +3659,15 @@
             /*!**********************!*\
               !*** ./package.json ***!
               \**********************/
             /***/
             ((module) => {
 
                 "use strict";
-                module.exports = JSON.parse('{"name":"ipywebcam","version":"0.1.7","description":"A Custom Jupyter Widget Library for Web Camera using WebRTC","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/vipcxj/ipywebcam","bugs":{"url":"https://github.com/vipcxj/ipywebcam/issues"},"license":"BSD-3-Clause","author":{"name":"Xiaojing Chen","email":"vipcxj@126.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/vipcxj/ipywebcam"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebcam/labextension","clean:nbextension":"rimraf ipywebcam/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","lru-cache":"^7.14.1"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebcam/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
+                module.exports = JSON.parse('{"name":"ipywebcam","version":"0.1.8","description":"A Custom Jupyter Widget Library for Web Camera using WebRTC","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/vipcxj/ipywebcam","bugs":{"url":"https://github.com/vipcxj/ipywebcam/issues"},"license":"BSD-3-Clause","author":{"name":"Xiaojing Chen","email":"vipcxj@126.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/vipcxj/ipywebcam"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebcam/labextension","clean:nbextension":"rimraf ipywebcam/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","d3":"^7.8.2","lru-cache":"^7.14.1"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/d3":"^7.4.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebcam/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
 
                 /***/
             })
 
     }
 ]);
-//# sourceMappingURL=lib_recorder_js-lib_webcam_js.f229668a6df6f0256c34.js.map
+//# sourceMappingURL=lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js.map
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.f229668a6df6f0256c34.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js.map`

 * *Files 8% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8047619047619048%*

 * *Differences: {"'file'": "'lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js'",*

 * * "'mappings'": "';;;;;;;;;AAAa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,wBAAwB,mBAAO,CAAC,iDAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC []*

```diff
@@ -1,36 +1,40 @@
 {
-    "file": "lib_recorder_js-lib_webcam_js.f229668a6df6f0256c34.js",
-    "mappings": ";;;;;;;;;AAAa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4KAA4K;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe,IAAI;AACnD,wCAAwC,qBAAqB;AAC7D;AACA,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,4BAA4B,eAAe,IAAI;AAC/C;AACA,SAAS;AACT;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;ACnEa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,2BAA2B;AACxD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,oCAAoC,mBAAO,CAAC,sEAAW;AACvD,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU,sCAAsC;AACpE;AACA;AACA;AACA,SAAS;AACT;AACA,qCAAqC,MAAM,GAAG,QAAQ,OAAO,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA,iBAAiB;AACjB,wBAAwB,8BAA8B;AACtD,iDAAiD,eAAe,OAAO,GAAG;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA,oBAAoB,YAAY;AAChC,oBAAoB,UAAU;AAC9B;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,2LAA2L;AAC/P;AACA;AACA,2BAA2B;AAC3B;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;;;;;;;;;;;AC5Qa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,iBAAiB,GAAG,oBAAoB;AACxD;AACA;AACA;AACA,oBAAoB;AACpB;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;;;;;;;;;;;ACrBa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,cAAc;AAC3J,mBAAO,CAAC,yCAAkB;AAC1B,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA,cAAc,OAAO,EAAE,GAAG;AAC1B;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,GAAG;AACpC,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,oCAAoC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,2CAA2C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,0CAA0C,GAAG;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC,4CAA4C,UAAU;AACtD,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA,4DAA4D,EAAE;AAC9D,yDAAyD,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D,6CAA6C,OAAO;AACpD,2CAA2C,uBAAuB;AAClE,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA,oEAAoE,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,QAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,WAAW,IAAI,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wDAAwD,WAAW,IAAI,cAAc;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,2BAA2B;AACjC,MAAM,yBAAyB;AAC/B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,6BAA6B;AAChE;AACA,mCAAmC,gCAAgC;AACnE,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,MAAM;AACtC,6DAA6D,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E;AACA;AACA;AACA,qEAAqE,SAAS;AAC9E;AACA;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D,iDAAiD,cAAc;AAC/D;AACA,yCAAyC,aAAa,GAAG,aAAa;AACtE,sDAAsD,aAAa,IAAI,aAAa;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,aAAa,GAAG,aAAa;AACzE,yDAAyD,aAAa,IAAI,aAAa;AACvF;AACA;AACA;AACA;AACA,iCAAiC,mCAAmC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA,8CAA8C,UAAU,GAAG,UAAU;AACrE;AACA,6CAA6C,wBAAwB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,wEAAwE,SAAS;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,kBAAkB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,SAAS;AAC/F;AACA;AACA;AACA,iFAAiF,SAAS;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD,oBAAoB,8BAA8B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnnCa;AACb;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,mBAAmB;AACxC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,uBAAuB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT;AACA,oBAAoB,gBAAgB;AACpC,oBAAoB,OAAO;AAC3B;AACA;AACA,4BAA4B,4BAA4B,IAAI;AAC5D,aAAa;AACb,SAAS;AACT;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4TAA4T;AAChY;AACA;AACA,mBAAmB;AACnB,0CAA0C;AAC1C;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gBAAgB,WAAW;AAC3B;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB;AAClB;;;;;;;;;;;AC/Ya;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,8BAA8B,GAAG,4BAA4B;AACjF,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,MAAM,wCAAwC;AAC9C,MAAM,8BAA8B;AACpC,MAAM,oCAAoC;AAC1C,MAAM,+BAA+B;AACrC,MAAM,gCAAgC;AACtC,MAAM,iCAAiC;AACvC,MAAM,+BAA+B;AACrC,MAAM,mCAAmC;AACzC,MAAM,gCAAgC;AACtC,MAAM,+BAA+B;AACrC,MAAM,kCAAkC;AACxC,MAAM,oCAAoC;AAC1C,MAAM,oCAAoC;AAC1C,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,8BAA8B;AACpC;AACA;AACA,qDAAqD,IAAI,iCAAiC,cAAc;AACxG;AACA,qCAAqC,mBAAmB;AACxD,KAAK;AACL;AACA;AACA,uCAAuC,qBAAqB;AAC5D,KAAK;AACL;AACA,wCAAwC,sBAAsB;AAC9D,KAAK;AACL;AACA,oCAAoC,kBAAkB;AACtD,KAAK;AACL;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB;AACvD;AACA;;;;;;;;;;AClKA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,2OAA2O,6BAA6B,KAAK,oCAAoC,mBAAmB,yBAAyB,qBAAqB,yBAAyB,oBAAoB,6BAA6B,8BAA8B,KAAK,2CAA2C,kBAAkB,mBAAmB,yBAAyB,KAAK,oDAAoD,eAAe,cAAc,oBAAoB,yBAAyB,gBAAgB,gCAAgC,2FAA2F,KAAK,yDAAyD,iBAAiB,2BAA2B,KAAK,oDAAoD,yBAAyB,oBAAoB,0BAA0B,KAAK,6CAA6C,+BAA+B,4BAA4B,uBAAuB,yBAAyB,kBAAkB,oBAAoB,2BAA2B,yBAAyB,aAAa,KAAK,mEAAmE,gCAAgC,yBAAyB,KAAK,qEAAqE,qCAAqC,yBAAyB,KAAK,gEAAgE,2CAA2C,qCAAqC,KAAK,0CAA0C,yBAAyB,aAAa,kBAAkB,sBAAsB,gBAAgB,KAAK,8DAA8D,qBAAqB,KAAK,kDAAkD,oBAAoB,yBAAyB,iBAAiB,yBAAyB,sBAAsB,mBAAmB,gCAAgC,wBAAwB,kBAAkB,2CAA2C,KAAK,qDAAqD,oBAAoB,qCAAqC,0BAA0B,KAAK,mDAAmD,oBAAoB,0BAA0B,kBAAkB,KAAK,qDAAqD,oBAAoB,0BAA0B,yBAAyB,KAAK,2DAA2D,mBAAmB,iBAAiB,gCAAgC,KAAK,+FAA+F,mBAAmB,iBAAiB,KAAK,2CAA2C,sBAAsB,yBAAyB,wBAAwB,sBAAsB,mBAAmB,mBAAmB,oBAAoB,oCAAoC,KAAK,6CAA6C,2BAA2B,KAAK,oEAAoE,gCAAgC,yBAAyB,oBAAoB,eAAe,iBAAiB,2CAA2C,kBAAkB,wBAAwB,uBAAuB,2BAA2B,uBAAuB,KAAK,0EAA0E,4BAA4B,KAAK,uDAAuD,sBAAsB,KAAK,oDAAoD,sBAAsB,mBAAmB,KAAK,iDAAiD,kBAAkB,KAAK,oDAAoD,yBAAyB,mBAAmB,yBAAyB,uCAAuC,wBAAwB,KAAK,sDAAsD,oBAAoB,wBAAwB,6BAA6B,KAAK,2DAA2D,sBAAsB,0BAA0B,KAAK,oDAAoD,oBAAoB,qCAAqC,0BAA0B,KAAK,wDAAwD,kBAAkB,mBAAmB,KAAK,wEAAwE,iBAAiB,mBAAmB,KAAK,2DAA2D,2BAA2B,KAAK,2DAA2D,kBAAkB,sBAAsB,mBAAmB,kBAAkB,2BAA2B,KAAK,iEAAiE,4BAA4B,KAAK,iEAAiE,2CAA2C,KAAK,oEAAoE,wCAAwC,KAAK,oDAAoD,kBAAkB,mBAAmB,KAAK,wDAAwD,2BAA2B,yBAAyB,eAAe,gBAAgB,yBAAyB,wBAAwB,kBAAkB,mBAAmB,0BAA0B,2CAA2C,oBAAoB,8BAA8B,0BAA0B,iBAAiB,KAAK,sDAAsD,+BAA+B,4BAA4B,oBAAoB,8BAA8B,sBAAsB,KAAK,4DAA4D,oBAAoB,KAAK,qFAAqF,kBAAkB,sBAAsB,2BAA2B,+BAA+B,gCAAgC,KAAK,4EAA4E,mBAAmB,kBAAkB,0BAA0B,qCAAqC,sBAAsB,+BAA+B,wBAAwB,KAAK,2FAA2F,8BAA8B,KAAK,6DAA6D,kBAAkB,6BAA6B,KAAK,4FAA4F,oCAAoC,KAAK,mFAAmF,qBAAqB,mBAAmB,kBAAkB,uBAAuB,KAAK,wEAAwE,kBAAkB,oBAAoB,sBAAsB,oCAAoC,8BAA8B,2BAA2B,KAAK,wEAAwE,mBAAmB,kBAAkB,0BAA0B,2CAA2C,qCAAqC,sBAAsB,sBAAsB,KAAK,8EAA8E,oBAAoB,KAAK,+EAA+E,6BAA6B,uBAAuB,KAAK,4CAA4C,oBAAoB,KAAK,wCAAwC,kBAAkB,mBAAmB,iBAAiB,mBAAmB,sBAAsB,6BAA6B,KAAK;AACn5P;AACA;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,0CAA0C,oCAAoC,qBAAqB,GAAG;AACtG;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,mHAAsD;;AAExF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;AClBA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
+    "file": "lib_recorder_js-lib_webcam_js.1abbf2864dca9499d4d0.js",
+    "mappings": ";;;;;;;;;AAAa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,wBAAwB,mBAAO,CAAC,iDAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;;;;;;;;;;ACnEa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4KAA4K;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe,IAAI;AACnD,wCAAwC,qBAAqB;AAC7D;AACA,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,4BAA4B,eAAe,IAAI;AAC/C;AACA,SAAS;AACT;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;ACjFa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB;AACA,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,+CAA+C;AAClH;AACA;AACA;AACA;AACA;AACA,mEAAmE,+CAA+C;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,IAAI;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,KAAK;AACtD,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,6BAA6B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;;;;;;;;;;AC1Wa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,2BAA2B;AACxD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,oCAAoC,mBAAO,CAAC,sEAAW;AACvD,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yEAAyE,MAAM;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA,SAAS;AACT;AACA,qCAAqC,MAAM,GAAG,QAAQ,OAAO,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA,iBAAiB;AACjB,wBAAwB,8BAA8B;AACtD,iDAAiD,eAAe,OAAO,GAAG;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA,SAAS;AACT;AACA,oBAAoB,YAAY;AAChC,oBAAoB,UAAU;AAC9B;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,iQAAiQ;AACrU;AACA;AACA,2BAA2B;AAC3B;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uDAAuD;AAC3E;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;;;;;;;;;;;ACjXa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,iBAAiB,GAAG,aAAa,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,iBAAiB,GAAG,oBAAoB;AACzK;AACA;AACA;AACA,oBAAoB;AACpB;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,aAAa;AACb;AACA,YAAY,OAAO;AACnB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,wBAAwB;AACxB;;;;;;;;;;;AC5Da;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,GAAG,4BAA4B,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,cAAc;AAC7H,mBAAO,CAAC,yCAAkB;AAC1B,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA,cAAc,OAAO,EAAE,GAAG;AAC1B;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,GAAG;AACpC,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,oCAAoC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,2CAA2C;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,0CAA0C,GAAG;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC,4CAA4C,UAAU;AACtD,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA,4DAA4D,EAAE;AAC9D,yDAAyD,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D,6CAA6C,OAAO;AACpD,2CAA2C,uBAAuB;AAClE,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,kFAAkF,MAAM;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA,oEAAoE,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,QAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,WAAW,IAAI,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wDAAwD,WAAW,IAAI,cAAc;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,6BAA6B;AACnC,MAAM,2BAA2B;AACjC,MAAM,6BAA6B;AACnC,MAAM,yBAAyB;AAC/B,MAAM,2BAA2B;AACjC,MAAM,yBAAyB;AAC/B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB;AACtE;AACA;AACA;AACA;AACA,yEAAyE,wBAAwB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,6BAA6B;AAChE;AACA,mCAAmC,gCAAgC;AACnE,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,MAAM;AACtC,6DAA6D,MAAM;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E;AACA;AACA;AACA,qEAAqE,SAAS;AAC9E;AACA;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D,iDAAiD,cAAc;AAC/D;AACA,yCAAyC,aAAa,GAAG,aAAa;AACtE,sDAAsD,aAAa,IAAI,aAAa;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,aAAa,GAAG,aAAa;AACzE,yDAAyD,aAAa,IAAI,aAAa;AACvF;AACA;AACA;AACA;AACA,iCAAiC,mCAAmC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA,8CAA8C,UAAU,GAAG,UAAU;AACrE;AACA,6CAA6C,wBAAwB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,wEAAwE,SAAS;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,kBAAkB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,SAAS;AAC/F;AACA;AACA;AACA,iFAAiF,SAAS;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD,oBAAoB,4CAA4C;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxuCa;AACb;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,mBAAmB;AACxC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qGAAqG,MAAM;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,uBAAuB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT;AACA,oBAAoB,gBAAgB;AACpC,oBAAoB,OAAO;AAC3B;AACA;AACA,4BAA4B,4BAA4B,IAAI;AAC5D,aAAa;AACb,SAAS;AACT;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,uBAAuB,4TAA4T;AAChY;AACA;AACA,mBAAmB;AACnB,0CAA0C;AAC1C;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,gBAAgB,WAAW;AAC3B;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB;AAClB;;;;;;;;;;;AC/Ya;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,8BAA8B,GAAG,4BAA4B;AACjF,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA,MAAM,wCAAwC;AAC9C,MAAM,8BAA8B;AACpC,MAAM,oCAAoC;AAC1C,MAAM,+BAA+B;AACrC,MAAM,gCAAgC;AACtC,MAAM,iCAAiC;AACvC,MAAM,+BAA+B;AACrC,MAAM,mCAAmC;AACzC,MAAM,gCAAgC;AACtC,MAAM,+BAA+B;AACrC,MAAM,kCAAkC;AACxC,MAAM,oCAAoC;AAC1C,MAAM,oCAAoC;AAC1C,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,8BAA8B;AACpC;AACA;AACA,qDAAqD,IAAI,iCAAiC,cAAc;AACxG;AACA,qCAAqC,mBAAmB;AACxD,KAAK;AACL;AACA;AACA,uCAAuC,qBAAqB;AAC5D,KAAK;AACL;AACA,wCAAwC,sBAAsB;AAC9D,KAAK;AACL;AACA,oCAAoC,kBAAkB;AACtD,KAAK;AACL;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB;AACvD;AACA;;;;;;;;;;AClKA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,2OAA2O,oCAAoC,KAAK,oCAAoC,mBAAmB,yBAAyB,qBAAqB,yBAAyB,oBAAoB,6BAA6B,8BAA8B,KAAK,2CAA2C,kBAAkB,mBAAmB,yBAAyB,KAAK,oDAAoD,eAAe,cAAc,oBAAoB,yBAAyB,gBAAgB,gCAAgC,2FAA2F,KAAK,yDAAyD,iBAAiB,2BAA2B,KAAK,oDAAoD,yBAAyB,oBAAoB,0BAA0B,KAAK,6CAA6C,+BAA+B,4BAA4B,uBAAuB,yBAAyB,kBAAkB,oBAAoB,2BAA2B,yBAAyB,aAAa,KAAK,mEAAmE,gCAAgC,yBAAyB,KAAK,qEAAqE,qCAAqC,yBAAyB,KAAK,gEAAgE,2CAA2C,qCAAqC,KAAK,0CAA0C,yBAAyB,aAAa,kBAAkB,sBAAsB,gBAAgB,KAAK,8DAA8D,qBAAqB,KAAK,kDAAkD,oBAAoB,yBAAyB,iBAAiB,yBAAyB,sBAAsB,mBAAmB,gCAAgC,wBAAwB,kBAAkB,2CAA2C,KAAK,+CAA+C,yBAAyB,gBAAgB,kBAAkB,oBAAoB,gCAAgC,sBAAsB,yBAAyB,wBAAwB,KAAK,uDAAuD,yBAAyB,iBAAiB,mBAAmB,kBAAkB,uCAAuC,yBAAyB,KAAK,gEAAgE,6CAA6C,KAAK,gEAAgE,+CAA+C,KAAK,2DAA2D,yBAAyB,oBAAoB,gCAAgC,sBAAsB,yBAAyB,KAAK,0DAA0D,yBAAyB,KAAK,8DAA8D,qBAAqB,kBAAkB,mBAAmB,KAAK,qEAAqE,oBAAoB,KAAK,qDAAqD,oBAAoB,qCAAqC,0BAA0B,KAAK,mDAAmD,oBAAoB,0BAA0B,kBAAkB,KAAK,qDAAqD,oBAAoB,0BAA0B,yBAAyB,KAAK,2DAA2D,mBAAmB,iBAAiB,gCAAgC,KAAK,+FAA+F,mBAAmB,iBAAiB,KAAK,2CAA2C,sBAAsB,yBAAyB,wBAAwB,sBAAsB,mBAAmB,mBAAmB,oBAAoB,oCAAoC,KAAK,6CAA6C,2BAA2B,KAAK,oEAAoE,gCAAgC,yBAAyB,oBAAoB,eAAe,iBAAiB,2CAA2C,kBAAkB,wBAAwB,uBAAuB,2BAA2B,uBAAuB,KAAK,0EAA0E,4BAA4B,KAAK,uDAAuD,sBAAsB,KAAK,6DAA6D,sBAAsB,wBAAwB,6BAA6B,KAAK,6DAA6D,sBAAsB,kBAAkB,6BAA6B,KAAK,oDAAoD,sBAAsB,mBAAmB,KAAK,iDAAiD,kBAAkB,KAAK,oDAAoD,yBAAyB,mBAAmB,yBAAyB,uCAAuC,wBAAwB,KAAK,sDAAsD,oBAAoB,wBAAwB,6BAA6B,KAAK,2DAA2D,sBAAsB,0BAA0B,KAAK,oDAAoD,oBAAoB,qCAAqC,0BAA0B,KAAK,wDAAwD,kBAAkB,mBAAmB,KAAK,wEAAwE,iBAAiB,mBAAmB,KAAK,2DAA2D,2BAA2B,KAAK,2DAA2D,kBAAkB,sBAAsB,mBAAmB,kBAAkB,2BAA2B,KAAK,iEAAiE,4BAA4B,KAAK,iEAAiE,2CAA2C,KAAK,oEAAoE,wCAAwC,KAAK,oDAAoD,kBAAkB,mBAAmB,KAAK,wDAAwD,2BAA2B,yBAAyB,eAAe,gBAAgB,yBAAyB,wBAAwB,kBAAkB,mBAAmB,0BAA0B,2CAA2C,oBAAoB,8BAA8B,0BAA0B,iBAAiB,KAAK,sDAAsD,+BAA+B,4BAA4B,oBAAoB,8BAA8B,sBAAsB,KAAK,4DAA4D,oBAAoB,KAAK,qFAAqF,kBAAkB,sBAAsB,2BAA2B,+BAA+B,gCAAgC,KAAK,4EAA4E,mBAAmB,kBAAkB,0BAA0B,qCAAqC,sBAAsB,+BAA+B,wBAAwB,KAAK,2FAA2F,8BAA8B,KAAK,6DAA6D,kBAAkB,6BAA6B,KAAK,4FAA4F,oCAAoC,KAAK,mFAAmF,qBAAqB,mBAAmB,kBAAkB,uBAAuB,KAAK,wEAAwE,kBAAkB,oBAAoB,sBAAsB,oCAAoC,8BAA8B,2BAA2B,KAAK,wEAAwE,mBAAmB,kBAAkB,0BAA0B,2CAA2C,qCAAqC,sBAAsB,sBAAsB,KAAK,8EAA8E,oBAAoB,KAAK,+EAA+E,6BAA6B,uBAAuB,KAAK,4CAA4C,oBAAoB,KAAK,wCAAwC,kBAAkB,mBAAmB,iBAAiB,mBAAmB,sBAAsB,6BAA6B,KAAK;AACxzS;AACA;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,0CAA0C,oCAAoC,qBAAqB,GAAG;AACtG;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,mHAAsD;;AAExF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;AClBA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
+        "webpack://ipywebcam/./lib/charts.js",
         "webpack://ipywebcam/./lib/common.js",
+        "webpack://ipywebcam/./lib/range.js",
         "webpack://ipywebcam/./lib/recorder.js",
         "webpack://ipywebcam/./lib/utils.js",
         "webpack://ipywebcam/./lib/version.js",
         "webpack://ipywebcam/./lib/video.js",
         "webpack://ipywebcam/./lib/webcam.js",
         "webpack://ipywebcam/./lib/webrtc.js",
         "webpack://ipywebcam/./css/video.css",
         "webpack://ipywebcam/./css/widget.css",
         "webpack://ipywebcam/./node_modules/css-loader/dist/runtime/api.js",
         "webpack://ipywebcam/./css/video.css?3e6c",
         "webpack://ipywebcam/./css/widget.css?a195",
         "webpack://ipywebcam/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
     ],
     "sourcesContent": [
-        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\nclass BaseModel extends base_1.DOMWidgetModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.messageHandlers = {};\r\n        this.addMessageHandler = (cmd, handler) => {\r\n            this.messageHandlers[cmd] = handler;\r\n        };\r\n        this.send_cmd = this.send_cmd.bind(this);\r\n        this.on('msg:custom', (msg, buffers) => {\r\n            const { id, cmd } = msg;\r\n            if (id && id !== this.message_id) {\r\n                return;\r\n            }\r\n            Object.keys(this.messageHandlers).forEach((key) => {\r\n                if (key === cmd) {\r\n                    const handler = this.messageHandlers[key];\r\n                    if (handler) {\r\n                        handler(msg, buffers);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _view_module: version_1.MODULE_NAME, _model_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, _model_module_version: version_1.MODULE_VERSION });\r\n    }\r\n    get message_id() {\r\n        return this.model_id;\r\n    }\r\n    send_cmd(cmd, args, wait = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const id = this.message_id;\r\n            if (wait) {\r\n                return new Promise((resolve) => {\r\n                    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n                    const self = this;\r\n                    this.send({ cmd, id, args }, {});\r\n                    function callback({ ans, id: t_id, res, }, buffers) {\r\n                        if (ans === cmd && t_id === id) {\r\n                            resolve({ content: res, buffers });\r\n                            self.off('msg:custom', callback);\r\n                        }\r\n                    }\r\n                    this.on('msg:custom', callback);\r\n                });\r\n            }\r\n            else {\r\n                this.send({ cmd, id, args }, {});\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.BaseModel = BaseModel;\r\n//# sourceMappingURL=common.js.map",
-        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst lru_cache_1 = __importDefault(require(\"lru-cache\"));\r\nconst common_1 = require(\"./common\");\r\nconst video_1 = require(\"./video\");\r\nclass RecorderPlayerModel extends common_1.BaseModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.cache = new lru_cache_1.default({\r\n            max: 6,\r\n        });\r\n        this.fetchStates = {};\r\n        this.refresh_callbacks = [];\r\n        this.addRefereshCallback = (callback) => {\r\n            this.refresh_callbacks.push(callback);\r\n        };\r\n        this.removeRefreshCallback = (callback) => {\r\n            const index = this.refresh_callbacks.indexOf(callback);\r\n            if (index >= 0) {\r\n                this.refresh_callbacks.splice(index, 1);\r\n            }\r\n        };\r\n        this.triggerRefresh = (index, channel) => {\r\n            this.refresh_callbacks.forEach((cb) => {\r\n                cb(index, channel);\r\n            });\r\n        };\r\n        this.fetchMeta = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.meta) {\r\n                return this.meta;\r\n            }\r\n            const { content } = yield this.send_cmd('fetch_meta', {});\r\n            this.meta = content;\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            return this.meta;\r\n        });\r\n        this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function* () {\r\n            const key = channel ? `${index}-${channel}` : `${index}`;\r\n            const cached = this.cache.get(key);\r\n            if (cached) {\r\n                return cached;\r\n            }\r\n            let fetchState = this.fetchStates[key];\r\n            if (!fetchState) {\r\n                fetchState = {\r\n                    callbacks: [],\r\n                };\r\n                this.fetchStates[key] = fetchState;\r\n                const { content, buffers } = yield this.send_cmd('fetch_data', {\r\n                    index,\r\n                    channel,\r\n                });\r\n                const { format = this.get('format') } = content;\r\n                const blob = new Blob(buffers, { type: `video/${format}` });\r\n                this.cache.set(key, blob);\r\n                fetchState.callbacks.forEach((callback) => callback(blob));\r\n                delete this.fetchStates[key];\r\n                return blob;\r\n            }\r\n            else {\r\n                let theResolve = undefined;\r\n                fetchState.callbacks.push((blob) => {\r\n                    if (theResolve) {\r\n                        theResolve(blob);\r\n                    }\r\n                    else {\r\n                        throw new Error('This is impossible! No resovle method found. It seems that the promise is not invoked yet.');\r\n                    }\r\n                });\r\n                return new Promise((resolve) => {\r\n                    theResolve = resolve;\r\n                });\r\n            }\r\n        });\r\n        this.addMessageHandler('channel_stale', (cmdMsg) => {\r\n            const { args = {} } = cmdMsg;\r\n            const { channel } = args;\r\n            if (channel) {\r\n                for (const key of this.cache.keys()) {\r\n                    if (key.endsWith(`-${channel}`)) {\r\n                        this.cache.delete(key);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.cache.clear();\r\n            }\r\n            this.meta = undefined;\r\n            this.triggerRefresh(undefined, channel);\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: RecorderPlayerModel.model_name, _view_name: RecorderPlayerModel.view_name, format: 'mp4', width: '', height: '', autoplay: true, loop: false, controls: true, autonext: true });\r\n    }\r\n}\r\nexports.RecorderPlayerModel = RecorderPlayerModel;\r\nRecorderPlayerModel.model_name = 'RecorderPlayerModel';\r\nRecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view\r\nclass RecorderPlayerView extends base_1.DOMWidgetView {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.index = -1;\r\n        this.indexSize = 0;\r\n        this.channel = '';\r\n        this.channels = [];\r\n        this.loading = false;\r\n        this.loadStateOnceCallbacks = [];\r\n        this.addLoadStateOnceCallback = (callback) => {\r\n            this.loadStateOnceCallbacks.push(callback);\r\n        };\r\n        this.setLoading = (loading) => {\r\n            if (this.loading !== loading) {\r\n                this.loading = loading;\r\n                this.loadStateOnceCallbacks.forEach((callback) => callback(loading));\r\n                this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);\r\n            }\r\n        };\r\n        this.fetchMeta = () => __awaiter(this, void 0, void 0, function* () {\r\n            const { record_count = 0, chanels = [] } = yield this.model.fetchMeta();\r\n            this.indexSize = record_count;\r\n            this.channels = chanels;\r\n        });\r\n        this.initVideo = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.video) {\r\n                this.video = new video_1.Video();\r\n                this.video.addIndexSelectHandler((i) => {\r\n                    this.load(i, undefined);\r\n                });\r\n                this.video.addChannelSelectHandler((channel) => {\r\n                    this.load(undefined, channel, false, true);\r\n                });\r\n                this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function* () {\r\n                    const autonext = this.model.get('autonext');\r\n                    const loop = this.model.get('loop');\r\n                    if (autonext) {\r\n                        if (this.index < this.indexSize - 1) {\r\n                            this.load(this.index + 1, undefined);\r\n                        }\r\n                        else if (this.index === this.indexSize - 1 && loop) {\r\n                            this.load(0, undefined);\r\n                        }\r\n                    }\r\n                }));\r\n                this.el.appendChild(this.video.container);\r\n                this.update();\r\n                yield this.fetchMeta();\r\n                yield this.load(0, '');\r\n            }\r\n        });\r\n        this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                if (this.loading === loading) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    this.addLoadStateOnceCallback((state) => {\r\n                        if (state === loading) {\r\n                            resolve();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        this.load = (index, channel, force = false, resumeTime = false) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.video) {\r\n                if (typeof index === 'undefined') {\r\n                    index = this.index;\r\n                }\r\n                if (typeof channel === 'undefined') {\r\n                    channel = this.channel;\r\n                }\r\n                if (this.index === index && this.channel === channel && !force) {\r\n                    return;\r\n                }\r\n                yield this.waitForLoading(false);\r\n                this.setLoading(true);\r\n                yield this.fetchMeta();\r\n                try {\r\n                    if (this.indexSize > 0) {\r\n                        const blob = yield this.model.fetchData(index, channel);\r\n                        this.video.updateData(blob, resumeTime);\r\n                    }\r\n                    this.index = index;\r\n                    this.channel = channel;\r\n                    this.video.updateIndexerSize(this.indexSize);\r\n                    this.video.updateIndexerIndex(this.index);\r\n                    this.video.updateChannels(this.channels);\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n                finally {\r\n                    this.setLoading(false);\r\n                }\r\n            }\r\n        });\r\n        this.updateWidth = () => {\r\n            var _a, _b;\r\n            const width = this.model.get('width');\r\n            if (width !== undefined && width.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('width', width);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('width');\r\n            }\r\n        };\r\n        this.updateHeight = () => {\r\n            var _a, _b;\r\n            const height = this.model.get('height');\r\n            if (height !== undefined && height.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('height', height);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('height');\r\n            }\r\n        };\r\n        this.updateOtherVideoAttributes = () => {\r\n            var _a, _b;\r\n            const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n            if (video) {\r\n                video.autoplay = this.model.get('autoplay') ? true : false;\r\n                if (this.model.get('autonext')) {\r\n                    video.loop = false;\r\n                }\r\n                else {\r\n                    video.loop = this.model.get('loop') ? true : false;\r\n                }\r\n            }\r\n            (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));\r\n        };\r\n        this.model.addRefereshCallback((i, c) => {\r\n            if (this.index === i &&\r\n                ((!this.channel && !c) || (this.channel && c && this.channel === c))) {\r\n                this.load(undefined, undefined, true);\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        super.render();\r\n        this.initVideo();\r\n    }\r\n    update() {\r\n        this.updateWidth();\r\n        this.updateHeight();\r\n        this.updateOtherVideoAttributes();\r\n        return super.update();\r\n    }\r\n    remove() {\r\n        var _a;\r\n        (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();\r\n        this.video = undefined;\r\n    }\r\n}\r\nexports.RecorderPlayerView = RecorderPlayerView;\r\n//# sourceMappingURL=recorder.js.map",
-        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isMac = exports.arrayFind = exports.arrayInclude = void 0;\r\nfunction arrayInclude(arr, target) {\r\n    return !!~arr.indexOf(target);\r\n}\r\nexports.arrayInclude = arrayInclude;\r\nfunction arrayFind(arr, cond) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        const e = arr[i];\r\n        if (cond(e, i)) {\r\n            return e;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.arrayFind = arrayFind;\r\nfunction isMac() {\r\n    return window.navigator.userAgent.indexOf('Mac') !== -1;\r\n}\r\nexports.isMac = isMac;\r\n//# sourceMappingURL=utils.js.map",
+        "\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.makeLineChart = void 0;\r\nconst d3 = __importStar(require(\"d3\"));\r\nfunction makeLineChart(node, data, xRange, yRange, width, height) {\r\n    const svg = node\r\n        ? d3.select(node)\r\n        : d3.create('svg');\r\n    width =\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        width === undefined || width === null ? svg.node().clientWidth : width;\r\n    height =\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        height === undefined || height === null ? svg.node().clientHeight : height;\r\n    if (height > 16) {\r\n        height -= 4;\r\n    }\r\n    if (!xRange) {\r\n        const xData = data.map((d) => d[0]);\r\n        xRange = [Math.min(...xData), Math.max(...xData)];\r\n    }\r\n    if (xRange[0] === xRange[1]) {\r\n        xRange[1] += 1;\r\n    }\r\n    if (!yRange) {\r\n        const yData = data.map((d) => d[1]);\r\n        yRange = [Math.min(...yData), Math.max(...yData)];\r\n    }\r\n    if (yRange[0] === yRange[1]) {\r\n        yRange[1] += 1;\r\n    }\r\n    const xOffset = -xRange[0];\r\n    const xScale = width / (xRange[1] - xRange[0]);\r\n    const yOffset = -yRange[0];\r\n    const yScale = height / (yRange[1] - yRange[0]);\r\n    const lineFunc = d3\r\n        .line()\r\n        .x((d) => (d[0] + xOffset) * xScale)\r\n        .y((d) => (d[1] + yOffset) * yScale);\r\n    let path = svg.select('path');\r\n    if (path.size() === 0) {\r\n        path = svg.append('path').attr('fill', 'none');\r\n    }\r\n    path.attr('d', lineFunc(data));\r\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n    return svg.node();\r\n}\r\nexports.makeLineChart = makeLineChart;\r\n//# sourceMappingURL=charts.js.map",
+        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst utils_1 = require(\"./utils\");\r\nconst version_1 = require(\"./version\");\r\nclass BaseModel extends base_1.DOMWidgetModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.messageHandlers = {};\r\n        this.addMessageHandler = (cmd, handler) => {\r\n            let handlers = this.messageHandlers[cmd];\r\n            if (!handlers) {\r\n                handlers = this.messageHandlers[cmd] = [];\r\n            }\r\n            handlers.push(handler);\r\n        };\r\n        this.removeMessageHandler = (cmd, handler) => {\r\n            const handlers = this.messageHandlers[cmd];\r\n            if (handlers) {\r\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                utils_1.arrayRemove(handlers, handler);\r\n            }\r\n        };\r\n        this.send_cmd = this.send_cmd.bind(this);\r\n        this.on('msg:custom', (msg, buffers) => {\r\n            const { id, cmd } = msg;\r\n            if (id && id !== this.message_id) {\r\n                return;\r\n            }\r\n            Object.keys(this.messageHandlers).forEach((key) => {\r\n                if (key === cmd) {\r\n                    const handlers = this.messageHandlers[key];\r\n                    if (handlers) {\r\n                        handlers.forEach((handler) => {\r\n                            handler(msg, buffers);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _view_module: version_1.MODULE_NAME, _model_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, _model_module_version: version_1.MODULE_VERSION });\r\n    }\r\n    get message_id() {\r\n        return this.model_id;\r\n    }\r\n    send_cmd(cmd, args, wait = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const id = this.message_id;\r\n            if (wait) {\r\n                return new Promise((resolve) => {\r\n                    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n                    const self = this;\r\n                    this.send({ cmd, id, args }, {});\r\n                    function callback({ ans, id: t_id, res, }, buffers) {\r\n                        if (ans === cmd && t_id === id) {\r\n                            resolve({ content: res, buffers });\r\n                            self.off('msg:custom', callback);\r\n                        }\r\n                    }\r\n                    this.on('msg:custom', callback);\r\n                });\r\n            }\r\n            else {\r\n                this.send({ cmd, id, args }, {});\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.BaseModel = BaseModel;\r\n//# sourceMappingURL=common.js.map",
+        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RangeBar = void 0;\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nconst utils_1 = require(\"./utils\");\r\nclass RangeBar {\r\n    constructor(container, option = {}) {\r\n        this.selectedRange = [0, 0];\r\n        this.markersChangeCallbacks = [];\r\n        this.rangeSelectedCallbacks = [];\r\n        this.destroy = () => {\r\n            document.removeEventListener('mousemove', this.onSelectedMove);\r\n            document.removeEventListener('mouseup', this.removeSelect);\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.container.classList.remove('hidden');\r\n                if (this.container.parentElement) {\r\n                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight + 12}px`;\r\n                }\r\n            }\r\n            else {\r\n                this.container.classList.add('hidden');\r\n                if (this.container.parentElement) {\r\n                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight - 12}px`;\r\n                }\r\n            }\r\n        };\r\n        this.isEnabled = () => {\r\n            return this.max > this.min;\r\n        };\r\n        this.adjustPos = (pos) => {\r\n            const width = this.container.clientWidth;\r\n            if (width === 0) {\r\n                return 0;\r\n            }\r\n            if (this.step <= 0) {\r\n                return (pos / width) * 100;\r\n            }\r\n            else {\r\n                let v = (pos / width) * (this.max - this.min);\r\n                v = Math.round(v / this.step) * this.step;\r\n                return (v / (this.max - this.min)) * 100;\r\n            }\r\n        };\r\n        this.pos2value = (pos) => {\r\n            return this.min + (pos * (this.max - this.min)) / 100;\r\n        };\r\n        this.value2pos = (value) => {\r\n            return ((value - this.min) / (this.max - this.min)) * 100;\r\n        };\r\n        this.addRangeSelectedCallback = (callback) => {\r\n            this.rangeSelectedCallbacks.push(callback);\r\n        };\r\n        this.removeRangeSelectedCallback = (callback) => {\r\n            utils_1.arrayRemove(this.rangeSelectedCallbacks, callback);\r\n        };\r\n        this.addMarkersChangeCallback = (callback) => {\r\n            this.markersChangeCallbacks.push(callback);\r\n        };\r\n        this.removeMarkersChangeCallback = (callback) => {\r\n            utils_1.arrayRemove(this.markersChangeCallbacks, callback);\r\n        };\r\n        this.calcRange = (pos) => {\r\n            const res = [this.min, this.max];\r\n            const value = this.pos2value(pos);\r\n            for (const key of Object.keys(this.markers)) {\r\n                const v = this.pos2value(Number.parseFloat(key));\r\n                if (pos === v) {\r\n                    return [0, 0];\r\n                }\r\n                else if (value > v && v > res[0]) {\r\n                    res[0] = v;\r\n                }\r\n                else if (value < v && v < res[1]) {\r\n                    res[1] = v;\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        this.makeFloatingMarker = (pos) => {\r\n            if (this.isEnabled()) {\r\n                pos = this.adjustPos(pos);\r\n                if (!this.floatingMarker) {\r\n                    this.floatingMarker = document.createElement('div');\r\n                    this.floatingMarker.classList.add('marker', 'floating');\r\n                    this.container.appendChild(this.floatingMarker);\r\n                }\r\n                this.floatingMarker.style.left = `${pos}%`;\r\n                this.floatingMarker.style.translate = '-50%';\r\n            }\r\n        };\r\n        this.releaseFloatingMarker = () => {\r\n            if (this.floatingMarker) {\r\n                this.container.removeChild(this.floatingMarker);\r\n                this.floatingMarker = undefined;\r\n            }\r\n        };\r\n        this.findMarkderKey = (marker) => {\r\n            for (const key of Object.keys(this.markers)) {\r\n                const pos = Number.parseFloat(key);\r\n                if (marker === this.markers[pos]) {\r\n                    return pos;\r\n                }\r\n            }\r\n            return undefined;\r\n        };\r\n        this.getMarkers = () => {\r\n            return Object.keys(this.markers)\r\n                .map((key) => {\r\n                const pos = Number.parseFloat(key);\r\n                return this.pos2value(pos);\r\n            })\r\n                .sort();\r\n        };\r\n        this.setMarkers = (markers) => {\r\n            if (!markers) {\r\n                markers = [];\r\n            }\r\n            if (utils_1.arrayEqual(this.getMarkers(), markers)) {\r\n                return;\r\n            }\r\n            this.unselectRange();\r\n            this.removeSelect();\r\n            for (const key of Object.keys(this.markers)) {\r\n                const marker = this.markers[key];\r\n                this.removeMarkerByNode(marker, false);\r\n            }\r\n            for (const marker of markers) {\r\n                this.addMarker(this.value2pos(marker), false);\r\n            }\r\n            this.execuateMarkersCallbacks();\r\n        };\r\n        this.execuateMarkersCallbacks = () => {\r\n            const markers = this.getMarkers();\r\n            for (const callback of this.markersChangeCallbacks) {\r\n                callback(markers, this);\r\n            }\r\n        };\r\n        this.removeMarkerByNode = (marker, triggerCallback = true) => {\r\n            const key = this.findMarkderKey(marker);\r\n            if (key !== undefined) {\r\n                delete this.markers[key];\r\n                this.container.removeChild(marker);\r\n                if (triggerCallback) {\r\n                    this.execuateMarkersCallbacks();\r\n                }\r\n            }\r\n        };\r\n        this.addMarker = (pos, triggerCallback = true) => {\r\n            if (this.isEnabled()) {\r\n                let marker = this.markers[pos];\r\n                if (!marker) {\r\n                    this.markers[pos] = marker = document.createElement('div');\r\n                    marker.setAttribute('draggable', 'false');\r\n                    marker.classList.add('marker');\r\n                    this.container.appendChild(marker);\r\n                    marker.style.left = `${pos}%`;\r\n                    marker.style.translate = '-50%';\r\n                    marker.addEventListener('click', (evt) => {\r\n                        evt.stopPropagation();\r\n                        if (evt.altKey) {\r\n                            this.removeMarkerByNode(marker);\r\n                        }\r\n                    });\r\n                    marker.addEventListener('mousedown', (evt) => {\r\n                        evt.stopPropagation();\r\n                        const key = this.findMarkderKey(marker);\r\n                        if (key !== undefined) {\r\n                            this.setSelect(key);\r\n                        }\r\n                    });\r\n                    marker.addEventListener('mouseup', () => {\r\n                        this.removeSelect();\r\n                    });\r\n                    if (triggerCallback) {\r\n                        this.execuateMarkersCallbacks();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.setSelect = (pos) => {\r\n            this.selectedKey = pos;\r\n            const marker = this.markers[pos];\r\n            if (marker) {\r\n                marker.classList.add('selected');\r\n            }\r\n        };\r\n        this.removeSelect = () => {\r\n            if (this.selectedKey !== undefined) {\r\n                const marker = this.markers[this.selectedKey];\r\n                if (marker) {\r\n                    marker.classList.remove('selected');\r\n                }\r\n                this.selectedKey = undefined;\r\n            }\r\n        };\r\n        this.canKeyMove = (posFrom, posTo) => {\r\n            if (posFrom === posTo) {\r\n                return false;\r\n            }\r\n            if (posTo < 0 || posTo > 100) {\r\n                return false;\r\n            }\r\n            const keys = Object.keys(this.markers);\r\n            for (const key of keys) {\r\n                const pos = Number.parseFloat(key);\r\n                if (pos === posFrom) {\r\n                    continue;\r\n                }\r\n                if (pos === posTo) {\r\n                    return false;\r\n                }\r\n                if (pos < posFrom && posTo > posFrom) {\r\n                    continue;\r\n                }\r\n                if (pos > posFrom && posTo < posFrom) {\r\n                    continue;\r\n                }\r\n                if (pos < posFrom && pos > posTo) {\r\n                    return false;\r\n                }\r\n                if (pos > posFrom && pos < posTo) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        this.onSelectedMove = (evt) => {\r\n            let pos = utils_1.calcMouseOffsetX(evt, this.container);\r\n            pos = this.adjustPos(pos);\r\n            if (this.selectedKey !== undefined &&\r\n                this.canKeyMove(this.selectedKey, pos)) {\r\n                const marker = this.markers[this.selectedKey];\r\n                if (marker) {\r\n                    marker.style.left = `${pos}%`;\r\n                    marker.style.translate = '-50%';\r\n                    delete this.markers[this.selectedKey];\r\n                    this.updateRangeSelectBecauseOfKeyChagne(this.selectedKey, pos);\r\n                    this.selectedKey = pos;\r\n                    this.markers[pos] = marker;\r\n                    this.execuateMarkersCallbacks();\r\n                }\r\n            }\r\n        };\r\n        this.isRangeSelected = (range) => {\r\n            if (!range) {\r\n                range = this.selectedRange;\r\n            }\r\n            return range[1] > range[0];\r\n        };\r\n        this.updateRangeSelectBecauseOfKeyChagne = (posFrom, posTo) => {\r\n            const valueFrom = this.pos2value(posFrom);\r\n            if (this.isRangeSelected() &&\r\n                (valueFrom === this.selectedRange[0] ||\r\n                    valueFrom === this.selectedRange[1])) {\r\n                const valueTo = this.pos2value(posTo);\r\n                let valueOther;\r\n                if (valueFrom === this.selectedRange[0]) {\r\n                    valueOther = this.selectedRange[1];\r\n                }\r\n                else {\r\n                    valueOther = this.selectedRange[0];\r\n                }\r\n                const newRange = valueTo <= valueOther ? [valueTo, valueOther] : [valueOther, valueTo];\r\n                this.updateRangeSelect(newRange);\r\n            }\r\n        };\r\n        this.updateRangeSelect = (newRange) => {\r\n            if (this.isRangeSelected(newRange)) {\r\n                const cWidth = this.container.clientWidth;\r\n                const left = ((newRange[0] - this.min) / (this.max - this.min)) * cWidth;\r\n                const right = ((newRange[1] - this.min) / (this.max - this.min)) * cWidth;\r\n                this.rangeMasker.style.left = `${left}px`;\r\n                this.rangeMasker.style.width = `${right - left}px`;\r\n                this.rangeMasker.classList.remove('hidden');\r\n            }\r\n            this.selectedRange = newRange;\r\n            for (const callback of this.rangeSelectedCallbacks) {\r\n                callback(this.selectedRange, this);\r\n            }\r\n        };\r\n        this.onMouseRangeSelect = (evt) => {\r\n            if (this.selectedKey !== undefined) {\r\n                // when moving key point, do nothing.\r\n                return;\r\n            }\r\n            const cWidth = this.container.clientWidth;\r\n            if (cWidth === 0) {\r\n                return;\r\n            }\r\n            const pos = (utils_1.calcMouseOffsetX(evt, this.container) / cWidth) * 100;\r\n            const range = this.calcRange(pos);\r\n            this.updateRangeSelect(range);\r\n        };\r\n        this.selectRange = (range) => {\r\n            if (utils_1.arrayEqual(this.selectedRange, range)) {\r\n                return;\r\n            }\r\n            const posFrom = this.value2pos(range[0]);\r\n            const posTo = this.value2pos(range[1]);\r\n            if (this.markers[posFrom] && this.markers[posTo]) {\r\n                this.updateRangeSelect(range);\r\n            }\r\n        };\r\n        this.unselectRange = () => {\r\n            this.rangeMasker.style.left = '0px';\r\n            this.rangeMasker.style.width = '0px';\r\n            this.rangeMasker.classList.add('hidden');\r\n            this.selectedRange = [0, 0];\r\n            for (const callback of this.rangeSelectedCallbacks) {\r\n                callback(this.selectedRange, this);\r\n            }\r\n        };\r\n        this.container = container;\r\n        this.rangeMasker = document.createElement('div');\r\n        this.rangeMasker.classList.add('range-mask', 'hidden');\r\n        this.rangeMasker.addEventListener('click', (evt) => {\r\n            evt.stopPropagation();\r\n            this.unselectRange();\r\n        });\r\n        this.container.appendChild(this.rangeMasker);\r\n        this.container.addEventListener('click', (evt) => {\r\n            if (evt.ctrlKey) {\r\n                const pos = this.adjustPos(evt.offsetX);\r\n                this.addMarker(pos);\r\n            }\r\n            else {\r\n                this.onMouseRangeSelect(evt);\r\n            }\r\n        });\r\n        this.container.addEventListener('mouseover', (evt) => {\r\n            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);\r\n            if (evt.ctrlKey) {\r\n                this.makeFloatingMarker(offsetX);\r\n            }\r\n            else {\r\n                this.releaseFloatingMarker();\r\n            }\r\n        });\r\n        this.container.addEventListener('mousemove', (evt) => {\r\n            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);\r\n            if (evt.ctrlKey) {\r\n                this.makeFloatingMarker(offsetX);\r\n            }\r\n            else {\r\n                this.releaseFloatingMarker();\r\n            }\r\n        });\r\n        this.container.addEventListener('mouseout', () => {\r\n            this.releaseFloatingMarker();\r\n        });\r\n        document.addEventListener('mousemove', this.onSelectedMove);\r\n        document.addEventListener('mouseup', this.removeSelect);\r\n        const { min = 0, max = 0, step = 1 } = option;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.markers = {};\r\n    }\r\n}\r\nexports.RangeBar = RangeBar;\r\n//# sourceMappingURL=range.js.map",
+        "\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst lru_cache_1 = __importDefault(require(\"lru-cache\"));\r\nconst common_1 = require(\"./common\");\r\nconst video_1 = require(\"./video\");\r\nconst utils_1 = require(\"./utils\");\r\nclass RecorderPlayerModel extends common_1.BaseModel {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.cache = new lru_cache_1.default({\r\n            max: 10,\r\n        });\r\n        this.metaCache = new lru_cache_1.default({\r\n            max: 100,\r\n        });\r\n        this.fetchStates = {};\r\n        this.refresh_callbacks = [];\r\n        this.addRefereshCallback = (callback) => {\r\n            this.refresh_callbacks.push(callback);\r\n        };\r\n        this.removeRefreshCallback = (callback) => {\r\n            const index = this.refresh_callbacks.indexOf(callback);\r\n            if (index >= 0) {\r\n                this.refresh_callbacks.splice(index, 1);\r\n            }\r\n        };\r\n        this.triggerRefresh = (index, channel) => {\r\n            this.refresh_callbacks.forEach((cb) => {\r\n                cb(index, channel);\r\n            });\r\n        };\r\n        this.createIndexKey = (index) => {\r\n            return index === undefined || index === null ? 'global' : `${index}`;\r\n        };\r\n        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function* () {\r\n            const key = this.createIndexKey(index);\r\n            const cached = this.metaCache.get(key);\r\n            if (cached) {\r\n                return cached;\r\n            }\r\n            const args = {};\r\n            if (index !== undefined) {\r\n                args['index'] = index;\r\n            }\r\n            const { content } = yield this.send_cmd('fetch_meta', args);\r\n            this.metaCache.set(key, content);\r\n            return content;\r\n        });\r\n        this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function* () {\r\n            const key = channel ? `${index}-${channel}` : `${index}`;\r\n            const cached = this.cache.get(key);\r\n            if (cached) {\r\n                return cached;\r\n            }\r\n            let fetchState = this.fetchStates[key];\r\n            if (!fetchState) {\r\n                fetchState = {\r\n                    callbacks: [],\r\n                };\r\n                this.fetchStates[key] = fetchState;\r\n                const { content, buffers } = yield this.send_cmd('fetch_data', {\r\n                    index,\r\n                    channel,\r\n                });\r\n                const { format = this.get('format') } = content;\r\n                const blob = new Blob(buffers, { type: `video/${format}` });\r\n                this.cache.set(key, blob);\r\n                fetchState.callbacks.forEach((callback) => callback(blob));\r\n                delete this.fetchStates[key];\r\n                return blob;\r\n            }\r\n            else {\r\n                let theResolve = undefined;\r\n                fetchState.callbacks.push((blob) => {\r\n                    if (theResolve) {\r\n                        theResolve(blob);\r\n                    }\r\n                    else {\r\n                        throw new Error('This is impossible! No resovle method found. It seems that the promise is not invoked yet.');\r\n                    }\r\n                });\r\n                return new Promise((resolve) => {\r\n                    theResolve = resolve;\r\n                });\r\n            }\r\n        });\r\n        this.invalidateMeta = (index) => {\r\n            const key = this.createIndexKey(index);\r\n            this.metaCache.delete(key);\r\n        };\r\n        this.setMarkers = (index, markers) => __awaiter(this, void 0, void 0, function* () {\r\n            yield this.send_cmd('set_markers', { index, markers });\r\n            this.invalidateMeta(index);\r\n        });\r\n        this.addMessageHandler('channel_stale', (cmdMsg) => {\r\n            const { args = {} } = cmdMsg;\r\n            const { channel } = args;\r\n            if (channel) {\r\n                for (const key of this.cache.keys()) {\r\n                    if (key.endsWith(`-${channel}`)) {\r\n                        this.cache.delete(key);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.cache.clear();\r\n            }\r\n            this.triggerRefresh(undefined, channel);\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: RecorderPlayerModel.model_name, _view_name: RecorderPlayerModel.view_name, format: 'mp4', width: '', height: '', autoplay: true, loop: false, controls: true, autonext: true, selected_index: null, selected_channel: null, selected_range: [0, 0] });\r\n    }\r\n}\r\nexports.RecorderPlayerModel = RecorderPlayerModel;\r\nRecorderPlayerModel.model_name = 'RecorderPlayerModel';\r\nRecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view\r\nclass RecorderPlayerView extends base_1.DOMWidgetView {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.index = -1;\r\n        this.indexSize = 0;\r\n        this.channel = '';\r\n        this.channels = [];\r\n        this.loading = false;\r\n        this.loadStateOnceCallbacks = [];\r\n        this.selectedRange = [0, 0];\r\n        this.isRangeSelected = () => {\r\n            return this.selectedRange[1] > this.selectedRange[0];\r\n        };\r\n        this.addLoadStateOnceCallback = (callback) => {\r\n            this.loadStateOnceCallbacks.push(callback);\r\n        };\r\n        this.setLoading = (loading) => {\r\n            if (this.loading !== loading) {\r\n                this.loading = loading;\r\n                this.loadStateOnceCallbacks.forEach((callback) => callback(loading));\r\n                this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);\r\n            }\r\n        };\r\n        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function* () {\r\n            const { record_count = 0, chanels = [], markers, statistics, } = yield this.model.fetchMeta(index);\r\n            this.indexSize = record_count;\r\n            this.channels = chanels;\r\n            this.markers = markers;\r\n            this.statistics = statistics;\r\n        });\r\n        this.initVideo = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.video) {\r\n                this.video = new video_1.Video();\r\n                this.video.addVideoInitHandler((video) => {\r\n                    video.rangeBar.setMarkers(this.markers);\r\n                });\r\n                this.video.addIndexSelectHandler((i) => {\r\n                    this.load(i, undefined);\r\n                });\r\n                this.video.addChannelSelectHandler((channel) => {\r\n                    this.load(undefined, channel, false, true);\r\n                });\r\n                this.video.rangeBar.addRangeSelectedCallback((range) => {\r\n                    var _a;\r\n                    this.selectedRange = range;\r\n                    if (this.isRangeSelected()) {\r\n                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n                        if (video) {\r\n                            video.currentTime = range[0];\r\n                        }\r\n                        this.model.set('selected_index', this.index);\r\n                        this.model.set('selected_channel', this.channel);\r\n                    }\r\n                    else {\r\n                        this.model.set('selected_index', null);\r\n                        this.model.set('selected_channel', null);\r\n                    }\r\n                    this.model.set('selected_range', range);\r\n                    this.model.save_changes();\r\n                });\r\n                this.video.rangeBar.addMarkersChangeCallback((markers) => {\r\n                    this.markers = markers;\r\n                    this.model.setMarkers(this.index, markers);\r\n                });\r\n                this.model.on('change:selected_index', this.onSelectedIndexChange);\r\n                this.model.on('change:selected_channel', this.onSelectedChannelChange);\r\n                this.model.on('change:selected_range', this.onSelectedRangeChange);\r\n                this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function* () {\r\n                    if (this.isRangeSelected()) {\r\n                        return;\r\n                    }\r\n                    const autonext = this.model.get('autonext');\r\n                    const loop = this.model.get('loop');\r\n                    if (autonext) {\r\n                        if (this.index < this.indexSize - 1) {\r\n                            this.load(this.index + 1, undefined);\r\n                        }\r\n                        else if (this.index === this.indexSize - 1 && loop) {\r\n                            this.load(0, undefined);\r\n                        }\r\n                    }\r\n                }));\r\n                this.video.video.addEventListener('timeupdate', () => {\r\n                    var _a;\r\n                    if (this.isRangeSelected()) {\r\n                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n                        if (video) {\r\n                            if (video.currentTime >= this.selectedRange[1]) {\r\n                                const loop = this.model.get('loop');\r\n                                if (loop) {\r\n                                    video.currentTime = this.selectedRange[0];\r\n                                }\r\n                                else {\r\n                                    video.pause();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                this.el.appendChild(this.video.container);\r\n                this.update();\r\n                yield this.load(0, '');\r\n            }\r\n        });\r\n        this.onSelectedIndexChange = () => {\r\n            const index = this.model.get('selected_index');\r\n            if (index !== undefined && index !== null && this.index !== index) {\r\n                this.load(index, undefined);\r\n            }\r\n        };\r\n        this.onSelectedChannelChange = () => {\r\n            const channel = this.model.get('selected_channel');\r\n            if (channel && this.channel !== channel) {\r\n                this.load(undefined, channel);\r\n            }\r\n        };\r\n        this.onSelectedRangeChange = () => {\r\n            var _a;\r\n            const range = this.model.get('selected_range');\r\n            if (!utils_1.arrayEqual(this.selectedRange, range)) {\r\n                this.selectedRange = range;\r\n                const rangeBar = (_a = this.video) === null || _a === void 0 ? void 0 : _a.rangeBar;\r\n                if (rangeBar) {\r\n                    rangeBar.selectRange(range);\r\n                }\r\n            }\r\n        };\r\n        this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                if (this.loading === loading) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    this.addLoadStateOnceCallback((state) => {\r\n                        if (state === loading) {\r\n                            resolve();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        this.load = (index, channel, force = false, resumeTime = false) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.video) {\r\n                if (typeof index === 'undefined') {\r\n                    index = this.index;\r\n                }\r\n                if (typeof channel === 'undefined') {\r\n                    channel = this.channel;\r\n                }\r\n                if (this.index === index && this.channel === channel && !force) {\r\n                    return;\r\n                }\r\n                yield this.waitForLoading(false);\r\n                this.setLoading(true);\r\n                yield this.fetchMeta(index);\r\n                try {\r\n                    if (this.indexSize > 0) {\r\n                        const blob = yield this.model.fetchData(index, channel);\r\n                        this.video.updateData(blob, resumeTime);\r\n                    }\r\n                    this.index = index;\r\n                    this.channel = channel;\r\n                    this.video.rangeBar.unselectRange();\r\n                    this.video.updateIndexerSize(this.indexSize);\r\n                    this.video.updateIndexerIndex(this.index);\r\n                    this.video.updateChannels(this.channels);\r\n                    this.video.updateStatistics(this.statistics);\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n                finally {\r\n                    this.setLoading(false);\r\n                }\r\n            }\r\n        });\r\n        this.updateWidth = () => {\r\n            var _a, _b;\r\n            const width = this.model.get('width');\r\n            if (width !== undefined && width.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('width', width);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('width');\r\n            }\r\n        };\r\n        this.updateHeight = () => {\r\n            var _a, _b;\r\n            const height = this.model.get('height');\r\n            if (height !== undefined && height.length > 0) {\r\n                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('height', height);\r\n            }\r\n            else {\r\n                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('height');\r\n            }\r\n        };\r\n        this.updateOtherVideoAttributes = () => {\r\n            var _a, _b;\r\n            const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;\r\n            if (video) {\r\n                video.autoplay = this.model.get('autoplay') ? true : false;\r\n                if (this.model.get('autonext')) {\r\n                    video.loop = false;\r\n                }\r\n                else {\r\n                    video.loop = this.model.get('loop') ? true : false;\r\n                }\r\n            }\r\n            (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));\r\n        };\r\n        this.selectedRange = this.model.get('selected_range');\r\n        this.model.addRefereshCallback((i, c) => {\r\n            if (this.index === i &&\r\n                ((!this.channel && !c) || (this.channel && c && this.channel === c))) {\r\n                this.load(undefined, undefined, true);\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        super.render();\r\n        this.initVideo();\r\n    }\r\n    update() {\r\n        this.updateWidth();\r\n        this.updateHeight();\r\n        this.updateOtherVideoAttributes();\r\n        return super.update();\r\n    }\r\n    remove() {\r\n        var _a;\r\n        this.model.off('change:selected_index', this.onSelectedIndexChange);\r\n        this.model.off('change:selected_channel', this.onSelectedChannelChange);\r\n        this.model.off('change:selected_range', this.onSelectedRangeChange);\r\n        (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();\r\n        this.video = undefined;\r\n    }\r\n}\r\nexports.RecorderPlayerView = RecorderPlayerView;\r\n//# sourceMappingURL=recorder.js.map",
+        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcMouseOffsetX = exports.calcPageX = exports.isMac = exports.arrayEqual = exports.arrayRemove = exports.arrayIndexOf = exports.arrayFind = exports.arrayInclude = void 0;\r\nfunction arrayInclude(arr, target) {\r\n    return !!~arr.indexOf(target);\r\n}\r\nexports.arrayInclude = arrayInclude;\r\nfunction arrayFind(arr, cond) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        const e = arr[i];\r\n        if (cond(e, i)) {\r\n            return e;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.arrayFind = arrayFind;\r\nfunction arrayIndexOf(arr, target) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        if (arr[i] === target) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexports.arrayIndexOf = arrayIndexOf;\r\nfunction arrayRemove(arr, target) {\r\n    const index = arrayIndexOf(arr, target);\r\n    if (index !== -1) {\r\n        arr.splice(index, 1);\r\n        return true;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nexports.arrayRemove = arrayRemove;\r\nfunction arrayEqual(arr1, arr2) {\r\n    if (arr1 === arr2) {\r\n        return true;\r\n    }\r\n    return (Array.isArray(arr1) &&\r\n        Array.isArray(arr2) &&\r\n        arr1.length === arr2.length &&\r\n        arr1.every((val, index) => val === arr2[index]));\r\n}\r\nexports.arrayEqual = arrayEqual;\r\nfunction isMac() {\r\n    return window.navigator.userAgent.indexOf('Mac') !== -1;\r\n}\r\nexports.isMac = isMac;\r\nfunction calcPageX(element) {\r\n    const { left } = element.getBoundingClientRect();\r\n    return left + document.body.scrollLeft;\r\n}\r\nexports.calcPageX = calcPageX;\r\nfunction calcMouseOffsetX(evt, target) {\r\n    return evt.pageX - calcPageX(target);\r\n}\r\nexports.calcMouseOffsetX = calcMouseOffsetX;\r\n//# sourceMappingURL=utils.js.map",
         "\"use strict\";\r\n// Copyright (c) Xiaojing Chen\r\n// Distributed under the terms of the Modified BSD License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst data = require('../package.json');\r\n/**\r\n * The _model_module_version/_view_module_version this package implements.\r\n *\r\n * The html widget manager assumes that this is the same as the npm package\r\n * version number.\r\n */\r\nexports.MODULE_VERSION = data.version;\r\n/*\r\n * The current package name.\r\n */\r\nexports.MODULE_NAME = data.name;\r\n//# sourceMappingURL=version.js.map",
-        "\"use strict\";\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Video = exports.createVideoContainer = exports.createVideoProgress = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;\r\nrequire(\"../css/video.css\");\r\nconst utils_1 = require(\"./utils\");\r\nconst svgNS = 'http://www.w3.org/2000/svg';\r\nconst prefix = 'ipywebcam-video-';\r\nfunction makeId(id) {\r\n    return `${prefix}${id}`;\r\n}\r\nexports.makeId = makeId;\r\nfunction createSymbol(id, pathD, viewBox = '0 0 24 24') {\r\n    const symbol = document.createElementNS(svgNS, 'symbol');\r\n    symbol.id = makeId(id);\r\n    symbol.setAttribute('viewBox', viewBox);\r\n    const path = document.createElementNS(svgNS, 'path');\r\n    path.setAttribute('d', pathD);\r\n    symbol.appendChild(path);\r\n    return symbol;\r\n}\r\nfunction createControlsSvg() {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    svg.id = makeId('icons');\r\n    svg.setAttribute('style', 'display: none');\r\n    const defs = document.createElementNS(svgNS, 'defs');\r\n    svg.appendChild(defs);\r\n    defs.appendChild(createSymbol('pause', 'M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z'));\r\n    defs.appendChild(createSymbol('play-icon', 'M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z'));\r\n    defs.appendChild(createSymbol('volume-high', 'M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z'));\r\n    defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));\r\n    defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));\r\n    defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));\r\n    defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));\r\n    defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));\r\n    defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));\r\n    defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));\r\n    return svg;\r\n}\r\nfunction createSelectiveUses(active, ...ids) {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    ids.forEach((id) => {\r\n        const use = document.createElementNS(svgNS, 'use');\r\n        use.classList.add(`use-${id}`);\r\n        use.setAttribute('href', `#${makeId(id)}`);\r\n        if (id !== active) {\r\n            use.classList.add('hidden');\r\n        }\r\n        svg.appendChild(use);\r\n    });\r\n    return svg;\r\n}\r\nexports.createSelectiveUses = createSelectiveUses;\r\nfunction createPlaybackAnimation() {\r\n    const div = document.createElement('div');\r\n    div.id = makeId('playback-animation');\r\n    div.className = 'playback-animation';\r\n    const svg = createSelectiveUses('pause', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    div.appendChild(svg);\r\n    return div;\r\n}\r\nexports.createPlaybackAnimation = createPlaybackAnimation;\r\nfunction createVideoProgress() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('video-progress');\r\n    const progress = document.createElement('progress');\r\n    progress.id = makeId('progress-bar');\r\n    progress.classList.add('progress-bar');\r\n    progress.value = progress.max = 0;\r\n    const input = document.createElement('input');\r\n    input.id = makeId('seek');\r\n    input.classList.add('seek');\r\n    input.type = 'range';\r\n    input.value = '0';\r\n    input.min = '0';\r\n    input.step = '1';\r\n    const tooltip = document.createElement('div');\r\n    tooltip.id = makeId('seek-tooltip');\r\n    tooltip.classList.add('seek-tooltip');\r\n    tooltip.innerText = '00:00';\r\n    container.appendChild(progress);\r\n    container.appendChild(input);\r\n    container.appendChild(tooltip);\r\n    return container;\r\n}\r\nexports.createVideoProgress = createVideoProgress;\r\nfunction createPlaybackButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('play');\r\n    button.classList.add('play');\r\n    button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);\r\n    const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('volume-button');\r\n    button.classList.add('volume-button');\r\n    button.setAttribute('data-title', `Mute (${descShortcut(options.shortcuts.mute)})`);\r\n    const svg = createSelectiveUses('volume-high', 'volume-mute', 'volume-low', 'volume-high');\r\n    svg.classList.add('volume-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeInput() {\r\n    const input = document.createElement('input');\r\n    input.id = makeId('volume');\r\n    input.classList.add('volume');\r\n    input.value = '1';\r\n    input.type = 'range';\r\n    input.min = '0';\r\n    input.max = '1';\r\n    input.step = '0.01';\r\n    input.setAttribute('data-mute', '0.5');\r\n    return input;\r\n}\r\nfunction createVolumeControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('volume-controls');\r\n    const button = createVolumeButton(options);\r\n    container.appendChild(button);\r\n    const input = createVolumeInput();\r\n    container.appendChild(input);\r\n    return container;\r\n}\r\nfunction createTime() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('time');\r\n    const elapsed = document.createElement('time');\r\n    elapsed.id = makeId('time-elapsed');\r\n    elapsed.classList.add('time-elapsed');\r\n    elapsed.innerText = '00:00';\r\n    container.appendChild(elapsed);\r\n    const span = document.createElement('span');\r\n    span.innerText = ' / ';\r\n    container.appendChild(span);\r\n    const duration = document.createElement('time');\r\n    duration.id = makeId('duration');\r\n    duration.classList.add('duration');\r\n    duration.innerText = '00:00';\r\n    container.appendChild(duration);\r\n    return container;\r\n}\r\nfunction createLeftControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('left-controls');\r\n    const playbackButton = createPlaybackButton(options);\r\n    container.appendChild(playbackButton);\r\n    const volumeControls = createVolumeControls(options);\r\n    container.appendChild(volumeControls);\r\n    const time = createTime();\r\n    container.appendChild(time);\r\n    return container;\r\n}\r\nfunction createIndexSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('index-selector');\r\n    container.classList.add('index-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Index');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createSpeedSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('speed-selector');\r\n    container.classList.add('speed-selector');\r\n    container.classList.add('text-button');\r\n    container.setAttribute('data-title', 'Select Speed');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createChannelSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('channel-selector');\r\n    container.classList.add('channel-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Channel');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createPipButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('pip-button');\r\n    button.classList.add('pip-button');\r\n    if (!isPipEnabled()) {\r\n        button.classList.add('hidden');\r\n    }\r\n    button.setAttribute('data-title', `PIP (${descShortcut(options.shortcuts.pip)})`);\r\n    const svg = createSelectiveUses('pip', 'pip');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createFullscreenButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('fullscreen-button');\r\n    button.classList.add('fullscreen-button');\r\n    button.setAttribute('data-title', `Full screen (${descShortcut(options.shortcuts.fullscreen)})`);\r\n    const svg = createSelectiveUses('fullscreen', 'fullscreen', 'fullscreen-exit');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createRightControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('right-controls');\r\n    const indexSelector = createIndexSelector();\r\n    container.appendChild(indexSelector);\r\n    const channelSelector = createChannelSelector();\r\n    container.appendChild(channelSelector);\r\n    const speedSelector = createSpeedSelector();\r\n    container.appendChild(speedSelector);\r\n    const pipButton = createPipButton(options);\r\n    container.appendChild(pipButton);\r\n    const fullscreenButton = createFullscreenButton(options);\r\n    container.appendChild(fullscreenButton);\r\n    return container;\r\n}\r\nfunction createBottomControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('bottom-controls');\r\n    const leftControls = createLeftControls(options);\r\n    container.appendChild(leftControls);\r\n    const rightControls = createRightControls(options);\r\n    container.appendChild(rightControls);\r\n    return container;\r\n}\r\nfunction createVideoControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('video-controls');\r\n    container.tabIndex = 0;\r\n    const videoProgress = createVideoProgress();\r\n    container.appendChild(videoProgress);\r\n    const bottomControls = createBottomControls(options);\r\n    container.appendChild(bottomControls);\r\n    return container;\r\n}\r\nconst VIDEO_WORKS = !!document.createElement('video').canPlayType;\r\nfunction createVideoContainer(options) {\r\n    const container = document.createElement('div');\r\n    container.id = makeId('container');\r\n    container.classList.add('ipywebcam');\r\n    container.classList.add('video-container');\r\n    const playbackAnimation = createPlaybackAnimation();\r\n    container.appendChild(playbackAnimation);\r\n    const video = document.createElement('video');\r\n    video.id = makeId('video');\r\n    video.classList.add('video');\r\n    container.appendChild(video);\r\n    const videoControls = createVideoControls(options);\r\n    container.appendChild(videoControls);\r\n    return container;\r\n}\r\nexports.createVideoContainer = createVideoContainer;\r\nfunction iconShow(svg, id) {\r\n    const uses = svg.getElementsByTagNameNS(svgNS, 'use');\r\n    for (let i = 0; i < uses.length; ++i) {\r\n        const use = uses[i];\r\n        if (use.classList.contains(`use-${id}`)) {\r\n            use.classList.remove('hidden');\r\n        }\r\n        else {\r\n            use.classList.add('hidden');\r\n        }\r\n    }\r\n}\r\nfunction isPipEnabled() {\r\n    return !!document.pictureInPictureEnabled;\r\n}\r\nclass SelectorPannel {\r\n    constructor(options) {\r\n        this.options = [];\r\n        this.optionButtons = [];\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.layout = () => {\r\n            const { width, height } = this.container.getBoundingClientRect();\r\n            this.container.style.left = `-${width / 2}px`;\r\n            this.container.style.top = `-${height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.layout();\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.findOption = (options, label) => {\r\n            for (let i = 0; i < options.length; ++i) {\r\n                const option = options[i];\r\n                if (option.label === label) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        this.updateViewAfterSelect = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.select = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index !== -1) {\r\n                const option = this.options[index];\r\n                (this.clickHandlers || []).forEach((handler) => {\r\n                    handler(option);\r\n                });\r\n                this.updateViewAfterSelect(option.label);\r\n            }\r\n        };\r\n        this.install = (element, handler, initLabel = undefined) => {\r\n            this.trigger = element;\r\n            this.hidden();\r\n            this.addClickHandler(handler);\r\n            element.appendChild(this.container);\r\n            element.addEventListener('click', () => {\r\n                this.toggle();\r\n            });\r\n            if (initLabel) {\r\n                this.select(initLabel);\r\n            }\r\n            return this;\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.createHandler = (option) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    this.select(option.label);\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updateView = (options) => {\r\n            const buttons = this.optionButtons;\r\n            const handlers = this.realClickHandlers;\r\n            const newLen = options.length;\r\n            const oldLen = buttons.length;\r\n            for (let i = 0; i < oldLen; ++i) {\r\n                const button = buttons[i];\r\n                const handler = handlers[i];\r\n                if (i < newLen) {\r\n                    const option = options[i];\r\n                    button.innerText = option.label;\r\n                    button.removeEventListener('click', handler);\r\n                    const newHandler = this.createHandler(option);\r\n                    button.addEventListener('click', newHandler);\r\n                    handlers[i] = newHandler;\r\n                }\r\n                else {\r\n                    button.removeEventListener('click', handler);\r\n                    this.container.removeChild(button);\r\n                }\r\n            }\r\n            if (oldLen > newLen) {\r\n                buttons.splice(newLen, oldLen - newLen);\r\n                handlers.splice(newLen, oldLen - newLen);\r\n            }\r\n            if (oldLen < newLen) {\r\n                for (let i = oldLen; i < newLen; ++i) {\r\n                    const option = options[i];\r\n                    const button = document.createElement('button');\r\n                    button.innerText = option.label;\r\n                    button.classList.add('selector-option');\r\n                    button.classList.add('no-tooltip');\r\n                    button.classList.add(`selector-option-${i}`);\r\n                    button.setAttribute('data-index', `${i}`);\r\n                    const handler = this.createHandler(option);\r\n                    button.addEventListener('click', handler);\r\n                    this.container.appendChild(button);\r\n                    buttons.push(button);\r\n                    handlers.push(handler);\r\n                }\r\n            }\r\n            this.options = options;\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.classList.add('selector-options');\r\n        this.container.tabIndex = -1;\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateView(options);\r\n    }\r\n}\r\nclass IndexSelectorPannel {\r\n    constructor(size) {\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.calcLayout = (pageIndex) => {\r\n            this.row = Math.ceil(this.size / 4);\r\n            this.column = Math.min(this.size, 4);\r\n            this.hasPager = this.row > 6;\r\n            this.pageIndex = pageIndex;\r\n            this.pageSize = Math.ceil(this.size / 24);\r\n            const curRow = this.pageIndex < this.pageSize ? 6 : this.row - (this.pageIndex - 1) * 6;\r\n            this.optionsWidth = this.column * 32 + (this.column - 1) * 6 + 6;\r\n            this.optionsHeight = curRow * 32 + (curRow - 1) * 6 + 6;\r\n            const height = this.optionsHeight + (this.hasPager ? 32 : 0);\r\n            this.container.style.width = `${this.optionsWidth}px`;\r\n            this.container.style.height = `${height}px`;\r\n            this.container.style.left = `${-this.optionsWidth / 2}px`;\r\n            this.container.style.top = `${-height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.calcPageIndexFromIndex = (index) => {\r\n            if (index < 0 || index >= this.size) {\r\n                throw new Error(`Invalid index ${index}`);\r\n            }\r\n            return Math.ceil((index + 1) / 24);\r\n        };\r\n        this.setSelectIndex = (index) => {\r\n            this.updatePage(this.calcPageIndexFromIndex(index));\r\n            this.selected = index;\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.createHandler = (index) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    (this.clickHandlers || []).forEach((handler) => {\r\n                        handler(index);\r\n                    });\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updatePage = (pageIndex) => {\r\n            if (pageIndex !== this.pageIndex) {\r\n                this.calcLayout(pageIndex);\r\n                const optNum = this.pageIndex < this.pageSize ? 24 : this.size % 24;\r\n                let len = this.options.children.length;\r\n                let idx = 0;\r\n                for (let i = 0; i < len; ++i) {\r\n                    const child = this.options.children.item(i);\r\n                    if (child === null || child === void 0 ? void 0 : child.classList.contains('selector-option')) {\r\n                        const button = child;\r\n                        const oldHandler = this.realClickHandlers[idx];\r\n                        const dataIdx = idx + (pageIndex - 1) * 24;\r\n                        if (idx < optNum) {\r\n                            const newHandler = (this.realClickHandlers[idx] =\r\n                                this.createHandler(dataIdx));\r\n                            button.removeEventListener('click', oldHandler);\r\n                            button.addEventListener('click', newHandler);\r\n                            button.innerText = `${dataIdx}`;\r\n                            button.className = '';\r\n                            button.classList.add('selector-option');\r\n                            button.classList.add('no-tooltip');\r\n                            button.classList.add(`selector-option-${dataIdx}`);\r\n                            if (dataIdx === this.selected) {\r\n                                button.classList.add('selected');\r\n                            }\r\n                            else {\r\n                                button.classList.remove('selected');\r\n                            }\r\n                            ++idx;\r\n                        }\r\n                        else {\r\n                            button.removeEventListener('click', oldHandler);\r\n                            this.options.removeChild(button);\r\n                            --i;\r\n                            --len;\r\n                        }\r\n                    }\r\n                }\r\n                if (this.realClickHandlers.length > optNum) {\r\n                    this.realClickHandlers.splice(optNum, this.realClickHandlers.length - optNum);\r\n                }\r\n                if (idx < optNum) {\r\n                    for (let i = idx; i < optNum; ++i) {\r\n                        const dataIdx = i + (pageIndex - 1) * 24;\r\n                        const option = document.createElement('button');\r\n                        option.innerText = `${dataIdx}`;\r\n                        option.classList.add('selector-option');\r\n                        option.classList.add('no-tooltip');\r\n                        option.classList.add(`selector-option-${dataIdx}`);\r\n                        if (dataIdx === this.selected) {\r\n                            option.classList.add('selected');\r\n                        }\r\n                        else {\r\n                            option.classList.remove('selected');\r\n                        }\r\n                        option.setAttribute('data-index', `${dataIdx}`);\r\n                        const handler = this.createHandler(dataIdx);\r\n                        this.realClickHandlers.push(handler);\r\n                        option.addEventListener('click', handler);\r\n                        this.options.appendChild(option);\r\n                    }\r\n                }\r\n                if (this.hasPager) {\r\n                    if (this.pager) {\r\n                        if (this.pagerLeft && this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerLeft) {\r\n                            this.pagerLeft.classList.remove('disabled');\r\n                        }\r\n                        if (this.pagerNumber) {\r\n                            this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        }\r\n                        if (this.pagerRight && this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerRight) {\r\n                            this.pagerRight.classList.remove('disabled');\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.pager = document.createElement('div');\r\n                        this.pager.classList.add('selector-pager');\r\n                        this.pagerLeft = document.createElement('button');\r\n                        this.pagerLeft.classList.add('page-left');\r\n                        this.pagerLeft.classList.add('no-tooltip');\r\n                        this.pagerLeft.tabIndex = -1;\r\n                        this.pagerLeft.appendChild(createSelectiveUses('left-arrow', 'left-arrow'));\r\n                        if (this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        this.pagerLeft.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex > 1) {\r\n                                this.updatePage(this.pageIndex - 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerLeft);\r\n                        this.pagerNumber = document.createElement('div');\r\n                        this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        this.pager.appendChild(this.pagerNumber);\r\n                        this.pagerRight = document.createElement('button');\r\n                        this.pagerRight.classList.add('page-right');\r\n                        this.pagerRight.classList.add('no-tooltip');\r\n                        this.pagerRight.tabIndex = -1;\r\n                        this.pagerRight.appendChild(createSelectiveUses('right-arrow', 'right-arrow'));\r\n                        if (this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        this.pagerRight.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex < this.pageSize) {\r\n                                this.updatePage(this.pageIndex + 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerRight);\r\n                        this.container.appendChild(this.pager);\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.pager) {\r\n                        this.container.removeChild(this.pager);\r\n                        this.pager = undefined;\r\n                        this.pagerNumber = undefined;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.updateSize = (size) => {\r\n            if (this.size !== size) {\r\n                this.size = size;\r\n                this.pageIndex = 0;\r\n                this.updatePage(1);\r\n            }\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.id = makeId('selector-panel');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.tabIndex = -1;\r\n        this.options = document.createElement('div');\r\n        this.options.classList.add('selector-options');\r\n        this.options.classList.add('grid');\r\n        this.container.appendChild(this.options);\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateSize(size);\r\n    }\r\n}\r\nfunction descShortcut(shortcut) {\r\n    const parts = [];\r\n    if (shortcut.ctrl) {\r\n        parts.push('ctrl');\r\n    }\r\n    if (shortcut.alt) {\r\n        parts.push('alt');\r\n    }\r\n    if (shortcut.shift) {\r\n        parts.push('shift');\r\n    }\r\n    parts.push(shortcut.key);\r\n    return parts.join(' + ');\r\n}\r\nconst DEFAULT_OPTIONS = {\r\n    shortcuts: {\r\n        play: 'k',\r\n        mute: 'm',\r\n        fullscreen: 'f',\r\n        pip: 'p',\r\n    },\r\n};\r\nfunction makeShortcut(shortcut) {\r\n    if (typeof shortcut === 'string') {\r\n        return {\r\n            key: shortcut,\r\n            ctrl: false,\r\n            alt: false,\r\n            shift: false,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            key: shortcut.key,\r\n            ctrl: shortcut.ctrl || false,\r\n            alt: shortcut.alt || false,\r\n            shift: shortcut.shift || false,\r\n        };\r\n    }\r\n}\r\nfunction makeOptions(otps) {\r\n    const options = Object.assign({}, DEFAULT_OPTIONS, otps);\r\n    options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);\r\n    options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);\r\n    options.shortcuts.mute = makeShortcut(options.shortcuts.mute);\r\n    options.shortcuts.pip = makeShortcut(options.shortcuts.pip);\r\n    options.shortcuts.play = makeShortcut(options.shortcuts.play);\r\n    return options;\r\n}\r\nconst SpeedOptions = [\r\n    { label: '0.25x', value: 0.25 },\r\n    { label: '0.5x', value: 0.5 },\r\n    { label: '0.75x', value: 0.75 },\r\n    { label: '1.0x', value: 1 },\r\n    { label: '1.25x', value: 1.25 },\r\n    { label: '1.5x', value: 1.5 },\r\n    { label: '1.75x', value: 1.75 },\r\n    { label: '2.0x', value: 2 },\r\n    { label: '2.5x', value: 2.5 },\r\n    { label: '3.0x', value: 3 },\r\n];\r\nclass Video {\r\n    constructor(opts = {}) {\r\n        this.indexSelectHandlers = [];\r\n        this.indexerIndex = -1;\r\n        this.indexerSize = 0;\r\n        this.speed = 1;\r\n        this.channelSelectHandlers = [];\r\n        this.channel = '';\r\n        this.destroy = () => {\r\n            document.removeEventListener('keyup', this.keyboardShortcuts);\r\n            const url = this.video.src;\r\n            this.video.src = '';\r\n            if (url) {\r\n                URL.revokeObjectURL(url);\r\n            }\r\n        };\r\n        this.updateChannels = (channels = []) => {\r\n            if (channels.length > 0) {\r\n                this.channelSelector.classList.remove('hidden');\r\n                const options = [{ label: 'Default', value: '' }];\r\n                channels.forEach((channel) => {\r\n                    options.push({ label: channel, value: channel });\r\n                });\r\n                this.channelSelectorPannel.updateView(options);\r\n                if (!utils_1.arrayInclude(channels, this.channel)) {\r\n                    this.channelSelectorPannel.select('Default');\r\n                }\r\n            }\r\n            else {\r\n                this.channelSelector.classList.add('hidden');\r\n                this.channelSelectorPannel.updateView([]);\r\n            }\r\n        };\r\n        this.addChannelSelectHandler = (handler) => {\r\n            this.channelSelectHandlers.push(handler);\r\n        };\r\n        this.updateIndexerSize = (size) => {\r\n            if (!this.indexSelectorPannel) {\r\n                if (size > 0) {\r\n                    this.indexSelectorPannel = new IndexSelectorPannel(size);\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelectHandlers.forEach((handler) => {\r\n                        var _a;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.addClickHandler(handler);\r\n                    });\r\n                    this.indexSelectorPannel.trigger = this.indexSelector;\r\n                    this.indexSelector.appendChild(this.indexSelectorPannel.container);\r\n                    this.indexSelector.addEventListener('click', () => {\r\n                        var _a, _b;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.toggle();\r\n                        const index = this.indexSelector.getAttribute('data-index');\r\n                        if (index) {\r\n                            (_b = this.indexSelectorPannel) === null || _b === void 0 ? void 0 : _b.setSelectIndex(Number.parseInt(index));\r\n                        }\r\n                    });\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                if (size <= 0) {\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelectorPannel.updateSize(size);\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n            }\r\n            this.indexerSize = size;\r\n        };\r\n        this.updateIndexerIndex = (index) => {\r\n            var _a;\r\n            const text = this.indexSelector.querySelector('div.text');\r\n            text.innerText = `${index}`;\r\n            this.indexSelector.setAttribute('data-index', `${index}`);\r\n            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.setSelectIndex(index);\r\n            this.indexerIndex = index;\r\n        };\r\n        this.addIndexSelectHandler = (handler) => {\r\n            this.indexSelectHandlers.push(handler);\r\n            if (this.indexSelectorPannel) {\r\n                this.indexSelectorPannel.addClickHandler(handler);\r\n            }\r\n        };\r\n        this.updateData = (blob, resumeTime = false) => {\r\n            const oldUrl = this.video.src;\r\n            const url = URL.createObjectURL(blob);\r\n            this.video.src = url;\r\n            if (oldUrl) {\r\n                this.video.load();\r\n                if (resumeTime && this.currentTime) {\r\n                    this.video.currentTime = this.currentTime;\r\n                }\r\n                URL.revokeObjectURL(oldUrl);\r\n            }\r\n        };\r\n        this.installSvg = () => {\r\n            const id = makeId('icons');\r\n            const svg = document.getElementById(id);\r\n            if (!svg) {\r\n                document.body.appendChild(createControlsSvg());\r\n            }\r\n        };\r\n        this.togglePlay = () => {\r\n            if (this.video.paused || this.video.ended) {\r\n                this.video.play();\r\n            }\r\n            else {\r\n                this.video.pause();\r\n            }\r\n        };\r\n        this.enableControls = (enabled) => {\r\n            if (enabled) {\r\n                if (VIDEO_WORKS) {\r\n                    this.video.controls = false;\r\n                    this.videoControls.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.video.controls = true;\r\n                    this.videoControls.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                this.video.controls = false;\r\n                this.videoControls.classList.add('hidden');\r\n            }\r\n        };\r\n        this.updatePlayButton = () => {\r\n            const svg = this.playButton.getElementsByClassName('playback-icons')[0];\r\n            const shortcut = descShortcut(this.options.shortcuts.play);\r\n            if (this.video.paused || this.video.ended) {\r\n                iconShow(svg, 'play-icon');\r\n                this.playButton.setAttribute('data-title', `Play (${shortcut})`);\r\n            }\r\n            else {\r\n                iconShow(svg, 'pause');\r\n                this.playButton.setAttribute('data-title', `Pause (${shortcut})`);\r\n            }\r\n        };\r\n        this.initializeVideo = () => {\r\n            const videoDuration = Math.floor(this.video.duration);\r\n            this.seek.setAttribute('max', `${videoDuration}`);\r\n            this.progress.setAttribute('max', `${videoDuration}`);\r\n            const time = formatTime(videoDuration);\r\n            this.duration.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n        };\r\n        this.updateCurrentTime = () => {\r\n            this.currentTime = this.video.currentTime;\r\n        };\r\n        // updateTimeElapsed indicates how far through the video\r\n        // the current playback is by updating the timeElapsed element\r\n        this.updateTimeElapsed = () => {\r\n            const time = formatTime(Math.floor(this.video.currentTime));\r\n            this.timeElapsed.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n        };\r\n        // updateProgress indicates how far through the video\r\n        // the current playback is by updating the progress bar\r\n        this.updateProgress = () => {\r\n            this.seek.value = `${Math.floor(this.video.currentTime)}`;\r\n            this.progress.value = Math.floor(this.video.currentTime);\r\n        };\r\n        // updateSeekTooltip uses the position of the mouse on the progress bar to\r\n        // roughly work out what point in the video the user will skip to if\r\n        // the progress bar is clicked at that point\r\n        this.updateSeekTooltip = (event) => {\r\n            const skipTo = Math.round((event.offsetX / this.seek.clientWidth) *\r\n                parseInt(this.seek.getAttribute('max') || '0', 10));\r\n            this.seek.setAttribute('data-seek', `${skipTo}`);\r\n            const t = formatTime(skipTo);\r\n            this.seekTooltip.textContent = `${t.minutes}:${t.seconds}`;\r\n            const rect = this.video.getBoundingClientRect();\r\n            this.seekTooltip.style.left = `${event.pageX - rect.left}px`;\r\n        };\r\n        // skipAhead jumps to a different point in the video when the progress bar\r\n        // is clicked\r\n        this.skipAhead = () => {\r\n            const skipTo = this.seek.dataset.seek\r\n                ? this.seek.dataset.seek\r\n                : this.seek.value;\r\n            this.video.currentTime = Number.parseFloat(skipTo);\r\n            this.progress.value = Number.parseFloat(skipTo);\r\n            this.seek.value = skipTo;\r\n        };\r\n        // updateVolume updates the video's volume\r\n        // and disables the muted state if active\r\n        this.updateVolume = () => {\r\n            if (this.video.muted) {\r\n                this.video.muted = false;\r\n            }\r\n            this.video.volume = Number.parseFloat(this.volume.value);\r\n        };\r\n        // updateVolumeIcon updates the volume icon so that it correctly reflects\r\n        // the volume of the video\r\n        this.updateVolumeIcon = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.mute);\r\n            this.volumeButton.setAttribute('data-title', `Mute (${shortcut})`);\r\n            if (this.video.muted || this.video.volume === 0) {\r\n                this.volumeButton.setAttribute('data-title', `Unmute (${shortcut})`);\r\n                iconShow(this.volumeIcons, 'volume-mute');\r\n            }\r\n            else if (this.video.volume > 0 && this.video.volume <= 0.5) {\r\n                iconShow(this.volumeIcons, 'volume-low');\r\n            }\r\n            else {\r\n                iconShow(this.volumeIcons, 'volume-high');\r\n            }\r\n        };\r\n        // toggleMute mutes or unmutes the video when executed\r\n        // When the video is unmuted, the volume is returned to the value\r\n        // it was set to before the video was muted\r\n        this.toggleMute = () => {\r\n            this.video.muted = !this.video.muted;\r\n            if (this.video.muted) {\r\n                this.volume.setAttribute('data-volume', this.volume.value);\r\n                this.volume.value = '0';\r\n            }\r\n            else {\r\n                this.volume.value = this.volume.dataset.volume || `${this.video.volume}`;\r\n            }\r\n        };\r\n        // animatePlayback displays an animation when\r\n        // the video is played or paused\r\n        this.animatePlayback = () => {\r\n            this.playbackAnimation.animate([\r\n                {\r\n                    opacity: 1,\r\n                    transform: 'scale(1)',\r\n                },\r\n                {\r\n                    opacity: 0,\r\n                    transform: 'scale(1.3)',\r\n                },\r\n            ], {\r\n                duration: 500,\r\n            });\r\n        };\r\n        // toggleFullScreen toggles the full screen state of the video\r\n        // If the browser is currently in fullscreen mode,\r\n        // then it should exit and vice versa.\r\n        this.toggleFullScreen = () => {\r\n            if (document.fullscreenElement) {\r\n                document.exitFullscreen();\r\n            }\r\n            else if (document.webkitFullscreenElement) {\r\n                // Need this to support Safari\r\n                document.webkitExitFullscreen();\r\n            }\r\n            else if (this.container.webkitRequestFullscreen) {\r\n                // Need this to support Safari\r\n                this.container.webkitRequestFullscreen();\r\n            }\r\n            else {\r\n                this.container.requestFullscreen();\r\n            }\r\n        };\r\n        this.isFullscreen = () => {\r\n            return (document.fullscreenElement ||\r\n                document.webkitFullscreenElement ||\r\n                this.container.webkitRequestFullscreen);\r\n        };\r\n        // updateFullscreenButton changes the icon of the full screen button\r\n        // and tooltip to reflect the current full screen state of the video\r\n        this.updateFullscreenButton = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.fullscreen);\r\n            if (this.isFullscreen()) {\r\n                this.fullscreenButton.setAttribute('data-title', `Exit full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen-exit');\r\n            }\r\n            else {\r\n                this.fullscreenButton.setAttribute('data-title', `Full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen');\r\n            }\r\n        };\r\n        // togglePip toggles Picture-in-Picture mode on the video\r\n        this.togglePip = () => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                if (this.video !== document.pictureInPictureElement) {\r\n                    this.pipButton.disabled = true;\r\n                    yield this.video.requestPictureInPicture();\r\n                }\r\n                else {\r\n                    yield document.exitPictureInPicture();\r\n                }\r\n            }\r\n            catch (error) {\r\n                console.error(error);\r\n            }\r\n            finally {\r\n                this.pipButton.disabled = false;\r\n            }\r\n        });\r\n        // hideControls hides the video controls when not in use\r\n        // if the video is paused, the controls must remain visible\r\n        this.hideControls = () => {\r\n            if (this.video.paused) {\r\n                return;\r\n            }\r\n            this.videoControls.classList.add('hide');\r\n        };\r\n        // showControls displays the video controls\r\n        this.showControls = () => {\r\n            this.videoControls.classList.remove('hide');\r\n        };\r\n        this.isInFocus = () => {\r\n            var _a;\r\n            return ((_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.contains(this.container)) || false;\r\n        };\r\n        // keyboardShortcuts executes the relevant functions for\r\n        // each supported shortcut key\r\n        this.keyboardShortcuts = (event) => {\r\n            if (!this.isInFocus()) {\r\n                return;\r\n            }\r\n            const { key, ctrlKey, altKey, shiftKey } = event;\r\n            const { play, mute, fullscreen, pip } = this.options.shortcuts;\r\n            if (key === play.key &&\r\n                (play.ctrl === !!ctrlKey ||\r\n                    play.alt === !!altKey ||\r\n                    play.shift === !!shiftKey)) {\r\n                this.togglePlay();\r\n                this.animatePlayback();\r\n                if (this.video.paused) {\r\n                    this.showControls();\r\n                }\r\n                else {\r\n                    setTimeout(() => {\r\n                        this.hideControls();\r\n                    }, 2000);\r\n                }\r\n            }\r\n            else if (key === mute.key &&\r\n                (mute.ctrl === !!ctrlKey ||\r\n                    mute.alt === !!altKey ||\r\n                    mute.shift === !!shiftKey)) {\r\n                this.toggleMute();\r\n            }\r\n            else if (key === fullscreen.key &&\r\n                (fullscreen.ctrl === !!ctrlKey ||\r\n                    fullscreen.alt === !!altKey ||\r\n                    fullscreen.shift === !!shiftKey)) {\r\n                this.toggleFullScreen();\r\n            }\r\n            else if (key === pip.key &&\r\n                (pip.ctrl === !!ctrlKey ||\r\n                    pip.alt === !!altKey ||\r\n                    pip.shift === !!shiftKey)) {\r\n                this.togglePip();\r\n            }\r\n        };\r\n        this.options = makeOptions(opts);\r\n        this.installSvg();\r\n        this.container = createVideoContainer(this.options);\r\n        this.video = this.container.querySelector('video.video');\r\n        this.videoControls = this.container.querySelector('div.video-controls');\r\n        this.playButton = this.container.querySelector('button.play');\r\n        this.timeElapsed = this.container.querySelector('time.time-elapsed');\r\n        this.duration = this.container.querySelector('time.duration');\r\n        this.progress = this.container.querySelector('progress.progress-bar');\r\n        this.seek = this.container.querySelector('input.seek');\r\n        this.seekTooltip = this.container.querySelector('div.seek-tooltip');\r\n        this.volume = this.container.querySelector('input.volume');\r\n        this.volumeButton = this.container.querySelector('button.volume-button');\r\n        this.volumeIcons = this.volumeButton.querySelector('svg');\r\n        this.playbackAnimation = this.container.querySelector('div.playback-animation');\r\n        this.fullscreenButton = this.container.querySelector('button.fullscreen-button');\r\n        this.fullscreenIcons = this.fullscreenButton.querySelector('svg');\r\n        this.pipButton = this.container.querySelector('button.pip-button');\r\n        this.indexSelector = this.container.querySelector('button.index-selector');\r\n        this.speedSelector = this.container.querySelector('button.speed-selector');\r\n        this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {\r\n            const text = this.speedSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.video.playbackRate = option.value;\r\n            this.speed = option.value;\r\n        }, '1.0x');\r\n        this.channelSelector = this.container.querySelector('button.channel-selector');\r\n        this.channelSelectorPannel = new SelectorPannel([]).install(this.channelSelector, (option) => {\r\n            const text = this.channelSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.channelSelectHandlers.forEach((handler) => {\r\n                handler(option.value);\r\n            });\r\n            this.channel = option.value;\r\n        });\r\n        this.playButton.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('play', this.updateCurrentTime);\r\n        this.video.addEventListener('play', this.updatePlayButton);\r\n        this.video.addEventListener('play', () => {\r\n            this.video.playbackRate = this.speed;\r\n        });\r\n        this.video.addEventListener('pause', this.updatePlayButton);\r\n        this.video.addEventListener('loadedmetadata', this.initializeVideo);\r\n        this.video.addEventListener('timeupdate', this.updateCurrentTime);\r\n        this.video.addEventListener('timeupdate', this.updateTimeElapsed);\r\n        this.video.addEventListener('timeupdate', this.updateProgress);\r\n        this.video.addEventListener('volumechange', this.updateVolumeIcon);\r\n        this.video.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('click', this.animatePlayback);\r\n        this.video.addEventListener('mouseenter', this.showControls);\r\n        this.video.addEventListener('mouseleave', this.hideControls);\r\n        this.videoControls.addEventListener('mouseenter', this.showControls);\r\n        this.videoControls.addEventListener('mouseleave', this.hideControls);\r\n        this.seek.addEventListener('mousemove', this.updateSeekTooltip);\r\n        this.seek.addEventListener('input', this.skipAhead);\r\n        this.volume.addEventListener('input', this.updateVolume);\r\n        this.volumeButton.addEventListener('click', this.toggleMute);\r\n        this.fullscreenButton.addEventListener('click', this.toggleFullScreen);\r\n        this.container.addEventListener('fullscreenchange', this.updateFullscreenButton);\r\n        this.pipButton.addEventListener('click', this.togglePip);\r\n        document.addEventListener('keyup', this.keyboardShortcuts);\r\n    }\r\n}\r\nexports.Video = Video;\r\n// formatTime takes a time length in seconds and returns the time in\r\n// minutes and seconds\r\nfunction formatTime(timeInSeconds) {\r\n    const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);\r\n    return {\r\n        minutes: result.substr(3, 2),\r\n        seconds: result.substr(6, 2),\r\n    };\r\n}\r\n//# sourceMappingURL=video.js.map",
+        "\"use strict\";\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Video = exports.createVideoContainer = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;\r\nrequire(\"../css/video.css\");\r\nconst charts_1 = require(\"./charts\");\r\nconst range_1 = require(\"./range\");\r\nconst utils_1 = require(\"./utils\");\r\nconst svgNS = 'http://www.w3.org/2000/svg';\r\nconst prefix = 'ipywebcam-video-';\r\nfunction makeId(id) {\r\n    return `${prefix}${id}`;\r\n}\r\nexports.makeId = makeId;\r\nfunction createSymbol(id, pathD, viewBox = '0 0 24 24', gTrans = '') {\r\n    const symbol = document.createElementNS(svgNS, 'symbol');\r\n    symbol.id = makeId(id);\r\n    symbol.setAttribute('viewBox', viewBox);\r\n    if (Array.isArray(pathD)) {\r\n        const group = document.createElementNS(svgNS, 'g');\r\n        if (gTrans) {\r\n            group.setAttribute('transform', gTrans);\r\n        }\r\n        for (const p of pathD) {\r\n            const path = document.createElementNS(svgNS, 'path');\r\n            path.setAttribute('d', p);\r\n            group.appendChild(path);\r\n        }\r\n        symbol.appendChild(group);\r\n    }\r\n    else {\r\n        const path = document.createElementNS(svgNS, 'path');\r\n        path.setAttribute('d', pathD);\r\n        symbol.appendChild(path);\r\n    }\r\n    return symbol;\r\n}\r\nfunction createControlsSvg() {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    svg.id = makeId('icons');\r\n    svg.setAttribute('style', 'display: none');\r\n    const defs = document.createElementNS(svgNS, 'defs');\r\n    svg.appendChild(defs);\r\n    defs.appendChild(createSymbol('pause', 'M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z'));\r\n    defs.appendChild(createSymbol('play-icon', 'M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z'));\r\n    defs.appendChild(createSymbol('volume-high', 'M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z'));\r\n    defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));\r\n    defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));\r\n    defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));\r\n    defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));\r\n    defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));\r\n    defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));\r\n    defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));\r\n    defs.appendChild(createSymbol('statistics', [\r\n        'M2096 2741 c-15 -10 -37 -32 -47 -47 -18 -28 -19 -65 -19 -984 l0 -955 25 -37 c32 -48 47 -50 268 -46 l179 3 29 33 29 32 0 969 c0 967 0 968 -21 995 -40 50 -64 56 -246 56 -148 0 -171 -2 -197 -19z',\r\n        'M1308 2088 c-30 -8 -41 -18 -58 -52 -19 -41 -20 -58 -20 -643 0 -330 3 -613 6 -629 3 -16 16 -42 30 -59 l24 -30 210 0 210 0 24 30 c14 17 27 43 30 59 3 16 6 299 6 629 0 584 -1 602 -20 643 -18 36 -27 43 -65 53 -53 13 -326 13 -377 -1z',\r\n        'M504 1426 c-64 -28 -64 -28 -64 -373 l0 -313 29 -32 29 -33 179 -3 c221 -4 236 -2 268 46 l25 37 0 293 c0 328 -3 347 -65 376 -44 21 -353 22 -401 2z',\r\n        'M42 468 c-39 -32 -41 -35 -41 -91 -1 -42 3 -59 14 -63 8 -3 17 -13 20 -23 3 -9 18 -24 34 -34 27 -16 124 -17 1431 -17 1307 0 1404 1 1431 17 16 10 31 25 34 34 3 10 12 20 20 23 11 4 15 21 15 58 0 49 -3 56 -40 91 l-40 37 -1419 0 -1419 0 -40 -32z',\r\n    ], '0 0 1000 1000', 'translate(100, 900) scale(0.25, -0.25)'));\r\n    return svg;\r\n}\r\nfunction createSelectiveUses(active, ...ids) {\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    ids.forEach((id) => {\r\n        const use = document.createElementNS(svgNS, 'use');\r\n        use.classList.add(`use-${id}`);\r\n        use.setAttribute('href', `#${makeId(id)}`);\r\n        if (id !== active) {\r\n            use.classList.add('hidden');\r\n        }\r\n        svg.appendChild(use);\r\n    });\r\n    return svg;\r\n}\r\nexports.createSelectiveUses = createSelectiveUses;\r\nfunction createPlaybackAnimation() {\r\n    const div = document.createElement('div');\r\n    div.id = makeId('playback-animation');\r\n    div.className = 'playback-animation';\r\n    const svg = createSelectiveUses('pause', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    div.appendChild(svg);\r\n    return div;\r\n}\r\nexports.createPlaybackAnimation = createPlaybackAnimation;\r\nfunction createVideoProgress() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('video-progress');\r\n    const progress = document.createElement('progress');\r\n    progress.id = makeId('progress-bar');\r\n    progress.classList.add('progress-bar');\r\n    progress.value = progress.max = 0;\r\n    const input = document.createElement('input');\r\n    input.id = makeId('seek');\r\n    input.classList.add('seek');\r\n    input.type = 'range';\r\n    input.value = '0';\r\n    input.min = '0';\r\n    input.step = '1';\r\n    const rangeBar = document.createElement('div');\r\n    rangeBar.setAttribute('draggable', 'false');\r\n    rangeBar.classList.add('range-bar', 'hidden');\r\n    const tooltip = document.createElement('div');\r\n    tooltip.id = makeId('seek-tooltip');\r\n    tooltip.classList.add('seek-tooltip');\r\n    tooltip.innerText = '00:00';\r\n    container.appendChild(progress);\r\n    container.appendChild(input);\r\n    container.appendChild(tooltip);\r\n    container.appendChild(rangeBar);\r\n    return container;\r\n}\r\nfunction createStatisticsContainer() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('statistics-container', 'hidden', 'unused');\r\n    const svg = document.createElementNS(svgNS, 'svg');\r\n    container.appendChild(svg);\r\n    return container;\r\n}\r\nfunction createPlaybackButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('play');\r\n    button.classList.add('play');\r\n    button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);\r\n    const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');\r\n    svg.classList.add('playback-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('volume-button');\r\n    button.classList.add('volume-button');\r\n    button.setAttribute('data-title', `Mute (${descShortcut(options.shortcuts.mute)})`);\r\n    const svg = createSelectiveUses('volume-high', 'volume-mute', 'volume-low', 'volume-high');\r\n    svg.classList.add('volume-icons');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createVolumeInput() {\r\n    const input = document.createElement('input');\r\n    input.id = makeId('volume');\r\n    input.classList.add('volume');\r\n    input.value = '1';\r\n    input.type = 'range';\r\n    input.min = '0';\r\n    input.max = '1';\r\n    input.step = '0.01';\r\n    input.setAttribute('data-mute', '0.5');\r\n    return input;\r\n}\r\nfunction createVolumeControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('volume-controls');\r\n    const button = createVolumeButton(options);\r\n    container.appendChild(button);\r\n    const input = createVolumeInput();\r\n    container.appendChild(input);\r\n    return container;\r\n}\r\nfunction createTime() {\r\n    const container = document.createElement('div');\r\n    container.classList.add('time');\r\n    const elapsed = document.createElement('time');\r\n    elapsed.id = makeId('time-elapsed');\r\n    elapsed.classList.add('time-elapsed');\r\n    elapsed.innerText = '00:00';\r\n    container.appendChild(elapsed);\r\n    const span = document.createElement('span');\r\n    span.innerText = ' / ';\r\n    container.appendChild(span);\r\n    const duration = document.createElement('time');\r\n    duration.id = makeId('duration');\r\n    duration.classList.add('duration');\r\n    duration.innerText = '00:00';\r\n    container.appendChild(duration);\r\n    return container;\r\n}\r\nfunction createLeftControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('left-controls');\r\n    const playbackButton = createPlaybackButton(options);\r\n    container.appendChild(playbackButton);\r\n    const volumeControls = createVolumeControls(options);\r\n    container.appendChild(volumeControls);\r\n    const time = createTime();\r\n    container.appendChild(time);\r\n    return container;\r\n}\r\nfunction createIndexSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('index-selector');\r\n    container.classList.add('index-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Index');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createSpeedSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('speed-selector');\r\n    container.classList.add('speed-selector');\r\n    container.classList.add('text-button');\r\n    container.setAttribute('data-title', 'Select Speed');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createChannelSelector() {\r\n    const container = document.createElement('button');\r\n    container.id = makeId('channel-selector');\r\n    container.classList.add('channel-selector');\r\n    container.classList.add('text-button');\r\n    container.classList.add('hidden');\r\n    container.setAttribute('data-title', 'Select Channel');\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createStatsSelector() {\r\n    const container = document.createElement('button');\r\n    container.classList.add('stats-selector', 'hidden');\r\n    container.setAttribute('data-title', 'Select Statistics Type');\r\n    const icon = createSelectiveUses('statistics', 'statistics');\r\n    icon.classList.add('icon');\r\n    container.appendChild(icon);\r\n    const text = document.createElement('div');\r\n    text.classList.add('text');\r\n    container.appendChild(text);\r\n    return container;\r\n}\r\nfunction createPipButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('pip-button');\r\n    button.classList.add('pip-button');\r\n    if (!isPipEnabled()) {\r\n        button.classList.add('hidden');\r\n    }\r\n    button.setAttribute('data-title', `PIP (${descShortcut(options.shortcuts.pip)})`);\r\n    const svg = createSelectiveUses('pip', 'pip');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createFullscreenButton(options) {\r\n    const button = document.createElement('button');\r\n    button.id = makeId('fullscreen-button');\r\n    button.classList.add('fullscreen-button');\r\n    button.setAttribute('data-title', `Full screen (${descShortcut(options.shortcuts.fullscreen)})`);\r\n    const svg = createSelectiveUses('fullscreen', 'fullscreen', 'fullscreen-exit');\r\n    button.appendChild(svg);\r\n    return button;\r\n}\r\nfunction createRightControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('right-controls');\r\n    const statsSelector = createStatsSelector();\r\n    container.appendChild(statsSelector);\r\n    const indexSelector = createIndexSelector();\r\n    container.appendChild(indexSelector);\r\n    const channelSelector = createChannelSelector();\r\n    container.appendChild(channelSelector);\r\n    const speedSelector = createSpeedSelector();\r\n    container.appendChild(speedSelector);\r\n    const pipButton = createPipButton(options);\r\n    container.appendChild(pipButton);\r\n    const fullscreenButton = createFullscreenButton(options);\r\n    container.appendChild(fullscreenButton);\r\n    return container;\r\n}\r\nfunction createBottomControls(options) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('bottom-controls');\r\n    const leftControls = createLeftControls(options);\r\n    container.appendChild(leftControls);\r\n    const rightControls = createRightControls(options);\r\n    container.appendChild(rightControls);\r\n    return container;\r\n}\r\nfunction createVideoControls(options) {\r\n    const container = document.createElement('div');\r\n    container.setAttribute('draggable', 'false');\r\n    container.classList.add('video-controls');\r\n    container.tabIndex = 0;\r\n    const videoProgress = createVideoProgress();\r\n    container.appendChild(videoProgress);\r\n    const statistics = createStatisticsContainer();\r\n    container.appendChild(statistics);\r\n    const bottomControls = createBottomControls(options);\r\n    container.appendChild(bottomControls);\r\n    return container;\r\n}\r\nconst VIDEO_WORKS = !!document.createElement('video').canPlayType;\r\nfunction createVideoContainer(options) {\r\n    const container = document.createElement('div');\r\n    container.id = makeId('container');\r\n    container.classList.add('ipywebcam');\r\n    container.classList.add('video-container');\r\n    const playbackAnimation = createPlaybackAnimation();\r\n    container.appendChild(playbackAnimation);\r\n    const video = document.createElement('video');\r\n    video.id = makeId('video');\r\n    video.classList.add('video');\r\n    container.appendChild(video);\r\n    const videoControls = createVideoControls(options);\r\n    container.appendChild(videoControls);\r\n    return container;\r\n}\r\nexports.createVideoContainer = createVideoContainer;\r\nfunction iconShow(svg, id) {\r\n    const uses = svg.getElementsByTagNameNS(svgNS, 'use');\r\n    for (let i = 0; i < uses.length; ++i) {\r\n        const use = uses[i];\r\n        if (use.classList.contains(`use-${id}`)) {\r\n            use.classList.remove('hidden');\r\n        }\r\n        else {\r\n            use.classList.add('hidden');\r\n        }\r\n    }\r\n}\r\nfunction isPipEnabled() {\r\n    return !!document.pictureInPictureEnabled;\r\n}\r\nclass SelectorPannel {\r\n    constructor(options) {\r\n        this.options = [];\r\n        this.optionButtons = [];\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.layout = () => {\r\n            const { width, height } = this.container.getBoundingClientRect();\r\n            this.container.style.left = `-${width / 2}px`;\r\n            this.container.style.top = `-${height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.layout();\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.findOption = (options, label) => {\r\n            for (let i = 0; i < options.length; ++i) {\r\n                const option = options[i];\r\n                if (option.label === label) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        this.updateViewAfterSelect = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.select = (label) => {\r\n            const index = this.findOption(this.options, label);\r\n            if (index !== -1) {\r\n                const option = this.options[index];\r\n                (this.clickHandlers || []).forEach((handler) => {\r\n                    handler(option);\r\n                });\r\n                this.updateViewAfterSelect(option.label);\r\n            }\r\n        };\r\n        this.install = (element, handler, initLabel = undefined) => {\r\n            this.trigger = element;\r\n            this.hidden();\r\n            this.addClickHandler(handler);\r\n            element.appendChild(this.container);\r\n            element.addEventListener('click', () => {\r\n                this.toggle();\r\n            });\r\n            if (initLabel) {\r\n                this.select(initLabel);\r\n            }\r\n            return this;\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.createHandler = (option) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    this.select(option.label);\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updateView = (options) => {\r\n            const buttons = this.optionButtons;\r\n            const handlers = this.realClickHandlers;\r\n            const newLen = options.length;\r\n            const oldLen = buttons.length;\r\n            for (let i = 0; i < oldLen; ++i) {\r\n                const button = buttons[i];\r\n                const handler = handlers[i];\r\n                if (i < newLen) {\r\n                    const option = options[i];\r\n                    button.innerText = option.label;\r\n                    button.removeEventListener('click', handler);\r\n                    const newHandler = this.createHandler(option);\r\n                    button.addEventListener('click', newHandler);\r\n                    handlers[i] = newHandler;\r\n                }\r\n                else {\r\n                    button.removeEventListener('click', handler);\r\n                    this.container.removeChild(button);\r\n                }\r\n            }\r\n            if (oldLen > newLen) {\r\n                buttons.splice(newLen, oldLen - newLen);\r\n                handlers.splice(newLen, oldLen - newLen);\r\n            }\r\n            if (oldLen < newLen) {\r\n                for (let i = oldLen; i < newLen; ++i) {\r\n                    const option = options[i];\r\n                    const button = document.createElement('button');\r\n                    button.innerText = option.label;\r\n                    button.classList.add('selector-option');\r\n                    button.classList.add('no-tooltip');\r\n                    button.classList.add(`selector-option-${i}`);\r\n                    button.setAttribute('data-index', `${i}`);\r\n                    const handler = this.createHandler(option);\r\n                    button.addEventListener('click', handler);\r\n                    this.container.appendChild(button);\r\n                    buttons.push(button);\r\n                    handlers.push(handler);\r\n                }\r\n            }\r\n            this.options = options;\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.classList.add('selector-options');\r\n        this.container.tabIndex = -1;\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateView(options);\r\n    }\r\n}\r\nclass IndexSelectorPannel {\r\n    constructor(size) {\r\n        this.clickHandlers = [];\r\n        this.realClickHandlers = [];\r\n        this.calcLayout = (pageIndex) => {\r\n            this.row = Math.ceil(this.size / 4);\r\n            this.column = Math.min(this.size, 4);\r\n            this.hasPager = this.row > 6;\r\n            this.pageIndex = pageIndex;\r\n            this.pageSize = Math.ceil(this.size / 24);\r\n            const curRow = this.pageIndex < this.pageSize ? 6 : this.row - (this.pageIndex - 1) * 6;\r\n            this.optionsWidth = this.column * 32 + (this.column - 1) * 6 + 6;\r\n            this.optionsHeight = curRow * 32 + (curRow - 1) * 6 + 6;\r\n            const height = this.optionsHeight + (this.hasPager ? 32 : 0);\r\n            this.container.style.width = `${this.optionsWidth}px`;\r\n            this.container.style.height = `${height}px`;\r\n            this.container.style.left = `${-this.optionsWidth / 2}px`;\r\n            this.container.style.top = `${-height}px`;\r\n        };\r\n        this.show = () => {\r\n            this.container.classList.remove('hidden');\r\n            this.container.focus();\r\n        };\r\n        this.hidden = () => {\r\n            this.container.classList.add('hidden');\r\n        };\r\n        this.toggle = () => {\r\n            if (this.container.classList.contains('hidden')) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hidden();\r\n            }\r\n        };\r\n        this.addClickHandler = (handler) => {\r\n            this.clickHandlers.push(handler);\r\n        };\r\n        this.calcPageIndexFromIndex = (index) => {\r\n            if (index < 0 || index >= this.size) {\r\n                throw new Error(`Invalid index ${index}`);\r\n            }\r\n            return Math.ceil((index + 1) / 24);\r\n        };\r\n        this.setSelectIndex = (index) => {\r\n            this.updatePage(this.calcPageIndexFromIndex(index));\r\n            this.selected = index;\r\n            this.container.querySelectorAll('button.selector-option').forEach((e) => {\r\n                e.classList.remove('selected');\r\n            });\r\n            const option = this.container.querySelector(`button.selector-option-${index}`);\r\n            if (option) {\r\n                option.classList.add('selected');\r\n            }\r\n        };\r\n        this.createHandler = (index) => {\r\n            return (evt) => {\r\n                evt.stopPropagation();\r\n                try {\r\n                    (this.clickHandlers || []).forEach((handler) => {\r\n                        handler(index);\r\n                    });\r\n                    this.hidden();\r\n                }\r\n                catch (e) {\r\n                    console.error(e);\r\n                }\r\n            };\r\n        };\r\n        this.updatePage = (pageIndex) => {\r\n            if (pageIndex !== this.pageIndex) {\r\n                this.calcLayout(pageIndex);\r\n                const optNum = this.pageIndex < this.pageSize ? 24 : this.size % 24;\r\n                let len = this.options.children.length;\r\n                let idx = 0;\r\n                for (let i = 0; i < len; ++i) {\r\n                    const child = this.options.children.item(i);\r\n                    if (child === null || child === void 0 ? void 0 : child.classList.contains('selector-option')) {\r\n                        const button = child;\r\n                        const oldHandler = this.realClickHandlers[idx];\r\n                        const dataIdx = idx + (pageIndex - 1) * 24;\r\n                        if (idx < optNum) {\r\n                            const newHandler = (this.realClickHandlers[idx] =\r\n                                this.createHandler(dataIdx));\r\n                            button.removeEventListener('click', oldHandler);\r\n                            button.addEventListener('click', newHandler);\r\n                            button.innerText = `${dataIdx}`;\r\n                            button.className = '';\r\n                            button.classList.add('selector-option');\r\n                            button.classList.add('no-tooltip');\r\n                            button.classList.add(`selector-option-${dataIdx}`);\r\n                            if (dataIdx === this.selected) {\r\n                                button.classList.add('selected');\r\n                            }\r\n                            else {\r\n                                button.classList.remove('selected');\r\n                            }\r\n                            ++idx;\r\n                        }\r\n                        else {\r\n                            button.removeEventListener('click', oldHandler);\r\n                            this.options.removeChild(button);\r\n                            --i;\r\n                            --len;\r\n                        }\r\n                    }\r\n                }\r\n                if (this.realClickHandlers.length > optNum) {\r\n                    this.realClickHandlers.splice(optNum, this.realClickHandlers.length - optNum);\r\n                }\r\n                if (idx < optNum) {\r\n                    for (let i = idx; i < optNum; ++i) {\r\n                        const dataIdx = i + (pageIndex - 1) * 24;\r\n                        const option = document.createElement('button');\r\n                        option.innerText = `${dataIdx}`;\r\n                        option.classList.add('selector-option');\r\n                        option.classList.add('no-tooltip');\r\n                        option.classList.add(`selector-option-${dataIdx}`);\r\n                        if (dataIdx === this.selected) {\r\n                            option.classList.add('selected');\r\n                        }\r\n                        else {\r\n                            option.classList.remove('selected');\r\n                        }\r\n                        option.setAttribute('data-index', `${dataIdx}`);\r\n                        const handler = this.createHandler(dataIdx);\r\n                        this.realClickHandlers.push(handler);\r\n                        option.addEventListener('click', handler);\r\n                        this.options.appendChild(option);\r\n                    }\r\n                }\r\n                if (this.hasPager) {\r\n                    if (this.pager) {\r\n                        if (this.pagerLeft && this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerLeft) {\r\n                            this.pagerLeft.classList.remove('disabled');\r\n                        }\r\n                        if (this.pagerNumber) {\r\n                            this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        }\r\n                        if (this.pagerRight && this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        else if (this.pagerRight) {\r\n                            this.pagerRight.classList.remove('disabled');\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.pager = document.createElement('div');\r\n                        this.pager.classList.add('selector-pager');\r\n                        this.pagerLeft = document.createElement('button');\r\n                        this.pagerLeft.classList.add('page-left');\r\n                        this.pagerLeft.classList.add('no-tooltip');\r\n                        this.pagerLeft.tabIndex = -1;\r\n                        this.pagerLeft.appendChild(createSelectiveUses('left-arrow', 'left-arrow'));\r\n                        if (this.pageIndex <= 1) {\r\n                            this.pagerLeft.classList.add('disabled');\r\n                        }\r\n                        this.pagerLeft.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex > 1) {\r\n                                this.updatePage(this.pageIndex - 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerLeft);\r\n                        this.pagerNumber = document.createElement('div');\r\n                        this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;\r\n                        this.pager.appendChild(this.pagerNumber);\r\n                        this.pagerRight = document.createElement('button');\r\n                        this.pagerRight.classList.add('page-right');\r\n                        this.pagerRight.classList.add('no-tooltip');\r\n                        this.pagerRight.tabIndex = -1;\r\n                        this.pagerRight.appendChild(createSelectiveUses('right-arrow', 'right-arrow'));\r\n                        if (this.pageIndex >= this.pageSize) {\r\n                            this.pagerRight.classList.add('disabled');\r\n                        }\r\n                        this.pagerRight.addEventListener('click', (evt) => {\r\n                            evt.stopPropagation();\r\n                            if (this.pageIndex < this.pageSize) {\r\n                                this.updatePage(this.pageIndex + 1);\r\n                            }\r\n                        });\r\n                        this.pager.appendChild(this.pagerRight);\r\n                        this.container.appendChild(this.pager);\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.pager) {\r\n                        this.container.removeChild(this.pager);\r\n                        this.pager = undefined;\r\n                        this.pagerNumber = undefined;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.updateSize = (size) => {\r\n            if (this.size !== size) {\r\n                this.size = size;\r\n                this.pageIndex = 0;\r\n                this.updatePage(1);\r\n            }\r\n        };\r\n        this.container = document.createElement('div');\r\n        this.container.id = makeId('selector-panel');\r\n        this.container.classList.add('selector-panel');\r\n        this.container.tabIndex = -1;\r\n        this.options = document.createElement('div');\r\n        this.options.classList.add('selector-options');\r\n        this.options.classList.add('grid');\r\n        this.container.appendChild(this.options);\r\n        this.container.addEventListener('focusout', (evt) => {\r\n            if (!this.container.contains(evt.relatedTarget) &&\r\n                evt.relatedTarget !== this.trigger) {\r\n                this.hidden();\r\n            }\r\n        });\r\n        this.updateSize(size);\r\n    }\r\n}\r\nfunction descShortcut(shortcut) {\r\n    const parts = [];\r\n    if (shortcut.ctrl) {\r\n        parts.push('ctrl');\r\n    }\r\n    if (shortcut.alt) {\r\n        parts.push('alt');\r\n    }\r\n    if (shortcut.shift) {\r\n        parts.push('shift');\r\n    }\r\n    parts.push(shortcut.key);\r\n    return parts.join(' + ');\r\n}\r\nconst DEFAULT_OPTIONS = {\r\n    shortcuts: {\r\n        play: 'k',\r\n        mute: 'm',\r\n        fullscreen: 'f',\r\n        pip: 'p',\r\n        range: 'v',\r\n        stats: 's',\r\n    },\r\n};\r\nfunction makeShortcut(shortcut) {\r\n    if (typeof shortcut === 'string') {\r\n        return {\r\n            key: shortcut,\r\n            ctrl: false,\r\n            alt: false,\r\n            shift: false,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            key: shortcut.key,\r\n            ctrl: shortcut.ctrl || false,\r\n            alt: shortcut.alt || false,\r\n            shift: shortcut.shift || false,\r\n        };\r\n    }\r\n}\r\nfunction makeOptions(otps) {\r\n    const options = Object.assign({}, DEFAULT_OPTIONS, otps);\r\n    options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);\r\n    options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);\r\n    options.shortcuts.mute = makeShortcut(options.shortcuts.mute);\r\n    options.shortcuts.pip = makeShortcut(options.shortcuts.pip);\r\n    options.shortcuts.play = makeShortcut(options.shortcuts.play);\r\n    options.shortcuts.range = makeShortcut(options.shortcuts.range);\r\n    options.shortcuts.stats = makeShortcut(options.shortcuts.stats);\r\n    return options;\r\n}\r\nconst SpeedOptions = [\r\n    { label: '0.25x', value: 0.25 },\r\n    { label: '0.5x', value: 0.5 },\r\n    { label: '0.75x', value: 0.75 },\r\n    { label: '1.0x', value: 1 },\r\n    { label: '1.25x', value: 1.25 },\r\n    { label: '1.5x', value: 1.5 },\r\n    { label: '1.75x', value: 1.75 },\r\n    { label: '2.0x', value: 2 },\r\n    { label: '2.5x', value: 2.5 },\r\n    { label: '3.0x', value: 3 },\r\n];\r\nclass Video {\r\n    constructor(opts = {}) {\r\n        this.indexSelectHandlers = [];\r\n        this.indexerIndex = -1;\r\n        this.indexerSize = 0;\r\n        this.stats = '';\r\n        this.statsData = {};\r\n        this.speed = 1;\r\n        this.channelSelectHandlers = [];\r\n        this.channel = '';\r\n        this.videoInitHandlers = [];\r\n        this.destroy = () => {\r\n            document.removeEventListener('keyup', this.keyboardShortcuts);\r\n            const url = this.video.src;\r\n            this.video.src = '';\r\n            if (url) {\r\n                URL.revokeObjectURL(url);\r\n            }\r\n            this.rangeBar.destroy();\r\n        };\r\n        this.addVideoInitHandler = (handler) => {\r\n            this.videoInitHandlers.push(handler);\r\n        };\r\n        this.removeVideoInitHandler = (handler) => {\r\n            utils_1.arrayRemove(this.videoInitHandlers, handler);\r\n        };\r\n        this.updateStatistics = (statistics = {}, statistics_meta = {}) => {\r\n            this.statsData = statistics;\r\n            const keys = Object.keys(statistics);\r\n            if (keys.length > 0) {\r\n                this.statsSelector.classList.remove('hidden');\r\n                this.statsSelectorPannel.updateView(keys.map((key) => ({ label: key, value: key })));\r\n                this.statisticsBar.classList.remove('unused');\r\n                if (!utils_1.arrayInclude(keys, this.stats)) {\r\n                    this.statsSelectorPannel.select(keys[0]);\r\n                }\r\n            }\r\n            else {\r\n                this.statsSelector.classList.add('hidden');\r\n                this.statsSelectorPannel.updateView([]);\r\n                this.statisticsBar.classList.add('unused');\r\n            }\r\n        };\r\n        this.updateChannels = (channels = []) => {\r\n            if (channels.length > 0) {\r\n                this.channelSelector.classList.remove('hidden');\r\n                const options = [{ label: 'Default', value: '' }];\r\n                channels.forEach((channel) => {\r\n                    options.push({ label: channel, value: channel });\r\n                });\r\n                this.channelSelectorPannel.updateView(options);\r\n                if (!utils_1.arrayInclude(channels, this.channel)) {\r\n                    this.channelSelectorPannel.select('Default');\r\n                }\r\n            }\r\n            else {\r\n                this.channelSelector.classList.add('hidden');\r\n                this.channelSelectorPannel.updateView([]);\r\n            }\r\n        };\r\n        this.addChannelSelectHandler = (handler) => {\r\n            this.channelSelectHandlers.push(handler);\r\n        };\r\n        this.updateIndexerSize = (size) => {\r\n            if (!this.indexSelectorPannel) {\r\n                if (size > 0) {\r\n                    this.indexSelectorPannel = new IndexSelectorPannel(size);\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelectHandlers.forEach((handler) => {\r\n                        var _a;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.addClickHandler(handler);\r\n                    });\r\n                    this.indexSelectorPannel.trigger = this.indexSelector;\r\n                    this.indexSelector.appendChild(this.indexSelectorPannel.container);\r\n                    this.indexSelector.addEventListener('click', () => {\r\n                        var _a, _b;\r\n                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.toggle();\r\n                        const index = this.indexSelector.getAttribute('data-index');\r\n                        if (index) {\r\n                            (_b = this.indexSelectorPannel) === null || _b === void 0 ? void 0 : _b.setSelectIndex(Number.parseInt(index));\r\n                        }\r\n                    });\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                if (size <= 0) {\r\n                    this.indexSelectorPannel.hidden();\r\n                    this.indexSelector.classList.add('hidden');\r\n                }\r\n                else {\r\n                    this.indexSelectorPannel.updateSize(size);\r\n                    this.indexSelector.classList.remove('hidden');\r\n                }\r\n            }\r\n            this.indexerSize = size;\r\n        };\r\n        this.updateIndexerIndex = (index) => {\r\n            var _a;\r\n            const text = this.indexSelector.querySelector('div.text');\r\n            text.innerText = `${index}`;\r\n            this.indexSelector.setAttribute('data-index', `${index}`);\r\n            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.setSelectIndex(index);\r\n            this.indexerIndex = index;\r\n        };\r\n        this.addIndexSelectHandler = (handler) => {\r\n            this.indexSelectHandlers.push(handler);\r\n            if (this.indexSelectorPannel) {\r\n                this.indexSelectorPannel.addClickHandler(handler);\r\n            }\r\n        };\r\n        this.updateData = (blob, resumeTime = false) => {\r\n            const oldUrl = this.video.src;\r\n            const url = URL.createObjectURL(blob);\r\n            this.video.src = url;\r\n            if (oldUrl) {\r\n                this.video.load();\r\n                if (resumeTime && this.currentTime) {\r\n                    this.video.currentTime = this.currentTime;\r\n                }\r\n                URL.revokeObjectURL(oldUrl);\r\n            }\r\n        };\r\n        this.installSvg = () => {\r\n            const id = makeId('icons');\r\n            const svg = document.getElementById(id);\r\n            if (!svg) {\r\n                document.body.appendChild(createControlsSvg());\r\n            }\r\n        };\r\n        this.togglePlay = () => {\r\n            if (this.video.paused || this.video.ended) {\r\n                this.video.play();\r\n            }\r\n            else {\r\n                this.video.pause();\r\n            }\r\n        };\r\n        this.enableControls = (enabled) => {\r\n            if (enabled) {\r\n                if (VIDEO_WORKS) {\r\n                    this.video.controls = false;\r\n                    this.videoControls.classList.remove('hidden');\r\n                }\r\n                else {\r\n                    this.video.controls = true;\r\n                    this.videoControls.classList.add('hidden');\r\n                }\r\n            }\r\n            else {\r\n                this.video.controls = false;\r\n                this.videoControls.classList.add('hidden');\r\n            }\r\n        };\r\n        this.updatePlayButton = () => {\r\n            const svg = this.playButton.getElementsByClassName('playback-icons')[0];\r\n            const shortcut = descShortcut(this.options.shortcuts.play);\r\n            if (this.video.paused || this.video.ended) {\r\n                iconShow(svg, 'play-icon');\r\n                this.playButton.setAttribute('data-title', `Play (${shortcut})`);\r\n            }\r\n            else {\r\n                iconShow(svg, 'pause');\r\n                this.playButton.setAttribute('data-title', `Pause (${shortcut})`);\r\n            }\r\n        };\r\n        this.initializeVideo = () => {\r\n            const videoDuration = Math.floor(this.video.duration);\r\n            this.seek.setAttribute('max', `${videoDuration}`);\r\n            this.progress.setAttribute('max', `${videoDuration}`);\r\n            const time = formatTime(videoDuration);\r\n            this.duration.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n            this.rangeBar.max = videoDuration;\r\n            for (const handler of this.videoInitHandlers) {\r\n                handler(this);\r\n            }\r\n            if (this.stats) {\r\n                this.statsSelectorPannel.select(this.stats);\r\n            }\r\n        };\r\n        this.updateCurrentTime = () => {\r\n            this.currentTime = this.video.currentTime;\r\n        };\r\n        // updateTimeElapsed indicates how far through the video\r\n        // the current playback is by updating the timeElapsed element\r\n        this.updateTimeElapsed = () => {\r\n            const time = formatTime(Math.floor(this.video.currentTime));\r\n            this.timeElapsed.innerText = `${time.minutes}:${time.seconds}`;\r\n            this.timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);\r\n        };\r\n        // updateProgress indicates how far through the video\r\n        // the current playback is by updating the progress bar\r\n        this.updateProgress = () => {\r\n            this.seek.value = `${Math.floor(this.video.currentTime)}`;\r\n            this.progress.value = Math.floor(this.video.currentTime);\r\n        };\r\n        // updateSeekTooltip uses the position of the mouse on the progress bar to\r\n        // roughly work out what point in the video the user will skip to if\r\n        // the progress bar is clicked at that point\r\n        this.updateSeekTooltip = (event) => {\r\n            const skipTo = Math.round((event.offsetX / this.seek.clientWidth) *\r\n                parseInt(this.seek.getAttribute('max') || '0', 10));\r\n            this.seek.setAttribute('data-seek', `${skipTo}`);\r\n            const t = formatTime(skipTo);\r\n            this.seekTooltip.textContent = `${t.minutes}:${t.seconds}`;\r\n            const rect = this.video.getBoundingClientRect();\r\n            this.seekTooltip.style.left = `${event.pageX - rect.left}px`;\r\n        };\r\n        // skipAhead jumps to a different point in the video when the progress bar\r\n        // is clicked\r\n        this.skipAhead = () => {\r\n            const skipTo = this.seek.dataset.seek\r\n                ? this.seek.dataset.seek\r\n                : this.seek.value;\r\n            this.video.currentTime = Number.parseFloat(skipTo);\r\n            this.progress.value = Number.parseFloat(skipTo);\r\n            this.seek.value = skipTo;\r\n        };\r\n        // updateVolume updates the video's volume\r\n        // and disables the muted state if active\r\n        this.updateVolume = () => {\r\n            if (this.video.muted) {\r\n                this.video.muted = false;\r\n            }\r\n            this.video.volume = Number.parseFloat(this.volume.value);\r\n        };\r\n        // updateVolumeIcon updates the volume icon so that it correctly reflects\r\n        // the volume of the video\r\n        this.updateVolumeIcon = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.mute);\r\n            this.volumeButton.setAttribute('data-title', `Mute (${shortcut})`);\r\n            if (this.video.muted || this.video.volume === 0) {\r\n                this.volumeButton.setAttribute('data-title', `Unmute (${shortcut})`);\r\n                iconShow(this.volumeIcons, 'volume-mute');\r\n            }\r\n            else if (this.video.volume > 0 && this.video.volume <= 0.5) {\r\n                iconShow(this.volumeIcons, 'volume-low');\r\n            }\r\n            else {\r\n                iconShow(this.volumeIcons, 'volume-high');\r\n            }\r\n        };\r\n        // toggleMute mutes or unmutes the video when executed\r\n        // When the video is unmuted, the volume is returned to the value\r\n        // it was set to before the video was muted\r\n        this.toggleMute = () => {\r\n            this.video.muted = !this.video.muted;\r\n            if (this.video.muted) {\r\n                this.volume.setAttribute('data-volume', this.volume.value);\r\n                this.volume.value = '0';\r\n            }\r\n            else {\r\n                this.volume.value = this.volume.dataset.volume || `${this.video.volume}`;\r\n            }\r\n        };\r\n        // animatePlayback displays an animation when\r\n        // the video is played or paused\r\n        this.animatePlayback = () => {\r\n            this.playbackAnimation.animate([\r\n                {\r\n                    opacity: 1,\r\n                    transform: 'scale(1)',\r\n                },\r\n                {\r\n                    opacity: 0,\r\n                    transform: 'scale(1.3)',\r\n                },\r\n            ], {\r\n                duration: 500,\r\n            });\r\n        };\r\n        // toggleFullScreen toggles the full screen state of the video\r\n        // If the browser is currently in fullscreen mode,\r\n        // then it should exit and vice versa.\r\n        this.toggleFullScreen = () => {\r\n            if (document.fullscreenElement) {\r\n                document.exitFullscreen();\r\n            }\r\n            else if (document.webkitFullscreenElement) {\r\n                // Need this to support Safari\r\n                document.webkitExitFullscreen();\r\n            }\r\n            else if (this.container.webkitRequestFullscreen) {\r\n                // Need this to support Safari\r\n                this.container.webkitRequestFullscreen();\r\n            }\r\n            else {\r\n                this.container.requestFullscreen();\r\n            }\r\n        };\r\n        this.isFullscreen = () => {\r\n            return (document.fullscreenElement ||\r\n                document.webkitFullscreenElement ||\r\n                this.container.webkitRequestFullscreen);\r\n        };\r\n        // updateFullscreenButton changes the icon of the full screen button\r\n        // and tooltip to reflect the current full screen state of the video\r\n        this.updateFullscreenButton = () => {\r\n            const shortcut = descShortcut(this.options.shortcuts.fullscreen);\r\n            if (this.isFullscreen()) {\r\n                this.fullscreenButton.setAttribute('data-title', `Exit full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen-exit');\r\n            }\r\n            else {\r\n                this.fullscreenButton.setAttribute('data-title', `Full screen (${shortcut})`);\r\n                iconShow(this.fullscreenIcons, 'fullscreen');\r\n            }\r\n        };\r\n        // togglePip toggles Picture-in-Picture mode on the video\r\n        this.togglePip = () => __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                if (this.video !== document.pictureInPictureElement) {\r\n                    this.pipButton.disabled = true;\r\n                    yield this.video.requestPictureInPicture();\r\n                }\r\n                else {\r\n                    yield document.exitPictureInPicture();\r\n                }\r\n            }\r\n            catch (error) {\r\n                console.error(error);\r\n            }\r\n            finally {\r\n                this.pipButton.disabled = false;\r\n            }\r\n        });\r\n        this.toggleRangeBar = () => {\r\n            this.rangeBar.toggle();\r\n        };\r\n        this.toggleStatisticsBar = () => {\r\n            this.statisticsBar.classList.toggle('hidden');\r\n        };\r\n        // hideControls hides the video controls when not in use\r\n        // if the video is paused, the controls must remain visible\r\n        this.hideControls = () => {\r\n            if (this.video.paused) {\r\n                return;\r\n            }\r\n            this.videoControls.classList.add('hide');\r\n        };\r\n        // showControls displays the video controls\r\n        this.showControls = () => {\r\n            this.videoControls.classList.remove('hide');\r\n        };\r\n        this.isInFocus = () => {\r\n            var _a;\r\n            return ((_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.contains(this.container)) || false;\r\n        };\r\n        // keyboardShortcuts executes the relevant functions for\r\n        // each supported shortcut key\r\n        this.keyboardShortcuts = (event) => {\r\n            if (!this.isInFocus()) {\r\n                return;\r\n            }\r\n            const { key, ctrlKey, altKey, shiftKey } = event;\r\n            const { play, mute, fullscreen, pip, range, stats } = this.options.shortcuts;\r\n            if (key === play.key &&\r\n                (play.ctrl === !!ctrlKey ||\r\n                    play.alt === !!altKey ||\r\n                    play.shift === !!shiftKey)) {\r\n                this.togglePlay();\r\n                this.animatePlayback();\r\n                if (this.video.paused) {\r\n                    this.showControls();\r\n                }\r\n                else {\r\n                    setTimeout(() => {\r\n                        this.hideControls();\r\n                    }, 2000);\r\n                }\r\n            }\r\n            else if (key === mute.key &&\r\n                (mute.ctrl === !!ctrlKey ||\r\n                    mute.alt === !!altKey ||\r\n                    mute.shift === !!shiftKey)) {\r\n                this.toggleMute();\r\n            }\r\n            else if (key === fullscreen.key &&\r\n                (fullscreen.ctrl === !!ctrlKey ||\r\n                    fullscreen.alt === !!altKey ||\r\n                    fullscreen.shift === !!shiftKey)) {\r\n                this.toggleFullScreen();\r\n            }\r\n            else if (key === pip.key &&\r\n                (pip.ctrl === !!ctrlKey ||\r\n                    pip.alt === !!altKey ||\r\n                    pip.shift === !!shiftKey)) {\r\n                this.togglePip();\r\n            }\r\n            else if (key === range.key &&\r\n                (range.ctrl === !!ctrlKey ||\r\n                    range.alt === !!altKey ||\r\n                    range.shift === !!shiftKey)) {\r\n                this.toggleRangeBar();\r\n            }\r\n            else if (key === stats.key &&\r\n                (stats.ctrl === !!ctrlKey ||\r\n                    stats.alt === !!altKey ||\r\n                    stats.shift === !!shiftKey)) {\r\n                this.toggleStatisticsBar();\r\n            }\r\n        };\r\n        this.options = makeOptions(opts);\r\n        this.installSvg();\r\n        this.container = createVideoContainer(this.options);\r\n        this.video = this.container.querySelector('video.video');\r\n        this.videoControls = this.container.querySelector('div.video-controls');\r\n        this.playButton = this.container.querySelector('button.play');\r\n        this.timeElapsed = this.container.querySelector('time.time-elapsed');\r\n        this.duration = this.container.querySelector('time.duration');\r\n        this.progress = this.container.querySelector('progress.progress-bar');\r\n        this.seek = this.container.querySelector('input.seek');\r\n        this.seekTooltip = this.container.querySelector('div.seek-tooltip');\r\n        this.rangeBar = new range_1.RangeBar(this.container.querySelector('div.range-bar'));\r\n        this.statisticsBar = this.container.querySelector('div.statistics-container');\r\n        this.statisticsSvg = this.statisticsBar.querySelector('svg');\r\n        this.volume = this.container.querySelector('input.volume');\r\n        this.volumeButton = this.container.querySelector('button.volume-button');\r\n        this.volumeIcons = this.volumeButton.querySelector('svg');\r\n        this.playbackAnimation = this.container.querySelector('div.playback-animation');\r\n        this.fullscreenButton = this.container.querySelector('button.fullscreen-button');\r\n        this.fullscreenIcons = this.fullscreenButton.querySelector('svg');\r\n        this.pipButton = this.container.querySelector('button.pip-button');\r\n        this.indexSelector = this.container.querySelector('button.index-selector');\r\n        this.statsSelector = this.container.querySelector('button.stats-selector');\r\n        this.statsSelectorPannel = new SelectorPannel([]).install(this.statsSelector, (option) => {\r\n            const text = this.statsSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.stats = option.value;\r\n            if (this.video.duration > 0) {\r\n                charts_1.makeLineChart(this.statisticsSvg, this.statsData[this.stats], [0, this.video.duration], undefined, this.video.clientWidth - 20, 30);\r\n            }\r\n        });\r\n        this.speedSelector = this.container.querySelector('button.speed-selector');\r\n        this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {\r\n            const text = this.speedSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.video.playbackRate = option.value;\r\n            this.speed = option.value;\r\n        }, '1.0x');\r\n        this.channelSelector = this.container.querySelector('button.channel-selector');\r\n        this.channelSelectorPannel = new SelectorPannel([]).install(this.channelSelector, (option) => {\r\n            const text = this.channelSelector.querySelector('div.text');\r\n            text.innerText = option.label;\r\n            this.channelSelectHandlers.forEach((handler) => {\r\n                handler(option.value);\r\n            });\r\n            this.channel = option.value;\r\n        });\r\n        this.playButton.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('play', this.updateCurrentTime);\r\n        this.video.addEventListener('play', this.updatePlayButton);\r\n        this.video.addEventListener('play', () => {\r\n            this.video.playbackRate = this.speed;\r\n        });\r\n        this.video.addEventListener('pause', this.updatePlayButton);\r\n        this.video.addEventListener('loadedmetadata', this.initializeVideo);\r\n        this.video.addEventListener('timeupdate', this.updateCurrentTime);\r\n        this.video.addEventListener('timeupdate', this.updateTimeElapsed);\r\n        this.video.addEventListener('timeupdate', this.updateProgress);\r\n        this.video.addEventListener('volumechange', this.updateVolumeIcon);\r\n        this.video.addEventListener('click', this.togglePlay);\r\n        this.video.addEventListener('click', this.animatePlayback);\r\n        this.video.addEventListener('mouseenter', this.showControls);\r\n        this.video.addEventListener('mouseleave', this.hideControls);\r\n        this.videoControls.addEventListener('mouseenter', this.showControls);\r\n        this.videoControls.addEventListener('mouseleave', this.hideControls);\r\n        this.seek.addEventListener('mousemove', this.updateSeekTooltip);\r\n        this.seek.addEventListener('input', this.skipAhead);\r\n        this.volume.addEventListener('input', this.updateVolume);\r\n        this.volumeButton.addEventListener('click', this.toggleMute);\r\n        this.fullscreenButton.addEventListener('click', this.toggleFullScreen);\r\n        this.container.addEventListener('fullscreenchange', this.updateFullscreenButton);\r\n        this.pipButton.addEventListener('click', this.togglePip);\r\n        document.addEventListener('keyup', this.keyboardShortcuts);\r\n    }\r\n}\r\nexports.Video = Video;\r\n// formatTime takes a time length in seconds and returns the time in\r\n// minutes and seconds\r\nfunction formatTime(timeInSeconds) {\r\n    const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);\r\n    return {\r\n        minutes: result.substr(3, 2),\r\n        seconds: result.substr(6, 2),\r\n    };\r\n}\r\n//# sourceMappingURL=video.js.map",
         "\"use strict\";\r\n// Copyright (c) Xiaojing Chen\r\n// Distributed under the terms of the Modified BSD License.\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WebCamView = exports.WebCamModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst common_1 = require(\"./common\");\r\nconst webrtc_1 = require(\"./webrtc\");\r\nconst utils_1 = require(\"./utils\");\r\n// Import the CSS\r\nrequire(\"../css/widget.css\");\r\nconst supportsSetCodecPreferences = window.RTCRtpTransceiver &&\r\n    'setCodecPreferences' in window.RTCRtpTransceiver.prototype;\r\nclass WebCamModel extends common_1.BaseModel {\r\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.getDevice = (type) => __awaiter(this, void 0, void 0, function* () {\r\n            const stream = yield navigator.mediaDevices.getUserMedia({\r\n                video: type === 'video_input',\r\n                audio: type === 'audio_input' || type === 'audio_output',\r\n            });\r\n            try {\r\n                const n_type = type.replace('_', '');\r\n                const devices = yield navigator.mediaDevices.enumerateDevices();\r\n                return devices.filter((device) => device.kind === n_type && device.deviceId);\r\n            }\r\n            finally {\r\n                stream.getTracks().forEach((track) => track.stop());\r\n            }\r\n        });\r\n        this.resetPeer = () => {\r\n            this.pc = undefined;\r\n            this.client_stream = undefined;\r\n            this.server_stream = undefined;\r\n        };\r\n        this.waitForStateWhen = (checker) => __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                const state = this.get('state');\r\n                if (checker(state)) {\r\n                    resolve(state);\r\n                }\r\n                else {\r\n                    const checkState = () => {\r\n                        const state = this.get('state');\r\n                        if (checker(state)) {\r\n                            this.off('change:state', checkState);\r\n                            resolve(state);\r\n                        }\r\n                    };\r\n                    this.on('change:state', checkState);\r\n                }\r\n            });\r\n        });\r\n        this.waitForStateIn = (...states) => __awaiter(this, void 0, void 0, function* () {\r\n            return this.waitForStateWhen((state) => states.indexOf(state) !== -1);\r\n        });\r\n        this.getState = () => this.get('state');\r\n        this.setState = (state) => {\r\n            this.set('state', state);\r\n        };\r\n        this.getConstraints = () => {\r\n            let { video, audio } = this.get('constraints') || { audio: false, video: true };\r\n            const videoId = this.videoInput;\r\n            const audioId = this.audioInput;\r\n            if (audio && audioId) {\r\n                if (typeof audio === 'boolean') {\r\n                    audio = {\r\n                        deviceId: audioId,\r\n                    };\r\n                }\r\n                else {\r\n                    audio.deviceId = audioId;\r\n                }\r\n            }\r\n            if (video && videoId) {\r\n                if (typeof video === 'boolean') {\r\n                    video = {\r\n                        deviceId: videoId,\r\n                    };\r\n                }\r\n                else {\r\n                    video.deviceId = videoId;\r\n                }\r\n            }\r\n            return { video, audio };\r\n        };\r\n        this.closePeer = () => __awaiter(this, void 0, void 0, function* () {\r\n            const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new', 'error');\r\n            if (state === 'new') {\r\n                throw new Error(`This should not happen. We can't close the peer when the state is ${state}. Because at this time, we haven't start the peer.`);\r\n            }\r\n            if (state === 'closed' || state === 'error') {\r\n                return;\r\n            }\r\n            const pc = this.pc;\r\n            if (!pc) {\r\n                this.setState('closed');\r\n                return;\r\n            }\r\n            this.setState('closing');\r\n            try {\r\n                pc.close();\r\n                if (pc.connectionState !== 'closed') {\r\n                    yield new Promise((resolve) => {\r\n                        pc.addEventListener('connectionstatechange', () => {\r\n                            if (pc.connectionState === 'closed') {\r\n                                resolve();\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n                this.resetPeer();\r\n                this.setState('closed');\r\n            }\r\n            catch (err) {\r\n                this.setState('error');\r\n            }\r\n        });\r\n        this.fetchCodecs = () => {\r\n            const codecs = this.getCodecs();\r\n            this.set('video_codecs', codecs);\r\n            this.save_changes();\r\n        };\r\n        this.getCodecs = () => {\r\n            if (supportsSetCodecPreferences) {\r\n                const { codecs = [] } = RTCRtpSender.getCapabilities('video') || {};\r\n                return codecs\r\n                    .filter((codec) => !utils_1.arrayInclude(['video/red', 'video/ulpfec', 'video/rtx'], codec.mimeType))\r\n                    .map((codec) => {\r\n                    return (codec.mimeType + ' ' + (codec.sdpFmtpLine || '')).trim();\r\n                });\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        };\r\n        this.getPeerConfig = () => {\r\n            const config = {};\r\n            const iceServers = this.get('iceServers');\r\n            if (iceServers && iceServers.length > 0) {\r\n                config.iceServers = iceServers.map((server) => {\r\n                    if (typeof server === 'string') {\r\n                        return { urls: server };\r\n                    }\r\n                    else {\r\n                        return server;\r\n                    }\r\n                });\r\n            }\r\n            return config;\r\n        };\r\n        this.syncDevice = (track) => {\r\n            const type = track.kind === 'video' ? 'video_input' : 'audio_input';\r\n            let curDeviceId;\r\n            if (typeof track.getCapabilities !== 'undefined') {\r\n                curDeviceId = track.getCapabilities().deviceId;\r\n            }\r\n            else {\r\n                curDeviceId = track.getSettings().deviceId;\r\n            }\r\n            if (type === 'video_input') {\r\n                this.videoInput = curDeviceId;\r\n            }\r\n            else {\r\n                this.audioInput = curDeviceId;\r\n            }\r\n            this.send_cmd('sync_device', { type, id: curDeviceId }, false);\r\n        };\r\n        this.connect = (video, force_reconnect = false, only_reconnect = false) => __awaiter(this, void 0, void 0, function* () {\r\n            const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new');\r\n            if (state === 'closed' || state === 'error' || state === 'new') {\r\n                if (only_reconnect) {\r\n                    return;\r\n                }\r\n                try {\r\n                    this.setState('connecting');\r\n                    const pc = webrtc_1.createPeerConnection(this.getPeerConfig());\r\n                    this.pc = pc;\r\n                    this.bindVideo(video);\r\n                    pc.addEventListener('connectionstatechange', () => {\r\n                        const state = pc.connectionState;\r\n                        if (state === 'failed' ||\r\n                            state === 'disconnected' ||\r\n                            state === 'closed') {\r\n                            pc.close();\r\n                            if (this.pc === pc) {\r\n                                this.resetPeer();\r\n                            }\r\n                        }\r\n                    });\r\n                    pc.addEventListener('track', (evt) => {\r\n                        if (evt.track.kind === 'video') {\r\n                            console.log('track gotten');\r\n                            this.server_stream = evt.streams[0];\r\n                        }\r\n                    });\r\n                    const stream = yield navigator.mediaDevices.getUserMedia(this.getConstraints());\r\n                    this.client_stream = stream;\r\n                    stream.getTracks().forEach((track) => {\r\n                        this.syncDevice(track);\r\n                        pc.addTrack(track, stream);\r\n                    });\r\n                    yield webrtc_1.negotiate(pc, (offer) => __awaiter(this, void 0, void 0, function* () {\r\n                        console.log(offer);\r\n                        const { content } = yield this.send_cmd('exchange_peer', {\r\n                            desc: offer,\r\n                        });\r\n                        return content;\r\n                    }));\r\n                    const pcState = yield webrtc_1.waitForConnectionState(pc, (state) => state !== 'connecting' && state !== 'new');\r\n                    if (pcState === 'connected') {\r\n                        this.setState('connected');\r\n                    }\r\n                    else {\r\n                        yield this.closePeer();\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    this.setState('error');\r\n                    console.error(err);\r\n                }\r\n            }\r\n            else if (force_reconnect) {\r\n                yield this.closePeer();\r\n                yield this.connect(video, force_reconnect);\r\n            }\r\n            else {\r\n                this.bindVideo(video);\r\n            }\r\n        });\r\n        this.bindVideo = (video) => {\r\n            const pc = this.pc;\r\n            if (!pc || !video) {\r\n                return;\r\n            }\r\n            if (pc.connectionState === 'connected' && this.server_stream) {\r\n                video.srcObject = this.server_stream;\r\n            }\r\n            else {\r\n                const handler = (evt) => {\r\n                    if (evt.track.kind === 'video') {\r\n                        console.log('track gotten');\r\n                        this.server_stream = evt.streams[0];\r\n                        video.srcObject = this.server_stream;\r\n                        pc.removeEventListener('track', handler);\r\n                    }\r\n                };\r\n                pc.addEventListener('track', handler);\r\n            }\r\n        };\r\n        this.fetchCodecs();\r\n        // this.fetchDevices();\r\n        // this.on('change:video_input_device', (...args) => {\r\n        //   console.log('change:video_input_device');\r\n        //   console.log(args);\r\n        //   this.connect(undefined, true, true);\r\n        // });\r\n        // this.on('change:audio_input_device', (...args) => {\r\n        //   console.log('change:audio_input_device');\r\n        //   console.log(args);\r\n        //   this.connect(undefined, true, true);\r\n        // });\r\n        this.on('change:iceServers', () => {\r\n            this.connect(undefined, true, true);\r\n        });\r\n        this.addMessageHandler('request_devices', (cmdMsg) => {\r\n            const { cmd, id, args } = cmdMsg;\r\n            const { type } = args;\r\n            this.getDevice(type).then((devices) => {\r\n                console.log(devices);\r\n                this.send({ ans: cmd, id, res: devices }, {});\r\n            });\r\n        });\r\n        this.addMessageHandler('notify_device_change', (cmdMsg) => {\r\n            const { args } = cmdMsg;\r\n            const { type, change } = args;\r\n            if (type === 'video_input') {\r\n                if (this.videoInput !== change.new) {\r\n                    this.videoInput = change.new;\r\n                    this.connect(undefined, true, true);\r\n                }\r\n            }\r\n            else if (type === 'audio_input') {\r\n                if (this.audioInput !== change.new) {\r\n                    this.audioInput = change.new;\r\n                    this.connect(undefined, true, true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: WebCamModel.model_name, _view_name: WebCamModel.view_name, server_desc: null, client_desc: null, iceServers: [], constraints: null, video_codecs: [], video_codec: null, state: 'new', autoplay: true, controls: true, crossOrigin: 'not-support', width: null, height: null, playsInline: true, muted: false });\r\n    }\r\n}\r\nexports.WebCamModel = WebCamModel;\r\nWebCamModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\r\nWebCamModel.model_name = 'WebCamModel';\r\nWebCamModel.view_name = 'WebCamView'; // Set to null if no view\r\nfunction attachSinkId(element, sinkId) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (typeof element.sinkId !== 'undefined') {\r\n            if (sinkId) {\r\n                yield element.setSinkId(sinkId);\r\n            }\r\n        }\r\n        else {\r\n            console.warn('Browser does not support output device selection.');\r\n        }\r\n    });\r\n}\r\nclass WebCamView extends base_1.DOMWidgetView {\r\n    render() {\r\n        const video = document.createElement('video');\r\n        video.playsInline = true;\r\n        this.el.appendChild(video);\r\n        this.model.connect(video);\r\n        this.model.on('change:state', () => {\r\n            const model = this.model;\r\n            if (model.getState() === 'connected') {\r\n                model.connect(video);\r\n            }\r\n        });\r\n        const { deviceId } = this.model.get('audio_output_device') || {};\r\n        attachSinkId(video, deviceId);\r\n        this.model.on('change:audio_output_device', () => {\r\n            const { deviceId } = this.model.get('audio_output_device') || {};\r\n            attachSinkId(video, deviceId);\r\n        });\r\n        video.autoplay = this.model.get('autoplay');\r\n        this.model.on('change:autoplay', () => {\r\n            video.autoplay = this.model.get('autoplay');\r\n        });\r\n        video.controls = this.model.get('controls');\r\n        this.model.on('change:controls', () => {\r\n            video.controls = this.model.get('controls');\r\n        });\r\n        const width = this.model.get('width');\r\n        if (width) {\r\n            video.width = width;\r\n        }\r\n        this.model.on('change:width', () => {\r\n            const width = this.model.get('width');\r\n            if (width) {\r\n                video.width = width;\r\n            }\r\n            else {\r\n                video.removeAttribute('width');\r\n            }\r\n        });\r\n        const height = this.model.get('height');\r\n        if (height) {\r\n            video.height = height;\r\n        }\r\n        this.model.on('change:height', () => {\r\n            const height = this.model.get('height');\r\n            if (height) {\r\n                video.height = height;\r\n            }\r\n            else {\r\n                video.removeAttribute('height');\r\n            }\r\n        });\r\n        video.playsInline = this.model.get('playsInline');\r\n        this.model.on('change:playsInline', () => {\r\n            video.playsInline = this.model.get('playsInline');\r\n        });\r\n        video.muted = this.model.get('muted');\r\n        this.model.on('change:muted', () => {\r\n            video.muted = this.model.get('muted');\r\n        });\r\n        const crossOrigin = this.model.get('crossOrigin');\r\n        if (crossOrigin === 'not-support') {\r\n            video.crossOrigin = null;\r\n        }\r\n        else {\r\n            video.crossOrigin = crossOrigin;\r\n        }\r\n        this.model.on('change:crossOrigin', () => {\r\n            const crossOrigin = this.model.get('crossOrigin');\r\n            if (crossOrigin === 'not-support') {\r\n                video.crossOrigin = null;\r\n            }\r\n            else {\r\n                video.crossOrigin = crossOrigin;\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.WebCamView = WebCamView;\r\n//# sourceMappingURL=webcam.js.map",
         "\"use strict\";\r\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.negotiate = exports.waitForConnectionState = exports.createPeerConnection = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst DEFAULT_ICE_SERVERS = [\r\n    { urls: ['stun:stun.l.google.com:19302'] },\r\n    { urls: ['stun:23.21.150.121'] },\r\n    { urls: ['stun:stun01.sipphone.com'] },\r\n    { urls: ['stun:stun.ekiga.net'] },\r\n    { urls: ['stun:stun.fwdnet.net'] },\r\n    { urls: ['stun:stun.ideasip.com'] },\r\n    { urls: ['stun:stun.iptel.org'] },\r\n    { urls: ['stun:stun.rixtelecom.se'] },\r\n    { urls: ['stun:stun.schlund.de'] },\r\n    { urls: ['stun:stunserver.org'] },\r\n    { urls: ['stun:stun.softjoys.com'] },\r\n    { urls: ['stun:stun.voiparound.com'] },\r\n    { urls: ['stun:stun.voipbuster.com'] },\r\n    { urls: ['stun:stun.voipstunt.com'] },\r\n    { urls: ['stun:stun.voxgratia.org'] },\r\n    { urls: ['stun:stun.xten.com'] },\r\n];\r\nfunction createPeerConnection(config) {\r\n    const pc = new RTCPeerConnection(Object.assign({}, { iceServers: DEFAULT_ICE_SERVERS }, config || {}));\r\n    pc.addEventListener('connectionstatechange', () => {\r\n        console.log(`connection -> ${pc.connectionState}`);\r\n    }, false);\r\n    // register some listeners to help debugging\r\n    pc.addEventListener('icegatheringstatechange', () => {\r\n        console.log(`iceGathering -> ${pc.iceGatheringState}`);\r\n    }, false);\r\n    pc.addEventListener('iceconnectionstatechange', () => {\r\n        console.log(`iceConnection -> ${pc.iceConnectionState}`);\r\n    }, false);\r\n    pc.addEventListener('signalingstatechange', () => {\r\n        console.log(`signaling -> ${pc.signalingState}`);\r\n    }, false);\r\n    return pc;\r\n}\r\nexports.createPeerConnection = createPeerConnection;\r\nfunction waitForConnectionState(pc, checker) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve) => {\r\n            if (checker(pc.connectionState)) {\r\n                resolve(pc.connectionState);\r\n            }\r\n            else {\r\n                const checkState = () => {\r\n                    if (checker(pc.connectionState)) {\r\n                        pc.removeEventListener('connectionstatechange', checkState);\r\n                        resolve(pc.connectionState);\r\n                    }\r\n                };\r\n                pc.addEventListener('connectionstatechange', checkState);\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.waitForConnectionState = waitForConnectionState;\r\nfunction waitIceGathering(pc) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return new Promise((resolve) => {\r\n            if (pc.iceGatheringState === 'complete') {\r\n                resolve();\r\n            }\r\n            else {\r\n                const checkState = () => {\r\n                    if (pc.iceGatheringState === 'complete') {\r\n                        pc.removeEventListener('icegatheringstatechange', checkState);\r\n                        resolve();\r\n                    }\r\n                };\r\n                pc.addEventListener('icegatheringstatechange', checkState);\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction negotiate(pc, answerFunc, codec) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let offer = yield pc.createOffer();\r\n        yield pc.setLocalDescription(offer);\r\n        yield waitIceGathering(pc);\r\n        offer = pc.localDescription;\r\n        if (codec) {\r\n            if (codec.audio && codec.audio !== 'default') {\r\n                offer.sdp = sdpFilterCodec('audio', codec.audio, offer.sdp);\r\n            }\r\n            if (codec.video && codec.video !== 'default') {\r\n                offer.sdp = sdpFilterCodec('video', codec.video, offer.sdp);\r\n            }\r\n        }\r\n        const answer = yield answerFunc(offer);\r\n        yield pc.setRemoteDescription(answer);\r\n    });\r\n}\r\nexports.negotiate = negotiate;\r\nfunction sdpFilterCodec(kind, codec, realSdp) {\r\n    const allowed = [];\r\n    const rtxRegex = new RegExp('a=fmtp:(\\\\d+) apt=(\\\\d+)\\\\r$');\r\n    const codecRegex = new RegExp('a=rtpmap:([0-9]+) ' + escapeRegExp(codec));\r\n    const videoRegex = new RegExp('(m=' + kind + ' .*?)( ([0-9]+))*\\\\s*$');\r\n    const lines = realSdp.split('\\n');\r\n    let isKind = false;\r\n    for (let i = 0; i < lines.length; i++) {\r\n        if (lines[i].startsWith('m=' + kind + ' ')) {\r\n            isKind = true;\r\n        }\r\n        else if (lines[i].startsWith('m=')) {\r\n            isKind = false;\r\n        }\r\n        if (isKind) {\r\n            let match = lines[i].match(codecRegex);\r\n            if (match) {\r\n                allowed.push(parseInt(match[1]));\r\n            }\r\n            match = lines[i].match(rtxRegex);\r\n            if (match && utils_1.arrayInclude(allowed, parseInt(match[2]))) {\r\n                allowed.push(parseInt(match[1]));\r\n            }\r\n        }\r\n    }\r\n    const skipRegex = 'a=(fmtp|rtcp-fb|rtpmap):([0-9]+)';\r\n    let sdp = '';\r\n    isKind = false;\r\n    for (let i = 0; i < lines.length; i++) {\r\n        if (lines[i].startsWith('m=' + kind + ' ')) {\r\n            isKind = true;\r\n        }\r\n        else if (lines[i].startsWith('m=')) {\r\n            isKind = false;\r\n        }\r\n        if (isKind) {\r\n            const skipMatch = lines[i].match(skipRegex);\r\n            if (skipMatch && !utils_1.arrayInclude(allowed, parseInt(skipMatch[2]))) {\r\n                continue;\r\n            }\r\n            else if (lines[i].match(videoRegex)) {\r\n                sdp += lines[i].replace(videoRegex, '$1 ' + allowed.join(' ')) + '\\n';\r\n            }\r\n            else {\r\n                sdp += lines[i] + '\\n';\r\n            }\r\n        }\r\n        else {\r\n            sdp += lines[i] + '\\n';\r\n        }\r\n    }\r\n    return sdp;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\r\n}\r\n//# sourceMappingURL=webrtc.js.map",
-        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* ==========================================================================\\r\\n   #Custom HTML5 Video Player\\r\\n   ========================================================================== */\\r\\n\\r\\n:root {\\r\\n  --youtube-red: #FE0900;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container {\\r\\n  width: 800px;\\r\\n  border-radius: 4px;\\r\\n  margin: 0 auto;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  justify-content: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls {\\r\\n  right: 0;\\r\\n  left: 0;\\r\\n  padding: 10px;\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  transition: all 0.2s ease;\\r\\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls.hide {\\r\\n  opacity: 0;\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-progress {\\r\\n  position: relative;\\r\\n  height: 8.4px;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  appearance: none;\\r\\n  border-radius: 2px;\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-bar {\\r\\n  background-color: #474545;\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-value {\\r\\n  background: var(--youtube-red);\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-moz-progress-bar {\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek-tooltip {\\r\\n  display: none;\\r\\n  position: absolute;\\r\\n  top: -50px;\\r\\n  margin-left: -20px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  content: attr(data-title);\\r\\n  font-weight: bold;\\r\\n  color: #fff;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .bottom-controls {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .left-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls input {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button {\\r\\n  cursor: pointer;\\r\\n  position: relative;\\r\\n  margin-right: 7px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  border: none;\\r\\n  outline: none;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button * {\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip)::before {\\r\\n  content: attr(data-title);\\r\\n  position: absolute;\\r\\n  display: none;\\r\\n  right: 0;\\r\\n  top: -50px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  color: #fff;\\r\\n  font-weight: bold;\\r\\n  padding: 4px 6px;\\r\\n  word-break: keep-all;\\r\\n  white-space: pre;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .fullscreen-button {\\r\\n  margin-right: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .index-selector {\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .text-button {\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-panel {\\r\\n  position: absolute;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  background: rgba(21, 21, 21, .9);\\r\\n  padding: 6px 12px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options {\\r\\n  display: flex;\\r\\n  flex-wrap: nowrap;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options.grid {\\r\\n  flex-wrap: wrap;\\r\\n  flex-direction: row;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager svg {\\r\\n  width: 20px;\\r\\n  height: 20px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button.disabled svg {\\r\\n  fill: #999;\\r\\n  stroke: #999;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button {\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option {\\r\\n  color: #fff;\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n  margin: 3px;\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option .text {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option:hover {\\r\\n  background: rgba(120, 120, 120, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option.selected {\\r\\n  background: rgba(81, 81, 81, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .pip-button svg {\\r\\n  width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .playback-animation {\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  margin-left: -40px;\\r\\n  margin-top: -40px;\\r\\n  width: 80px;\\r\\n  height: 80px;\\r\\n  border-radius: 80px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range] {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  height: 8.4px;\\r\\n  background: transparent;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  border-radius: 1.3px;\\r\\n  -webkit-appearance: none;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\\r\\n  height: 16px;\\r\\n  width: 16px;\\r\\n  border-radius: 16px;\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  -webkit-appearance: none;\\r\\n  margin-left: -1px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\\r\\n  background: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume {\\r\\n  height: 5px;\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\\r\\n  margin-left: 0;\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-track {\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  cursor: pointer;\\r\\n  border: 1px solid transparent;\\r\\n  background: transparent;\\r\\n  border-radius: 1.3px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  border-radius: 50px;\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  margin-top: 5px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\\r\\n  border: 1px solid #fff;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .hidden {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container svg {\\r\\n  width: 28px;\\r\\n  height: 28px;\\r\\n  fill: #fff;\\r\\n  stroke: #fff;\\r\\n  cursor: pointer;\\r\\n  vertical-align: middle;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
+        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* ==========================================================================\\r\\n   #Custom HTML5 Video Player\\r\\n   ========================================================================== */\\r\\n\\r\\n:root {\\r\\n  --youtube-red: rgb(254, 9, 0);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container {\\r\\n  width: 800px;\\r\\n  border-radius: 4px;\\r\\n  margin: 0 auto;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  justify-content: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls {\\r\\n  right: 0;\\r\\n  left: 0;\\r\\n  padding: 10px;\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  transition: all 0.2s ease;\\r\\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-controls.hide {\\r\\n  opacity: 0;\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .video-progress {\\r\\n  position: relative;\\r\\n  height: 8.4px;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  appearance: none;\\r\\n  border-radius: 2px;\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-bar {\\r\\n  background-color: #474545;\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-webkit-progress-value {\\r\\n  background: var(--youtube-red);\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container progress::-moz-progress-bar {\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .seek-tooltip {\\r\\n  display: none;\\r\\n  position: absolute;\\r\\n  top: -30px;\\r\\n  margin-left: -20px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  content: attr(data-title);\\r\\n  font-weight: bold;\\r\\n  color: #fff;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar {\\r\\n  position: absolute;\\r\\n  top: 12px;\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  background-color: #474545;\\r\\n  cursor: pointer;\\r\\n  border-radius: 2px;\\r\\n  overflow: visible;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .marker {\\r\\n  position: absolute;\\r\\n  width: 4px;\\r\\n  height: 10px;\\r\\n  top: -0.8px;\\r\\n  background-color: rgb(254, 9, 0);\\r\\n  border-radius: 1px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .marker.floating {\\r\\n  background-color: rgba(254, 9, 0, 0.7);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .marker.selected {\\r\\n  background-color: rgba(254, 0, 120, 0.7);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .range-bar .range-mask {\\r\\n  position: absolute;\\r\\n  height: 8.4px;\\r\\n  background-color: #00c569;\\r\\n  cursor: pointer;\\r\\n  border-radius: 2px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .statistics-container {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .statistics-container svg {\\r\\n  display: block;\\r\\n  width: 100%;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .statistics-container.unused svg {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .bottom-controls {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .left-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls input {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\\r\\n  width: 100px;\\r\\n  opacity: 1;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button {\\r\\n  cursor: pointer;\\r\\n  position: relative;\\r\\n  margin-right: 7px;\\r\\n  font-size: 12px;\\r\\n  padding: 3px;\\r\\n  border: none;\\r\\n  outline: none;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button * {\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip)::before {\\r\\n  content: attr(data-title);\\r\\n  position: absolute;\\r\\n  display: none;\\r\\n  right: 0;\\r\\n  top: -50px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  color: #fff;\\r\\n  font-weight: bold;\\r\\n  padding: 4px 6px;\\r\\n  word-break: keep-all;\\r\\n  white-space: pre;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .fullscreen-button {\\r\\n  margin-right: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .stats-selector svg.icon {\\r\\n  display: inline;\\r\\n  margin-right: 2px;\\r\\n  vertical-align: middle;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .stats-selector div.text {\\r\\n  display: inline;\\r\\n  color: #fff;\\r\\n  vertical-align: middle;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .index-selector {\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .text-button {\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-panel {\\r\\n  position: absolute;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  background: rgba(21, 21, 21, .9);\\r\\n  padding: 6px 12px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options {\\r\\n  display: flex;\\r\\n  flex-wrap: nowrap;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-options.grid {\\r\\n  flex-wrap: wrap;\\r\\n  flex-direction: row;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager svg {\\r\\n  width: 20px;\\r\\n  height: 20px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button.disabled svg {\\r\\n  fill: #999;\\r\\n  stroke: #999;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .selector-pager button {\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option {\\r\\n  color: #fff;\\r\\n  min-width: 26px;\\r\\n  height: 26px;\\r\\n  margin: 3px;\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option .text {\\r\\n  display: inline-block;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option:hover {\\r\\n  background: rgba(120, 120, 120, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container button.selector-option.selected {\\r\\n  background: rgba(81, 81, 81, 0.9);\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .pip-button svg {\\r\\n  width: 26px;\\r\\n  height: 26px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .playback-animation {\\r\\n  pointer-events: none;\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  margin-left: -40px;\\r\\n  margin-top: -40px;\\r\\n  width: 80px;\\r\\n  height: 80px;\\r\\n  border-radius: 80px;\\r\\n  background-color: rgba(0, 0, 0, 0.6);\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range] {\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n  height: 8.4px;\\r\\n  background: transparent;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n  border-radius: 1.3px;\\r\\n  -webkit-appearance: none;\\r\\n  transition: all 0.4s ease;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\\r\\n  height: 16px;\\r\\n  width: 16px;\\r\\n  border-radius: 16px;\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  -webkit-appearance: none;\\r\\n  margin-left: -1px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\\r\\n  background: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume {\\r\\n  height: 5px;\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\\r\\n  margin-left: 0;\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-track {\\r\\n  width: 100%;\\r\\n  height: 8.4px;\\r\\n  cursor: pointer;\\r\\n  border: 1px solid transparent;\\r\\n  background: transparent;\\r\\n  border-radius: 1.3px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\\r\\n  height: 14px;\\r\\n  width: 14px;\\r\\n  border-radius: 50px;\\r\\n  border: 1px solid var(--youtube-red);\\r\\n  background: var(--youtube-red);\\r\\n  cursor: pointer;\\r\\n  margin-top: 5px;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\\r\\n  outline: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\\r\\n  border: 1px solid #fff;\\r\\n  background: #fff;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container .hidden {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.ipywebcam.video-container svg {\\r\\n  width: 28px;\\r\\n  height: 28px;\\r\\n  fill: #fff;\\r\\n  stroke: #fff;\\r\\n  cursor: pointer;\\r\\n  vertical-align: middle;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./video.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};"
     ],
     "version": 3
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/remoteEntry.d5b4713515a5ec1ca820.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.5b470e48e56a617973b6.js.map`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8279411764705883%*

 * *Differences: {"'file'": "'remoteEntry.5b470e48e56a617973b6.js'",*

 * * "'mappings'": "';;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WC []*

```diff
@@ -1,42 +1,44 @@
 {
-    "file": "remoteEntry.d5b4713515a5ec1ca820.js",
-    "mappings": ";;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,qMAAqM;WACnO;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCxCA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oJAAoJ;WACpJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI,aAAa;WACjB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC5CA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;WACA;WACA,WAAW,6BAA6B,iBAAiB,GAAG,qEAAqE;WACjI;WACA;WACA;WACA,qCAAqC,aAAa,EAAE,wDAAwD,2BAA2B,4BAA4B,2BAA2B,+CAA+C,mCAAmC;WAChR;WACA;WACA;WACA,qBAAqB,8BAA8B,SAAS,sDAAsD,gBAAgB,eAAe,KAAK,6DAA6D,SAAS,SAAS,QAAQ,eAAe,KAAK,eAAe,qGAAqG,WAAW,aAAa;WAC7Y;WACA;WACA;WACA,gBAAgB,8BAA8B,qBAAqB,YAAY,sBAAsB,SAAS,iDAAiD,6FAA6F,WAAW,uBAAuB,2BAA2B,wBAAwB,KAAK,oCAAoC,oBAAoB,wBAAwB,oBAAoB,SAAS,KAAK,yBAAyB,KAAK,gCAAgC,yBAAyB,QAAQ,eAAe,KAAK,eAAe,4DAA4D;WACtoB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;WACA;WACA,CAAC;WACD;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN,KAAK,WAAW;WAChB,GAAG;WACH;WACA;;;;;WCzKA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;WCrFA;;;;;UEAA;UACA;UACA;UACA",
+    "file": "remoteEntry.5b470e48e56a617973b6.js",
+    "mappings": ";;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,mQAAmQ;WACjS;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCxCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oJAAoJ;WACpJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI,aAAa;WACjB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC7CA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;WACA;WACA,WAAW,6BAA6B,iBAAiB,GAAG,qEAAqE;WACjI;WACA;WACA;WACA,qCAAqC,aAAa,EAAE,wDAAwD,2BAA2B,4BAA4B,2BAA2B,+CAA+C,mCAAmC;WAChR;WACA;WACA;WACA,qBAAqB,8BAA8B,SAAS,sDAAsD,gBAAgB,eAAe,KAAK,6DAA6D,SAAS,SAAS,QAAQ,eAAe,KAAK,eAAe,qGAAqG,WAAW,aAAa;WAC7Y;WACA;WACA;WACA,gBAAgB,8BAA8B,qBAAqB,YAAY,sBAAsB,SAAS,iDAAiD,6FAA6F,WAAW,uBAAuB,2BAA2B,wBAAwB,KAAK,oCAAoC,oBAAoB,wBAAwB,oBAAoB,SAAS,KAAK,yBAAyB,KAAK,gCAAgC,yBAAyB,QAAQ,eAAe,KAAK,eAAe,4DAA4D;WACtoB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;WACA;WACA,CAAC;WACD;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN,KAAK,WAAW;WAChB,GAAG;WACH;WACA;;;;;WC3KA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;WCrFA;;;;;UEAA;UACA;UACA;UACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
         "webpack://ipywebcam/webpack/container-entry",
         "webpack://ipywebcam/webpack/bootstrap",
         "webpack://ipywebcam/webpack/runtime/define property getters",
         "webpack://ipywebcam/webpack/runtime/ensure chunk",
         "webpack://ipywebcam/webpack/runtime/get javascript chunk filename",
         "webpack://ipywebcam/webpack/runtime/global",
         "webpack://ipywebcam/webpack/runtime/hasOwnProperty shorthand",
         "webpack://ipywebcam/webpack/runtime/load script",
+        "webpack://ipywebcam/webpack/runtime/make namespace object",
         "webpack://ipywebcam/webpack/runtime/sharing",
         "webpack://ipywebcam/webpack/runtime/publicPath",
         "webpack://ipywebcam/webpack/runtime/consumes",
         "webpack://ipywebcam/webpack/runtime/jsonp chunk loading",
         "webpack://ipywebcam/webpack/runtime/nonce",
         "webpack://ipywebcam/webpack/before-startup",
         "webpack://ipywebcam/webpack/startup",
         "webpack://ipywebcam/webpack/after-startup"
     ],
     "sourcesContent": [
         "var moduleMap = {\n\t\"./index\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\")))));\n\t},\n\t\"./extension\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_plugin_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/plugin */ \"./lib/plugin.js\")))));\n\t}\n};\nvar get = (module, getScope) => {\n\t__webpack_require__.R = getScope;\n\tgetScope = (\n\t\t__webpack_require__.o(moduleMap, module)\n\t\t\t? moduleMap[module]()\n\t\t\t: Promise.resolve().then(() => {\n\t\t\t\tthrow new Error('Module \"' + module + '\" does not exist in container.');\n\t\t\t})\n\t);\n\t__webpack_require__.R = undefined;\n\treturn getScope;\n};\nvar init = (shareScope, initScope) => {\n\tif (!__webpack_require__.S) return;\n\tvar name = \"default\"\n\tvar oldScope = __webpack_require__.S[name];\n\tif(oldScope && oldScope !== shareScope) throw new Error(\"Container initialization failed as it has already been initialized with a different share scope\");\n\t__webpack_require__.S[name] = shareScope;\n\treturn __webpack_require__.I(name, initScope);\n};\n\n// This exports getters to disallow modifications\n__webpack_require__.d(exports, {\n\tget: () => (get),\n\tinit: () => (init)\n});",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n",
         "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};",
         "__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};",
-        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_recorder_js-lib_webcam_js\":\"f229668a6df6f0256c34\",\"lib_index_js\":\"9c3b5fbf4b9efeeb7001\",\"lib_plugin_js\":\"0d80ab6fa0ba98b64288\",\"vendors-node_modules_lru-cache_index_js\":\"5e542bbc8dc8a7e130a5\"}[chunkId] + \".js\";\n};",
+        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_recorder_js-lib_webcam_js\":\"8c4e4e3e5f01476b92ce\",\"lib_index_js\":\"9c3b5fbf4b9efeeb7001\",\"lib_plugin_js\":\"0d80ab6fa0ba98b64288\",\"vendors-node_modules_d3_src_index_js\":\"c640e379b3e18688cd74\",\"vendors-node_modules_lru-cache_index_js\":\"5e542bbc8dc8a7e130a5\"}[chunkId] + \".js\";\n};",
         "__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();",
         "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))",
         "var inProgress = {};\nvar dataWebpackPrefix = \"ipywebcam:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};",
-        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebcam\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"ipywebcam\", \"0.1.7\", () => (Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t\tregister(\"lru-cache\", \"7.14.1\", () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! ./node_modules/lru-cache/index.js */ \"./node_modules/lru-cache/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
+        "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};",
+        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebcam\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"d3\", \"7.8.2\", () => (__webpack_require__.e(\"vendors-node_modules_d3_src_index_js\").then(() => (() => (__webpack_require__(/*! ./node_modules/d3/src/index.js */ \"./node_modules/d3/src/index.js\"))))));\n\t\t\tregister(\"ipywebcam\", \"0.1.8\", () => (Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t\tregister(\"lru-cache\", \"7.14.1\", () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! ./node_modules/lru-cache/index.js */ \"./node_modules/lru-cache/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
         "var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;",
-        "var parseVersion = (str) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar p=p=>{return p.split(\".\").map((p=>{return+p==p?+p:p}))},n=/^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str),r=n[1]?p(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,p(n[2]))),n[3]&&(r.push([]),r.push.apply(r,p(n[3]))),r;\n}\nvar versionLt = (a, b) => {\n\t// see webpack/lib/util/semver.js for original code\n\ta=parseVersion(a),b=parseVersion(b);for(var r=0;;){if(r>=a.length)return r<b.length&&\"u\"!=(typeof b[r])[0];var e=a[r],n=(typeof e)[0];if(r>=b.length)return\"u\"==n;var t=b[r],f=(typeof t)[0];if(n!=f)return\"o\"==n&&\"n\"==f||(\"s\"==f||\"u\"==n);if(\"o\"!=n&&\"u\"!=n&&e!=t)return e<t;r++}\n}\nvar rangeToString = (range) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\((.+)\\)$/,\"$1\")}\n}\nvar satisfy = (range, version) => {\n\t// see webpack/lib/util/semver.js for original code\n\tif(0 in range){version=parseVersion(version);var e=range[0],r=e<0;r&&(e=-e-1);for(var n=0,i=1,a=!0;;i++,n++){var f,s,g=i<range.length?(typeof range[i])[0]:\"\";if(n>=version.length||\"o\"==(s=(typeof(f=version[n]))[0]))return!a||(\"u\"==g?i>e&&!r:\"\"==g!=r);if(\"u\"==s){if(!a||\"u\"!=g)return!1}else if(a)if(g==s)if(i<=e){if(f!=range[i])return!1}else{if(r?f>range[i]:f<range[i])return!1;f!=range[i]&&(a=!1)}else if(\"s\"!=g&&\"n\"!=g){if(r||i<=e)return!1;a=!1,i--}else{if(i<=e||s<g!=r)return!1;a=!1}else\"s\"!=g&&\"n\"!=g&&(a=!1,i--)}}var t=[],o=t.pop.bind(t);for(n=1;n<range.length;n++){var u=range[n];t.push(1==u?o()|o():2==u?o()&o():u?satisfy(u,version):!o())}return!!o();\n}\nvar ensureExistence = (scopeName, key) => {\n\tvar scope = __webpack_require__.S[scopeName];\n\tif(!scope || !__webpack_require__.o(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);\n\treturn scope;\n};\nvar findVersion = (scope, key) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar findSingletonVersionKey = (scope, key) => {\n\tvar versions = scope[key];\n\treturn Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || (!versions[a].loaded && versionLt(a, b)) ? b : a;\n\t}, 0);\n};\nvar getInvalidSingletonVersionMessage = (scope, key, version, requiredVersion) => {\n\treturn \"Unsatisfied version \" + version + \" from \" + (version && scope[key][version].from) + \" of shared singleton module \" + key + \" (required \" + rangeToString(requiredVersion) + \")\"\n};\nvar getSingleton = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\treturn get(scope[key][version]);\n};\nvar getSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) typeof console !== \"undefined\" && console.warn && console.warn(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar getStrictSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) throw new Error(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar findValidVersion = (scope, key, requiredVersion) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\tif (!satisfy(requiredVersion, b)) return a;\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar getInvalidVersionMessage = (scope, scopeName, key, requiredVersion) => {\n\tvar versions = scope[key];\n\treturn \"No satisfying version (\" + rangeToString(requiredVersion) + \") of shared module \" + key + \" found in shared scope \" + scopeName + \".\\n\" +\n\t\t\"Available versions: \" + Object.keys(versions).map((key) => {\n\t\treturn key + \" from \" + versions[key].from;\n\t}).join(\", \");\n};\nvar getValidVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar entry = findValidVersion(scope, key, requiredVersion);\n\tif(entry) return get(entry);\n\tthrow new Error(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar warnInvalidVersion = (scope, scopeName, key, requiredVersion) => {\n\ttypeof console !== \"undefined\" && console.warn && console.warn(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar get = (entry) => {\n\tentry.loaded = 1;\n\treturn entry.get()\n};\nvar init = (fn) => (function(scopeName, a, b, c) {\n\tvar promise = __webpack_require__.I(scopeName);\n\tif (promise && promise.then) return promise.then(fn.bind(fn, scopeName, __webpack_require__.S[scopeName], a, b, c));\n\treturn fn(scopeName, __webpack_require__.S[scopeName], a, b, c);\n});\n\nvar load = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn get(findVersion(scope, key));\n});\nvar loadFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\treturn scope && __webpack_require__.o(scope, key) ? get(findVersion(scope, key)) : fallback();\n});\nvar loadVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingleton = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getValidVersion(scope, scopeName, key, version);\n});\nvar loadStrictSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar loadVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingletonFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tvar entry = scope && __webpack_require__.o(scope, key) && findValidVersion(scope, key, version);\n\treturn entry ? get(entry) : fallback();\n});\nvar loadStrictSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar installedModules = {};\nvar moduleToHandlerMapping = {\n\t\"webpack/sharing/consume/default/@jupyter-widgets/base\": () => (loadSingletonVersionCheck(\"default\", \"@jupyter-widgets/base\", [,[1,6],[1,5],[1,4],[1,3],[1,2],[1,1,1,10],1,1,1,1,1])),\n\t\"webpack/sharing/consume/default/lru-cache/lru-cache\": () => (loadStrictVersionCheckFallback(\"default\", \"lru-cache\", [1,7,14,1], () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! lru-cache */ \"./node_modules/lru-cache/index.js\")))))))\n};\n// no consumes in initial chunks\nvar chunkMapping = {\n\t\"lib_recorder_js-lib_webcam_js\": [\n\t\t\"webpack/sharing/consume/default/@jupyter-widgets/base\",\n\t\t\"webpack/sharing/consume/default/lru-cache/lru-cache\"\n\t]\n};\n__webpack_require__.f.consumes = (chunkId, promises) => {\n\tif(__webpack_require__.o(chunkMapping, chunkId)) {\n\t\tchunkMapping[chunkId].forEach((id) => {\n\t\t\tif(__webpack_require__.o(installedModules, id)) return promises.push(installedModules[id]);\n\t\t\tvar onFactory = (factory) => {\n\t\t\t\tinstalledModules[id] = 0;\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tmodule.exports = factory();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onError = (error) => {\n\t\t\t\tdelete installedModules[id];\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tvar promise = moduleToHandlerMapping[id]();\n\t\t\t\tif(promise.then) {\n\t\t\t\t\tpromises.push(installedModules[id] = promise.then(onFactory)['catch'](onError));\n\t\t\t\t} else onFactory(promise);\n\t\t\t} catch(e) { onError(e); }\n\t\t});\n\t}\n}",
+        "var parseVersion = (str) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar p=p=>{return p.split(\".\").map((p=>{return+p==p?+p:p}))},n=/^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str),r=n[1]?p(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,p(n[2]))),n[3]&&(r.push([]),r.push.apply(r,p(n[3]))),r;\n}\nvar versionLt = (a, b) => {\n\t// see webpack/lib/util/semver.js for original code\n\ta=parseVersion(a),b=parseVersion(b);for(var r=0;;){if(r>=a.length)return r<b.length&&\"u\"!=(typeof b[r])[0];var e=a[r],n=(typeof e)[0];if(r>=b.length)return\"u\"==n;var t=b[r],f=(typeof t)[0];if(n!=f)return\"o\"==n&&\"n\"==f||(\"s\"==f||\"u\"==n);if(\"o\"!=n&&\"u\"!=n&&e!=t)return e<t;r++}\n}\nvar rangeToString = (range) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\((.+)\\)$/,\"$1\")}\n}\nvar satisfy = (range, version) => {\n\t// see webpack/lib/util/semver.js for original code\n\tif(0 in range){version=parseVersion(version);var e=range[0],r=e<0;r&&(e=-e-1);for(var n=0,i=1,a=!0;;i++,n++){var f,s,g=i<range.length?(typeof range[i])[0]:\"\";if(n>=version.length||\"o\"==(s=(typeof(f=version[n]))[0]))return!a||(\"u\"==g?i>e&&!r:\"\"==g!=r);if(\"u\"==s){if(!a||\"u\"!=g)return!1}else if(a)if(g==s)if(i<=e){if(f!=range[i])return!1}else{if(r?f>range[i]:f<range[i])return!1;f!=range[i]&&(a=!1)}else if(\"s\"!=g&&\"n\"!=g){if(r||i<=e)return!1;a=!1,i--}else{if(i<=e||s<g!=r)return!1;a=!1}else\"s\"!=g&&\"n\"!=g&&(a=!1,i--)}}var t=[],o=t.pop.bind(t);for(n=1;n<range.length;n++){var u=range[n];t.push(1==u?o()|o():2==u?o()&o():u?satisfy(u,version):!o())}return!!o();\n}\nvar ensureExistence = (scopeName, key) => {\n\tvar scope = __webpack_require__.S[scopeName];\n\tif(!scope || !__webpack_require__.o(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);\n\treturn scope;\n};\nvar findVersion = (scope, key) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar findSingletonVersionKey = (scope, key) => {\n\tvar versions = scope[key];\n\treturn Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || (!versions[a].loaded && versionLt(a, b)) ? b : a;\n\t}, 0);\n};\nvar getInvalidSingletonVersionMessage = (scope, key, version, requiredVersion) => {\n\treturn \"Unsatisfied version \" + version + \" from \" + (version && scope[key][version].from) + \" of shared singleton module \" + key + \" (required \" + rangeToString(requiredVersion) + \")\"\n};\nvar getSingleton = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\treturn get(scope[key][version]);\n};\nvar getSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) typeof console !== \"undefined\" && console.warn && console.warn(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar getStrictSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) throw new Error(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar findValidVersion = (scope, key, requiredVersion) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\tif (!satisfy(requiredVersion, b)) return a;\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar getInvalidVersionMessage = (scope, scopeName, key, requiredVersion) => {\n\tvar versions = scope[key];\n\treturn \"No satisfying version (\" + rangeToString(requiredVersion) + \") of shared module \" + key + \" found in shared scope \" + scopeName + \".\\n\" +\n\t\t\"Available versions: \" + Object.keys(versions).map((key) => {\n\t\treturn key + \" from \" + versions[key].from;\n\t}).join(\", \");\n};\nvar getValidVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar entry = findValidVersion(scope, key, requiredVersion);\n\tif(entry) return get(entry);\n\tthrow new Error(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar warnInvalidVersion = (scope, scopeName, key, requiredVersion) => {\n\ttypeof console !== \"undefined\" && console.warn && console.warn(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar get = (entry) => {\n\tentry.loaded = 1;\n\treturn entry.get()\n};\nvar init = (fn) => (function(scopeName, a, b, c) {\n\tvar promise = __webpack_require__.I(scopeName);\n\tif (promise && promise.then) return promise.then(fn.bind(fn, scopeName, __webpack_require__.S[scopeName], a, b, c));\n\treturn fn(scopeName, __webpack_require__.S[scopeName], a, b, c);\n});\n\nvar load = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn get(findVersion(scope, key));\n});\nvar loadFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\treturn scope && __webpack_require__.o(scope, key) ? get(findVersion(scope, key)) : fallback();\n});\nvar loadVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingleton = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getValidVersion(scope, scopeName, key, version);\n});\nvar loadStrictSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar loadVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingletonFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tvar entry = scope && __webpack_require__.o(scope, key) && findValidVersion(scope, key, version);\n\treturn entry ? get(entry) : fallback();\n});\nvar loadStrictSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar installedModules = {};\nvar moduleToHandlerMapping = {\n\t\"webpack/sharing/consume/default/@jupyter-widgets/base\": () => (loadSingletonVersionCheck(\"default\", \"@jupyter-widgets/base\", [,[1,6],[1,5],[1,4],[1,3],[1,2],[1,1,1,10],1,1,1,1,1])),\n\t\"webpack/sharing/consume/default/lru-cache/lru-cache\": () => (loadStrictVersionCheckFallback(\"default\", \"lru-cache\", [1,7,14,1], () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! lru-cache */ \"./node_modules/lru-cache/index.js\"))))))),\n\t\"webpack/sharing/consume/default/d3/d3\": () => (loadStrictVersionCheckFallback(\"default\", \"d3\", [1,7,8,2], () => (__webpack_require__.e(\"vendors-node_modules_d3_src_index_js\").then(() => (() => (__webpack_require__(/*! d3 */ \"./node_modules/d3/src/index.js\")))))))\n};\n// no consumes in initial chunks\nvar chunkMapping = {\n\t\"lib_recorder_js-lib_webcam_js\": [\n\t\t\"webpack/sharing/consume/default/@jupyter-widgets/base\",\n\t\t\"webpack/sharing/consume/default/lru-cache/lru-cache\",\n\t\t\"webpack/sharing/consume/default/d3/d3\"\n\t]\n};\n__webpack_require__.f.consumes = (chunkId, promises) => {\n\tif(__webpack_require__.o(chunkMapping, chunkId)) {\n\t\tchunkMapping[chunkId].forEach((id) => {\n\t\t\tif(__webpack_require__.o(installedModules, id)) return promises.push(installedModules[id]);\n\t\t\tvar onFactory = (factory) => {\n\t\t\t\tinstalledModules[id] = 0;\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tmodule.exports = factory();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onError = (error) => {\n\t\t\t\tdelete installedModules[id];\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tvar promise = moduleToHandlerMapping[id]();\n\t\t\t\tif(promise.then) {\n\t\t\t\t\tpromises.push(installedModules[id] = promise.then(onFactory)['catch'](onError));\n\t\t\t\t} else onFactory(promise);\n\t\t\t} catch(e) { onError(e); }\n\t\t});\n\t}\n}",
         "// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"ipywebcam\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkipywebcam\"] = self[\"webpackChunkipywebcam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));",
         "__webpack_require__.nc = undefined;",
         "",
         "// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(\"webpack/container/entry/ipywebcam\");\n",
         ""
     ],
     "version": 3
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/remoteEntry.de2e30b4afcc045c5dab.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.90f2b2dbfce5b0361bf7.js`

 * *Files 5% similar despite different names*

#### js-beautify {}

```diff
@@ -155,17 +155,18 @@
     (() => {
         /******/ // This function allow to reference async chunks
         /******/
         __webpack_require__.u = (chunkId) => {
             /******/ // return url for filenames based on template
             /******/
             return "" + chunkId + "." + {
-                "lib_recorder_js-lib_webcam_js": "2c9276c21e75d417d68e",
+                "lib_recorder_js-lib_webcam_js": "bee145437cd81aad24f9",
                 "lib_index_js": "9c3b5fbf4b9efeeb7001",
                 "lib_plugin_js": "0d80ab6fa0ba98b64288",
+                "vendors-node_modules_d3_src_index_js": "c640e379b3e18688cd74",
                 "vendors-node_modules_lru-cache_index_js": "5e542bbc8dc8a7e130a5"
             } [chunkId] + ".js";
             /******/
         };
         /******/
     })();
     /******/
@@ -293,14 +294,38 @@
             needAttach && document.head.appendChild(script);
             /******/
         };
         /******/
     })();
     /******/
     /******/
+    /* webpack/runtime/make namespace object */
+    /******/
+    (() => {
+        /******/ // define __esModule on exports
+        /******/
+        __webpack_require__.r = (exports) => {
+            /******/
+            if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
+                /******/
+                Object.defineProperty(exports, Symbol.toStringTag, {
+                    value: 'Module'
+                });
+                /******/
+            }
+            /******/
+            Object.defineProperty(exports, '__esModule', {
+                value: true
+            });
+            /******/
+        };
+        /******/
+    })();
+    /******/
+    /******/
     /* webpack/runtime/sharing */
     /******/
     (() => {
         /******/
         __webpack_require__.S = {};
         /******/
         var initPromises = {};
@@ -373,15 +398,17 @@
             /******/
             var promises = [];
             /******/
             switch (name) {
                 /******/
                 case "default": {
                     /******/
-                    register("ipywebcam", "0.1.7", () => (Promise.all([__webpack_require__.e("lib_recorder_js-lib_webcam_js"), __webpack_require__.e("lib_index_js")]).then(() => (() => (__webpack_require__( /*! ./lib/index.js */ "./lib/index.js"))))));
+                    register("d3", "7.8.2", () => (__webpack_require__.e("vendors-node_modules_d3_src_index_js").then(() => (() => (__webpack_require__( /*! ./node_modules/d3/src/index.js */ "./node_modules/d3/src/index.js"))))));
+                    /******/
+                    register("ipywebcam", "0.1.8", () => (Promise.all([__webpack_require__.e("lib_recorder_js-lib_webcam_js"), __webpack_require__.e("lib_index_js")]).then(() => (() => (__webpack_require__( /*! ./lib/index.js */ "./lib/index.js"))))));
                     /******/
                     register("lru-cache", "7.14.1", () => (__webpack_require__.e("vendors-node_modules_lru-cache_index_js").then(() => (() => (__webpack_require__( /*! ./node_modules/lru-cache/index.js */ "./node_modules/lru-cache/index.js"))))));
                     /******/
                 }
                 /******/
                 break;
                 /******/
@@ -772,26 +799,30 @@
                 [1, 5],
                 [1, 4],
                 [1, 3],
                 [1, 2],
                 [1, 1, 1, 10], 1, 1, 1, 1, 1
             ])),
             /******/
-            "webpack/sharing/consume/default/lru-cache/lru-cache": () => (loadStrictVersionCheckFallback("default", "lru-cache", [1, 7, 14, 1], () => (__webpack_require__.e("vendors-node_modules_lru-cache_index_js").then(() => (() => (__webpack_require__( /*! lru-cache */ "./node_modules/lru-cache/index.js")))))))
+            "webpack/sharing/consume/default/lru-cache/lru-cache": () => (loadStrictVersionCheckFallback("default", "lru-cache", [1, 7, 14, 1], () => (__webpack_require__.e("vendors-node_modules_lru-cache_index_js").then(() => (() => (__webpack_require__( /*! lru-cache */ "./node_modules/lru-cache/index.js"))))))),
+            /******/
+            "webpack/sharing/consume/default/d3/d3": () => (loadStrictVersionCheckFallback("default", "d3", [1, 7, 8, 2], () => (__webpack_require__.e("vendors-node_modules_d3_src_index_js").then(() => (() => (__webpack_require__( /*! d3 */ "./node_modules/d3/src/index.js")))))))
             /******/
         };
         /******/ // no consumes in initial chunks
         /******/
         var chunkMapping = {
             /******/
             "lib_recorder_js-lib_webcam_js": [
                 /******/
                 "webpack/sharing/consume/default/@jupyter-widgets/base",
                 /******/
-                "webpack/sharing/consume/default/lru-cache/lru-cache"
+                "webpack/sharing/consume/default/lru-cache/lru-cache",
+                /******/
+                "webpack/sharing/consume/default/d3/d3"
                 /******/
             ]
             /******/
         };
         /******/
         __webpack_require__.f.consumes = (chunkId, promises) => {
             /******/
@@ -1018,8 +1049,8 @@
     /******/
     var __webpack_exports__ = __webpack_require__("webpack/container/entry/ipywebcam");
     /******/
     (_JUPYTERLAB = typeof _JUPYTERLAB === "undefined" ? {} : _JUPYTERLAB).ipywebcam = __webpack_exports__;
     /******/
     /******/
 })();
-//# sourceMappingURL=remoteEntry.de2e30b4afcc045c5dab.js.map
+//# sourceMappingURL=remoteEntry.90f2b2dbfce5b0361bf7.js.map
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/remoteEntry.de2e30b4afcc045c5dab.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/remoteEntry.90f2b2dbfce5b0361bf7.js.map`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8279411764705883%*

 * *Differences: {"'file'": "'remoteEntry.90f2b2dbfce5b0361bf7.js'",*

 * * "'mappings'": "';;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WC []*

```diff
@@ -1,42 +1,44 @@
 {
-    "file": "remoteEntry.de2e30b4afcc045c5dab.js",
-    "mappings": ";;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,qMAAqM;WACnO;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCxCA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oJAAoJ;WACpJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI,aAAa;WACjB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC5CA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;WACA;WACA,WAAW,6BAA6B,iBAAiB,GAAG,qEAAqE;WACjI;WACA;WACA;WACA,qCAAqC,aAAa,EAAE,wDAAwD,2BAA2B,4BAA4B,2BAA2B,+CAA+C,mCAAmC;WAChR;WACA;WACA;WACA,qBAAqB,8BAA8B,SAAS,sDAAsD,gBAAgB,eAAe,KAAK,6DAA6D,SAAS,SAAS,QAAQ,eAAe,KAAK,eAAe,qGAAqG,WAAW,aAAa;WAC7Y;WACA;WACA;WACA,gBAAgB,8BAA8B,qBAAqB,YAAY,sBAAsB,SAAS,iDAAiD,6FAA6F,WAAW,uBAAuB,2BAA2B,wBAAwB,KAAK,oCAAoC,oBAAoB,wBAAwB,oBAAoB,SAAS,KAAK,yBAAyB,KAAK,gCAAgC,yBAAyB,QAAQ,eAAe,KAAK,eAAe,4DAA4D;WACtoB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;WACA;WACA,CAAC;WACD;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN,KAAK,WAAW;WAChB,GAAG;WACH;WACA;;;;;WCzKA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;WCrFA;;;;;UEAA;UACA;UACA;UACA",
+    "file": "remoteEntry.90f2b2dbfce5b0361bf7.js",
+    "mappings": ";;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,mQAAmQ;WACjS;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCxCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oJAAoJ;WACpJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI,aAAa;WACjB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC7CA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;WACA;WACA,WAAW,6BAA6B,iBAAiB,GAAG,qEAAqE;WACjI;WACA;WACA;WACA,qCAAqC,aAAa,EAAE,wDAAwD,2BAA2B,4BAA4B,2BAA2B,+CAA+C,mCAAmC;WAChR;WACA;WACA;WACA,qBAAqB,8BAA8B,SAAS,sDAAsD,gBAAgB,eAAe,KAAK,6DAA6D,SAAS,SAAS,QAAQ,eAAe,KAAK,eAAe,qGAAqG,WAAW,aAAa;WAC7Y;WACA;WACA;WACA,gBAAgB,8BAA8B,qBAAqB,YAAY,sBAAsB,SAAS,iDAAiD,6FAA6F,WAAW,uBAAuB,2BAA2B,wBAAwB,KAAK,oCAAoC,oBAAoB,wBAAwB,oBAAoB,SAAS,KAAK,yBAAyB,KAAK,gCAAgC,yBAAyB,QAAQ,eAAe,KAAK,eAAe,4DAA4D;WACtoB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;WACA;WACA,CAAC;WACD;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN,KAAK,WAAW;WAChB,GAAG;WACH;WACA;;;;;WC3KA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;WCrFA;;;;;UEAA;UACA;UACA;UACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
         "webpack://ipywebcam/webpack/container-entry",
         "webpack://ipywebcam/webpack/bootstrap",
         "webpack://ipywebcam/webpack/runtime/define property getters",
         "webpack://ipywebcam/webpack/runtime/ensure chunk",
         "webpack://ipywebcam/webpack/runtime/get javascript chunk filename",
         "webpack://ipywebcam/webpack/runtime/global",
         "webpack://ipywebcam/webpack/runtime/hasOwnProperty shorthand",
         "webpack://ipywebcam/webpack/runtime/load script",
+        "webpack://ipywebcam/webpack/runtime/make namespace object",
         "webpack://ipywebcam/webpack/runtime/sharing",
         "webpack://ipywebcam/webpack/runtime/publicPath",
         "webpack://ipywebcam/webpack/runtime/consumes",
         "webpack://ipywebcam/webpack/runtime/jsonp chunk loading",
         "webpack://ipywebcam/webpack/runtime/nonce",
         "webpack://ipywebcam/webpack/before-startup",
         "webpack://ipywebcam/webpack/startup",
         "webpack://ipywebcam/webpack/after-startup"
     ],
     "sourcesContent": [
         "var moduleMap = {\n\t\"./index\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\")))));\n\t},\n\t\"./extension\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_plugin_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/plugin */ \"./lib/plugin.js\")))));\n\t}\n};\nvar get = (module, getScope) => {\n\t__webpack_require__.R = getScope;\n\tgetScope = (\n\t\t__webpack_require__.o(moduleMap, module)\n\t\t\t? moduleMap[module]()\n\t\t\t: Promise.resolve().then(() => {\n\t\t\t\tthrow new Error('Module \"' + module + '\" does not exist in container.');\n\t\t\t})\n\t);\n\t__webpack_require__.R = undefined;\n\treturn getScope;\n};\nvar init = (shareScope, initScope) => {\n\tif (!__webpack_require__.S) return;\n\tvar name = \"default\"\n\tvar oldScope = __webpack_require__.S[name];\n\tif(oldScope && oldScope !== shareScope) throw new Error(\"Container initialization failed as it has already been initialized with a different share scope\");\n\t__webpack_require__.S[name] = shareScope;\n\treturn __webpack_require__.I(name, initScope);\n};\n\n// This exports getters to disallow modifications\n__webpack_require__.d(exports, {\n\tget: () => (get),\n\tinit: () => (init)\n});",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n",
         "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};",
         "__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};",
-        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_recorder_js-lib_webcam_js\":\"2c9276c21e75d417d68e\",\"lib_index_js\":\"9c3b5fbf4b9efeeb7001\",\"lib_plugin_js\":\"0d80ab6fa0ba98b64288\",\"vendors-node_modules_lru-cache_index_js\":\"5e542bbc8dc8a7e130a5\"}[chunkId] + \".js\";\n};",
+        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_recorder_js-lib_webcam_js\":\"bee145437cd81aad24f9\",\"lib_index_js\":\"9c3b5fbf4b9efeeb7001\",\"lib_plugin_js\":\"0d80ab6fa0ba98b64288\",\"vendors-node_modules_d3_src_index_js\":\"c640e379b3e18688cd74\",\"vendors-node_modules_lru-cache_index_js\":\"5e542bbc8dc8a7e130a5\"}[chunkId] + \".js\";\n};",
         "__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();",
         "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))",
         "var inProgress = {};\nvar dataWebpackPrefix = \"ipywebcam:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};",
-        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebcam\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"ipywebcam\", \"0.1.7\", () => (Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t\tregister(\"lru-cache\", \"7.14.1\", () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! ./node_modules/lru-cache/index.js */ \"./node_modules/lru-cache/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
+        "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};",
+        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebcam\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"d3\", \"7.8.2\", () => (__webpack_require__.e(\"vendors-node_modules_d3_src_index_js\").then(() => (() => (__webpack_require__(/*! ./node_modules/d3/src/index.js */ \"./node_modules/d3/src/index.js\"))))));\n\t\t\tregister(\"ipywebcam\", \"0.1.8\", () => (Promise.all([__webpack_require__.e(\"lib_recorder_js-lib_webcam_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t\tregister(\"lru-cache\", \"7.14.1\", () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! ./node_modules/lru-cache/index.js */ \"./node_modules/lru-cache/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
         "var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;",
-        "var parseVersion = (str) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar p=p=>{return p.split(\".\").map((p=>{return+p==p?+p:p}))},n=/^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str),r=n[1]?p(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,p(n[2]))),n[3]&&(r.push([]),r.push.apply(r,p(n[3]))),r;\n}\nvar versionLt = (a, b) => {\n\t// see webpack/lib/util/semver.js for original code\n\ta=parseVersion(a),b=parseVersion(b);for(var r=0;;){if(r>=a.length)return r<b.length&&\"u\"!=(typeof b[r])[0];var e=a[r],n=(typeof e)[0];if(r>=b.length)return\"u\"==n;var t=b[r],f=(typeof t)[0];if(n!=f)return\"o\"==n&&\"n\"==f||(\"s\"==f||\"u\"==n);if(\"o\"!=n&&\"u\"!=n&&e!=t)return e<t;r++}\n}\nvar rangeToString = (range) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\((.+)\\)$/,\"$1\")}\n}\nvar satisfy = (range, version) => {\n\t// see webpack/lib/util/semver.js for original code\n\tif(0 in range){version=parseVersion(version);var e=range[0],r=e<0;r&&(e=-e-1);for(var n=0,i=1,a=!0;;i++,n++){var f,s,g=i<range.length?(typeof range[i])[0]:\"\";if(n>=version.length||\"o\"==(s=(typeof(f=version[n]))[0]))return!a||(\"u\"==g?i>e&&!r:\"\"==g!=r);if(\"u\"==s){if(!a||\"u\"!=g)return!1}else if(a)if(g==s)if(i<=e){if(f!=range[i])return!1}else{if(r?f>range[i]:f<range[i])return!1;f!=range[i]&&(a=!1)}else if(\"s\"!=g&&\"n\"!=g){if(r||i<=e)return!1;a=!1,i--}else{if(i<=e||s<g!=r)return!1;a=!1}else\"s\"!=g&&\"n\"!=g&&(a=!1,i--)}}var t=[],o=t.pop.bind(t);for(n=1;n<range.length;n++){var u=range[n];t.push(1==u?o()|o():2==u?o()&o():u?satisfy(u,version):!o())}return!!o();\n}\nvar ensureExistence = (scopeName, key) => {\n\tvar scope = __webpack_require__.S[scopeName];\n\tif(!scope || !__webpack_require__.o(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);\n\treturn scope;\n};\nvar findVersion = (scope, key) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar findSingletonVersionKey = (scope, key) => {\n\tvar versions = scope[key];\n\treturn Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || (!versions[a].loaded && versionLt(a, b)) ? b : a;\n\t}, 0);\n};\nvar getInvalidSingletonVersionMessage = (scope, key, version, requiredVersion) => {\n\treturn \"Unsatisfied version \" + version + \" from \" + (version && scope[key][version].from) + \" of shared singleton module \" + key + \" (required \" + rangeToString(requiredVersion) + \")\"\n};\nvar getSingleton = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\treturn get(scope[key][version]);\n};\nvar getSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) typeof console !== \"undefined\" && console.warn && console.warn(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar getStrictSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) throw new Error(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar findValidVersion = (scope, key, requiredVersion) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\tif (!satisfy(requiredVersion, b)) return a;\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar getInvalidVersionMessage = (scope, scopeName, key, requiredVersion) => {\n\tvar versions = scope[key];\n\treturn \"No satisfying version (\" + rangeToString(requiredVersion) + \") of shared module \" + key + \" found in shared scope \" + scopeName + \".\\n\" +\n\t\t\"Available versions: \" + Object.keys(versions).map((key) => {\n\t\treturn key + \" from \" + versions[key].from;\n\t}).join(\", \");\n};\nvar getValidVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar entry = findValidVersion(scope, key, requiredVersion);\n\tif(entry) return get(entry);\n\tthrow new Error(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar warnInvalidVersion = (scope, scopeName, key, requiredVersion) => {\n\ttypeof console !== \"undefined\" && console.warn && console.warn(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar get = (entry) => {\n\tentry.loaded = 1;\n\treturn entry.get()\n};\nvar init = (fn) => (function(scopeName, a, b, c) {\n\tvar promise = __webpack_require__.I(scopeName);\n\tif (promise && promise.then) return promise.then(fn.bind(fn, scopeName, __webpack_require__.S[scopeName], a, b, c));\n\treturn fn(scopeName, __webpack_require__.S[scopeName], a, b, c);\n});\n\nvar load = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn get(findVersion(scope, key));\n});\nvar loadFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\treturn scope && __webpack_require__.o(scope, key) ? get(findVersion(scope, key)) : fallback();\n});\nvar loadVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingleton = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getValidVersion(scope, scopeName, key, version);\n});\nvar loadStrictSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar loadVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingletonFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tvar entry = scope && __webpack_require__.o(scope, key) && findValidVersion(scope, key, version);\n\treturn entry ? get(entry) : fallback();\n});\nvar loadStrictSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar installedModules = {};\nvar moduleToHandlerMapping = {\n\t\"webpack/sharing/consume/default/@jupyter-widgets/base\": () => (loadSingletonVersionCheck(\"default\", \"@jupyter-widgets/base\", [,[1,6],[1,5],[1,4],[1,3],[1,2],[1,1,1,10],1,1,1,1,1])),\n\t\"webpack/sharing/consume/default/lru-cache/lru-cache\": () => (loadStrictVersionCheckFallback(\"default\", \"lru-cache\", [1,7,14,1], () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! lru-cache */ \"./node_modules/lru-cache/index.js\")))))))\n};\n// no consumes in initial chunks\nvar chunkMapping = {\n\t\"lib_recorder_js-lib_webcam_js\": [\n\t\t\"webpack/sharing/consume/default/@jupyter-widgets/base\",\n\t\t\"webpack/sharing/consume/default/lru-cache/lru-cache\"\n\t]\n};\n__webpack_require__.f.consumes = (chunkId, promises) => {\n\tif(__webpack_require__.o(chunkMapping, chunkId)) {\n\t\tchunkMapping[chunkId].forEach((id) => {\n\t\t\tif(__webpack_require__.o(installedModules, id)) return promises.push(installedModules[id]);\n\t\t\tvar onFactory = (factory) => {\n\t\t\t\tinstalledModules[id] = 0;\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tmodule.exports = factory();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onError = (error) => {\n\t\t\t\tdelete installedModules[id];\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tvar promise = moduleToHandlerMapping[id]();\n\t\t\t\tif(promise.then) {\n\t\t\t\t\tpromises.push(installedModules[id] = promise.then(onFactory)['catch'](onError));\n\t\t\t\t} else onFactory(promise);\n\t\t\t} catch(e) { onError(e); }\n\t\t});\n\t}\n}",
+        "var parseVersion = (str) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar p=p=>{return p.split(\".\").map((p=>{return+p==p?+p:p}))},n=/^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str),r=n[1]?p(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,p(n[2]))),n[3]&&(r.push([]),r.push.apply(r,p(n[3]))),r;\n}\nvar versionLt = (a, b) => {\n\t// see webpack/lib/util/semver.js for original code\n\ta=parseVersion(a),b=parseVersion(b);for(var r=0;;){if(r>=a.length)return r<b.length&&\"u\"!=(typeof b[r])[0];var e=a[r],n=(typeof e)[0];if(r>=b.length)return\"u\"==n;var t=b[r],f=(typeof t)[0];if(n!=f)return\"o\"==n&&\"n\"==f||(\"s\"==f||\"u\"==n);if(\"o\"!=n&&\"u\"!=n&&e!=t)return e<t;r++}\n}\nvar rangeToString = (range) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\((.+)\\)$/,\"$1\")}\n}\nvar satisfy = (range, version) => {\n\t// see webpack/lib/util/semver.js for original code\n\tif(0 in range){version=parseVersion(version);var e=range[0],r=e<0;r&&(e=-e-1);for(var n=0,i=1,a=!0;;i++,n++){var f,s,g=i<range.length?(typeof range[i])[0]:\"\";if(n>=version.length||\"o\"==(s=(typeof(f=version[n]))[0]))return!a||(\"u\"==g?i>e&&!r:\"\"==g!=r);if(\"u\"==s){if(!a||\"u\"!=g)return!1}else if(a)if(g==s)if(i<=e){if(f!=range[i])return!1}else{if(r?f>range[i]:f<range[i])return!1;f!=range[i]&&(a=!1)}else if(\"s\"!=g&&\"n\"!=g){if(r||i<=e)return!1;a=!1,i--}else{if(i<=e||s<g!=r)return!1;a=!1}else\"s\"!=g&&\"n\"!=g&&(a=!1,i--)}}var t=[],o=t.pop.bind(t);for(n=1;n<range.length;n++){var u=range[n];t.push(1==u?o()|o():2==u?o()&o():u?satisfy(u,version):!o())}return!!o();\n}\nvar ensureExistence = (scopeName, key) => {\n\tvar scope = __webpack_require__.S[scopeName];\n\tif(!scope || !__webpack_require__.o(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);\n\treturn scope;\n};\nvar findVersion = (scope, key) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar findSingletonVersionKey = (scope, key) => {\n\tvar versions = scope[key];\n\treturn Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || (!versions[a].loaded && versionLt(a, b)) ? b : a;\n\t}, 0);\n};\nvar getInvalidSingletonVersionMessage = (scope, key, version, requiredVersion) => {\n\treturn \"Unsatisfied version \" + version + \" from \" + (version && scope[key][version].from) + \" of shared singleton module \" + key + \" (required \" + rangeToString(requiredVersion) + \")\"\n};\nvar getSingleton = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\treturn get(scope[key][version]);\n};\nvar getSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) typeof console !== \"undefined\" && console.warn && console.warn(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar getStrictSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) throw new Error(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar findValidVersion = (scope, key, requiredVersion) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\tif (!satisfy(requiredVersion, b)) return a;\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar getInvalidVersionMessage = (scope, scopeName, key, requiredVersion) => {\n\tvar versions = scope[key];\n\treturn \"No satisfying version (\" + rangeToString(requiredVersion) + \") of shared module \" + key + \" found in shared scope \" + scopeName + \".\\n\" +\n\t\t\"Available versions: \" + Object.keys(versions).map((key) => {\n\t\treturn key + \" from \" + versions[key].from;\n\t}).join(\", \");\n};\nvar getValidVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar entry = findValidVersion(scope, key, requiredVersion);\n\tif(entry) return get(entry);\n\tthrow new Error(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar warnInvalidVersion = (scope, scopeName, key, requiredVersion) => {\n\ttypeof console !== \"undefined\" && console.warn && console.warn(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar get = (entry) => {\n\tentry.loaded = 1;\n\treturn entry.get()\n};\nvar init = (fn) => (function(scopeName, a, b, c) {\n\tvar promise = __webpack_require__.I(scopeName);\n\tif (promise && promise.then) return promise.then(fn.bind(fn, scopeName, __webpack_require__.S[scopeName], a, b, c));\n\treturn fn(scopeName, __webpack_require__.S[scopeName], a, b, c);\n});\n\nvar load = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn get(findVersion(scope, key));\n});\nvar loadFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\treturn scope && __webpack_require__.o(scope, key) ? get(findVersion(scope, key)) : fallback();\n});\nvar loadVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingleton = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getValidVersion(scope, scopeName, key, version);\n});\nvar loadStrictSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar loadVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingletonFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tvar entry = scope && __webpack_require__.o(scope, key) && findValidVersion(scope, key, version);\n\treturn entry ? get(entry) : fallback();\n});\nvar loadStrictSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar installedModules = {};\nvar moduleToHandlerMapping = {\n\t\"webpack/sharing/consume/default/@jupyter-widgets/base\": () => (loadSingletonVersionCheck(\"default\", \"@jupyter-widgets/base\", [,[1,6],[1,5],[1,4],[1,3],[1,2],[1,1,1,10],1,1,1,1,1])),\n\t\"webpack/sharing/consume/default/lru-cache/lru-cache\": () => (loadStrictVersionCheckFallback(\"default\", \"lru-cache\", [1,7,14,1], () => (__webpack_require__.e(\"vendors-node_modules_lru-cache_index_js\").then(() => (() => (__webpack_require__(/*! lru-cache */ \"./node_modules/lru-cache/index.js\"))))))),\n\t\"webpack/sharing/consume/default/d3/d3\": () => (loadStrictVersionCheckFallback(\"default\", \"d3\", [1,7,8,2], () => (__webpack_require__.e(\"vendors-node_modules_d3_src_index_js\").then(() => (() => (__webpack_require__(/*! d3 */ \"./node_modules/d3/src/index.js\")))))))\n};\n// no consumes in initial chunks\nvar chunkMapping = {\n\t\"lib_recorder_js-lib_webcam_js\": [\n\t\t\"webpack/sharing/consume/default/@jupyter-widgets/base\",\n\t\t\"webpack/sharing/consume/default/lru-cache/lru-cache\",\n\t\t\"webpack/sharing/consume/default/d3/d3\"\n\t]\n};\n__webpack_require__.f.consumes = (chunkId, promises) => {\n\tif(__webpack_require__.o(chunkMapping, chunkId)) {\n\t\tchunkMapping[chunkId].forEach((id) => {\n\t\t\tif(__webpack_require__.o(installedModules, id)) return promises.push(installedModules[id]);\n\t\t\tvar onFactory = (factory) => {\n\t\t\t\tinstalledModules[id] = 0;\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tmodule.exports = factory();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onError = (error) => {\n\t\t\t\tdelete installedModules[id];\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tvar promise = moduleToHandlerMapping[id]();\n\t\t\t\tif(promise.then) {\n\t\t\t\t\tpromises.push(installedModules[id] = promise.then(onFactory)['catch'](onError));\n\t\t\t\t} else onFactory(promise);\n\t\t\t} catch(e) { onError(e); }\n\t\t});\n\t}\n}",
         "// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"ipywebcam\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkipywebcam\"] = self[\"webpackChunkipywebcam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));",
         "__webpack_require__.nc = undefined;",
         "",
         "// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(\"webpack/container/entry/ipywebcam\");\n",
         ""
     ],
     "version": 3
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js.map` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/vendors-node_modules_lru-cache_index_js.5e542bbc8dc8a7e130a5.js.map`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/nbextension/index.js` & `ipywebcam-0.1.9.dev0/ipywebcam/labextension/static/lib_recorder_js-lib_webcam_js.6d987905f923e46131a3.js`

 * *Files 22% similar despite different names*

#### js-beautify {}

```diff
@@ -1,4147 +1,3674 @@
-define(["@jupyter-widgets/base"], (__WEBPACK_EXTERNAL_MODULE__jupyter_widgets_base__) => {
-    return /******/ (() => { // webpackBootstrap
-        /******/
-        var __webpack_modules__ = ({
+(self["webpackChunkipywebcam"] = self["webpackChunkipywebcam"] || []).push([
+    ["lib_recorder_js-lib_webcam_js"], {
 
+        /***/
+        "./lib/charts.js":
+            /*!***********************!*\
+              !*** ./lib/charts.js ***!
+              \***********************/
             /***/
-            "./node_modules/css-loader/dist/cjs.js!./css/video.css":
-                /*!*************************************************************!*\
-                  !*** ./node_modules/css-loader/dist/cjs.js!./css/video.css ***!
-                  \*************************************************************/
-                /***/
-                ((module, exports, __webpack_require__) => {
-
-                    // Imports
-                    var ___CSS_LOADER_API_IMPORT___ = __webpack_require__( /*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
-                    exports = ___CSS_LOADER_API_IMPORT___(false);
-                    // Module
-                    exports.push([module.id, "/* ==========================================================================\r\n   #Custom HTML5 Video Player\r\n   ========================================================================== */\r\n\r\n:root {\r\n  --youtube-red: #FE0900;\r\n}\r\n\r\n.ipywebcam.video-container {\r\n  width: 800px;\r\n  border-radius: 4px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.ipywebcam.video-container .video {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ipywebcam.video-container .video-controls {\r\n  right: 0;\r\n  left: 0;\r\n  padding: 10px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  transition: all 0.2s ease;\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\r\n}\r\n\r\n.ipywebcam.video-container .video-controls.hide {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container .video-progress {\r\n  position: relative;\r\n  height: 8.4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ipywebcam.video-container progress {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-bar {\r\n  background-color: #474545;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-value {\r\n  background: var(--youtube-red);\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-moz-progress-bar {\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n}\r\n\r\n.ipywebcam.video-container .seek {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\r\n  display: block;\r\n}\r\n\r\n.ipywebcam.video-container .seek-tooltip {\r\n  display: none;\r\n  position: absolute;\r\n  top: -50px;\r\n  margin-left: -20px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  content: attr(data-title);\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.ipywebcam.video-container .bottom-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .left-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls input {\r\n  width: 100px;\r\n  opacity: 1;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\r\n  width: 100px;\r\n  opacity: 1;\r\n}\r\n\r\n.ipywebcam.video-container button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin-right: 7px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  border: none;\r\n  outline: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container button * {\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip)::before {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  display: none;\r\n  right: 0;\r\n  top: -50px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  font-weight: bold;\r\n  padding: 4px 6px;\r\n  word-break: keep-all;\r\n  white-space: pre;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container .fullscreen-button {\r\n  margin-right: 0;\r\n}\r\n\r\n.ipywebcam.video-container .index-selector {\r\n  min-width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .text-button {\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .selector-panel {\r\n  position: absolute;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: rgba(21, 21, 21, .9);\r\n  padding: 6px 12px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  flex-direction: column;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options.grid {\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button.disabled svg {\r\n  fill: #999;\r\n  stroke: #999;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button {\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option {\r\n  color: #fff;\r\n  min-width: 26px;\r\n  height: 26px;\r\n  margin: 3px;\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option .text {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option:hover {\r\n  background: rgba(120, 120, 120, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option.selected {\r\n  background: rgba(81, 81, 81, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container .pip-button svg {\r\n  width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .playback-animation {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -40px;\r\n  margin-top: -40px;\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 80px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  opacity: 0;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range] {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  height: 8.4px;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  border-radius: 1.3px;\r\n  -webkit-appearance: none;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 16px;\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-left: -1px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\r\n  background: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume {\r\n  height: 5px;\r\n  background-color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\r\n  margin-left: 0;\r\n  height: 14px;\r\n  width: 14px;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 8.4px;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  background: transparent;\r\n  border-radius: 1.3px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\r\n  height: 14px;\r\n  width: 14px;\r\n  border-radius: 50px;\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\r\n  border: 1px solid #fff;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .hidden {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container svg {\r\n  width: 28px;\r\n  height: 28px;\r\n  fill: #fff;\r\n  stroke: #fff;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n}", ""]);
-                    // Exports
-                    module.exports = exports;
+            (function(__unused_webpack_module, exports, __webpack_require__) {
 
+                "use strict";
 
-                    /***/
-                }),
+                var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
+                    if (k2 === undefined) k2 = k;
+                    Object.defineProperty(o, k2, {
+                        enumerable: true,
+                        get: function() {
+                            return m[k];
+                        }
+                    });
+                }) : (function(o, m, k, k2) {
+                    if (k2 === undefined) k2 = k;
+                    o[k2] = m[k];
+                }));
+                var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
+                    Object.defineProperty(o, "default", {
+                        enumerable: true,
+                        value: v
+                    });
+                }) : function(o, v) {
+                    o["default"] = v;
+                });
+                var __importStar = (this && this.__importStar) || function(mod) {
+                    if (mod && mod.__esModule) return mod;
+                    var result = {};
+                    if (mod != null)
+                        for (var k in mod)
+                            if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
+                    __setModuleDefault(result, mod);
+                    return result;
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.makeLineChart = void 0;
+                const d3 = __importStar(__webpack_require__( /*! d3 */ "webpack/sharing/consume/default/d3/d3"));
+
+                function makeLineChart(node, data, xRange, yRange, width, height) {
+                    const svg = node ?
+                        d3.select(node) :
+                        d3.create('svg');
+                    width =
+                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                        width === undefined || width === null ? svg.node().clientWidth : width;
+                    height =
+                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                        height === undefined || height === null ? svg.node().clientHeight : height;
+                    if (height > 16) {
+                        height -= 4;
+                    }
+                    if (!xRange) {
+                        const xData = data.map((d) => d[0]);
+                        xRange = [Math.min(...xData), Math.max(...xData)];
+                    }
+                    if (xRange[0] === xRange[1]) {
+                        xRange[1] += 1;
+                    }
+                    if (!yRange) {
+                        const yData = data.map((d) => d[1]);
+                        yRange = [Math.min(...yData), Math.max(...yData)];
+                    }
+                    if (yRange[0] === yRange[1]) {
+                        yRange[1] += 1;
+                    }
+                    const xOffset = -xRange[0];
+                    const xScale = width / (xRange[1] - xRange[0]);
+                    const yOffset = -yRange[0];
+                    const yScale = height / (yRange[1] - yRange[0]);
+                    const lineFunc = d3
+                        .line()
+                        .x((d) => (d[0] + xOffset) * xScale)
+                        .y((d) => (d[1] + yOffset) * yScale);
+                    let path = svg.select('path');
+                    if (path.size() === 0) {
+                        path = svg.append('path').attr('fill', 'none');
+                    }
+                    path.attr('d', lineFunc(data));
+                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                    return svg.node();
+                }
+                exports.makeLineChart = makeLineChart;
+                //# sourceMappingURL=charts.js.map
 
-            /***/
-            "./node_modules/css-loader/dist/cjs.js!./css/widget.css":
-                /*!**************************************************************!*\
-                  !*** ./node_modules/css-loader/dist/cjs.js!./css/widget.css ***!
-                  \**************************************************************/
                 /***/
-                ((module, exports, __webpack_require__) => {
-
-                    // Imports
-                    var ___CSS_LOADER_API_IMPORT___ = __webpack_require__( /*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
-                    exports = ___CSS_LOADER_API_IMPORT___(false);
-                    // Module
-                    exports.push([module.id, ".custom-widget {\n  background-color: lightseagreen;\n  padding: 0px 2px;\n}\n", ""]);
-                    // Exports
-                    module.exports = exports;
-
-
-                    /***/
-                }),
+            }),
 
+        /***/
+        "./lib/common.js":
+            /*!***********************!*\
+              !*** ./lib/common.js ***!
+              \***********************/
             /***/
-            "./node_modules/css-loader/dist/runtime/api.js":
-                /*!*****************************************************!*\
-                  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
-                  \*****************************************************/
-                /***/
-                ((module) => {
+            (function(__unused_webpack_module, exports, __webpack_require__) {
 
-                    "use strict";
+                "use strict";
 
+                var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
+                    function adopt(value) {
+                        return value instanceof P ? value : new P(function(resolve) {
+                            resolve(value);
+                        });
+                    }
+                    return new(P || (P = Promise))(function(resolve, reject) {
+                        function fulfilled(value) {
+                            try {
+                                step(generator.next(value));
+                            } catch (e) {
+                                reject(e);
+                            }
+                        }
 
-                    /*
-                      MIT License http://www.opensource.org/licenses/mit-license.php
-                      Author Tobias Koppers @sokra
-                    */
-                    // css base code, injected by the css-loader
-                    // eslint-disable-next-line func-names
-                    module.exports = function(useSourceMap) {
-                        var list = []; // return the list of modules as css string
-
-                        list.toString = function toString() {
-                            return this.map(function(item) {
-                                var content = cssWithMappingToString(item, useSourceMap);
+                        function rejected(value) {
+                            try {
+                                step(generator["throw"](value));
+                            } catch (e) {
+                                reject(e);
+                            }
+                        }
 
-                                if (item[2]) {
-                                    return "@media ".concat(item[2], " {").concat(content, "}");
+                        function step(result) {
+                            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
+                        }
+                        step((generator = generator.apply(thisArg, _arguments || [])).next());
+                    });
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.BaseModel = void 0;
+                const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                const version_1 = __webpack_require__( /*! ./version */ "./lib/version.js");
+                class BaseModel extends base_1.DOMWidgetModel {
+                    constructor(...args) {
+                        super(...args);
+                        this.messageHandlers = {};
+                        this.addMessageHandler = (cmd, handler) => {
+                            let handlers = this.messageHandlers[cmd];
+                            if (!handlers) {
+                                handlers = this.messageHandlers[cmd] = [];
+                            }
+                            handlers.push(handler);
+                        };
+                        this.removeMessageHandler = (cmd, handler) => {
+                            const handlers = this.messageHandlers[cmd];
+                            if (handlers) {
+                                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+                                utils_1.arrayRemove(handlers, handler);
+                            }
+                        };
+                        this.send_cmd = this.send_cmd.bind(this);
+                        this.on('msg:custom', (msg, buffers) => {
+                            const {
+                                id,
+                                cmd
+                            } = msg;
+                            if (id && id !== this.message_id) {
+                                return;
+                            }
+                            Object.keys(this.messageHandlers).forEach((key) => {
+                                if (key === cmd) {
+                                    const handlers = this.messageHandlers[key];
+                                    if (handlers) {
+                                        handlers.forEach((handler) => {
+                                            handler(msg, buffers);
+                                        });
+                                    }
                                 }
+                            });
+                        });
+                    }
+                    defaults() {
+                        return Object.assign(Object.assign({}, super.defaults()), {
+                            _view_module: version_1.MODULE_NAME,
+                            _model_module: version_1.MODULE_NAME,
+                            _view_module_version: version_1.MODULE_VERSION,
+                            _model_module_version: version_1.MODULE_VERSION
+                        });
+                    }
+                    get message_id() {
+                        return this.model_id;
+                    }
+                    send_cmd(cmd, args, wait = true) {
+                        return __awaiter(this, void 0, void 0, function*() {
+                            const id = this.message_id;
+                            if (wait) {
+                                return new Promise((resolve) => {
+                                    // eslint-disable-next-line @typescript-eslint/no-this-alias
+                                    const self = this;
+                                    this.send({
+                                        cmd,
+                                        id,
+                                        args
+                                    }, {});
 
-                                return content;
-                            }).join('');
-                        }; // import a list of modules into the list
-                        // eslint-disable-next-line func-names
-
-
-                        list.i = function(modules, mediaQuery, dedupe) {
-                            if (typeof modules === 'string') {
-                                // eslint-disable-next-line no-param-reassign
-                                modules = [
-                                    [null, modules, '']
-                                ];
+                                    function callback({
+                                        ans,
+                                        id: t_id,
+                                        res,
+                                    }, buffers) {
+                                        if (ans === cmd && t_id === id) {
+                                            resolve({
+                                                content: res,
+                                                buffers
+                                            });
+                                            self.off('msg:custom', callback);
+                                        }
+                                    }
+                                    this.on('msg:custom', callback);
+                                });
+                            } else {
+                                this.send({
+                                    cmd,
+                                    id,
+                                    args
+                                }, {});
                             }
+                        });
+                    }
+                }
+                exports.BaseModel = BaseModel;
+                //# sourceMappingURL=common.js.map
 
-                            var alreadyImportedModules = {};
+                /***/
+            }),
+
+        /***/
+        "./lib/range.js":
+            /*!**********************!*\
+              !*** ./lib/range.js ***!
+              \**********************/
+            /***/
+            ((__unused_webpack_module, exports, __webpack_require__) => {
 
-                            if (dedupe) {
-                                for (var i = 0; i < this.length; i++) {
-                                    // eslint-disable-next-line prefer-destructuring
-                                    var id = this[i][0];
+                "use strict";
 
-                                    if (id != null) {
-                                        alreadyImportedModules[id] = true;
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.RangeBar = void 0;
+                /* eslint-disable @typescript-eslint/no-non-null-assertion */
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                class RangeBar {
+                    constructor(container, option = {}) {
+                        this.selectedRange = [0, 0];
+                        this.markersChangeCallbacks = [];
+                        this.rangeSelectedCallbacks = [];
+                        this.destroy = () => {
+                            document.removeEventListener('mousemove', this.onSelectedMove);
+                            document.removeEventListener('mouseup', this.removeSelect);
+                        };
+                        this.toggle = () => {
+                            if (this.container.classList.contains('hidden')) {
+                                this.container.classList.remove('hidden');
+                                if (this.container.parentElement) {
+                                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight + 12}px`;
+                                }
+                            } else {
+                                this.container.classList.add('hidden');
+                                if (this.container.parentElement) {
+                                    this.container.parentElement.style.height = `${this.container.parentElement.clientHeight - 12}px`;
+                                }
+                            }
+                        };
+                        this.isEnabled = () => {
+                            return this.max > this.min;
+                        };
+                        this.adjustPos = (pos) => {
+                            const width = this.container.clientWidth;
+                            if (width === 0) {
+                                return 0;
+                            }
+                            if (this.step <= 0) {
+                                return (pos / width) * 100;
+                            } else {
+                                let v = (pos / width) * (this.max - this.min);
+                                v = Math.round(v / this.step) * this.step;
+                                return (v / (this.max - this.min)) * 100;
+                            }
+                        };
+                        this.pos2value = (pos) => {
+                            return this.min + (pos * (this.max - this.min)) / 100;
+                        };
+                        this.value2pos = (value) => {
+                            return ((value - this.min) / (this.max - this.min)) * 100;
+                        };
+                        this.addRangeSelectedCallback = (callback) => {
+                            this.rangeSelectedCallbacks.push(callback);
+                        };
+                        this.removeRangeSelectedCallback = (callback) => {
+                            utils_1.arrayRemove(this.rangeSelectedCallbacks, callback);
+                        };
+                        this.addMarkersChangeCallback = (callback) => {
+                            this.markersChangeCallbacks.push(callback);
+                        };
+                        this.removeMarkersChangeCallback = (callback) => {
+                            utils_1.arrayRemove(this.markersChangeCallbacks, callback);
+                        };
+                        this.calcRange = (pos) => {
+                            const res = [this.min, this.max];
+                            const value = this.pos2value(pos);
+                            for (const key of Object.keys(this.markers)) {
+                                const v = this.pos2value(Number.parseFloat(key));
+                                if (pos === v) {
+                                    return [0, 0];
+                                } else if (value > v && v > res[0]) {
+                                    res[0] = v;
+                                } else if (value < v && v < res[1]) {
+                                    res[1] = v;
+                                }
+                            }
+                            return res;
+                        };
+                        this.makeFloatingMarker = (pos) => {
+                            if (this.isEnabled()) {
+                                pos = this.adjustPos(pos);
+                                if (!this.floatingMarker) {
+                                    this.floatingMarker = document.createElement('div');
+                                    this.floatingMarker.classList.add('marker', 'floating');
+                                    this.container.appendChild(this.floatingMarker);
+                                }
+                                this.floatingMarker.style.left = `${pos}%`;
+                                this.floatingMarker.style.translate = '-50%';
+                            }
+                        };
+                        this.releaseFloatingMarker = () => {
+                            if (this.floatingMarker) {
+                                this.container.removeChild(this.floatingMarker);
+                                this.floatingMarker = undefined;
+                            }
+                        };
+                        this.findMarkderKey = (marker) => {
+                            for (const key of Object.keys(this.markers)) {
+                                const pos = Number.parseFloat(key);
+                                if (marker === this.markers[pos]) {
+                                    return pos;
+                                }
+                            }
+                            return undefined;
+                        };
+                        this.getMarkers = () => {
+                            return Object.keys(this.markers)
+                                .map((key) => {
+                                    const pos = Number.parseFloat(key);
+                                    return this.pos2value(pos);
+                                })
+                                .sort();
+                        };
+                        this.setMarkers = (markers) => {
+                            if (!markers) {
+                                markers = [];
+                            }
+                            if (utils_1.arrayEqual(this.getMarkers(), markers)) {
+                                return;
+                            }
+                            this.unselectRange();
+                            this.removeSelect();
+                            for (const key of Object.keys(this.markers)) {
+                                const marker = this.markers[key];
+                                this.removeMarkerByNode(marker, false);
+                            }
+                            for (const marker of markers) {
+                                this.addMarker(this.value2pos(marker), false);
+                            }
+                            this.execuateMarkersCallbacks();
+                        };
+                        this.execuateMarkersCallbacks = () => {
+                            const markers = this.getMarkers();
+                            for (const callback of this.markersChangeCallbacks) {
+                                callback(markers, this);
+                            }
+                        };
+                        this.removeMarkerByNode = (marker, triggerCallback = true) => {
+                            const key = this.findMarkderKey(marker);
+                            if (key !== undefined) {
+                                delete this.markers[key];
+                                this.container.removeChild(marker);
+                                if (triggerCallback) {
+                                    this.execuateMarkersCallbacks();
+                                }
+                            }
+                        };
+                        this.addMarker = (pos, triggerCallback = true) => {
+                            if (this.isEnabled()) {
+                                let marker = this.markers[pos];
+                                if (!marker) {
+                                    this.markers[pos] = marker = document.createElement('div');
+                                    marker.setAttribute('draggable', 'false');
+                                    marker.classList.add('marker');
+                                    this.container.appendChild(marker);
+                                    marker.style.left = `${pos}%`;
+                                    marker.style.translate = '-50%';
+                                    marker.addEventListener('click', (evt) => {
+                                        evt.stopPropagation();
+                                        if (evt.altKey) {
+                                            this.removeMarkerByNode(marker);
+                                        }
+                                    });
+                                    marker.addEventListener('mousedown', (evt) => {
+                                        evt.stopPropagation();
+                                        const key = this.findMarkderKey(marker);
+                                        if (key !== undefined) {
+                                            this.setSelect(key);
+                                        }
+                                    });
+                                    marker.addEventListener('mouseup', () => {
+                                        this.removeSelect();
+                                    });
+                                    if (triggerCallback) {
+                                        this.execuateMarkersCallbacks();
                                     }
                                 }
                             }
-
-                            for (var _i = 0; _i < modules.length; _i++) {
-                                var item = [].concat(modules[_i]);
-
-                                if (dedupe && alreadyImportedModules[item[0]]) {
-                                    // eslint-disable-next-line no-continue
+                        };
+                        this.setSelect = (pos) => {
+                            this.selectedKey = pos;
+                            const marker = this.markers[pos];
+                            if (marker) {
+                                marker.classList.add('selected');
+                            }
+                        };
+                        this.removeSelect = () => {
+                            if (this.selectedKey !== undefined) {
+                                const marker = this.markers[this.selectedKey];
+                                if (marker) {
+                                    marker.classList.remove('selected');
+                                }
+                                this.selectedKey = undefined;
+                            }
+                        };
+                        this.canKeyMove = (posFrom, posTo) => {
+                            if (posFrom === posTo) {
+                                return false;
+                            }
+                            if (posTo < 0 || posTo > 100) {
+                                return false;
+                            }
+                            const keys = Object.keys(this.markers);
+                            for (const key of keys) {
+                                const pos = Number.parseFloat(key);
+                                if (pos === posFrom) {
                                     continue;
                                 }
-
-                                if (mediaQuery) {
-                                    if (!item[2]) {
-                                        item[2] = mediaQuery;
-                                    } else {
-                                        item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
-                                    }
+                                if (pos === posTo) {
+                                    return false;
                                 }
-
-                                list.push(item);
+                                if (pos < posFrom && posTo > posFrom) {
+                                    continue;
+                                }
+                                if (pos > posFrom && posTo < posFrom) {
+                                    continue;
+                                }
+                                if (pos < posFrom && pos > posTo) {
+                                    return false;
+                                }
+                                if (pos > posFrom && pos < posTo) {
+                                    return false;
+                                }
+                            }
+                            return true;
+                        };
+                        this.onSelectedMove = (evt) => {
+                            let pos = utils_1.calcMouseOffsetX(evt, this.container);
+                            pos = this.adjustPos(pos);
+                            if (this.selectedKey !== undefined &&
+                                this.canKeyMove(this.selectedKey, pos)) {
+                                const marker = this.markers[this.selectedKey];
+                                if (marker) {
+                                    marker.style.left = `${pos}%`;
+                                    marker.style.translate = '-50%';
+                                    delete this.markers[this.selectedKey];
+                                    this.updateRangeSelectBecauseOfKeyChagne(this.selectedKey, pos);
+                                    this.selectedKey = pos;
+                                    this.markers[pos] = marker;
+                                    this.execuateMarkersCallbacks();
+                                }
+                            }
+                        };
+                        this.isRangeSelected = (range) => {
+                            if (!range) {
+                                range = this.selectedRange;
+                            }
+                            return range[1] > range[0];
+                        };
+                        this.updateRangeSelectBecauseOfKeyChagne = (posFrom, posTo) => {
+                            const valueFrom = this.pos2value(posFrom);
+                            if (this.isRangeSelected() &&
+                                (valueFrom === this.selectedRange[0] ||
+                                    valueFrom === this.selectedRange[1])) {
+                                const valueTo = this.pos2value(posTo);
+                                let valueOther;
+                                if (valueFrom === this.selectedRange[0]) {
+                                    valueOther = this.selectedRange[1];
+                                } else {
+                                    valueOther = this.selectedRange[0];
+                                }
+                                const newRange = valueTo <= valueOther ? [valueTo, valueOther] : [valueOther, valueTo];
+                                this.updateRangeSelect(newRange);
+                            }
+                        };
+                        this.updateRangeSelect = (newRange) => {
+                            if (this.isRangeSelected(newRange)) {
+                                const cWidth = this.container.clientWidth;
+                                const left = ((newRange[0] - this.min) / (this.max - this.min)) * cWidth;
+                                const right = ((newRange[1] - this.min) / (this.max - this.min)) * cWidth;
+                                this.rangeMasker.style.left = `${left}px`;
+                                this.rangeMasker.style.width = `${right - left}px`;
+                                this.rangeMasker.classList.remove('hidden');
+                            }
+                            this.selectedRange = newRange;
+                            for (const callback of this.rangeSelectedCallbacks) {
+                                callback(this.selectedRange, this);
                             }
                         };
+                        this.onMouseRangeSelect = (evt) => {
+                            if (this.selectedKey !== undefined) {
+                                // when moving key point, do nothing.
+                                return;
+                            }
+                            const cWidth = this.container.clientWidth;
+                            if (cWidth === 0) {
+                                return;
+                            }
+                            const pos = (utils_1.calcMouseOffsetX(evt, this.container) / cWidth) * 100;
+                            const range = this.calcRange(pos);
+                            this.updateRangeSelect(range);
+                        };
+                        this.selectRange = (range) => {
+                            if (utils_1.arrayEqual(this.selectedRange, range)) {
+                                return;
+                            }
+                            const posFrom = this.value2pos(range[0]);
+                            const posTo = this.value2pos(range[1]);
+                            if (this.markers[posFrom] && this.markers[posTo]) {
+                                this.updateRangeSelect(range);
+                            }
+                        };
+                        this.unselectRange = () => {
+                            this.rangeMasker.style.left = '0px';
+                            this.rangeMasker.style.width = '0px';
+                            this.rangeMasker.classList.add('hidden');
+                            this.selectedRange = [0, 0];
+                            for (const callback of this.rangeSelectedCallbacks) {
+                                callback(this.selectedRange, this);
+                            }
+                        };
+                        this.container = container;
+                        this.rangeMasker = document.createElement('div');
+                        this.rangeMasker.classList.add('range-mask', 'hidden');
+                        this.rangeMasker.addEventListener('click', (evt) => {
+                            evt.stopPropagation();
+                            this.unselectRange();
+                        });
+                        this.container.appendChild(this.rangeMasker);
+                        this.container.addEventListener('click', (evt) => {
+                            if (evt.ctrlKey) {
+                                const pos = this.adjustPos(evt.offsetX);
+                                this.addMarker(pos);
+                            } else {
+                                this.onMouseRangeSelect(evt);
+                            }
+                        });
+                        this.container.addEventListener('mouseover', (evt) => {
+                            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);
+                            if (evt.ctrlKey) {
+                                this.makeFloatingMarker(offsetX);
+                            } else {
+                                this.releaseFloatingMarker();
+                            }
+                        });
+                        this.container.addEventListener('mousemove', (evt) => {
+                            const offsetX = utils_1.calcMouseOffsetX(evt, this.container);
+                            if (evt.ctrlKey) {
+                                this.makeFloatingMarker(offsetX);
+                            } else {
+                                this.releaseFloatingMarker();
+                            }
+                        });
+                        this.container.addEventListener('mouseout', () => {
+                            this.releaseFloatingMarker();
+                        });
+                        document.addEventListener('mousemove', this.onSelectedMove);
+                        document.addEventListener('mouseup', this.removeSelect);
+                        const {
+                            min = 0, max = 0, step = 1
+                        } = option;
+                        this.min = min;
+                        this.max = max;
+                        this.step = step;
+                        this.markers = {};
+                    }
+                }
+                exports.RangeBar = RangeBar;
+                //# sourceMappingURL=range.js.map
 
-                        return list;
-                    };
+                /***/
+            }),
 
-                    function cssWithMappingToString(item, useSourceMap) {
-                        var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring
+        /***/
+        "./lib/recorder.js":
+            /*!*************************!*\
+              !*** ./lib/recorder.js ***!
+              \*************************/
+            /***/
+            (function(__unused_webpack_module, exports, __webpack_require__) {
 
-                        var cssMapping = item[3];
+                "use strict";
 
-                        if (!cssMapping) {
-                            return content;
+                var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
+                    function adopt(value) {
+                        return value instanceof P ? value : new P(function(resolve) {
+                            resolve(value);
+                        });
+                    }
+                    return new(P || (P = Promise))(function(resolve, reject) {
+                        function fulfilled(value) {
+                            try {
+                                step(generator.next(value));
+                            } catch (e) {
+                                reject(e);
+                            }
                         }
 
-                        if (useSourceMap && typeof btoa === 'function') {
-                            var sourceMapping = toComment(cssMapping);
-                            var sourceURLs = cssMapping.sources.map(function(source) {
-                                return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
-                            });
-                            return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
+                        function rejected(value) {
+                            try {
+                                step(generator["throw"](value));
+                            } catch (e) {
+                                reject(e);
+                            }
                         }
 
-                        return [content].join('\n');
-                    } // Adapted from convert-source-map (MIT)
-
-
-                    function toComment(sourceMap) {
-                        // eslint-disable-next-line no-undef
-                        var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
-                        var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
-                        return "/*# ".concat(data, " */");
+                        function step(result) {
+                            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
+                        }
+                        step((generator = generator.apply(thisArg, _arguments || [])).next());
+                    });
+                };
+                var __importDefault = (this && this.__importDefault) || function(mod) {
+                    return (mod && mod.__esModule) ? mod : {
+                        "default": mod
+                    };
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;
+                const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
+                const lru_cache_1 = __importDefault(__webpack_require__( /*! lru-cache */ "webpack/sharing/consume/default/lru-cache/lru-cache"));
+                const common_1 = __webpack_require__( /*! ./common */ "./lib/common.js");
+                const video_1 = __webpack_require__( /*! ./video */ "./lib/video.js");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                class RecorderPlayerModel extends common_1.BaseModel {
+                    constructor(...args) {
+                        super(...args);
+                        this.cache = new lru_cache_1.default({
+                            max: 10,
+                        });
+                        this.metaCache = new lru_cache_1.default({
+                            max: 100,
+                        });
+                        this.fetchStates = {};
+                        this.refresh_callbacks = [];
+                        this.addRefereshCallback = (callback) => {
+                            this.refresh_callbacks.push(callback);
+                        };
+                        this.removeRefreshCallback = (callback) => {
+                            const index = this.refresh_callbacks.indexOf(callback);
+                            if (index >= 0) {
+                                this.refresh_callbacks.splice(index, 1);
+                            }
+                        };
+                        this.triggerRefresh = (index, channel) => {
+                            this.refresh_callbacks.forEach((cb) => {
+                                cb(index, channel);
+                            });
+                        };
+                        this.createIndexKey = (index) => {
+                            return index === undefined || index === null ? 'global' : `${index}`;
+                        };
+                        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function*() {
+                            const key = this.createIndexKey(index);
+                            const cached = this.metaCache.get(key);
+                            if (cached) {
+                                return cached;
+                            }
+                            const args = {};
+                            if (index !== undefined) {
+                                args['index'] = index;
+                            }
+                            const {
+                                content
+                            } = yield this.send_cmd('fetch_meta', args);
+                            this.metaCache.set(key, content);
+                            return content;
+                        });
+                        this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function*() {
+                            const key = channel ? `${index}-${channel}` : `${index}`;
+                            const cached = this.cache.get(key);
+                            if (cached) {
+                                return cached;
+                            }
+                            let fetchState = this.fetchStates[key];
+                            if (!fetchState) {
+                                fetchState = {
+                                    callbacks: [],
+                                };
+                                this.fetchStates[key] = fetchState;
+                                const {
+                                    content,
+                                    buffers
+                                } = yield this.send_cmd('fetch_data', {
+                                    index,
+                                    channel,
+                                });
+                                const {
+                                    format = this.get('format')
+                                } = content;
+                                const blob = new Blob(buffers, {
+                                    type: `video/${format}`
+                                });
+                                this.cache.set(key, blob);
+                                fetchState.callbacks.forEach((callback) => callback(blob));
+                                delete this.fetchStates[key];
+                                return blob;
+                            } else {
+                                let theResolve = undefined;
+                                fetchState.callbacks.push((blob) => {
+                                    if (theResolve) {
+                                        theResolve(blob);
+                                    } else {
+                                        throw new Error('This is impossible! No resovle method found. It seems that the promise is not invoked yet.');
+                                    }
+                                });
+                                return new Promise((resolve) => {
+                                    theResolve = resolve;
+                                });
+                            }
+                        });
+                        this.invalidateMeta = (index) => {
+                            const key = this.createIndexKey(index);
+                            this.metaCache.delete(key);
+                        };
+                        this.setMarkers = (index, markers) => __awaiter(this, void 0, void 0, function*() {
+                            yield this.send_cmd('set_markers', {
+                                index,
+                                markers
+                            });
+                            this.invalidateMeta(index);
+                        });
+                        this.addMessageHandler('channel_stale', (cmdMsg) => {
+                            const {
+                                args = {}
+                            } = cmdMsg;
+                            const {
+                                channel
+                            } = args;
+                            if (channel) {
+                                for (const key of this.cache.keys()) {
+                                    if (key.endsWith(`-${channel}`)) {
+                                        this.cache.delete(key);
+                                    }
+                                }
+                            } else {
+                                this.cache.clear();
+                            }
+                            this.triggerRefresh(undefined, channel);
+                        });
                     }
-
-                    /***/
-                }),
-
-            /***/
-            "./node_modules/lru-cache/index.js":
-                /*!*****************************************!*\
-                  !*** ./node_modules/lru-cache/index.js ***!
-                  \*****************************************/
-                /***/
-                ((module) => {
-
-                    const perf =
-                        typeof performance === 'object' &&
-                        performance &&
-                        typeof performance.now === 'function' ?
-                        performance :
-                        Date
-
-                    const hasAbortController = typeof AbortController === 'function'
-
-                    // minimal backwards-compatibility polyfill
-                    // this doesn't have nearly all the checks and whatnot that
-                    // actual AbortController/Signal has, but it's enough for
-                    // our purposes, and if used properly, behaves the same.
-                    const AC = hasAbortController ?
-                        AbortController :
-                        class AbortController {
-                            constructor() {
-                                this.signal = new AS()
-                            }
-                            abort() {
-                                this.signal.dispatchEvent('abort')
+                    defaults() {
+                        return Object.assign(Object.assign({}, super.defaults()), {
+                            _model_name: RecorderPlayerModel.model_name,
+                            _view_name: RecorderPlayerModel.view_name,
+                            format: 'mp4',
+                            width: '',
+                            height: '',
+                            autoplay: true,
+                            loop: false,
+                            controls: true,
+                            autonext: true,
+                            selected_index: null,
+                            selected_channel: null,
+                            selected_range: [0, 0]
+                        });
+                    }
+                }
+                exports.RecorderPlayerModel = RecorderPlayerModel;
+                RecorderPlayerModel.model_name = 'RecorderPlayerModel';
+                RecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view
+                class RecorderPlayerView extends base_1.DOMWidgetView {
+                    constructor(...args) {
+                        super(...args);
+                        this.index = -1;
+                        this.indexSize = 0;
+                        this.channel = '';
+                        this.channels = [];
+                        this.loading = false;
+                        this.loadStateOnceCallbacks = [];
+                        this.selectedRange = [0, 0];
+                        this.isRangeSelected = () => {
+                            return this.selectedRange[1] > this.selectedRange[0];
+                        };
+                        this.addLoadStateOnceCallback = (callback) => {
+                            this.loadStateOnceCallbacks.push(callback);
+                        };
+                        this.setLoading = (loading) => {
+                            if (this.loading !== loading) {
+                                this.loading = loading;
+                                this.loadStateOnceCallbacks.forEach((callback) => callback(loading));
+                                this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);
                             }
-                        }
-
-                    const hasAbortSignal = typeof AbortSignal === 'function'
-                    // Some polyfills put this on the AC class, not global
-                    const hasACAbortSignal = typeof AC.AbortSignal === 'function'
-                    const AS = hasAbortSignal ?
-                        AbortSignal :
-                        hasACAbortSignal ?
-                        AC.AbortController :
-                        class AbortSignal {
-                            constructor() {
-                                this.aborted = false
-                                this._listeners = []
-                            }
-                            dispatchEvent(type) {
-                                if (type === 'abort') {
-                                    this.aborted = true
-                                    const e = {
-                                        type,
-                                        target: this
+                        };
+                        this.fetchMeta = (index = undefined) => __awaiter(this, void 0, void 0, function*() {
+                            const {
+                                record_count = 0, chanels = [], markers, statistics,
+                            } = yield this.model.fetchMeta(index);
+                            this.indexSize = record_count;
+                            this.channels = chanels;
+                            this.markers = markers;
+                            this.statistics = statistics;
+                        });
+                        this.initVideo = () => __awaiter(this, void 0, void 0, function*() {
+                            if (!this.video) {
+                                this.video = new video_1.Video();
+                                this.video.addVideoInitHandler((video) => {
+                                    video.rangeBar.setMarkers(this.markers);
+                                });
+                                this.video.addIndexSelectHandler((i) => {
+                                    this.load(i, undefined);
+                                });
+                                this.video.addChannelSelectHandler((channel) => {
+                                    this.load(undefined, channel, false, true);
+                                });
+                                this.video.rangeBar.addRangeSelectedCallback((range) => {
+                                    var _a;
+                                    this.selectedRange = range;
+                                    if (this.isRangeSelected()) {
+                                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                                        if (video) {
+                                            video.currentTime = range[0];
+                                        }
+                                        this.model.set('selected_index', this.index);
+                                        this.model.set('selected_channel', this.channel);
+                                    } else {
+                                        this.model.set('selected_index', null);
+                                        this.model.set('selected_channel', null);
+                                    }
+                                    this.model.set('selected_range', range);
+                                    this.model.save_changes();
+                                });
+                                this.video.rangeBar.addMarkersChangeCallback((markers) => {
+                                    this.markers = markers;
+                                    this.model.setMarkers(this.index, markers);
+                                });
+                                this.model.on('change:selected_index', this.onSelectedIndexChange);
+                                this.model.on('change:selected_channel', this.onSelectedChannelChange);
+                                this.model.on('change:selected_range', this.onSelectedRangeChange);
+                                this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function*() {
+                                    if (this.isRangeSelected()) {
+                                        return;
+                                    }
+                                    const autonext = this.model.get('autonext');
+                                    const loop = this.model.get('loop');
+                                    if (autonext) {
+                                        if (this.index < this.indexSize - 1) {
+                                            this.load(this.index + 1, undefined);
+                                        } else if (this.index === this.indexSize - 1 && loop) {
+                                            this.load(0, undefined);
+                                        }
+                                    }
+                                }));
+                                this.video.video.addEventListener('timeupdate', () => {
+                                    var _a;
+                                    if (this.isRangeSelected()) {
+                                        const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                                        if (video) {
+                                            if (video.currentTime >= this.selectedRange[1]) {
+                                                const loop = this.model.get('loop');
+                                                if (loop) {
+                                                    video.currentTime = this.selectedRange[0];
+                                                } else {
+                                                    video.pause();
+                                                }
+                                            }
+                                        }
                                     }
-                                    this.onabort(e)
-                                    this._listeners.forEach(f => f(e), this)
+                                });
+                                this.el.appendChild(this.video.container);
+                                this.update();
+                                yield this.load(0, '');
+                            }
+                        });
+                        this.onSelectedIndexChange = () => {
+                            const index = this.model.get('selected_index');
+                            if (index !== undefined && index !== null && this.index !== index) {
+                                this.load(index, undefined);
+                            }
+                        };
+                        this.onSelectedChannelChange = () => {
+                            const channel = this.model.get('selected_channel');
+                            if (channel && this.channel !== channel) {
+                                this.load(undefined, channel);
+                            }
+                        };
+                        this.onSelectedRangeChange = () => {
+                            var _a;
+                            const range = this.model.get('selected_range');
+                            if (!utils_1.arrayEqual(this.selectedRange, range)) {
+                                this.selectedRange = range;
+                                const rangeBar = (_a = this.video) === null || _a === void 0 ? void 0 : _a.rangeBar;
+                                if (rangeBar) {
+                                    rangeBar.selectRange(range);
                                 }
                             }
-                            onabort() {}
-                            addEventListener(ev, fn) {
-                                if (ev === 'abort') {
-                                    this._listeners.push(fn)
+                        };
+                        this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function*() {
+                            return new Promise((resolve) => {
+                                if (this.loading === loading) {
+                                    resolve();
+                                } else {
+                                    this.addLoadStateOnceCallback((state) => {
+                                        if (state === loading) {
+                                            resolve();
+                                        }
+                                    });
+                                }
+                            });
+                        });
+                        this.load = (index, channel, force = false, resumeTime = false) => __awaiter(this, void 0, void 0, function*() {
+                            if (this.video) {
+                                if (typeof index === 'undefined') {
+                                    index = this.index;
+                                }
+                                if (typeof channel === 'undefined') {
+                                    channel = this.channel;
+                                }
+                                if (this.index === index && this.channel === channel && !force) {
+                                    return;
                                 }
+                                yield this.waitForLoading(false);
+                                this.setLoading(true);
+                                yield this.fetchMeta(index);
+                                try {
+                                    if (this.indexSize > 0) {
+                                        const blob = yield this.model.fetchData(index, channel);
+                                        this.video.updateData(blob, resumeTime);
+                                    }
+                                    this.index = index;
+                                    this.channel = channel;
+                                    this.video.rangeBar.unselectRange();
+                                    this.video.updateIndexerSize(this.indexSize);
+                                    this.video.updateIndexerIndex(this.index);
+                                    this.video.updateChannels(this.channels);
+                                    this.video.updateStatistics(this.statistics);
+                                } catch (e) {
+                                    console.error(e);
+                                } finally {
+                                    this.setLoading(false);
+                                }
+                            }
+                        });
+                        this.updateWidth = () => {
+                            var _a, _b;
+                            const width = this.model.get('width');
+                            if (width !== undefined && width.length > 0) {
+                                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('width', width);
+                            } else {
+                                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('width');
+                            }
+                        };
+                        this.updateHeight = () => {
+                            var _a, _b;
+                            const height = this.model.get('height');
+                            if (height !== undefined && height.length > 0) {
+                                (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('height', height);
+                            } else {
+                                (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('height');
                             }
-                            removeEventListener(ev, fn) {
-                                if (ev === 'abort') {
-                                    this._listeners = this._listeners.filter(f => f !== fn)
+                        };
+                        this.updateOtherVideoAttributes = () => {
+                            var _a, _b;
+                            const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
+                            if (video) {
+                                video.autoplay = this.model.get('autoplay') ? true : false;
+                                if (this.model.get('autonext')) {
+                                    video.loop = false;
+                                } else {
+                                    video.loop = this.model.get('loop') ? true : false;
                                 }
                             }
-                        }
-
-                    const warned = new Set()
-                    const deprecatedOption = (opt, instead) => {
-                        const code = `LRU_CACHE_OPTION_${opt}`
-                        if (shouldWarn(code)) {
-                            warn(code, `${opt} option`, `options.${instead}`, LRUCache)
-                        }
-                    }
-                    const deprecatedMethod = (method, instead) => {
-                        const code = `LRU_CACHE_METHOD_${method}`
-                        if (shouldWarn(code)) {
-                            const {
-                                prototype
-                            } = LRUCache
-                            const {
-                                get
-                            } = Object.getOwnPropertyDescriptor(prototype, method)
-                            warn(code, `${method} method`, `cache.${instead}()`, get)
-                        }
-                    }
-                    const deprecatedProperty = (field, instead) => {
-                        const code = `LRU_CACHE_PROPERTY_${field}`
-                        if (shouldWarn(code)) {
-                            const {
-                                prototype
-                            } = LRUCache
-                            const {
-                                get
-                            } = Object.getOwnPropertyDescriptor(prototype, field)
-                            warn(code, `${field} property`, `cache.${instead}`, get)
-                        }
+                            (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));
+                        };
+                        this.selectedRange = this.model.get('selected_range');
+                        this.model.addRefereshCallback((i, c) => {
+                            if (this.index === i &&
+                                ((!this.channel && !c) || (this.channel && c && this.channel === c))) {
+                                this.load(undefined, undefined, true);
+                            }
+                        });
                     }
+                    render() {
+                        super.render();
+                        this.initVideo();
+                    }
+                    update() {
+                        this.updateWidth();
+                        this.updateHeight();
+                        this.updateOtherVideoAttributes();
+                        return super.update();
+                    }
+                    remove() {
+                        var _a;
+                        this.model.off('change:selected_index', this.onSelectedIndexChange);
+                        this.model.off('change:selected_channel', this.onSelectedChannelChange);
+                        this.model.off('change:selected_range', this.onSelectedRangeChange);
+                        (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();
+                        this.video = undefined;
+                    }
+                }
+                exports.RecorderPlayerView = RecorderPlayerView;
+                //# sourceMappingURL=recorder.js.map
 
-                    const emitWarning = (...a) => {
-                        typeof process === 'object' &&
-                            process &&
-                            typeof process.emitWarning === 'function' ?
-                            process.emitWarning(...a) :
-                            console.error(...a)
-                    }
+                /***/
+            }),
 
-                    const shouldWarn = code => !warned.has(code)
+        /***/
+        "./lib/utils.js":
+            /*!**********************!*\
+              !*** ./lib/utils.js ***!
+              \**********************/
+            /***/
+            ((__unused_webpack_module, exports) => {
 
-                    const warn = (code, what, instead, fn) => {
-                        warned.add(code)
-                        const msg = `The ${what} is deprecated. Please use ${instead} instead.`
-                        emitWarning(msg, 'DeprecationWarning', code, fn)
-                    }
+                "use strict";
+
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.calcMouseOffsetX = exports.calcPageX = exports.isMac = exports.arrayEqual = exports.arrayRemove = exports.arrayIndexOf = exports.arrayFind = exports.arrayInclude = void 0;
+
+                function arrayInclude(arr, target) {
+                    return !!~arr.indexOf(target);
+                }
+                exports.arrayInclude = arrayInclude;
+
+                function arrayFind(arr, cond) {
+                    for (let i = 0; i < arr.length; ++i) {
+                        const e = arr[i];
+                        if (cond(e, i)) {
+                            return e;
+                        }
+                    }
+                    return undefined;
+                }
+                exports.arrayFind = arrayFind;
+
+                function arrayIndexOf(arr, target) {
+                    for (let i = 0; i < arr.length; ++i) {
+                        if (arr[i] === target) {
+                            return i;
+                        }
+                    }
+                    return -1;
+                }
+                exports.arrayIndexOf = arrayIndexOf;
+
+                function arrayRemove(arr, target) {
+                    const index = arrayIndexOf(arr, target);
+                    if (index !== -1) {
+                        arr.splice(index, 1);
+                        return true;
+                    } else {
+                        return false;
+                    }
+                }
+                exports.arrayRemove = arrayRemove;
+
+                function arrayEqual(arr1, arr2) {
+                    if (arr1 === arr2) {
+                        return true;
+                    }
+                    return (Array.isArray(arr1) &&
+                        Array.isArray(arr2) &&
+                        arr1.length === arr2.length &&
+                        arr1.every((val, index) => val === arr2[index]));
+                }
+                exports.arrayEqual = arrayEqual;
+
+                function isMac() {
+                    return window.navigator.userAgent.indexOf('Mac') !== -1;
+                }
+                exports.isMac = isMac;
+
+                function calcPageX(element) {
+                    const {
+                        left
+                    } = element.getBoundingClientRect();
+                    return left + document.body.scrollLeft;
+                }
+                exports.calcPageX = calcPageX;
+
+                function calcMouseOffsetX(evt, target) {
+                    return evt.pageX - calcPageX(target);
+                }
+                exports.calcMouseOffsetX = calcMouseOffsetX;
+                //# sourceMappingURL=utils.js.map
 
-                    const isPosInt = n => n && n === Math.floor(n) && n > 0 && isFinite(n)
+                /***/
+            }),
 
-                    /* istanbul ignore next - This is a little bit ridiculous, tbh.
-                     * The maximum array length is 2^32-1 or thereabouts on most JS impls.
-                     * And well before that point, you're caching the entire world, I mean,
-                     * that's ~32GB of just integers for the next/prev links, plus whatever
-                     * else to hold that many keys and values.  Just filling the memory with
-                     * zeroes at init time is brutal when you get that big.
-                     * But why not be complete?
-                     * Maybe in the future, these limits will have expanded. */
-                    const getUintArray = max =>
-                        !isPosInt(max) ?
-                        null :
-                        max <= Math.pow(2, 8) ?
-                        Uint8Array :
-                        max <= Math.pow(2, 16) ?
-                        Uint16Array :
-                        max <= Math.pow(2, 32) ?
-                        Uint32Array :
-                        max <= Number.MAX_SAFE_INTEGER ?
-                        ZeroArray :
-                        null
+        /***/
+        "./lib/version.js":
+            /*!************************!*\
+              !*** ./lib/version.js ***!
+              \************************/
+            /***/
+            ((__unused_webpack_module, exports, __webpack_require__) => {
 
-                    class ZeroArray extends Array {
-                        constructor(size) {
-                            super(size)
-                            this.fill(0)
-                        }
-                    }
+                "use strict";
+
+                // Copyright (c) Xiaojing Chen
+                // Distributed under the terms of the Modified BSD License.
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.MODULE_NAME = exports.MODULE_VERSION = void 0;
+                // eslint-disable-next-line @typescript-eslint/ban-ts-comment
+                // @ts-ignore
+                // eslint-disable-next-line @typescript-eslint/no-var-requires
+                const data = __webpack_require__( /*! ../package.json */ "./package.json");
+                /**
+                 * The _model_module_version/_view_module_version this package implements.
+                 *
+                 * The html widget manager assumes that this is the same as the npm package
+                 * version number.
+                 */
+                exports.MODULE_VERSION = data.version;
+                /*
+                 * The current package name.
+                 */
+                exports.MODULE_NAME = data.name;
+                //# sourceMappingURL=version.js.map
 
-                    class Stack {
-                        constructor(max) {
-                            if (max === 0) {
-                                return []
+                /***/
+            }),
+
+        /***/
+        "./lib/video.js":
+            /*!**********************!*\
+              !*** ./lib/video.js ***!
+              \**********************/
+            /***/
+            (function(__unused_webpack_module, exports, __webpack_require__) {
+
+                "use strict";
+
+                /* eslint-disable @typescript-eslint/no-non-null-assertion */
+                var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
+                    function adopt(value) {
+                        return value instanceof P ? value : new P(function(resolve) {
+                            resolve(value);
+                        });
+                    }
+                    return new(P || (P = Promise))(function(resolve, reject) {
+                        function fulfilled(value) {
+                            try {
+                                step(generator.next(value));
+                            } catch (e) {
+                                reject(e);
                             }
-                            const UintArray = getUintArray(max)
-                            this.heap = new UintArray(max)
-                            this.length = 0
                         }
-                        push(n) {
-                            this.heap[this.length++] = n
+
+                        function rejected(value) {
+                            try {
+                                step(generator["throw"](value));
+                            } catch (e) {
+                                reject(e);
+                            }
                         }
-                        pop() {
-                            return this.heap[--this.length]
+
+                        function step(result) {
+                            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
+                        }
+                        step((generator = generator.apply(thisArg, _arguments || [])).next());
+                    });
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.Video = exports.createVideoContainer = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;
+                __webpack_require__( /*! ../css/video.css */ "./css/video.css");
+                const charts_1 = __webpack_require__( /*! ./charts */ "./lib/charts.js");
+                const range_1 = __webpack_require__( /*! ./range */ "./lib/range.js");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                const svgNS = 'http://www.w3.org/2000/svg';
+                const prefix = 'ipywebcam-video-';
+
+                function makeId(id) {
+                    return `${prefix}${id}`;
+                }
+                exports.makeId = makeId;
+
+                function createSymbol(id, pathD, viewBox = '0 0 24 24', gTrans = '') {
+                    const symbol = document.createElementNS(svgNS, 'symbol');
+                    symbol.id = makeId(id);
+                    symbol.setAttribute('viewBox', viewBox);
+                    if (Array.isArray(pathD)) {
+                        const group = document.createElementNS(svgNS, 'g');
+                        if (gTrans) {
+                            group.setAttribute('transform', gTrans);
+                        }
+                        for (const p of pathD) {
+                            const path = document.createElementNS(svgNS, 'path');
+                            path.setAttribute('d', p);
+                            group.appendChild(path);
                         }
+                        symbol.appendChild(group);
+                    } else {
+                        const path = document.createElementNS(svgNS, 'path');
+                        path.setAttribute('d', pathD);
+                        symbol.appendChild(path);
                     }
+                    return symbol;
+                }
 
-                    class LRUCache {
-                        constructor(options = {}) {
-                            const {
-                                max = 0,
-                                    ttl,
-                                    ttlResolution = 1,
-                                    ttlAutopurge,
-                                    updateAgeOnGet,
-                                    updateAgeOnHas,
-                                    allowStale,
-                                    dispose,
-                                    disposeAfter,
-                                    noDisposeOnSet,
-                                    noUpdateTTL,
-                                    maxSize = 0,
-                                    maxEntrySize = 0,
-                                    sizeCalculation,
-                                    fetchMethod,
-                                    fetchContext,
-                                    noDeleteOnFetchRejection,
-                                    noDeleteOnStaleGet,
-                            } = options
+                function createControlsSvg() {
+                    const svg = document.createElementNS(svgNS, 'svg');
+                    svg.id = makeId('icons');
+                    svg.setAttribute('style', 'display: none');
+                    const defs = document.createElementNS(svgNS, 'defs');
+                    svg.appendChild(defs);
+                    defs.appendChild(createSymbol('pause', 'M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z'));
+                    defs.appendChild(createSymbol('play-icon', 'M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z'));
+                    defs.appendChild(createSymbol('volume-high', 'M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z'));
+                    defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));
+                    defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));
+                    defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));
+                    defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));
+                    defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));
+                    defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));
+                    defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));
+                    defs.appendChild(createSymbol('statistics', [
+                        'M2096 2741 c-15 -10 -37 -32 -47 -47 -18 -28 -19 -65 -19 -984 l0 -955 25 -37 c32 -48 47 -50 268 -46 l179 3 29 33 29 32 0 969 c0 967 0 968 -21 995 -40 50 -64 56 -246 56 -148 0 -171 -2 -197 -19z',
+                        'M1308 2088 c-30 -8 -41 -18 -58 -52 -19 -41 -20 -58 -20 -643 0 -330 3 -613 6 -629 3 -16 16 -42 30 -59 l24 -30 210 0 210 0 24 30 c14 17 27 43 30 59 3 16 6 299 6 629 0 584 -1 602 -20 643 -18 36 -27 43 -65 53 -53 13 -326 13 -377 -1z',
+                        'M504 1426 c-64 -28 -64 -28 -64 -373 l0 -313 29 -32 29 -33 179 -3 c221 -4 236 -2 268 46 l25 37 0 293 c0 328 -3 347 -65 376 -44 21 -353 22 -401 2z',
+                        'M42 468 c-39 -32 -41 -35 -41 -91 -1 -42 3 -59 14 -63 8 -3 17 -13 20 -23 3 -9 18 -24 34 -34 27 -16 124 -17 1431 -17 1307 0 1404 1 1431 17 16 10 31 25 34 34 3 10 12 20 20 23 11 4 15 21 15 58 0 49 -3 56 -40 91 l-40 37 -1419 0 -1419 0 -40 -32z',
+                    ], '0 0 1000 1000', 'translate(100, 900) scale(0.25, -0.25)'));
+                    return svg;
+                }
+
+                function createSelectiveUses(active, ...ids) {
+                    const svg = document.createElementNS(svgNS, 'svg');
+                    ids.forEach((id) => {
+                        const use = document.createElementNS(svgNS, 'use');
+                        use.classList.add(`use-${id}`);
+                        use.setAttribute('href', `#${makeId(id)}`);
+                        if (id !== active) {
+                            use.classList.add('hidden');
+                        }
+                        svg.appendChild(use);
+                    });
+                    return svg;
+                }
+                exports.createSelectiveUses = createSelectiveUses;
+
+                function createPlaybackAnimation() {
+                    const div = document.createElement('div');
+                    div.id = makeId('playback-animation');
+                    div.className = 'playback-animation';
+                    const svg = createSelectiveUses('pause', 'play-icon', 'pause');
+                    svg.classList.add('playback-icons');
+                    div.appendChild(svg);
+                    return div;
+                }
+                exports.createPlaybackAnimation = createPlaybackAnimation;
+
+                function createVideoProgress() {
+                    const container = document.createElement('div');
+                    container.classList.add('video-progress');
+                    const progress = document.createElement('progress');
+                    progress.id = makeId('progress-bar');
+                    progress.classList.add('progress-bar');
+                    progress.value = progress.max = 0;
+                    const input = document.createElement('input');
+                    input.id = makeId('seek');
+                    input.classList.add('seek');
+                    input.type = 'range';
+                    input.value = '0';
+                    input.min = '0';
+                    input.step = '1';
+                    const rangeBar = document.createElement('div');
+                    rangeBar.setAttribute('draggable', 'false');
+                    rangeBar.classList.add('range-bar', 'hidden');
+                    const tooltip = document.createElement('div');
+                    tooltip.id = makeId('seek-tooltip');
+                    tooltip.classList.add('seek-tooltip');
+                    tooltip.innerText = '00:00';
+                    container.appendChild(progress);
+                    container.appendChild(input);
+                    container.appendChild(tooltip);
+                    container.appendChild(rangeBar);
+                    return container;
+                }
+
+                function createStatisticsContainer() {
+                    const container = document.createElement('div');
+                    container.classList.add('statistics-container', 'hidden', 'unused');
+                    const svg = document.createElementNS(svgNS, 'svg');
+                    container.appendChild(svg);
+                    return container;
+                }
+
+                function createPlaybackButton(options) {
+                    const button = document.createElement('button');
+                    button.id = makeId('play');
+                    button.classList.add('play');
+                    button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);
+                    const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');
+                    svg.classList.add('playback-icons');
+                    button.appendChild(svg);
+                    return button;
+                }
+
+                function createVolumeButton(options) {
+                    const button = document.createElement('button');
+                    button.id = makeId('volume-button');
+                    button.classList.add('volume-button');
+                    button.setAttribute('data-title', `Mute (${descShortcut(options.shortcuts.mute)})`);
+                    const svg = createSelectiveUses('volume-high', 'volume-mute', 'volume-low', 'volume-high');
+                    svg.classList.add('volume-icons');
+                    button.appendChild(svg);
+                    return button;
+                }
+
+                function createVolumeInput() {
+                    const input = document.createElement('input');
+                    input.id = makeId('volume');
+                    input.classList.add('volume');
+                    input.value = '1';
+                    input.type = 'range';
+                    input.min = '0';
+                    input.max = '1';
+                    input.step = '0.01';
+                    input.setAttribute('data-mute', '0.5');
+                    return input;
+                }
+
+                function createVolumeControls(options) {
+                    const container = document.createElement('div');
+                    container.classList.add('volume-controls');
+                    const button = createVolumeButton(options);
+                    container.appendChild(button);
+                    const input = createVolumeInput();
+                    container.appendChild(input);
+                    return container;
+                }
+
+                function createTime() {
+                    const container = document.createElement('div');
+                    container.classList.add('time');
+                    const elapsed = document.createElement('time');
+                    elapsed.id = makeId('time-elapsed');
+                    elapsed.classList.add('time-elapsed');
+                    elapsed.innerText = '00:00';
+                    container.appendChild(elapsed);
+                    const span = document.createElement('span');
+                    span.innerText = ' / ';
+                    container.appendChild(span);
+                    const duration = document.createElement('time');
+                    duration.id = makeId('duration');
+                    duration.classList.add('duration');
+                    duration.innerText = '00:00';
+                    container.appendChild(duration);
+                    return container;
+                }
+
+                function createLeftControls(options) {
+                    const container = document.createElement('div');
+                    container.classList.add('left-controls');
+                    const playbackButton = createPlaybackButton(options);
+                    container.appendChild(playbackButton);
+                    const volumeControls = createVolumeControls(options);
+                    container.appendChild(volumeControls);
+                    const time = createTime();
+                    container.appendChild(time);
+                    return container;
+                }
+
+                function createIndexSelector() {
+                    const container = document.createElement('button');
+                    container.id = makeId('index-selector');
+                    container.classList.add('index-selector');
+                    container.classList.add('text-button');
+                    container.classList.add('hidden');
+                    container.setAttribute('data-title', 'Select Index');
+                    const text = document.createElement('div');
+                    text.classList.add('text');
+                    container.appendChild(text);
+                    return container;
+                }
+
+                function createSpeedSelector() {
+                    const container = document.createElement('button');
+                    container.id = makeId('speed-selector');
+                    container.classList.add('speed-selector');
+                    container.classList.add('text-button');
+                    container.setAttribute('data-title', 'Select Speed');
+                    const text = document.createElement('div');
+                    text.classList.add('text');
+                    container.appendChild(text);
+                    return container;
+                }
+
+                function createChannelSelector() {
+                    const container = document.createElement('button');
+                    container.id = makeId('channel-selector');
+                    container.classList.add('channel-selector');
+                    container.classList.add('text-button');
+                    container.classList.add('hidden');
+                    container.setAttribute('data-title', 'Select Channel');
+                    const text = document.createElement('div');
+                    text.classList.add('text');
+                    container.appendChild(text);
+                    return container;
+                }
+
+                function createStatsSelector() {
+                    const container = document.createElement('button');
+                    container.classList.add('stats-selector', 'hidden');
+                    container.setAttribute('data-title', 'Select Statistics Type');
+                    const icon = createSelectiveUses('statistics', 'statistics');
+                    icon.classList.add('icon');
+                    container.appendChild(icon);
+                    const text = document.createElement('div');
+                    text.classList.add('text');
+                    container.appendChild(text);
+                    return container;
+                }
+
+                function createPipButton(options) {
+                    const button = document.createElement('button');
+                    button.id = makeId('pip-button');
+                    button.classList.add('pip-button');
+                    if (!isPipEnabled()) {
+                        button.classList.add('hidden');
+                    }
+                    button.setAttribute('data-title', `PIP (${descShortcut(options.shortcuts.pip)})`);
+                    const svg = createSelectiveUses('pip', 'pip');
+                    button.appendChild(svg);
+                    return button;
+                }
+
+                function createFullscreenButton(options) {
+                    const button = document.createElement('button');
+                    button.id = makeId('fullscreen-button');
+                    button.classList.add('fullscreen-button');
+                    button.setAttribute('data-title', `Full screen (${descShortcut(options.shortcuts.fullscreen)})`);
+                    const svg = createSelectiveUses('fullscreen', 'fullscreen', 'fullscreen-exit');
+                    button.appendChild(svg);
+                    return button;
+                }
+
+                function createRightControls(options) {
+                    const container = document.createElement('div');
+                    container.classList.add('right-controls');
+                    const statsSelector = createStatsSelector();
+                    container.appendChild(statsSelector);
+                    const indexSelector = createIndexSelector();
+                    container.appendChild(indexSelector);
+                    const channelSelector = createChannelSelector();
+                    container.appendChild(channelSelector);
+                    const speedSelector = createSpeedSelector();
+                    container.appendChild(speedSelector);
+                    const pipButton = createPipButton(options);
+                    container.appendChild(pipButton);
+                    const fullscreenButton = createFullscreenButton(options);
+                    container.appendChild(fullscreenButton);
+                    return container;
+                }
+
+                function createBottomControls(options) {
+                    const container = document.createElement('div');
+                    container.classList.add('bottom-controls');
+                    const leftControls = createLeftControls(options);
+                    container.appendChild(leftControls);
+                    const rightControls = createRightControls(options);
+                    container.appendChild(rightControls);
+                    return container;
+                }
+
+                function createVideoControls(options) {
+                    const container = document.createElement('div');
+                    container.setAttribute('draggable', 'false');
+                    container.classList.add('video-controls');
+                    container.tabIndex = 0;
+                    const videoProgress = createVideoProgress();
+                    container.appendChild(videoProgress);
+                    const statistics = createStatisticsContainer();
+                    container.appendChild(statistics);
+                    const bottomControls = createBottomControls(options);
+                    container.appendChild(bottomControls);
+                    return container;
+                }
+                const VIDEO_WORKS = !!document.createElement('video').canPlayType;
+
+                function createVideoContainer(options) {
+                    const container = document.createElement('div');
+                    container.id = makeId('container');
+                    container.classList.add('ipywebcam');
+                    container.classList.add('video-container');
+                    const playbackAnimation = createPlaybackAnimation();
+                    container.appendChild(playbackAnimation);
+                    const video = document.createElement('video');
+                    video.id = makeId('video');
+                    video.classList.add('video');
+                    container.appendChild(video);
+                    const videoControls = createVideoControls(options);
+                    container.appendChild(videoControls);
+                    return container;
+                }
+                exports.createVideoContainer = createVideoContainer;
+
+                function iconShow(svg, id) {
+                    const uses = svg.getElementsByTagNameNS(svgNS, 'use');
+                    for (let i = 0; i < uses.length; ++i) {
+                        const use = uses[i];
+                        if (use.classList.contains(`use-${id}`)) {
+                            use.classList.remove('hidden');
+                        } else {
+                            use.classList.add('hidden');
+                        }
+                    }
+                }
 
-                            // deprecated options, don't trigger a warning for getting them if
-                            // the thing being passed in is another LRUCache we're copying.
+                function isPipEnabled() {
+                    return !!document.pictureInPictureEnabled;
+                }
+                class SelectorPannel {
+                    constructor(options) {
+                        this.options = [];
+                        this.optionButtons = [];
+                        this.clickHandlers = [];
+                        this.realClickHandlers = [];
+                        this.layout = () => {
                             const {
-                                length,
-                                maxAge,
-                                stale
-                            } =
-                            options instanceof LRUCache ? {} : options
-
-                            if (max !== 0 && !isPosInt(max)) {
-                                throw new TypeError('max option must be a nonnegative integer')
-                            }
-
-                            const UintArray = max ? getUintArray(max) : Array
-                            if (!UintArray) {
-                                throw new Error('invalid max value: ' + max)
-                            }
-
-                            this.max = max
-                            this.maxSize = maxSize
-                            this.maxEntrySize = maxEntrySize || this.maxSize
-                            this.sizeCalculation = sizeCalculation || length
-                            if (this.sizeCalculation) {
-                                if (!this.maxSize && !this.maxEntrySize) {
-                                    throw new TypeError(
-                                        'cannot set sizeCalculation without setting maxSize or maxEntrySize'
-                                    )
-                                }
-                                if (typeof this.sizeCalculation !== 'function') {
-                                    throw new TypeError('sizeCalculation set to non-function')
+                                width,
+                                height
+                            } = this.container.getBoundingClientRect();
+                            this.container.style.left = `-${width / 2}px`;
+                            this.container.style.top = `-${height}px`;
+                        };
+                        this.show = () => {
+                            this.container.classList.remove('hidden');
+                            this.layout();
+                            this.container.focus();
+                        };
+                        this.hidden = () => {
+                            this.container.classList.add('hidden');
+                        };
+                        this.toggle = () => {
+                            if (this.container.classList.contains('hidden')) {
+                                this.show();
+                            } else {
+                                this.hidden();
+                            }
+                        };
+                        this.findOption = (options, label) => {
+                            for (let i = 0; i < options.length; ++i) {
+                                const option = options[i];
+                                if (option.label === label) {
+                                    return i;
                                 }
                             }
-
-                            this.fetchMethod = fetchMethod || null
-                            if (this.fetchMethod && typeof this.fetchMethod !== 'function') {
-                                throw new TypeError(
-                                    'fetchMethod must be a function if specified'
-                                )
-                            }
-
-                            this.fetchContext = fetchContext
-                            if (!this.fetchMethod && fetchContext !== undefined) {
-                                throw new TypeError(
-                                    'cannot set fetchContext without fetchMethod'
-                                )
-                            }
-
-                            this.keyMap = new Map()
-                            this.keyList = new Array(max).fill(null)
-                            this.valList = new Array(max).fill(null)
-                            this.next = new UintArray(max)
-                            this.prev = new UintArray(max)
-                            this.head = 0
-                            this.tail = 0
-                            this.free = new Stack(max)
-                            this.initialFill = 1
-                            this.size = 0
-
-                            if (typeof dispose === 'function') {
-                                this.dispose = dispose
-                            }
-                            if (typeof disposeAfter === 'function') {
-                                this.disposeAfter = disposeAfter
-                                this.disposed = []
-                            } else {
-                                this.disposeAfter = null
-                                this.disposed = null
+                            return -1;
+                        };
+                        this.updateViewAfterSelect = (label) => {
+                            const index = this.findOption(this.options, label);
+                            if (index === -1) {
+                                return;
                             }
-                            this.noDisposeOnSet = !!noDisposeOnSet
-                            this.noUpdateTTL = !!noUpdateTTL
-                            this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection
-
-                            // NB: maxEntrySize is set to maxSize if it's set
-                            if (this.maxEntrySize !== 0) {
-                                if (this.maxSize !== 0) {
-                                    if (!isPosInt(this.maxSize)) {
-                                        throw new TypeError(
-                                            'maxSize must be a positive integer if specified'
-                                        )
-                                    }
+                            this.container.querySelectorAll('button.selector-option').forEach((e) => {
+                                e.classList.remove('selected');
+                            });
+                            const option = this.container.querySelector(`button.selector-option-${index}`);
+                            if (option) {
+                                option.classList.add('selected');
+                            }
+                        };
+                        this.select = (label) => {
+                            const index = this.findOption(this.options, label);
+                            if (index !== -1) {
+                                const option = this.options[index];
+                                (this.clickHandlers || []).forEach((handler) => {
+                                    handler(option);
+                                });
+                                this.updateViewAfterSelect(option.label);
+                            }
+                        };
+                        this.install = (element, handler, initLabel = undefined) => {
+                            this.trigger = element;
+                            this.hidden();
+                            this.addClickHandler(handler);
+                            element.appendChild(this.container);
+                            element.addEventListener('click', () => {
+                                this.toggle();
+                            });
+                            if (initLabel) {
+                                this.select(initLabel);
+                            }
+                            return this;
+                        };
+                        this.addClickHandler = (handler) => {
+                            this.clickHandlers.push(handler);
+                        };
+                        this.createHandler = (option) => {
+                            return (evt) => {
+                                evt.stopPropagation();
+                                try {
+                                    this.select(option.label);
+                                    this.hidden();
+                                } catch (e) {
+                                    console.error(e);
                                 }
-                                if (!isPosInt(this.maxEntrySize)) {
-                                    throw new TypeError(
-                                        'maxEntrySize must be a positive integer if specified'
-                                    )
-                                }
-                                this.initializeSizeTracking()
-                            }
-
-                            this.allowStale = !!allowStale || !!stale
-                            this.noDeleteOnStaleGet = !!noDeleteOnStaleGet
-                            this.updateAgeOnGet = !!updateAgeOnGet
-                            this.updateAgeOnHas = !!updateAgeOnHas
-                            this.ttlResolution =
-                                isPosInt(ttlResolution) || ttlResolution === 0 ?
-                                ttlResolution :
-                                1
-                            this.ttlAutopurge = !!ttlAutopurge
-                            this.ttl = ttl || maxAge || 0
-                            if (this.ttl) {
-                                if (!isPosInt(this.ttl)) {
-                                    throw new TypeError(
-                                        'ttl must be a positive integer if specified'
-                                    )
-                                }
-                                this.initializeTTLTracking()
-                            }
-
-                            // do not allow completely unbounded caches
-                            if (this.max === 0 && this.ttl === 0 && this.maxSize === 0) {
-                                throw new TypeError(
-                                    'At least one of max, maxSize, or ttl is required'
-                                )
-                            }
-                            if (!this.ttlAutopurge && !this.max && !this.maxSize) {
-                                const code = 'LRU_CACHE_UNBOUNDED'
-                                if (shouldWarn(code)) {
-                                    warned.add(code)
-                                    const msg =
-                                        'TTL caching without ttlAutopurge, max, or maxSize can ' +
-                                        'result in unbounded memory consumption.'
-                                    emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache)
-                                }
-                            }
-
-                            if (stale) {
-                                deprecatedOption('stale', 'allowStale')
-                            }
-                            if (maxAge) {
-                                deprecatedOption('maxAge', 'ttl')
-                            }
-                            if (length) {
-                                deprecatedOption('length', 'sizeCalculation')
-                            }
-                        }
-
-                        getRemainingTTL(key) {
-                            return this.has(key, {
-                                updateAgeOnHas: false
-                            }) ? Infinity : 0
-                        }
-
-                        initializeTTLTracking() {
-                            this.ttls = new ZeroArray(this.max)
-                            this.starts = new ZeroArray(this.max)
-
-                            this.setItemTTL = (index, ttl, start = perf.now()) => {
-                                this.starts[index] = ttl !== 0 ? start : 0
-                                this.ttls[index] = ttl
-                                if (ttl !== 0 && this.ttlAutopurge) {
-                                    const t = setTimeout(() => {
-                                        if (this.isStale(index)) {
-                                            this.delete(this.keyList[index])
-                                        }
-                                    }, ttl + 1)
-                                    /* istanbul ignore else - unref() not supported on all platforms */
-                                    if (t.unref) {
-                                        t.unref()
-                                    }
+                            };
+                        };
+                        this.updateView = (options) => {
+                            const buttons = this.optionButtons;
+                            const handlers = this.realClickHandlers;
+                            const newLen = options.length;
+                            const oldLen = buttons.length;
+                            for (let i = 0; i < oldLen; ++i) {
+                                const button = buttons[i];
+                                const handler = handlers[i];
+                                if (i < newLen) {
+                                    const option = options[i];
+                                    button.innerText = option.label;
+                                    button.removeEventListener('click', handler);
+                                    const newHandler = this.createHandler(option);
+                                    button.addEventListener('click', newHandler);
+                                    handlers[i] = newHandler;
+                                } else {
+                                    button.removeEventListener('click', handler);
+                                    this.container.removeChild(button);
+                                }
+                            }
+                            if (oldLen > newLen) {
+                                buttons.splice(newLen, oldLen - newLen);
+                                handlers.splice(newLen, oldLen - newLen);
+                            }
+                            if (oldLen < newLen) {
+                                for (let i = oldLen; i < newLen; ++i) {
+                                    const option = options[i];
+                                    const button = document.createElement('button');
+                                    button.innerText = option.label;
+                                    button.classList.add('selector-option');
+                                    button.classList.add('no-tooltip');
+                                    button.classList.add(`selector-option-${i}`);
+                                    button.setAttribute('data-index', `${i}`);
+                                    const handler = this.createHandler(option);
+                                    button.addEventListener('click', handler);
+                                    this.container.appendChild(button);
+                                    buttons.push(button);
+                                    handlers.push(handler);
                                 }
                             }
-
-                            this.updateItemAge = index => {
-                                this.starts[index] = this.ttls[index] !== 0 ? perf.now() : 0
+                            this.options = options;
+                        };
+                        this.container = document.createElement('div');
+                        this.container.classList.add('selector-panel');
+                        this.container.classList.add('selector-options');
+                        this.container.tabIndex = -1;
+                        this.container.addEventListener('focusout', (evt) => {
+                            if (!this.container.contains(evt.relatedTarget) &&
+                                evt.relatedTarget !== this.trigger) {
+                                this.hidden();
                             }
-
-                            // debounce calls to perf.now() to 1s so we're not hitting
-                            // that costly call repeatedly.
-                            let cachedNow = 0
-                            const getNow = () => {
-                                const n = perf.now()
-                                if (this.ttlResolution > 0) {
-                                    cachedNow = n
-                                    const t = setTimeout(
-                                        () => (cachedNow = 0),
-                                        this.ttlResolution
-                                    )
-                                    /* istanbul ignore else - not available on all platforms */
-                                    if (t.unref) {
-                                        t.unref()
+                        });
+                        this.updateView(options);
+                    }
+                }
+                class IndexSelectorPannel {
+                    constructor(size) {
+                        this.clickHandlers = [];
+                        this.realClickHandlers = [];
+                        this.calcLayout = (pageIndex) => {
+                            this.row = Math.ceil(this.size / 4);
+                            this.column = Math.min(this.size, 4);
+                            this.hasPager = this.row > 6;
+                            this.pageIndex = pageIndex;
+                            this.pageSize = Math.ceil(this.size / 24);
+                            const curRow = this.pageIndex < this.pageSize ? 6 : this.row - (this.pageIndex - 1) * 6;
+                            this.optionsWidth = this.column * 32 + (this.column - 1) * 6 + 6;
+                            this.optionsHeight = curRow * 32 + (curRow - 1) * 6 + 6;
+                            const height = this.optionsHeight + (this.hasPager ? 32 : 0);
+                            this.container.style.width = `${this.optionsWidth}px`;
+                            this.container.style.height = `${height}px`;
+                            this.container.style.left = `${-this.optionsWidth / 2}px`;
+                            this.container.style.top = `${-height}px`;
+                        };
+                        this.show = () => {
+                            this.container.classList.remove('hidden');
+                            this.container.focus();
+                        };
+                        this.hidden = () => {
+                            this.container.classList.add('hidden');
+                        };
+                        this.toggle = () => {
+                            if (this.container.classList.contains('hidden')) {
+                                this.show();
+                            } else {
+                                this.hidden();
+                            }
+                        };
+                        this.addClickHandler = (handler) => {
+                            this.clickHandlers.push(handler);
+                        };
+                        this.calcPageIndexFromIndex = (index) => {
+                            if (index < 0 || index >= this.size) {
+                                throw new Error(`Invalid index ${index}`);
+                            }
+                            return Math.ceil((index + 1) / 24);
+                        };
+                        this.setSelectIndex = (index) => {
+                            this.updatePage(this.calcPageIndexFromIndex(index));
+                            this.selected = index;
+                            this.container.querySelectorAll('button.selector-option').forEach((e) => {
+                                e.classList.remove('selected');
+                            });
+                            const option = this.container.querySelector(`button.selector-option-${index}`);
+                            if (option) {
+                                option.classList.add('selected');
+                            }
+                        };
+                        this.createHandler = (index) => {
+                            return (evt) => {
+                                evt.stopPropagation();
+                                try {
+                                    (this.clickHandlers || []).forEach((handler) => {
+                                        handler(index);
+                                    });
+                                    this.hidden();
+                                } catch (e) {
+                                    console.error(e);
+                                }
+                            };
+                        };
+                        this.updatePage = (pageIndex) => {
+                            if (pageIndex !== this.pageIndex) {
+                                this.calcLayout(pageIndex);
+                                const optNum = this.pageIndex < this.pageSize ? 24 : this.size % 24;
+                                let len = this.options.children.length;
+                                let idx = 0;
+                                for (let i = 0; i < len; ++i) {
+                                    const child = this.options.children.item(i);
+                                    if (child === null || child === void 0 ? void 0 : child.classList.contains('selector-option')) {
+                                        const button = child;
+                                        const oldHandler = this.realClickHandlers[idx];
+                                        const dataIdx = idx + (pageIndex - 1) * 24;
+                                        if (idx < optNum) {
+                                            const newHandler = (this.realClickHandlers[idx] =
+                                                this.createHandler(dataIdx));
+                                            button.removeEventListener('click', oldHandler);
+                                            button.addEventListener('click', newHandler);
+                                            button.innerText = `${dataIdx}`;
+                                            button.className = '';
+                                            button.classList.add('selector-option');
+                                            button.classList.add('no-tooltip');
+                                            button.classList.add(`selector-option-${dataIdx}`);
+                                            if (dataIdx === this.selected) {
+                                                button.classList.add('selected');
+                                            } else {
+                                                button.classList.remove('selected');
+                                            }
+                                            ++idx;
+                                        } else {
+                                            button.removeEventListener('click', oldHandler);
+                                            this.options.removeChild(button);
+                                            --i;
+                                            --len;
+                                        }
                                     }
                                 }
-                                return n
-                            }
-
-                            this.getRemainingTTL = key => {
-                                const index = this.keyMap.get(key)
-                                if (index === undefined) {
-                                    return 0
-                                }
-                                return this.ttls[index] === 0 || this.starts[index] === 0 ?
-                                    Infinity :
-                                    this.starts[index] +
-                                    this.ttls[index] -
-                                    (cachedNow || getNow())
-                            }
-
-                            this.isStale = index => {
-                                return (
-                                    this.ttls[index] !== 0 &&
-                                    this.starts[index] !== 0 &&
-                                    (cachedNow || getNow()) - this.starts[index] >
-                                    this.ttls[index]
-                                )
-                            }
-                        }
-                        updateItemAge(index) {}
-                        setItemTTL(index, ttl, start) {}
-                        isStale(index) {
-                            return false
-                        }
-
-                        initializeSizeTracking() {
-                            this.calculatedSize = 0
-                            this.sizes = new ZeroArray(this.max)
-                            this.removeItemSize = index => {
-                                this.calculatedSize -= this.sizes[index]
-                                this.sizes[index] = 0
-                            }
-                            this.requireSize = (k, v, size, sizeCalculation) => {
-                                // provisionally accept background fetches.
-                                // actual value size will be checked when they return.
-                                if (this.isBackgroundFetch(v)) {
-                                    return 0
-                                }
-                                if (!isPosInt(size)) {
-                                    if (sizeCalculation) {
-                                        if (typeof sizeCalculation !== 'function') {
-                                            throw new TypeError('sizeCalculation must be a function')
+                                if (this.realClickHandlers.length > optNum) {
+                                    this.realClickHandlers.splice(optNum, this.realClickHandlers.length - optNum);
+                                }
+                                if (idx < optNum) {
+                                    for (let i = idx; i < optNum; ++i) {
+                                        const dataIdx = i + (pageIndex - 1) * 24;
+                                        const option = document.createElement('button');
+                                        option.innerText = `${dataIdx}`;
+                                        option.classList.add('selector-option');
+                                        option.classList.add('no-tooltip');
+                                        option.classList.add(`selector-option-${dataIdx}`);
+                                        if (dataIdx === this.selected) {
+                                            option.classList.add('selected');
+                                        } else {
+                                            option.classList.remove('selected');
+                                        }
+                                        option.setAttribute('data-index', `${dataIdx}`);
+                                        const handler = this.createHandler(dataIdx);
+                                        this.realClickHandlers.push(handler);
+                                        option.addEventListener('click', handler);
+                                        this.options.appendChild(option);
+                                    }
+                                }
+                                if (this.hasPager) {
+                                    if (this.pager) {
+                                        if (this.pagerLeft && this.pageIndex <= 1) {
+                                            this.pagerLeft.classList.add('disabled');
+                                        } else if (this.pagerLeft) {
+                                            this.pagerLeft.classList.remove('disabled');
+                                        }
+                                        if (this.pagerNumber) {
+                                            this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;
                                         }
-                                        size = sizeCalculation(v, k)
-                                        if (!isPosInt(size)) {
-                                            throw new TypeError(
-                                                'sizeCalculation return invalid (expect positive integer)'
-                                            )
+                                        if (this.pagerRight && this.pageIndex >= this.pageSize) {
+                                            this.pagerRight.classList.add('disabled');
+                                        } else if (this.pagerRight) {
+                                            this.pagerRight.classList.remove('disabled');
                                         }
                                     } else {
-                                        throw new TypeError(
-                                            'invalid size value (must be positive integer)'
-                                        )
+                                        this.pager = document.createElement('div');
+                                        this.pager.classList.add('selector-pager');
+                                        this.pagerLeft = document.createElement('button');
+                                        this.pagerLeft.classList.add('page-left');
+                                        this.pagerLeft.classList.add('no-tooltip');
+                                        this.pagerLeft.tabIndex = -1;
+                                        this.pagerLeft.appendChild(createSelectiveUses('left-arrow', 'left-arrow'));
+                                        if (this.pageIndex <= 1) {
+                                            this.pagerLeft.classList.add('disabled');
+                                        }
+                                        this.pagerLeft.addEventListener('click', (evt) => {
+                                            evt.stopPropagation();
+                                            if (this.pageIndex > 1) {
+                                                this.updatePage(this.pageIndex - 1);
+                                            }
+                                        });
+                                        this.pager.appendChild(this.pagerLeft);
+                                        this.pagerNumber = document.createElement('div');
+                                        this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;
+                                        this.pager.appendChild(this.pagerNumber);
+                                        this.pagerRight = document.createElement('button');
+                                        this.pagerRight.classList.add('page-right');
+                                        this.pagerRight.classList.add('no-tooltip');
+                                        this.pagerRight.tabIndex = -1;
+                                        this.pagerRight.appendChild(createSelectiveUses('right-arrow', 'right-arrow'));
+                                        if (this.pageIndex >= this.pageSize) {
+                                            this.pagerRight.classList.add('disabled');
+                                        }
+                                        this.pagerRight.addEventListener('click', (evt) => {
+                                            evt.stopPropagation();
+                                            if (this.pageIndex < this.pageSize) {
+                                                this.updatePage(this.pageIndex + 1);
+                                            }
+                                        });
+                                        this.pager.appendChild(this.pagerRight);
+                                        this.container.appendChild(this.pager);
                                     }
-                                }
-                                return size
-                            }
-                            this.addItemSize = (index, size) => {
-                                this.sizes[index] = size
-                                if (this.maxSize) {
-                                    const maxSize = this.maxSize - this.sizes[index]
-                                    while (this.calculatedSize > maxSize) {
-                                        this.evict(true)
+                                } else {
+                                    if (this.pager) {
+                                        this.container.removeChild(this.pager);
+                                        this.pager = undefined;
+                                        this.pagerNumber = undefined;
                                     }
                                 }
-                                this.calculatedSize += this.sizes[index]
                             }
-                        }
-                        removeItemSize(index) {}
-                        addItemSize(index, size) {}
-                        requireSize(k, v, size, sizeCalculation) {
-                            if (size || sizeCalculation) {
-                                throw new TypeError(
-                                    'cannot set size without setting maxSize or maxEntrySize on cache'
-                                )
+                        };
+                        this.updateSize = (size) => {
+                            if (this.size !== size) {
+                                this.size = size;
+                                this.pageIndex = 0;
+                                this.updatePage(1);
                             }
-                        }
-
-                        * indexes({
-                            allowStale = this.allowStale
-                        } = {}) {
-                            if (this.size) {
-                                for (let i = this.tail; true;) {
-                                    if (!this.isValidIndex(i)) {
-                                        break
-                                    }
-                                    if (allowStale || !this.isStale(i)) {
-                                        yield i
-                                    }
-                                    if (i === this.head) {
-                                        break
-                                    } else {
-                                        i = this.prev[i]
-                                    }
-                                }
+                        };
+                        this.container = document.createElement('div');
+                        this.container.id = makeId('selector-panel');
+                        this.container.classList.add('selector-panel');
+                        this.container.tabIndex = -1;
+                        this.options = document.createElement('div');
+                        this.options.classList.add('selector-options');
+                        this.options.classList.add('grid');
+                        this.container.appendChild(this.options);
+                        this.container.addEventListener('focusout', (evt) => {
+                            if (!this.container.contains(evt.relatedTarget) &&
+                                evt.relatedTarget !== this.trigger) {
+                                this.hidden();
                             }
-                        }
+                        });
+                        this.updateSize(size);
+                    }
+                }
 
-                        * rindexes({
-                            allowStale = this.allowStale
-                        } = {}) {
-                            if (this.size) {
-                                for (let i = this.head; true;) {
-                                    if (!this.isValidIndex(i)) {
-                                        break
-                                    }
-                                    if (allowStale || !this.isStale(i)) {
-                                        yield i
-                                    }
-                                    if (i === this.tail) {
-                                        break
-                                    } else {
-                                        i = this.next[i]
-                                    }
-                                }
-                            }
-                        }
+                function descShortcut(shortcut) {
+                    const parts = [];
+                    if (shortcut.ctrl) {
+                        parts.push('ctrl');
+                    }
+                    if (shortcut.alt) {
+                        parts.push('alt');
+                    }
+                    if (shortcut.shift) {
+                        parts.push('shift');
+                    }
+                    parts.push(shortcut.key);
+                    return parts.join(' + ');
+                }
+                const DEFAULT_OPTIONS = {
+                    shortcuts: {
+                        play: 'k',
+                        mute: 'm',
+                        fullscreen: 'f',
+                        pip: 'p',
+                        range: 'v',
+                        stats: 's',
+                    },
+                };
 
-                        isValidIndex(index) {
-                            return this.keyMap.get(this.keyList[index]) === index
-                        }
+                function makeShortcut(shortcut) {
+                    if (typeof shortcut === 'string') {
+                        return {
+                            key: shortcut,
+                            ctrl: false,
+                            alt: false,
+                            shift: false,
+                        };
+                    } else {
+                        return {
+                            key: shortcut.key,
+                            ctrl: shortcut.ctrl || false,
+                            alt: shortcut.alt || false,
+                            shift: shortcut.shift || false,
+                        };
+                    }
+                }
 
-                        * entries() {
-                                for (const i of this.indexes()) {
-                                    yield [this.keyList[i], this.valList[i]]
-                                }
+                function makeOptions(otps) {
+                    const options = Object.assign({}, DEFAULT_OPTIONS, otps);
+                    options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);
+                    options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);
+                    options.shortcuts.mute = makeShortcut(options.shortcuts.mute);
+                    options.shortcuts.pip = makeShortcut(options.shortcuts.pip);
+                    options.shortcuts.play = makeShortcut(options.shortcuts.play);
+                    options.shortcuts.range = makeShortcut(options.shortcuts.range);
+                    options.shortcuts.stats = makeShortcut(options.shortcuts.stats);
+                    return options;
+                }
+                const SpeedOptions = [{
+                    label: '0.25x',
+                    value: 0.25
+                }, {
+                    label: '0.5x',
+                    value: 0.5
+                }, {
+                    label: '0.75x',
+                    value: 0.75
+                }, {
+                    label: '1.0x',
+                    value: 1
+                }, {
+                    label: '1.25x',
+                    value: 1.25
+                }, {
+                    label: '1.5x',
+                    value: 1.5
+                }, {
+                    label: '1.75x',
+                    value: 1.75
+                }, {
+                    label: '2.0x',
+                    value: 2
+                }, {
+                    label: '2.5x',
+                    value: 2.5
+                }, {
+                    label: '3.0x',
+                    value: 3
+                }, ];
+                class Video {
+                    constructor(opts = {}) {
+                        this.indexSelectHandlers = [];
+                        this.indexerIndex = -1;
+                        this.indexerSize = 0;
+                        this.stats = '';
+                        this.statsData = {};
+                        this.statsMeta = {};
+                        this.speed = 1;
+                        this.channelSelectHandlers = [];
+                        this.channel = '';
+                        this.videoInitHandlers = [];
+                        this.destroy = () => {
+                            document.removeEventListener('keyup', this.keyboardShortcuts);
+                            const url = this.video.src;
+                            this.video.src = '';
+                            if (url) {
+                                URL.revokeObjectURL(url);
                             }
-                            * rentries() {
-                                for (const i of this.rindexes()) {
-                                    yield [this.keyList[i], this.valList[i]]
+                            this.rangeBar.destroy();
+                        };
+                        this.addVideoInitHandler = (handler) => {
+                            this.videoInitHandlers.push(handler);
+                        };
+                        this.removeVideoInitHandler = (handler) => {
+                            utils_1.arrayRemove(this.videoInitHandlers, handler);
+                        };
+                        this.updateStatistics = (statistics = {}, statistics_meta = {}) => {
+                            this.statsData = statistics;
+                            const keys = Object.keys(statistics);
+                            if (keys.length > 0) {
+                                this.statsSelector.classList.remove('hidden');
+                                this.statsSelectorPannel.updateView(keys.map((key) => ({
+                                    label: key,
+                                    value: key
+                                })));
+                                this.statisticsBar.classList.remove('unused');
+                                if (!utils_1.arrayInclude(keys, this.stats)) {
+                                    this.statsSelectorPannel.select(keys[0]);
                                 }
+                            } else {
+                                this.statsSelector.classList.add('hidden');
+                                this.statsSelectorPannel.updateView([]);
+                                this.statisticsBar.classList.add('unused');
                             }
-
-                        * keys() {
-                                for (const i of this.indexes()) {
-                                    yield this.keyList[i]
+                        };
+                        this.updateChannels = (channels = []) => {
+                            if (channels.length > 0) {
+                                this.channelSelector.classList.remove('hidden');
+                                const options = [{
+                                    label: 'Default',
+                                    value: ''
+                                }];
+                                channels.forEach((channel) => {
+                                    options.push({
+                                        label: channel,
+                                        value: channel
+                                    });
+                                });
+                                this.channelSelectorPannel.updateView(options);
+                                if (!utils_1.arrayInclude(channels, this.channel)) {
+                                    this.channelSelectorPannel.select('Default');
                                 }
+                            } else {
+                                this.channelSelector.classList.add('hidden');
+                                this.channelSelectorPannel.updateView([]);
                             }
-                            * rkeys() {
-                                for (const i of this.rindexes()) {
-                                    yield this.keyList[i]
+                        };
+                        this.addChannelSelectHandler = (handler) => {
+                            this.channelSelectHandlers.push(handler);
+                        };
+                        this.updateIndexerSize = (size) => {
+                            if (!this.indexSelectorPannel) {
+                                if (size > 0) {
+                                    this.indexSelectorPannel = new IndexSelectorPannel(size);
+                                    this.indexSelectorPannel.hidden();
+                                    this.indexSelectHandlers.forEach((handler) => {
+                                        var _a;
+                                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.addClickHandler(handler);
+                                    });
+                                    this.indexSelectorPannel.trigger = this.indexSelector;
+                                    this.indexSelector.appendChild(this.indexSelectorPannel.container);
+                                    this.indexSelector.addEventListener('click', () => {
+                                        var _a, _b;
+                                        (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.toggle();
+                                        const index = this.indexSelector.getAttribute('data-index');
+                                        if (index) {
+                                            (_b = this.indexSelectorPannel) === null || _b === void 0 ? void 0 : _b.setSelectIndex(Number.parseInt(index));
+                                        }
+                                    });
+                                    this.indexSelector.classList.remove('hidden');
+                                } else {
+                                    this.indexSelector.classList.add('hidden');
                                 }
-                            }
-
-                        * values() {
-                                for (const i of this.indexes()) {
-                                    yield this.valList[i]
+                            } else {
+                                if (size <= 0) {
+                                    this.indexSelectorPannel.hidden();
+                                    this.indexSelector.classList.add('hidden');
+                                } else {
+                                    this.indexSelectorPannel.updateSize(size);
+                                    this.indexSelector.classList.remove('hidden');
                                 }
                             }
-                            * rvalues() {
-                                for (const i of this.rindexes()) {
-                                    yield this.valList[i]
-                                }
+                            this.indexerSize = size;
+                        };
+                        this.updateIndexerIndex = (index) => {
+                            var _a;
+                            const text = this.indexSelector.querySelector('div.text');
+                            text.innerText = `${index}`;
+                            this.indexSelector.setAttribute('data-index', `${index}`);
+                            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.setSelectIndex(index);
+                            this.indexerIndex = index;
+                        };
+                        this.addIndexSelectHandler = (handler) => {
+                            this.indexSelectHandlers.push(handler);
+                            if (this.indexSelectorPannel) {
+                                this.indexSelectorPannel.addClickHandler(handler);
                             }
-
-                        [Symbol.iterator]() {
-                            return this.entries()
-                        }
-
-                        find(fn, getOptions = {}) {
-                            for (const i of this.indexes()) {
-                                if (fn(this.valList[i], this.keyList[i], this)) {
-                                    return this.get(this.keyList[i], getOptions)
+                        };
+                        this.updateData = (blob, resumeTime = false) => {
+                            const oldUrl = this.video.src;
+                            const url = URL.createObjectURL(blob);
+                            this.video.src = url;
+                            if (oldUrl) {
+                                this.video.load();
+                                if (resumeTime && this.currentTime) {
+                                    this.video.currentTime = this.currentTime;
                                 }
+                                URL.revokeObjectURL(oldUrl);
                             }
-                        }
-
-                        forEach(fn, thisp = this) {
-                            for (const i of this.indexes()) {
-                                fn.call(thisp, this.valList[i], this.keyList[i], this)
+                        };
+                        this.installSvg = () => {
+                            const id = makeId('icons');
+                            const svg = document.getElementById(id);
+                            if (!svg) {
+                                document.body.appendChild(createControlsSvg());
                             }
-                        }
-
-                        rforEach(fn, thisp = this) {
-                            for (const i of this.rindexes()) {
-                                fn.call(thisp, this.valList[i], this.keyList[i], this)
+                        };
+                        this.togglePlay = () => {
+                            if (this.video.paused || this.video.ended) {
+                                this.video.play();
+                            } else {
+                                this.video.pause();
                             }
-                        }
-
-                        get prune() {
-                            deprecatedMethod('prune', 'purgeStale')
-                            return this.purgeStale
-                        }
-
-                        purgeStale() {
-                            let deleted = false
-                            for (const i of this.rindexes({
-                                    allowStale: true
-                                })) {
-                                if (this.isStale(i)) {
-                                    this.delete(this.keyList[i])
-                                    deleted = true
+                        };
+                        this.enableControls = (enabled) => {
+                            if (enabled) {
+                                if (VIDEO_WORKS) {
+                                    this.video.controls = false;
+                                    this.videoControls.classList.remove('hidden');
+                                } else {
+                                    this.video.controls = true;
+                                    this.videoControls.classList.add('hidden');
                                 }
+                            } else {
+                                this.video.controls = false;
+                                this.videoControls.classList.add('hidden');
                             }
-                            return deleted
-                        }
-
-                        dump() {
-                            const arr = []
-                            for (const i of this.indexes({
-                                    allowStale: true
-                                })) {
-                                const key = this.keyList[i]
-                                const v = this.valList[i]
-                                const value = this.isBackgroundFetch(v) ?
-                                    v.__staleWhileFetching :
-                                    v
-                                const entry = {
-                                    value
-                                }
-                                if (this.ttls) {
-                                    entry.ttl = this.ttls[i]
-                                    // always dump the start relative to a portable timestamp
-                                    // it's ok for this to be a bit slow, it's a rare operation.
-                                    const age = perf.now() - this.starts[i]
-                                    entry.start = Math.floor(Date.now() - age)
-                                }
-                                if (this.sizes) {
-                                    entry.size = this.sizes[i]
-                                }
-                                arr.unshift([key, entry])
+                        };
+                        this.updatePlayButton = () => {
+                            const svg = this.playButton.getElementsByClassName('playback-icons')[0];
+                            const shortcut = descShortcut(this.options.shortcuts.play);
+                            if (this.video.paused || this.video.ended) {
+                                iconShow(svg, 'play-icon');
+                                this.playButton.setAttribute('data-title', `Play (${shortcut})`);
+                            } else {
+                                iconShow(svg, 'pause');
+                                this.playButton.setAttribute('data-title', `Pause (${shortcut})`);
                             }
-                            return arr
-                        }
-
-                        load(arr) {
-                            this.clear()
-                            for (const [key, entry] of arr) {
-                                if (entry.start) {
-                                    // entry.start is a portable timestamp, but we may be using
-                                    // node's performance.now(), so calculate the offset.
-                                    // it's ok for this to be a bit slow, it's a rare operation.
-                                    const age = Date.now() - entry.start
-                                    entry.start = perf.now() - age
-                                }
-                                this.set(key, entry.value, entry)
+                        };
+                        this.initializeVideo = () => {
+                            const videoDuration = Math.floor(this.video.duration);
+                            this.seek.setAttribute('max', `${videoDuration}`);
+                            this.progress.setAttribute('max', `${videoDuration}`);
+                            const time = formatTime(videoDuration);
+                            this.duration.innerText = `${time.minutes}:${time.seconds}`;
+                            this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
+                            this.rangeBar.max = videoDuration;
+                            for (const handler of this.videoInitHandlers) {
+                                handler(this);
                             }
-                        }
-
-                        dispose(v, k, reason) {}
-
-                        set(
-                            k,
-                            v, {
-                                ttl = this.ttl,
-                                start,
-                                noDisposeOnSet = this.noDisposeOnSet,
-                                size = 0,
-                                sizeCalculation = this.sizeCalculation,
-                                noUpdateTTL = this.noUpdateTTL,
-                            } = {}
-                        ) {
-                            size = this.requireSize(k, v, size, sizeCalculation)
-                            // if the item doesn't fit, don't do anything
-                            // NB: maxEntrySize set to maxSize by default
-                            if (this.maxEntrySize && size > this.maxEntrySize) {
-                                // have to delete, in case a background fetch is there already.
-                                // in non-async cases, this is a no-op
-                                this.delete(k)
-                                return this
+                            if (this.stats) {
+                                this.statsSelectorPannel.select(this.stats);
+                            }
+                        };
+                        this.updateCurrentTime = () => {
+                            this.currentTime = this.video.currentTime;
+                        };
+                        // updateTimeElapsed indicates how far through the video
+                        // the current playback is by updating the timeElapsed element
+                        this.updateTimeElapsed = () => {
+                            const time = formatTime(Math.floor(this.video.currentTime));
+                            this.timeElapsed.innerText = `${time.minutes}:${time.seconds}`;
+                            this.timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
+                        };
+                        // updateProgress indicates how far through the video
+                        // the current playback is by updating the progress bar
+                        this.updateProgress = () => {
+                            this.seek.value = `${Math.floor(this.video.currentTime)}`;
+                            this.progress.value = Math.floor(this.video.currentTime);
+                        };
+                        // updateSeekTooltip uses the position of the mouse on the progress bar to
+                        // roughly work out what point in the video the user will skip to if
+                        // the progress bar is clicked at that point
+                        this.updateSeekTooltip = (event) => {
+                            const skipTo = Math.round((event.offsetX / this.seek.clientWidth) *
+                                parseInt(this.seek.getAttribute('max') || '0', 10));
+                            this.seek.setAttribute('data-seek', `${skipTo}`);
+                            const t = formatTime(skipTo);
+                            this.seekTooltip.textContent = `${t.minutes}:${t.seconds}`;
+                            const rect = this.video.getBoundingClientRect();
+                            this.seekTooltip.style.left = `${event.pageX - rect.left}px`;
+                        };
+                        // skipAhead jumps to a different point in the video when the progress bar
+                        // is clicked
+                        this.skipAhead = () => {
+                            const skipTo = this.seek.dataset.seek ?
+                                this.seek.dataset.seek :
+                                this.seek.value;
+                            this.video.currentTime = Number.parseFloat(skipTo);
+                            this.progress.value = Number.parseFloat(skipTo);
+                            this.seek.value = skipTo;
+                        };
+                        // updateVolume updates the video's volume
+                        // and disables the muted state if active
+                        this.updateVolume = () => {
+                            if (this.video.muted) {
+                                this.video.muted = false;
                             }
-                            let index = this.size === 0 ? undefined : this.keyMap.get(k)
-                            if (index === undefined) {
-                                // addition
-                                index = this.newIndex()
-                                this.keyList[index] = k
-                                this.valList[index] = v
-                                this.keyMap.set(k, index)
-                                this.next[this.tail] = index
-                                this.prev[index] = this.tail
-                                this.tail = index
-                                this.size++
-                                this.addItemSize(index, size)
-                                noUpdateTTL = false
+                            this.video.volume = Number.parseFloat(this.volume.value);
+                        };
+                        // updateVolumeIcon updates the volume icon so that it correctly reflects
+                        // the volume of the video
+                        this.updateVolumeIcon = () => {
+                            const shortcut = descShortcut(this.options.shortcuts.mute);
+                            this.volumeButton.setAttribute('data-title', `Mute (${shortcut})`);
+                            if (this.video.muted || this.video.volume === 0) {
+                                this.volumeButton.setAttribute('data-title', `Unmute (${shortcut})`);
+                                iconShow(this.volumeIcons, 'volume-mute');
+                            } else if (this.video.volume > 0 && this.video.volume <= 0.5) {
+                                iconShow(this.volumeIcons, 'volume-low');
                             } else {
-                                // update
-                                const oldVal = this.valList[index]
-                                if (v !== oldVal) {
-                                    if (this.isBackgroundFetch(oldVal)) {
-                                        oldVal.__abortController.abort()
-                                    } else {
-                                        if (!noDisposeOnSet) {
-                                            this.dispose(oldVal, k, 'set')
-                                            if (this.disposeAfter) {
-                                                this.disposed.push([oldVal, k, 'set'])
-                                            }
-                                        }
-                                    }
-                                    this.removeItemSize(index)
-                                    this.valList[index] = v
-                                    this.addItemSize(index, size)
-                                }
-                                this.moveToTail(index)
+                                iconShow(this.volumeIcons, 'volume-high');
+                            }
+                        };
+                        // toggleMute mutes or unmutes the video when executed
+                        // When the video is unmuted, the volume is returned to the value
+                        // it was set to before the video was muted
+                        this.toggleMute = () => {
+                            this.video.muted = !this.video.muted;
+                            if (this.video.muted) {
+                                this.volume.setAttribute('data-volume', this.volume.value);
+                                this.volume.value = '0';
+                            } else {
+                                this.volume.value = this.volume.dataset.volume || `${this.video.volume}`;
                             }
-                            if (ttl !== 0 && this.ttl === 0 && !this.ttls) {
-                                this.initializeTTLTracking()
+                        };
+                        // animatePlayback displays an animation when
+                        // the video is played or paused
+                        this.animatePlayback = () => {
+                            this.playbackAnimation.animate([{
+                                opacity: 1,
+                                transform: 'scale(1)',
+                            }, {
+                                opacity: 0,
+                                transform: 'scale(1.3)',
+                            }, ], {
+                                duration: 500,
+                            });
+                        };
+                        // toggleFullScreen toggles the full screen state of the video
+                        // If the browser is currently in fullscreen mode,
+                        // then it should exit and vice versa.
+                        this.toggleFullScreen = () => {
+                            if (document.fullscreenElement) {
+                                document.exitFullscreen();
+                            } else if (document.webkitFullscreenElement) {
+                                // Need this to support Safari
+                                document.webkitExitFullscreen();
+                            } else if (this.container.webkitRequestFullscreen) {
+                                // Need this to support Safari
+                                this.container.webkitRequestFullscreen();
+                            } else {
+                                this.container.requestFullscreen();
                             }
-                            if (!noUpdateTTL) {
-                                this.setItemTTL(index, ttl, start)
+                        };
+                        this.isFullscreen = () => {
+                            return (document.fullscreenElement ||
+                                document.webkitFullscreenElement ||
+                                this.container.webkitRequestFullscreen);
+                        };
+                        // updateFullscreenButton changes the icon of the full screen button
+                        // and tooltip to reflect the current full screen state of the video
+                        this.updateFullscreenButton = () => {
+                            const shortcut = descShortcut(this.options.shortcuts.fullscreen);
+                            if (this.isFullscreen()) {
+                                this.fullscreenButton.setAttribute('data-title', `Exit full screen (${shortcut})`);
+                                iconShow(this.fullscreenIcons, 'fullscreen-exit');
+                            } else {
+                                this.fullscreenButton.setAttribute('data-title', `Full screen (${shortcut})`);
+                                iconShow(this.fullscreenIcons, 'fullscreen');
                             }
-                            if (this.disposeAfter) {
-                                while (this.disposed.length) {
-                                    this.disposeAfter(...this.disposed.shift())
-                                }
+                        };
+                        // togglePip toggles Picture-in-Picture mode on the video
+                        this.togglePip = () => __awaiter(this, void 0, void 0, function*() {
+                            try {
+                                if (this.video !== document.pictureInPictureElement) {
+                                    this.pipButton.disabled = true;
+                                    yield this.video.requestPictureInPicture();
+                                } else {
+                                    yield document.exitPictureInPicture();
+                                }
+                            } catch (error) {
+                                console.error(error);
+                            } finally {
+                                this.pipButton.disabled = false;
                             }
-                            return this
-                        }
-
-                        newIndex() {
-                            if (this.size === 0) {
-                                return this.tail
+                        });
+                        this.toggleRangeBar = () => {
+                            this.rangeBar.toggle();
+                        };
+                        this.toggleStatisticsBar = () => {
+                            this.statisticsBar.classList.toggle('hidden');
+                        };
+                        // hideControls hides the video controls when not in use
+                        // if the video is paused, the controls must remain visible
+                        this.hideControls = () => {
+                            if (this.video.paused) {
+                                return;
+                            }
+                            this.videoControls.classList.add('hide');
+                        };
+                        // showControls displays the video controls
+                        this.showControls = () => {
+                            this.videoControls.classList.remove('hide');
+                        };
+                        this.isInFocus = () => {
+                            var _a;
+                            return ((_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.contains(this.container)) || false;
+                        };
+                        // keyboardShortcuts executes the relevant functions for
+                        // each supported shortcut key
+                        this.keyboardShortcuts = (event) => {
+                            if (!this.isInFocus()) {
+                                return;
                             }
-                            if (this.size === this.max && this.max !== 0) {
-                                return this.evict(false)
+                            const {
+                                key,
+                                ctrlKey,
+                                altKey,
+                                shiftKey
+                            } = event;
+                            const {
+                                play,
+                                mute,
+                                fullscreen,
+                                pip,
+                                range,
+                                stats
+                            } = this.options.shortcuts;
+                            if (key === play.key &&
+                                (play.ctrl === !!ctrlKey ||
+                                    play.alt === !!altKey ||
+                                    play.shift === !!shiftKey)) {
+                                this.togglePlay();
+                                this.animatePlayback();
+                                if (this.video.paused) {
+                                    this.showControls();
+                                } else {
+                                    setTimeout(() => {
+                                        this.hideControls();
+                                    }, 2000);
+                                }
+                            } else if (key === mute.key &&
+                                (mute.ctrl === !!ctrlKey ||
+                                    mute.alt === !!altKey ||
+                                    mute.shift === !!shiftKey)) {
+                                this.toggleMute();
+                            } else if (key === fullscreen.key &&
+                                (fullscreen.ctrl === !!ctrlKey ||
+                                    fullscreen.alt === !!altKey ||
+                                    fullscreen.shift === !!shiftKey)) {
+                                this.toggleFullScreen();
+                            } else if (key === pip.key &&
+                                (pip.ctrl === !!ctrlKey ||
+                                    pip.alt === !!altKey ||
+                                    pip.shift === !!shiftKey)) {
+                                this.togglePip();
+                            } else if (key === range.key &&
+                                (range.ctrl === !!ctrlKey ||
+                                    range.alt === !!altKey ||
+                                    range.shift === !!shiftKey)) {
+                                this.toggleRangeBar();
+                            } else if (key === stats.key &&
+                                (stats.ctrl === !!ctrlKey ||
+                                    stats.alt === !!altKey ||
+                                    stats.shift === !!shiftKey)) {
+                                this.toggleStatisticsBar();
                             }
-                            if (this.free.length !== 0) {
-                                return this.free.pop()
+                        };
+                        this.options = makeOptions(opts);
+                        this.installSvg();
+                        this.container = createVideoContainer(this.options);
+                        this.video = this.container.querySelector('video.video');
+                        this.videoControls = this.container.querySelector('div.video-controls');
+                        this.playButton = this.container.querySelector('button.play');
+                        this.timeElapsed = this.container.querySelector('time.time-elapsed');
+                        this.duration = this.container.querySelector('time.duration');
+                        this.progress = this.container.querySelector('progress.progress-bar');
+                        this.seek = this.container.querySelector('input.seek');
+                        this.seekTooltip = this.container.querySelector('div.seek-tooltip');
+                        this.rangeBar = new range_1.RangeBar(this.container.querySelector('div.range-bar'));
+                        this.statisticsBar = this.container.querySelector('div.statistics-container');
+                        this.statisticsSvg = this.statisticsBar.querySelector('svg');
+                        this.volume = this.container.querySelector('input.volume');
+                        this.volumeButton = this.container.querySelector('button.volume-button');
+                        this.volumeIcons = this.volumeButton.querySelector('svg');
+                        this.playbackAnimation = this.container.querySelector('div.playback-animation');
+                        this.fullscreenButton = this.container.querySelector('button.fullscreen-button');
+                        this.fullscreenIcons = this.fullscreenButton.querySelector('svg');
+                        this.pipButton = this.container.querySelector('button.pip-button');
+                        this.indexSelector = this.container.querySelector('button.index-selector');
+                        this.statsSelector = this.container.querySelector('button.stats-selector');
+                        this.statsSelectorPannel = new SelectorPannel([]).install(this.statsSelector, (option) => {
+                            const text = this.statsSelector.querySelector('div.text');
+                            text.innerText = option.label;
+                            this.stats = option.value;
+                            if (this.video.duration > 0) {
+                                charts_1.makeLineChart(this.statisticsSvg, this.statsData[this.stats], [0, this.video.duration], undefined, this.video.clientWidth - 20, 30);
                             }
-                            // initial fill, just keep writing down the list
-                            return this.initialFill++
-                        }
+                        });
+                        this.speedSelector = this.container.querySelector('button.speed-selector');
+                        this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {
+                            const text = this.speedSelector.querySelector('div.text');
+                            text.innerText = option.label;
+                            this.video.playbackRate = option.value;
+                            this.speed = option.value;
+                        }, '1.0x');
+                        this.channelSelector = this.container.querySelector('button.channel-selector');
+                        this.channelSelectorPannel = new SelectorPannel([]).install(this.channelSelector, (option) => {
+                            const text = this.channelSelector.querySelector('div.text');
+                            text.innerText = option.label;
+                            this.channelSelectHandlers.forEach((handler) => {
+                                handler(option.value);
+                            });
+                            this.channel = option.value;
+                        });
+                        this.playButton.addEventListener('click', this.togglePlay);
+                        this.video.addEventListener('play', this.updateCurrentTime);
+                        this.video.addEventListener('play', this.updatePlayButton);
+                        this.video.addEventListener('play', () => {
+                            this.video.playbackRate = this.speed;
+                        });
+                        this.video.addEventListener('pause', this.updatePlayButton);
+                        this.video.addEventListener('loadedmetadata', this.initializeVideo);
+                        this.video.addEventListener('timeupdate', this.updateCurrentTime);
+                        this.video.addEventListener('timeupdate', this.updateTimeElapsed);
+                        this.video.addEventListener('timeupdate', this.updateProgress);
+                        this.video.addEventListener('volumechange', this.updateVolumeIcon);
+                        this.video.addEventListener('click', this.togglePlay);
+                        this.video.addEventListener('click', this.animatePlayback);
+                        this.video.addEventListener('mouseenter', this.showControls);
+                        this.video.addEventListener('mouseleave', this.hideControls);
+                        this.videoControls.addEventListener('mouseenter', this.showControls);
+                        this.videoControls.addEventListener('mouseleave', this.hideControls);
+                        this.seek.addEventListener('mousemove', this.updateSeekTooltip);
+                        this.seek.addEventListener('input', this.skipAhead);
+                        this.volume.addEventListener('input', this.updateVolume);
+                        this.volumeButton.addEventListener('click', this.toggleMute);
+                        this.fullscreenButton.addEventListener('click', this.toggleFullScreen);
+                        this.container.addEventListener('fullscreenchange', this.updateFullscreenButton);
+                        this.pipButton.addEventListener('click', this.togglePip);
+                        document.addEventListener('keyup', this.keyboardShortcuts);
+                    }
+                }
+                exports.Video = Video;
+                // formatTime takes a time length in seconds and returns the time in
+                // minutes and seconds
+                function formatTime(timeInSeconds) {
+                    const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);
+                    return {
+                        minutes: result.substr(3, 2),
+                        seconds: result.substr(6, 2),
+                    };
+                }
+                //# sourceMappingURL=video.js.map
 
-                        pop() {
-                            if (this.size) {
-                                const val = this.valList[this.head]
-                                this.evict(true)
-                                return val
-                            }
-                        }
+                /***/
+            }),
 
-                        evict(free) {
-                            const head = this.head
-                            const k = this.keyList[head]
-                            const v = this.valList[head]
-                            if (this.isBackgroundFetch(v)) {
-                                v.__abortController.abort()
-                            } else {
-                                this.dispose(v, k, 'evict')
-                                if (this.disposeAfter) {
-                                    this.disposed.push([v, k, 'evict'])
-                                }
-                            }
-                            this.removeItemSize(head)
-                            // if we aren't about to use the index, then null these out
-                            if (free) {
-                                this.keyList[head] = null
-                                this.valList[head] = null
-                                this.free.push(head)
-                            }
-                            this.head = this.next[head]
-                            this.keyMap.delete(k)
-                            this.size--
-                            return head
-                        }
-
-                        has(k, {
-                            updateAgeOnHas = this.updateAgeOnHas
-                        } = {}) {
-                            const index = this.keyMap.get(k)
-                            if (index !== undefined) {
-                                if (!this.isStale(index)) {
-                                    if (updateAgeOnHas) {
-                                        this.updateItemAge(index)
-                                    }
-                                    return true
-                                }
+        /***/
+        "./lib/webcam.js":
+            /*!***********************!*\
+              !*** ./lib/webcam.js ***!
+              \***********************/
+            /***/
+            (function(__unused_webpack_module, exports, __webpack_require__) {
+
+                "use strict";
+
+                // Copyright (c) Xiaojing Chen
+                // Distributed under the terms of the Modified BSD License.
+                var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
+                    function adopt(value) {
+                        return value instanceof P ? value : new P(function(resolve) {
+                            resolve(value);
+                        });
+                    }
+                    return new(P || (P = Promise))(function(resolve, reject) {
+                        function fulfilled(value) {
+                            try {
+                                step(generator.next(value));
+                            } catch (e) {
+                                reject(e);
                             }
-                            return false
                         }
 
-                        // like get(), but without any LRU updating or TTL expiration
-                        peek(k, {
-                            allowStale = this.allowStale
-                        } = {}) {
-                            const index = this.keyMap.get(k)
-                            if (index !== undefined && (allowStale || !this.isStale(index))) {
-                                const v = this.valList[index]
-                                // either stale and allowed, or forcing a refresh of non-stale value
-                                return this.isBackgroundFetch(v) ? v.__staleWhileFetching : v
+                        function rejected(value) {
+                            try {
+                                step(generator["throw"](value));
+                            } catch (e) {
+                                reject(e);
                             }
                         }
 
-                        backgroundFetch(k, index, options, context) {
-                            const v = index === undefined ? undefined : this.valList[index]
-                            if (this.isBackgroundFetch(v)) {
-                                return v
-                            }
-                            const ac = new AC()
-                            const fetchOpts = {
-                                signal: ac.signal,
-                                options,
-                                context,
+                        function step(result) {
+                            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
+                        }
+                        step((generator = generator.apply(thisArg, _arguments || [])).next());
+                    });
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.WebCamView = exports.WebCamModel = void 0;
+                const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "webpack/sharing/consume/default/@jupyter-widgets/base");
+                const common_1 = __webpack_require__( /*! ./common */ "./lib/common.js");
+                const webrtc_1 = __webpack_require__( /*! ./webrtc */ "./lib/webrtc.js");
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                // Import the CSS
+                __webpack_require__( /*! ../css/widget.css */ "./css/widget.css");
+                const supportsSetCodecPreferences = window.RTCRtpTransceiver &&
+                    'setCodecPreferences' in window.RTCRtpTransceiver.prototype;
+                class WebCamModel extends common_1.BaseModel {
+                    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
+                    constructor(...args) {
+                        super(...args);
+                        this.getDevice = (type) => __awaiter(this, void 0, void 0, function*() {
+                            const stream = yield navigator.mediaDevices.getUserMedia({
+                                video: type === 'video_input',
+                                audio: type === 'audio_input' || type === 'audio_output',
+                            });
+                            try {
+                                const n_type = type.replace('_', '');
+                                const devices = yield navigator.mediaDevices.enumerateDevices();
+                                return devices.filter((device) => device.kind === n_type && device.deviceId);
+                            } finally {
+                                stream.getTracks().forEach((track) => track.stop());
                             }
-                            const cb = v => {
-                                if (!ac.signal.aborted) {
-                                    this.set(k, v, fetchOpts.options)
+                        });
+                        this.resetPeer = () => {
+                            this.pc = undefined;
+                            this.client_stream = undefined;
+                            this.server_stream = undefined;
+                        };
+                        this.waitForStateWhen = (checker) => __awaiter(this, void 0, void 0, function*() {
+                            return new Promise((resolve) => {
+                                const state = this.get('state');
+                                if (checker(state)) {
+                                    resolve(state);
+                                } else {
+                                    const checkState = () => {
+                                        const state = this.get('state');
+                                        if (checker(state)) {
+                                            this.off('change:state', checkState);
+                                            resolve(state);
+                                        }
+                                    };
+                                    this.on('change:state', checkState);
                                 }
-                                return v
-                            }
-                            const eb = er => {
-                                if (this.valList[index] === p) {
-                                    const del = !options.noDeleteOnFetchRejection ||
-                                        p.__staleWhileFetching === undefined
-                                    if (del) {
-                                        this.delete(k)
-                                    } else {
-                                        // still replace the *promise* with the stale value,
-                                        // since we are done with the promise at this point.
-                                        this.valList[index] = p.__staleWhileFetching
-                                    }
+                            });
+                        });
+                        this.waitForStateIn = (...states) => __awaiter(this, void 0, void 0, function*() {
+                            return this.waitForStateWhen((state) => states.indexOf(state) !== -1);
+                        });
+                        this.getState = () => this.get('state');
+                        this.setState = (state) => {
+                            this.set('state', state);
+                        };
+                        this.getConstraints = () => {
+                            let {
+                                video,
+                                audio
+                            } = this.get('constraints') || {
+                                audio: false,
+                                video: true
+                            };
+                            const videoId = this.videoInput;
+                            const audioId = this.audioInput;
+                            if (audio && audioId) {
+                                if (typeof audio === 'boolean') {
+                                    audio = {
+                                        deviceId: audioId,
+                                    };
+                                } else {
+                                    audio.deviceId = audioId;
                                 }
-                                if (p.__returned === p) {
-                                    throw er
+                            }
+                            if (video && videoId) {
+                                if (typeof video === 'boolean') {
+                                    video = {
+                                        deviceId: videoId,
+                                    };
+                                } else {
+                                    video.deviceId = videoId;
                                 }
                             }
-                            const pcall = res => res(this.fetchMethod(k, v, fetchOpts))
-                            const p = new Promise(pcall).then(cb, eb)
-                            p.__abortController = ac
-                            p.__staleWhileFetching = v
-                            p.__returned = null
-                            if (index === undefined) {
-                                this.set(k, p, fetchOpts.options)
-                                index = this.keyMap.get(k)
-                            } else {
-                                this.valList[index] = p
+                            return {
+                                video,
+                                audio
+                            };
+                        };
+                        this.closePeer = () => __awaiter(this, void 0, void 0, function*() {
+                            const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new', 'error');
+                            if (state === 'new') {
+                                throw new Error(`This should not happen. We can't close the peer when the state is ${state}. Because at this time, we haven't start the peer.`);
                             }
-                            return p
-                        }
-
-                        isBackgroundFetch(p) {
-                            return (
-                                p &&
-                                typeof p === 'object' &&
-                                typeof p.then === 'function' &&
-                                Object.prototype.hasOwnProperty.call(
-                                    p,
-                                    '__staleWhileFetching'
-                                ) &&
-                                Object.prototype.hasOwnProperty.call(p, '__returned') &&
-                                (p.__returned === p || p.__returned === null)
-                            )
-                        }
-
-                        // this takes the union of get() and set() opts, because it does both
-                        async fetch(
-                            k, {
-                                // get options
-                                allowStale = this.allowStale,
-                                updateAgeOnGet = this.updateAgeOnGet,
-                                noDeleteOnStaleGet = this.noDeleteOnStaleGet,
-                                // set options
-                                ttl = this.ttl,
-                                noDisposeOnSet = this.noDisposeOnSet,
-                                size = 0,
-                                sizeCalculation = this.sizeCalculation,
-                                noUpdateTTL = this.noUpdateTTL,
-                                // fetch exclusive options
-                                noDeleteOnFetchRejection = this.noDeleteOnFetchRejection,
-                                fetchContext = this.fetchContext,
-                                forceRefresh = false,
-                            } = {}
-                        ) {
-                            if (!this.fetchMethod) {
-                                return this.get(k, {
-                                    allowStale,
-                                    updateAgeOnGet,
-                                    noDeleteOnStaleGet,
-                                })
+                            if (state === 'closed' || state === 'error') {
+                                return;
                             }
-
-                            const options = {
-                                allowStale,
-                                updateAgeOnGet,
-                                noDeleteOnStaleGet,
-                                ttl,
-                                noDisposeOnSet,
-                                size,
-                                sizeCalculation,
-                                noUpdateTTL,
-                                noDeleteOnFetchRejection,
-                            }
-
-                            let index = this.keyMap.get(k)
-                            if (index === undefined) {
-                                const p = this.backgroundFetch(k, index, options, fetchContext)
-                                return (p.__returned = p)
-                            } else {
-                                // in cache, maybe already fetching
-                                const v = this.valList[index]
-                                if (this.isBackgroundFetch(v)) {
-                                    return allowStale && v.__staleWhileFetching !== undefined ?
-                                        v.__staleWhileFetching :
-                                        (v.__returned = v)
-                                }
-
-                                // if we force a refresh, that means do NOT serve the cached value,
-                                // unless we are already in the process of refreshing the cache.
-                                if (!forceRefresh && !this.isStale(index)) {
-                                    this.moveToTail(index)
-                                    if (updateAgeOnGet) {
-                                        this.updateItemAge(index)
-                                    }
-                                    return v
+                            const pc = this.pc;
+                            if (!pc) {
+                                this.setState('closed');
+                                return;
+                            }
+                            this.setState('closing');
+                            try {
+                                pc.close();
+                                if (pc.connectionState !== 'closed') {
+                                    yield new Promise((resolve) => {
+                                        pc.addEventListener('connectionstatechange', () => {
+                                            if (pc.connectionState === 'closed') {
+                                                resolve();
+                                            }
+                                        });
+                                    });
                                 }
-
-                                // ok, it is stale or a forced refresh, and not already fetching.
-                                // refresh the cache.
-                                const p = this.backgroundFetch(k, index, options, fetchContext)
-                                return allowStale && p.__staleWhileFetching !== undefined ?
-                                    p.__staleWhileFetching :
-                                    (p.__returned = p)
+                                this.resetPeer();
+                                this.setState('closed');
+                            } catch (err) {
+                                this.setState('error');
                             }
-                        }
-
-                        get(
-                            k, {
-                                allowStale = this.allowStale,
-                                updateAgeOnGet = this.updateAgeOnGet,
-                                noDeleteOnStaleGet = this.noDeleteOnStaleGet,
-                            } = {}
-                        ) {
-                            const index = this.keyMap.get(k)
-                            if (index !== undefined) {
-                                const value = this.valList[index]
-                                const fetching = this.isBackgroundFetch(value)
-                                if (this.isStale(index)) {
-                                    // delete only if not an in-flight background fetch
-                                    if (!fetching) {
-                                        if (!noDeleteOnStaleGet) {
-                                            this.delete(k)
-                                        }
-                                        return allowStale ? value : undefined
+                        });
+                        this.fetchCodecs = () => {
+                            const codecs = this.getCodecs();
+                            this.set('video_codecs', codecs);
+                            this.save_changes();
+                        };
+                        this.getCodecs = () => {
+                            if (supportsSetCodecPreferences) {
+                                const {
+                                    codecs = []
+                                } = RTCRtpSender.getCapabilities('video') || {};
+                                return codecs
+                                    .filter((codec) => !utils_1.arrayInclude(['video/red', 'video/ulpfec', 'video/rtx'], codec.mimeType))
+                                    .map((codec) => {
+                                        return (codec.mimeType + ' ' + (codec.sdpFmtpLine || '')).trim();
+                                    });
+                            } else {
+                                return [];
+                            }
+                        };
+                        this.getPeerConfig = () => {
+                            const config = {};
+                            const iceServers = this.get('iceServers');
+                            if (iceServers && iceServers.length > 0) {
+                                config.iceServers = iceServers.map((server) => {
+                                    if (typeof server === 'string') {
+                                        return {
+                                            urls: server
+                                        };
                                     } else {
-                                        return allowStale ? value.__staleWhileFetching : undefined
+                                        return server;
                                     }
-                                } else {
-                                    // if we're currently fetching it, we don't actually have it yet
-                                    // it's not stale, which means this isn't a staleWhileRefetching,
-                                    // so we just return undefined
-                                    if (fetching) {
-                                        return undefined
-                                    }
-                                    this.moveToTail(index)
-                                    if (updateAgeOnGet) {
-                                        this.updateItemAge(index)
-                                    }
-                                    return value
-                                }
+                                });
                             }
-                        }
-
-                        connect(p, n) {
-                            this.prev[n] = p
-                            this.next[p] = n
-                        }
-
-                        moveToTail(index) {
-                            // if tail already, nothing to do
-                            // if head, move head to next[index]
-                            // else
-                            //   move next[prev[index]] to next[index] (head has no prev)
-                            //   move prev[next[index]] to prev[index]
-                            // prev[index] = tail
-                            // next[tail] = index
-                            // tail = index
-                            if (index !== this.tail) {
-                                if (index === this.head) {
-                                    this.head = this.next[index]
-                                } else {
-                                    this.connect(this.prev[index], this.next[index])
-                                }
-                                this.connect(this.tail, index)
-                                this.tail = index
+                            return config;
+                        };
+                        this.syncDevice = (track) => {
+                            const type = track.kind === 'video' ? 'video_input' : 'audio_input';
+                            let curDeviceId;
+                            if (typeof track.getCapabilities !== 'undefined') {
+                                curDeviceId = track.getCapabilities().deviceId;
+                            } else {
+                                curDeviceId = track.getSettings().deviceId;
                             }
-                        }
-
-                        get del() {
-                            deprecatedMethod('del', 'delete')
-                            return this.delete
-                        }
-
-                        delete(k) {
-                            let deleted = false
-                            if (this.size !== 0) {
-                                const index = this.keyMap.get(k)
-                                if (index !== undefined) {
-                                    deleted = true
-                                    if (this.size === 1) {
-                                        this.clear()
-                                    } else {
-                                        this.removeItemSize(index)
-                                        const v = this.valList[index]
-                                        if (this.isBackgroundFetch(v)) {
-                                            v.__abortController.abort()
-                                        } else {
-                                            this.dispose(v, k, 'delete')
-                                            if (this.disposeAfter) {
-                                                this.disposed.push([v, k, 'delete'])
+                            if (type === 'video_input') {
+                                this.videoInput = curDeviceId;
+                            } else {
+                                this.audioInput = curDeviceId;
+                            }
+                            this.send_cmd('sync_device', {
+                                type,
+                                id: curDeviceId
+                            }, false);
+                        };
+                        this.connect = (video, force_reconnect = false, only_reconnect = false) => __awaiter(this, void 0, void 0, function*() {
+                            const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new');
+                            if (state === 'closed' || state === 'error' || state === 'new') {
+                                if (only_reconnect) {
+                                    return;
+                                }
+                                try {
+                                    this.setState('connecting');
+                                    const pc = webrtc_1.createPeerConnection(this.getPeerConfig());
+                                    this.pc = pc;
+                                    this.bindVideo(video);
+                                    pc.addEventListener('connectionstatechange', () => {
+                                        const state = pc.connectionState;
+                                        if (state === 'failed' ||
+                                            state === 'disconnected' ||
+                                            state === 'closed') {
+                                            pc.close();
+                                            if (this.pc === pc) {
+                                                this.resetPeer();
                                             }
                                         }
-                                        this.keyMap.delete(k)
-                                        this.keyList[index] = null
-                                        this.valList[index] = null
-                                        if (index === this.tail) {
-                                            this.tail = this.prev[index]
-                                        } else if (index === this.head) {
-                                            this.head = this.next[index]
-                                        } else {
-                                            this.next[this.prev[index]] = this.next[index]
-                                            this.prev[this.next[index]] = this.prev[index]
+                                    });
+                                    pc.addEventListener('track', (evt) => {
+                                        if (evt.track.kind === 'video') {
+                                            console.log('track gotten');
+                                            this.server_stream = evt.streams[0];
                                         }
-                                        this.size--
-                                        this.free.push(index)
+                                    });
+                                    const stream = yield navigator.mediaDevices.getUserMedia(this.getConstraints());
+                                    this.client_stream = stream;
+                                    stream.getTracks().forEach((track) => {
+                                        this.syncDevice(track);
+                                        pc.addTrack(track, stream);
+                                    });
+                                    yield webrtc_1.negotiate(pc, (offer) => __awaiter(this, void 0, void 0, function*() {
+                                        console.log(offer);
+                                        const {
+                                            content
+                                        } = yield this.send_cmd('exchange_peer', {
+                                            desc: offer,
+                                        });
+                                        return content;
+                                    }));
+                                    const pcState = yield webrtc_1.waitForConnectionState(pc, (state) => state !== 'connecting' && state !== 'new');
+                                    if (pcState === 'connected') {
+                                        this.setState('connected');
+                                    } else {
+                                        yield this.closePeer();
                                     }
+                                } catch (err) {
+                                    this.setState('error');
+                                    console.error(err);
                                 }
+                            } else if (force_reconnect) {
+                                yield this.closePeer();
+                                yield this.connect(video, force_reconnect);
+                            } else {
+                                this.bindVideo(video);
                             }
-                            if (this.disposed) {
-                                while (this.disposed.length) {
-                                    this.disposeAfter(...this.disposed.shift())
-                                }
+                        });
+                        this.bindVideo = (video) => {
+                            const pc = this.pc;
+                            if (!pc || !video) {
+                                return;
                             }
-                            return deleted
-                        }
-
-                        clear() {
-                            for (const index of this.rindexes({
-                                    allowStale: true
-                                })) {
-                                const v = this.valList[index]
-                                if (this.isBackgroundFetch(v)) {
-                                    v.__abortController.abort()
-                                } else {
-                                    const k = this.keyList[index]
-                                    this.dispose(v, k, 'delete')
-                                    if (this.disposeAfter) {
-                                        this.disposed.push([v, k, 'delete'])
+                            if (pc.connectionState === 'connected' && this.server_stream) {
+                                video.srcObject = this.server_stream;
+                            } else {
+                                const handler = (evt) => {
+                                    if (evt.track.kind === 'video') {
+                                        console.log('track gotten');
+                                        this.server_stream = evt.streams[0];
+                                        video.srcObject = this.server_stream;
+                                        pc.removeEventListener('track', handler);
                                     }
-                                }
-                            }
-
-                            this.keyMap.clear()
-                            this.valList.fill(null)
-                            this.keyList.fill(null)
-                            if (this.ttls) {
-                                this.ttls.fill(0)
-                                this.starts.fill(0)
-                            }
-                            if (this.sizes) {
-                                this.sizes.fill(0)
+                                };
+                                pc.addEventListener('track', handler);
                             }
-                            this.head = 0
-                            this.tail = 0
-                            this.initialFill = 1
-                            this.free.length = 0
-                            this.calculatedSize = 0
-                            this.size = 0
-                            if (this.disposed) {
-                                while (this.disposed.length) {
-                                    this.disposeAfter(...this.disposed.shift())
+                        };
+                        this.fetchCodecs();
+                        // this.fetchDevices();
+                        // this.on('change:video_input_device', (...args) => {
+                        //   console.log('change:video_input_device');
+                        //   console.log(args);
+                        //   this.connect(undefined, true, true);
+                        // });
+                        // this.on('change:audio_input_device', (...args) => {
+                        //   console.log('change:audio_input_device');
+                        //   console.log(args);
+                        //   this.connect(undefined, true, true);
+                        // });
+                        this.on('change:iceServers', () => {
+                            this.connect(undefined, true, true);
+                        });
+                        this.addMessageHandler('request_devices', (cmdMsg) => {
+                            const {
+                                cmd,
+                                id,
+                                args
+                            } = cmdMsg;
+                            const {
+                                type
+                            } = args;
+                            this.getDevice(type).then((devices) => {
+                                console.log(devices);
+                                this.send({
+                                    ans: cmd,
+                                    id,
+                                    res: devices
+                                }, {});
+                            });
+                        });
+                        this.addMessageHandler('notify_device_change', (cmdMsg) => {
+                            const {
+                                args
+                            } = cmdMsg;
+                            const {
+                                type,
+                                change
+                            } = args;
+                            if (type === 'video_input') {
+                                if (this.videoInput !== change.new) {
+                                    this.videoInput = change.new;
+                                    this.connect(undefined, true, true);
+                                }
+                            } else if (type === 'audio_input') {
+                                if (this.audioInput !== change.new) {
+                                    this.audioInput = change.new;
+                                    this.connect(undefined, true, true);
                                 }
                             }
+                        });
+                    }
+                    defaults() {
+                        return Object.assign(Object.assign({}, super.defaults()), {
+                            _model_name: WebCamModel.model_name,
+                            _view_name: WebCamModel.view_name,
+                            server_desc: null,
+                            client_desc: null,
+                            iceServers: [],
+                            constraints: null,
+                            video_codecs: [],
+                            video_codec: null,
+                            state: 'new',
+                            autoplay: true,
+                            controls: true,
+                            crossOrigin: 'not-support',
+                            width: null,
+                            height: null,
+                            playsInline: true,
+                            muted: false
+                        });
+                    }
+                }
+                exports.WebCamModel = WebCamModel;
+                WebCamModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);
+                WebCamModel.model_name = 'WebCamModel';
+                WebCamModel.view_name = 'WebCamView'; // Set to null if no view
+                function attachSinkId(element, sinkId) {
+                    return __awaiter(this, void 0, void 0, function*() {
+                        if (typeof element.sinkId !== 'undefined') {
+                            if (sinkId) {
+                                yield element.setSinkId(sinkId);
+                            }
+                        } else {
+                            console.warn('Browser does not support output device selection.');
                         }
-
-                        get reset() {
-                            deprecatedMethod('reset', 'clear')
-                            return this.clear
-                        }
-
-                        get length() {
-                            deprecatedProperty('length', 'size')
-                            return this.size
+                    });
+                }
+                class WebCamView extends base_1.DOMWidgetView {
+                    render() {
+                        const video = document.createElement('video');
+                        video.playsInline = true;
+                        this.el.appendChild(video);
+                        this.model.connect(video);
+                        this.model.on('change:state', () => {
+                            const model = this.model;
+                            if (model.getState() === 'connected') {
+                                model.connect(video);
+                            }
+                        });
+                        const {
+                            deviceId
+                        } = this.model.get('audio_output_device') || {};
+                        attachSinkId(video, deviceId);
+                        this.model.on('change:audio_output_device', () => {
+                            const {
+                                deviceId
+                            } = this.model.get('audio_output_device') || {};
+                            attachSinkId(video, deviceId);
+                        });
+                        video.autoplay = this.model.get('autoplay');
+                        this.model.on('change:autoplay', () => {
+                            video.autoplay = this.model.get('autoplay');
+                        });
+                        video.controls = this.model.get('controls');
+                        this.model.on('change:controls', () => {
+                            video.controls = this.model.get('controls');
+                        });
+                        const width = this.model.get('width');
+                        if (width) {
+                            video.width = width;
                         }
-
-                        static get AbortController() {
-                            return AC
+                        this.model.on('change:width', () => {
+                            const width = this.model.get('width');
+                            if (width) {
+                                video.width = width;
+                            } else {
+                                video.removeAttribute('width');
+                            }
+                        });
+                        const height = this.model.get('height');
+                        if (height) {
+                            video.height = height;
                         }
-                        static get AbortSignal() {
-                            return AS
+                        this.model.on('change:height', () => {
+                            const height = this.model.get('height');
+                            if (height) {
+                                video.height = height;
+                            } else {
+                                video.removeAttribute('height');
+                            }
+                        });
+                        video.playsInline = this.model.get('playsInline');
+                        this.model.on('change:playsInline', () => {
+                            video.playsInline = this.model.get('playsInline');
+                        });
+                        video.muted = this.model.get('muted');
+                        this.model.on('change:muted', () => {
+                            video.muted = this.model.get('muted');
+                        });
+                        const crossOrigin = this.model.get('crossOrigin');
+                        if (crossOrigin === 'not-support') {
+                            video.crossOrigin = null;
+                        } else {
+                            video.crossOrigin = crossOrigin;
                         }
+                        this.model.on('change:crossOrigin', () => {
+                            const crossOrigin = this.model.get('crossOrigin');
+                            if (crossOrigin === 'not-support') {
+                                video.crossOrigin = null;
+                            } else {
+                                video.crossOrigin = crossOrigin;
+                            }
+                        });
                     }
+                }
+                exports.WebCamView = WebCamView;
+                //# sourceMappingURL=webcam.js.map
 
-                    module.exports = LRUCache
-
-
-                    /***/
-                }),
-
-            /***/
-            "./css/video.css":
-                /*!***********************!*\
-                  !*** ./css/video.css ***!
-                  \***********************/
                 /***/
-                ((module, __unused_webpack_exports, __webpack_require__) => {
+            }),
 
-                    var api = __webpack_require__( /*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
-                    var content = __webpack_require__( /*! !!../node_modules/css-loader/dist/cjs.js!./video.css */ "./node_modules/css-loader/dist/cjs.js!./css/video.css");
+        /***/
+        "./lib/webrtc.js":
+            /*!***********************!*\
+              !*** ./lib/webrtc.js ***!
+              \***********************/
+            /***/
+            (function(__unused_webpack_module, exports, __webpack_require__) {
 
-                    content = content.__esModule ? content.default : content;
+                "use strict";
 
-                    if (typeof content === 'string') {
-                        content = [
-                            [module.id, content, '']
-                        ];
+                /* eslint-disable @typescript-eslint/no-non-null-assertion */
+                var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
+                    function adopt(value) {
+                        return value instanceof P ? value : new P(function(resolve) {
+                            resolve(value);
+                        });
                     }
+                    return new(P || (P = Promise))(function(resolve, reject) {
+                        function fulfilled(value) {
+                            try {
+                                step(generator.next(value));
+                            } catch (e) {
+                                reject(e);
+                            }
+                        }
+
+                        function rejected(value) {
+                            try {
+                                step(generator["throw"](value));
+                            } catch (e) {
+                                reject(e);
+                            }
+                        }
+
+                        function step(result) {
+                            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
+                        }
+                        step((generator = generator.apply(thisArg, _arguments || [])).next());
+                    });
+                };
+                Object.defineProperty(exports, "__esModule", ({
+                    value: true
+                }));
+                exports.negotiate = exports.waitForConnectionState = exports.createPeerConnection = void 0;
+                const utils_1 = __webpack_require__( /*! ./utils */ "./lib/utils.js");
+                const DEFAULT_ICE_SERVERS = [{
+                    urls: ['stun:stun.l.google.com:19302']
+                }, {
+                    urls: ['stun:23.21.150.121']
+                }, {
+                    urls: ['stun:stun01.sipphone.com']
+                }, {
+                    urls: ['stun:stun.ekiga.net']
+                }, {
+                    urls: ['stun:stun.fwdnet.net']
+                }, {
+                    urls: ['stun:stun.ideasip.com']
+                }, {
+                    urls: ['stun:stun.iptel.org']
+                }, {
+                    urls: ['stun:stun.rixtelecom.se']
+                }, {
+                    urls: ['stun:stun.schlund.de']
+                }, {
+                    urls: ['stun:stunserver.org']
+                }, {
+                    urls: ['stun:stun.softjoys.com']
+                }, {
+                    urls: ['stun:stun.voiparound.com']
+                }, {
+                    urls: ['stun:stun.voipbuster.com']
+                }, {
+                    urls: ['stun:stun.voipstunt.com']
+                }, {
+                    urls: ['stun:stun.voxgratia.org']
+                }, {
+                    urls: ['stun:stun.xten.com']
+                }, ];
+
+                function createPeerConnection(config) {
+                    const pc = new RTCPeerConnection(Object.assign({}, {
+                        iceServers: DEFAULT_ICE_SERVERS
+                    }, config || {}));
+                    pc.addEventListener('connectionstatechange', () => {
+                        console.log(`connection -> ${pc.connectionState}`);
+                    }, false);
+                    // register some listeners to help debugging
+                    pc.addEventListener('icegatheringstatechange', () => {
+                        console.log(`iceGathering -> ${pc.iceGatheringState}`);
+                    }, false);
+                    pc.addEventListener('iceconnectionstatechange', () => {
+                        console.log(`iceConnection -> ${pc.iceConnectionState}`);
+                    }, false);
+                    pc.addEventListener('signalingstatechange', () => {
+                        console.log(`signaling -> ${pc.signalingState}`);
+                    }, false);
+                    return pc;
+                }
+                exports.createPeerConnection = createPeerConnection;
+
+                function waitForConnectionState(pc, checker) {
+                    return __awaiter(this, void 0, void 0, function*() {
+                        return new Promise((resolve) => {
+                            if (checker(pc.connectionState)) {
+                                resolve(pc.connectionState);
+                            } else {
+                                const checkState = () => {
+                                    if (checker(pc.connectionState)) {
+                                        pc.removeEventListener('connectionstatechange', checkState);
+                                        resolve(pc.connectionState);
+                                    }
+                                };
+                                pc.addEventListener('connectionstatechange', checkState);
+                            }
+                        });
+                    });
+                }
+                exports.waitForConnectionState = waitForConnectionState;
+
+                function waitIceGathering(pc) {
+                    return __awaiter(this, void 0, void 0, function*() {
+                        return new Promise((resolve) => {
+                            if (pc.iceGatheringState === 'complete') {
+                                resolve();
+                            } else {
+                                const checkState = () => {
+                                    if (pc.iceGatheringState === 'complete') {
+                                        pc.removeEventListener('icegatheringstatechange', checkState);
+                                        resolve();
+                                    }
+                                };
+                                pc.addEventListener('icegatheringstatechange', checkState);
+                            }
+                        });
+                    });
+                }
 
-                    var options = {};
-
-                    options.insert = "head";
-                    options.singleton = false;
-
-                    var update = api(content, options);
-
-
-
-                    module.exports = content.locals || {};
+                function negotiate(pc, answerFunc, codec) {
+                    return __awaiter(this, void 0, void 0, function*() {
+                        let offer = yield pc.createOffer();
+                        yield pc.setLocalDescription(offer);
+                        yield waitIceGathering(pc);
+                        offer = pc.localDescription;
+                        if (codec) {
+                            if (codec.audio && codec.audio !== 'default') {
+                                offer.sdp = sdpFilterCodec('audio', codec.audio, offer.sdp);
+                            }
+                            if (codec.video && codec.video !== 'default') {
+                                offer.sdp = sdpFilterCodec('video', codec.video, offer.sdp);
+                            }
+                        }
+                        const answer = yield answerFunc(offer);
+                        yield pc.setRemoteDescription(answer);
+                    });
+                }
+                exports.negotiate = negotiate;
+
+                function sdpFilterCodec(kind, codec, realSdp) {
+                    const allowed = [];
+                    const rtxRegex = new RegExp('a=fmtp:(\\d+) apt=(\\d+)\\r$');
+                    const codecRegex = new RegExp('a=rtpmap:([0-9]+) ' + escapeRegExp(codec));
+                    const videoRegex = new RegExp('(m=' + kind + ' .*?)( ([0-9]+))*\\s*$');
+                    const lines = realSdp.split('\n');
+                    let isKind = false;
+                    for (let i = 0; i < lines.length; i++) {
+                        if (lines[i].startsWith('m=' + kind + ' ')) {
+                            isKind = true;
+                        } else if (lines[i].startsWith('m=')) {
+                            isKind = false;
+                        }
+                        if (isKind) {
+                            let match = lines[i].match(codecRegex);
+                            if (match) {
+                                allowed.push(parseInt(match[1]));
+                            }
+                            match = lines[i].match(rtxRegex);
+                            if (match && utils_1.arrayInclude(allowed, parseInt(match[2]))) {
+                                allowed.push(parseInt(match[1]));
+                            }
+                        }
+                    }
+                    const skipRegex = 'a=(fmtp|rtcp-fb|rtpmap):([0-9]+)';
+                    let sdp = '';
+                    isKind = false;
+                    for (let i = 0; i < lines.length; i++) {
+                        if (lines[i].startsWith('m=' + kind + ' ')) {
+                            isKind = true;
+                        } else if (lines[i].startsWith('m=')) {
+                            isKind = false;
+                        }
+                        if (isKind) {
+                            const skipMatch = lines[i].match(skipRegex);
+                            if (skipMatch && !utils_1.arrayInclude(allowed, parseInt(skipMatch[2]))) {
+                                continue;
+                            } else if (lines[i].match(videoRegex)) {
+                                sdp += lines[i].replace(videoRegex, '$1 ' + allowed.join(' ')) + '\n';
+                            } else {
+                                sdp += lines[i] + '\n';
+                            }
+                        } else {
+                            sdp += lines[i] + '\n';
+                        }
+                    }
+                    return sdp;
+                }
 
-                    /***/
-                }),
+                function escapeRegExp(str) {
+                    return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
+                }
+                //# sourceMappingURL=webrtc.js.map
 
-            /***/
-            "./css/widget.css":
-                /*!************************!*\
-                  !*** ./css/widget.css ***!
-                  \************************/
                 /***/
-                ((module, __unused_webpack_exports, __webpack_require__) => {
-
-                    var api = __webpack_require__( /*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
-                    var content = __webpack_require__( /*! !!../node_modules/css-loader/dist/cjs.js!./widget.css */ "./node_modules/css-loader/dist/cjs.js!./css/widget.css");
+            }),
 
-                    content = content.__esModule ? content.default : content;
-
-                    if (typeof content === 'string') {
-                        content = [
-                            [module.id, content, '']
-                        ];
-                    }
+        /***/
+        "./node_modules/css-loader/dist/cjs.js!./css/video.css":
+            /*!*************************************************************!*\
+              !*** ./node_modules/css-loader/dist/cjs.js!./css/video.css ***!
+              \*************************************************************/
+            /***/
+            ((module, exports, __webpack_require__) => {
 
-                    var options = {};
+                // Imports
+                var ___CSS_LOADER_API_IMPORT___ = __webpack_require__( /*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
+                exports = ___CSS_LOADER_API_IMPORT___(false);
+                // Module
+                exports.push([module.id, "/* ==========================================================================\r\n   #Custom HTML5 Video Player\r\n   ========================================================================== */\r\n\r\n:root {\r\n  --youtube-red: rgb(254, 9, 0);\r\n}\r\n\r\n.ipywebcam.video-container {\r\n  width: 800px;\r\n  border-radius: 4px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.ipywebcam.video-container .video {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ipywebcam.video-container .video-controls {\r\n  right: 0;\r\n  left: 0;\r\n  padding: 10px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  transition: all 0.2s ease;\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));\r\n}\r\n\r\n.ipywebcam.video-container .video-controls.hide {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container .video-progress {\r\n  position: relative;\r\n  height: 8.4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ipywebcam.video-container progress {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  border-radius: 2px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-bar {\r\n  background-color: #474545;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-webkit-progress-value {\r\n  background: var(--youtube-red);\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container progress::-moz-progress-bar {\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n}\r\n\r\n.ipywebcam.video-container .seek {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n\r\n.ipywebcam.video-container .seek:hover+.seek-tooltip {\r\n  display: block;\r\n}\r\n\r\n.ipywebcam.video-container .seek-tooltip {\r\n  display: none;\r\n  position: absolute;\r\n  top: -30px;\r\n  margin-left: -20px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  content: attr(data-title);\r\n  font-weight: bold;\r\n  color: #fff;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar {\r\n  position: absolute;\r\n  top: 12px;\r\n  width: 100%;\r\n  height: 8.4px;\r\n  background-color: #474545;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n  overflow: visible;\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker {\r\n  position: absolute;\r\n  width: 4px;\r\n  height: 10px;\r\n  top: -0.8px;\r\n  background-color: rgb(254, 9, 0);\r\n  border-radius: 1px;\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker.floating {\r\n  background-color: rgba(254, 9, 0, 0.7);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .marker.selected {\r\n  background-color: rgba(254, 0, 120, 0.7);\r\n}\r\n\r\n.ipywebcam.video-container .range-bar .range-mask {\r\n  position: absolute;\r\n  height: 8.4px;\r\n  background-color: #00c569;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container {\r\n  position: relative;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container svg {\r\n  display: block;\r\n  width: 100%;\r\n  height: 30px;\r\n}\r\n\r\n.ipywebcam.video-container .statistics-container.unused svg {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container .bottom-controls {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .left-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls input {\r\n  width: 100px;\r\n  opacity: 1;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container .volume-controls:hover input, .volume-controls input:focus {\r\n  width: 100px;\r\n  opacity: 1;\r\n}\r\n\r\n.ipywebcam.video-container button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  margin-right: 7px;\r\n  font-size: 12px;\r\n  padding: 3px;\r\n  border: none;\r\n  outline: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container button * {\r\n  pointer-events: none;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip)::before {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  display: none;\r\n  right: 0;\r\n  top: -50px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  font-weight: bold;\r\n  padding: 4px 6px;\r\n  word-break: keep-all;\r\n  white-space: pre;\r\n}\r\n\r\n.ipywebcam.video-container button:not(.no-tooltip):hover::before {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container .fullscreen-button {\r\n  margin-right: 0;\r\n}\r\n\r\n.ipywebcam.video-container .stats-selector svg.icon {\r\n  display: inline;\r\n  margin-right: 2px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ipywebcam.video-container .stats-selector div.text {\r\n  display: inline;\r\n  color: #fff;\r\n  vertical-align: middle;\r\n}\r\n\r\n.ipywebcam.video-container .index-selector {\r\n  min-width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .text-button {\r\n  color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .selector-panel {\r\n  position: absolute;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: rgba(21, 21, 21, .9);\r\n  padding: 6px 12px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  flex-direction: column;\r\n}\r\n\r\n.ipywebcam.video-container .selector-options.grid {\r\n  flex-wrap: wrap;\r\n  flex-direction: row;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button.disabled svg {\r\n  fill: #999;\r\n  stroke: #999;\r\n}\r\n\r\n.ipywebcam.video-container .selector-pager button {\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option {\r\n  color: #fff;\r\n  min-width: 26px;\r\n  height: 26px;\r\n  margin: 3px;\r\n  pointer-events: auto;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option .text {\r\n  display: inline-block;\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option:hover {\r\n  background: rgba(120, 120, 120, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container button.selector-option.selected {\r\n  background: rgba(81, 81, 81, 0.9);\r\n}\r\n\r\n.ipywebcam.video-container .pip-button svg {\r\n  width: 26px;\r\n  height: 26px;\r\n}\r\n\r\n.ipywebcam.video-container .playback-animation {\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -40px;\r\n  margin-top: -40px;\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 80px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  opacity: 0;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range] {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  height: 8.4px;\r\n  background: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  border-radius: 1.3px;\r\n  -webkit-appearance: none;\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-webkit-slider-thumb {\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 16px;\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-left: -1px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-webkit-slider-runnable-track {\r\n  background: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume {\r\n  height: 5px;\r\n  background-color: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-runnable-track {\r\n  background-color: transparent;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-webkit-slider-thumb {\r\n  margin-left: 0;\r\n  height: 14px;\r\n  width: 14px;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 8.4px;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  background: transparent;\r\n  border-radius: 1.3px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]::-moz-range-thumb {\r\n  height: 14px;\r\n  width: 14px;\r\n  border-radius: 50px;\r\n  border: 1px solid var(--youtube-red);\r\n  background: var(--youtube-red);\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range]:focus::-moz-range-track {\r\n  outline: none;\r\n}\r\n\r\n.ipywebcam.video-container input[type=range].volume::-moz-range-thumb {\r\n  border: 1px solid #fff;\r\n  background: #fff;\r\n}\r\n\r\n.ipywebcam.video-container .hidden {\r\n  display: none;\r\n}\r\n\r\n.ipywebcam.video-container svg {\r\n  width: 28px;\r\n  height: 28px;\r\n  fill: #fff;\r\n  stroke: #fff;\r\n  cursor: pointer;\r\n  vertical-align: middle;\r\n}", ""]);
+                // Exports
+                module.exports = exports;
 
-                    options.insert = "head";
-                    options.singleton = false;
 
-                    var update = api(content, options);
+                /***/
+            }),
 
+        /***/
+        "./node_modules/css-loader/dist/cjs.js!./css/widget.css":
+            /*!**************************************************************!*\
+              !*** ./node_modules/css-loader/dist/cjs.js!./css/widget.css ***!
+              \**************************************************************/
+            /***/
+            ((module, exports, __webpack_require__) => {
 
+                // Imports
+                var ___CSS_LOADER_API_IMPORT___ = __webpack_require__( /*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
+                exports = ___CSS_LOADER_API_IMPORT___(false);
+                // Module
+                exports.push([module.id, ".custom-widget {\n  background-color: lightseagreen;\n  padding: 0px 2px;\n}\n", ""]);
+                // Exports
+                module.exports = exports;
 
-                    module.exports = content.locals || {};
 
-                    /***/
-                }),
+                /***/
+            }),
 
+        /***/
+        "./node_modules/css-loader/dist/runtime/api.js":
+            /*!*****************************************************!*\
+              !*** ./node_modules/css-loader/dist/runtime/api.js ***!
+              \*****************************************************/
             /***/
-            "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
-                /*!****************************************************************************!*\
-                  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
-                  \****************************************************************************/
-                /***/
-                ((module, __unused_webpack_exports, __webpack_require__) => {
+            ((module) => {
 
-                    "use strict";
+                "use strict";
 
 
-                    var isOldIE = function isOldIE() {
-                        var memo;
-                        return function memorize() {
-                            if (typeof memo === 'undefined') {
-                                // Test for IE <= 9 as proposed by Browserhacks
-                                // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
-                                // Tests for existence of standard globals is to allow style-loader
-                                // to operate correctly into non-standard environments
-                                // @see https://github.com/webpack-contrib/style-loader/issues/177
-                                memo = Boolean(window && document && document.all && !window.atob);
-                            }
-
-                            return memo;
-                        };
-                    }();
-
-                    var getTarget = function getTarget() {
-                        var memo = {};
-                        return function memorize(target) {
-                            if (typeof memo[target] === 'undefined') {
-                                var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself
-
-                                if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
-                                    try {
-                                        // This will throw an exception if access to iframe is blocked
-                                        // due to cross-origin restrictions
-                                        styleTarget = styleTarget.contentDocument.head;
-                                    } catch (e) {
-                                        // istanbul ignore next
-                                        styleTarget = null;
-                                    }
-                                }
+                /*
+                  MIT License http://www.opensource.org/licenses/mit-license.php
+                  Author Tobias Koppers @sokra
+                */
+                // css base code, injected by the css-loader
+                // eslint-disable-next-line func-names
+                module.exports = function(useSourceMap) {
+                    var list = []; // return the list of modules as css string
+
+                    list.toString = function toString() {
+                        return this.map(function(item) {
+                            var content = cssWithMappingToString(item, useSourceMap);
 
-                                memo[target] = styleTarget;
+                            if (item[2]) {
+                                return "@media ".concat(item[2], " {").concat(content, "}");
                             }
 
-                            return memo[target];
-                        };
-                    }();
-
-                    var stylesInDom = [];
+                            return content;
+                        }).join('');
+                    }; // import a list of modules into the list
+                    // eslint-disable-next-line func-names
 
-                    function getIndexByIdentifier(identifier) {
-                        var result = -1;
 
-                        for (var i = 0; i < stylesInDom.length; i++) {
-                            if (stylesInDom[i].identifier === identifier) {
-                                result = i;
-                                break;
-                            }
+                    list.i = function(modules, mediaQuery, dedupe) {
+                        if (typeof modules === 'string') {
+                            // eslint-disable-next-line no-param-reassign
+                            modules = [
+                                [null, modules, '']
+                            ];
                         }
 
-                        return result;
-                    }
-
-                    function modulesToDom(list, options) {
-                        var idCountMap = {};
-                        var identifiers = [];
+                        var alreadyImportedModules = {};
 
-                        for (var i = 0; i < list.length; i++) {
-                            var item = list[i];
-                            var id = options.base ? item[0] + options.base : item[0];
-                            var count = idCountMap[id] || 0;
-                            var identifier = "".concat(id, " ").concat(count);
-                            idCountMap[id] = count + 1;
-                            var index = getIndexByIdentifier(identifier);
-                            var obj = {
-                                css: item[1],
-                                media: item[2],
-                                sourceMap: item[3]
-                            };
+                        if (dedupe) {
+                            for (var i = 0; i < this.length; i++) {
+                                // eslint-disable-next-line prefer-destructuring
+                                var id = this[i][0];
 
-                            if (index !== -1) {
-                                stylesInDom[index].references++;
-                                stylesInDom[index].updater(obj);
-                            } else {
-                                stylesInDom.push({
-                                    identifier: identifier,
-                                    updater: addStyle(obj, options),
-                                    references: 1
-                                });
+                                if (id != null) {
+                                    alreadyImportedModules[id] = true;
+                                }
                             }
-
-                            identifiers.push(identifier);
                         }
 
-                        return identifiers;
-                    }
-
-                    function insertStyleElement(options) {
-                        var style = document.createElement('style');
-                        var attributes = options.attributes || {};
+                        for (var _i = 0; _i < modules.length; _i++) {
+                            var item = [].concat(modules[_i]);
 
-                        if (typeof attributes.nonce === 'undefined') {
-                            var nonce = true ? __webpack_require__.nc : 0;
+                            if (dedupe && alreadyImportedModules[item[0]]) {
+                                // eslint-disable-next-line no-continue
+                                continue;
+                            }
 
-                            if (nonce) {
-                                attributes.nonce = nonce;
+                            if (mediaQuery) {
+                                if (!item[2]) {
+                                    item[2] = mediaQuery;
+                                } else {
+                                    item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
+                                }
                             }
+
+                            list.push(item);
                         }
+                    };
 
-                        Object.keys(attributes).forEach(function(key) {
-                            style.setAttribute(key, attributes[key]);
-                        });
+                    return list;
+                };
 
-                        if (typeof options.insert === 'function') {
-                            options.insert(style);
-                        } else {
-                            var target = getTarget(options.insert || 'head');
+                function cssWithMappingToString(item, useSourceMap) {
+                    var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring
 
-                            if (!target) {
-                                throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
-                            }
+                    var cssMapping = item[3];
 
-                            target.appendChild(style);
-                        }
-
-                        return style;
+                    if (!cssMapping) {
+                        return content;
                     }
 
-                    function removeStyleElement(style) {
-                        // istanbul ignore if
-                        if (style.parentNode === null) {
-                            return false;
-                        }
-
-                        style.parentNode.removeChild(style);
+                    if (useSourceMap && typeof btoa === 'function') {
+                        var sourceMapping = toComment(cssMapping);
+                        var sourceURLs = cssMapping.sources.map(function(source) {
+                            return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
+                        });
+                        return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
                     }
-                    /* istanbul ignore next  */
 
+                    return [content].join('\n');
+                } // Adapted from convert-source-map (MIT)
 
-                    var replaceText = function replaceText() {
-                        var textStore = [];
-                        return function replace(index, replacement) {
-                            textStore[index] = replacement;
-                            return textStore.filter(Boolean).join('\n');
-                        };
-                    }();
 
-                    function applyToSingletonTag(style, index, remove, obj) {
-                        var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE
+                function toComment(sourceMap) {
+                    // eslint-disable-next-line no-undef
+                    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
+                    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
+                    return "/*# ".concat(data, " */");
+                }
 
-                        /* istanbul ignore if  */
+                /***/
+            }),
 
-                        if (style.styleSheet) {
-                            style.styleSheet.cssText = replaceText(index, css);
-                        } else {
-                            var cssNode = document.createTextNode(css);
-                            var childNodes = style.childNodes;
+        /***/
+        "./css/video.css":
+            /*!***********************!*\
+              !*** ./css/video.css ***!
+              \***********************/
+            /***/
+            ((module, __unused_webpack_exports, __webpack_require__) => {
 
-                            if (childNodes[index]) {
-                                style.removeChild(childNodes[index]);
-                            }
+                var api = __webpack_require__( /*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
+                var content = __webpack_require__( /*! !!../node_modules/css-loader/dist/cjs.js!./video.css */ "./node_modules/css-loader/dist/cjs.js!./css/video.css");
 
-                            if (childNodes.length) {
-                                style.insertBefore(cssNode, childNodes[index]);
-                            } else {
-                                style.appendChild(cssNode);
-                            }
-                        }
-                    }
+                content = content.__esModule ? content.default : content;
 
-                    function applyToTag(style, options, obj) {
-                        var css = obj.css;
-                        var media = obj.media;
-                        var sourceMap = obj.sourceMap;
+                if (typeof content === 'string') {
+                    content = [
+                        [module.id, content, '']
+                    ];
+                }
 
-                        if (media) {
-                            style.setAttribute('media', media);
-                        } else {
-                            style.removeAttribute('media');
-                        }
+                var options = {};
 
-                        if (sourceMap && typeof btoa !== 'undefined') {
-                            css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
-                        } // For old IE
+                options.insert = "head";
+                options.singleton = false;
 
-                        /* istanbul ignore if  */
+                var update = api(content, options);
 
 
-                        if (style.styleSheet) {
-                            style.styleSheet.cssText = css;
-                        } else {
-                            while (style.firstChild) {
-                                style.removeChild(style.firstChild);
-                            }
 
-                            style.appendChild(document.createTextNode(css));
-                        }
-                    }
+                module.exports = content.locals || {};
 
-                    var singleton = null;
-                    var singletonCounter = 0;
+                /***/
+            }),
 
-                    function addStyle(obj, options) {
-                        var style;
-                        var update;
-                        var remove;
+        /***/
+        "./css/widget.css":
+            /*!************************!*\
+              !*** ./css/widget.css ***!
+              \************************/
+            /***/
+            ((module, __unused_webpack_exports, __webpack_require__) => {
 
-                        if (options.singleton) {
-                            var styleIndex = singletonCounter++;
-                            style = singleton || (singleton = insertStyleElement(options));
-                            update = applyToSingletonTag.bind(null, style, styleIndex, false);
-                            remove = applyToSingletonTag.bind(null, style, styleIndex, true);
-                        } else {
-                            style = insertStyleElement(options);
-                            update = applyToTag.bind(null, style, options);
+                var api = __webpack_require__( /*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
+                var content = __webpack_require__( /*! !!../node_modules/css-loader/dist/cjs.js!./widget.css */ "./node_modules/css-loader/dist/cjs.js!./css/widget.css");
 
-                            remove = function remove() {
-                                removeStyleElement(style);
-                            };
-                        }
+                content = content.__esModule ? content.default : content;
 
-                        update(obj);
-                        return function updateStyle(newObj) {
-                            if (newObj) {
-                                if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
-                                    return;
-                                }
+                if (typeof content === 'string') {
+                    content = [
+                        [module.id, content, '']
+                    ];
+                }
 
-                                update(obj = newObj);
-                            } else {
-                                remove();
-                            }
-                        };
-                    }
+                var options = {};
 
-                    module.exports = function(list, options) {
-                        options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
-                        // tags it will allow on a page
+                options.insert = "head";
+                options.singleton = false;
 
-                        if (!options.singleton && typeof options.singleton !== 'boolean') {
-                            options.singleton = isOldIE();
-                        }
+                var update = api(content, options);
 
-                        list = list || [];
-                        var lastIdentifiers = modulesToDom(list, options);
-                        return function update(newList) {
-                            newList = newList || [];
 
-                            if (Object.prototype.toString.call(newList) !== '[object Array]') {
-                                return;
-                            }
 
-                            for (var i = 0; i < lastIdentifiers.length; i++) {
-                                var identifier = lastIdentifiers[i];
-                                var index = getIndexByIdentifier(identifier);
-                                stylesInDom[index].references--;
-                            }
+                module.exports = content.locals || {};
 
-                            var newLastIdentifiers = modulesToDom(newList, options);
+                /***/
+            }),
 
-                            for (var _i = 0; _i < lastIdentifiers.length; _i++) {
-                                var _identifier = lastIdentifiers[_i];
+        /***/
+        "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
+            /*!****************************************************************************!*\
+              !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
+              \****************************************************************************/
+            /***/
+            ((module, __unused_webpack_exports, __webpack_require__) => {
 
-                                var _index = getIndexByIdentifier(_identifier);
+                "use strict";
 
-                                if (stylesInDom[_index].references === 0) {
-                                    stylesInDom[_index].updater();
 
-                                    stylesInDom.splice(_index, 1);
-                                }
-                            }
+                var isOldIE = function isOldIE() {
+                    var memo;
+                    return function memorize() {
+                        if (typeof memo === 'undefined') {
+                            // Test for IE <= 9 as proposed by Browserhacks
+                            // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
+                            // Tests for existence of standard globals is to allow style-loader
+                            // to operate correctly into non-standard environments
+                            // @see https://github.com/webpack-contrib/style-loader/issues/177
+                            memo = Boolean(window && document && document.all && !window.atob);
+                        }
 
-                            lastIdentifiers = newLastIdentifiers;
-                        };
+                        return memo;
                     };
+                }();
 
-                    /***/
-                }),
-
-            /***/
-            "./src/common.ts":
-                /*!***********************!*\
-                  !*** ./src/common.ts ***!
-                  \***********************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
-
-                    "use strict";
-
-                    var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
-                        function adopt(value) {
-                            return value instanceof P ? value : new P(function(resolve) {
-                                resolve(value);
-                            });
-                        }
-                        return new(P || (P = Promise))(function(resolve, reject) {
-                            function fulfilled(value) {
-                                try {
-                                    step(generator.next(value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
+                var getTarget = function getTarget() {
+                    var memo = {};
+                    return function memorize(target) {
+                        if (typeof memo[target] === 'undefined') {
+                            var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself
 
-                            function rejected(value) {
+                            if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
                                 try {
-                                    step(generator["throw"](value));
+                                    // This will throw an exception if access to iframe is blocked
+                                    // due to cross-origin restrictions
+                                    styleTarget = styleTarget.contentDocument.head;
                                 } catch (e) {
-                                    reject(e);
+                                    // istanbul ignore next
+                                    styleTarget = null;
                                 }
                             }
 
-                            function step(result) {
-                                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
-                            }
-                            step((generator = generator.apply(thisArg, _arguments || [])).next());
-                        });
-                    };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.BaseModel = void 0;
-                    const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "@jupyter-widgets/base");
-                    const version_1 = __webpack_require__( /*! ./version */ "./src/version.ts");
-                    class BaseModel extends base_1.DOMWidgetModel {
-                        constructor(...args) {
-                            super(...args);
-                            this.messageHandlers = {};
-                            this.addMessageHandler = (cmd, handler) => {
-                                this.messageHandlers[cmd] = handler;
-                            };
-                            this.send_cmd = this.send_cmd.bind(this);
-                            this.on('msg:custom', (msg, buffers) => {
-                                const {
-                                    id,
-                                    cmd
-                                } = msg;
-                                if (id && id !== this.message_id) {
-                                    return;
-                                }
-                                Object.keys(this.messageHandlers).forEach((key) => {
-                                    if (key === cmd) {
-                                        const handler = this.messageHandlers[key];
-                                        if (handler) {
-                                            handler(msg, buffers);
-                                        }
-                                    }
-                                });
-                            });
-                        }
-                        defaults() {
-                            return Object.assign(Object.assign({}, super.defaults()), {
-                                _view_module: version_1.MODULE_NAME,
-                                _model_module: version_1.MODULE_NAME,
-                                _view_module_version: version_1.MODULE_VERSION,
-                                _model_module_version: version_1.MODULE_VERSION
-                            });
-                        }
-                        get message_id() {
-                            return this.model_id;
-                        }
-                        send_cmd(cmd, args, wait = true) {
-                            return __awaiter(this, void 0, void 0, function*() {
-                                const id = this.message_id;
-                                if (wait) {
-                                    return new Promise((resolve) => {
-                                        // eslint-disable-next-line @typescript-eslint/no-this-alias
-                                        const self = this;
-                                        this.send({
-                                            cmd,
-                                            id,
-                                            args
-                                        }, {});
-
-                                        function callback({
-                                            ans,
-                                            id: t_id,
-                                            res,
-                                        }, buffers) {
-                                            if (ans === cmd && t_id === id) {
-                                                resolve({
-                                                    content: res,
-                                                    buffers
-                                                });
-                                                self.off('msg:custom', callback);
-                                            }
-                                        }
-                                        this.on('msg:custom', callback);
-                                    });
-                                } else {
-                                    this.send({
-                                        cmd,
-                                        id,
-                                        args
-                                    }, {});
-                                }
-                            });
+                            memo[target] = styleTarget;
                         }
-                    }
-                    exports.BaseModel = BaseModel;
-
 
-                    /***/
-                }),
-
-            /***/
-            "./src/extension.ts":
-                /*!**************************!*\
-                  !*** ./src/extension.ts ***!
-                  \**************************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
-
-                    "use strict";
-
-                    // Copyright (c) Jupyter Development Team.
-                    // Distributed under the terms of the Modified BSD License.
-                    var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
-                        if (k2 === undefined) k2 = k;
-                        Object.defineProperty(o, k2, {
-                            enumerable: true,
-                            get: function() {
-                                return m[k];
-                            }
-                        });
-                    }) : (function(o, m, k, k2) {
-                        if (k2 === undefined) k2 = k;
-                        o[k2] = m[k];
-                    }));
-                    var __exportStar = (this && this.__exportStar) || function(m, exports) {
-                        for (var p in m)
-                            if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
-                    };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    // Entry point for the notebook bundle containing custom model definitions.
-                    //
-                    // Setup notebook base URL
-                    //
-                    // Some static assets may be required by the custom widget javascript. The base
-                    // url for the notebook is not known at build time and is therefore computed
-                    // dynamically.
-                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
-                    window.__webpack_public_path__ =
-                        document.querySelector('body').getAttribute('data-base-url') +
-                        'nbextensions/ipywebcam';
-                    __exportStar(__webpack_require__( /*! ./index */ "./src/index.ts"), exports);
-
-
-                    /***/
-                }),
-
-            /***/
-            "./src/index.ts":
-                /*!**********************!*\
-                  !*** ./src/index.ts ***!
-                  \**********************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
-
-                    "use strict";
-
-                    // Copyright (c) Xiaojing Chen
-                    // Distributed under the terms of the Modified BSD License.
-                    var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
-                        if (k2 === undefined) k2 = k;
-                        Object.defineProperty(o, k2, {
-                            enumerable: true,
-                            get: function() {
-                                return m[k];
-                            }
-                        });
-                    }) : (function(o, m, k, k2) {
-                        if (k2 === undefined) k2 = k;
-                        o[k2] = m[k];
-                    }));
-                    var __exportStar = (this && this.__exportStar) || function(m, exports) {
-                        for (var p in m)
-                            if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
+                        return memo[target];
                     };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    __exportStar(__webpack_require__( /*! ./version */ "./src/version.ts"), exports);
-                    __exportStar(__webpack_require__( /*! ./webcam */ "./src/webcam.ts"), exports);
-                    __exportStar(__webpack_require__( /*! ./recorder */ "./src/recorder.ts"), exports);
+                }();
 
+                var stylesInDom = [];
 
-                    /***/
-                }),
-
-            /***/
-            "./src/recorder.ts":
-                /*!*************************!*\
-                  !*** ./src/recorder.ts ***!
-                  \*************************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
+                function getIndexByIdentifier(identifier) {
+                    var result = -1;
 
-                    "use strict";
-
-                    var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
-                        function adopt(value) {
-                            return value instanceof P ? value : new P(function(resolve) {
-                                resolve(value);
-                            });
+                    for (var i = 0; i < stylesInDom.length; i++) {
+                        if (stylesInDom[i].identifier === identifier) {
+                            result = i;
+                            break;
                         }
-                        return new(P || (P = Promise))(function(resolve, reject) {
-                            function fulfilled(value) {
-                                try {
-                                    step(generator.next(value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
-
-                            function rejected(value) {
-                                try {
-                                    step(generator["throw"](value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
+                    }
 
-                            function step(result) {
-                                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
-                            }
-                            step((generator = generator.apply(thisArg, _arguments || [])).next());
-                        });
-                    };
-                    var __importDefault = (this && this.__importDefault) || function(mod) {
-                        return (mod && mod.__esModule) ? mod : {
-                            "default": mod
+                    return result;
+                }
+
+                function modulesToDom(list, options) {
+                    var idCountMap = {};
+                    var identifiers = [];
+
+                    for (var i = 0; i < list.length; i++) {
+                        var item = list[i];
+                        var id = options.base ? item[0] + options.base : item[0];
+                        var count = idCountMap[id] || 0;
+                        var identifier = "".concat(id, " ").concat(count);
+                        idCountMap[id] = count + 1;
+                        var index = getIndexByIdentifier(identifier);
+                        var obj = {
+                            css: item[1],
+                            media: item[2],
+                            sourceMap: item[3]
                         };
-                    };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.RecorderPlayerView = exports.RecorderPlayerModel = void 0;
-                    const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "@jupyter-widgets/base");
-                    const lru_cache_1 = __importDefault(__webpack_require__( /*! lru-cache */ "./node_modules/lru-cache/index.js"));
-                    const common_1 = __webpack_require__( /*! ./common */ "./src/common.ts");
-                    const video_1 = __webpack_require__( /*! ./video */ "./src/video.ts");
-                    class RecorderPlayerModel extends common_1.BaseModel {
-                        constructor(...args) {
-                            super(...args);
-                            this.cache = new lru_cache_1.default({
-                                max: 6,
-                            });
-                            this.fetchStates = {};
-                            this.refresh_callbacks = [];
-                            this.addRefereshCallback = (callback) => {
-                                this.refresh_callbacks.push(callback);
-                            };
-                            this.removeRefreshCallback = (callback) => {
-                                const index = this.refresh_callbacks.indexOf(callback);
-                                if (index >= 0) {
-                                    this.refresh_callbacks.splice(index, 1);
-                                }
-                            };
-                            this.triggerRefresh = (index, channel) => {
-                                this.refresh_callbacks.forEach((cb) => {
-                                    cb(index, channel);
-                                });
-                            };
-                            this.fetchMeta = () => __awaiter(this, void 0, void 0, function*() {
-                                if (this.meta) {
-                                    return this.meta;
-                                }
-                                const {
-                                    content
-                                } = yield this.send_cmd('fetch_meta', {});
-                                this.meta = content;
-                                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
-                                return this.meta;
-                            });
-                            this.fetchData = (index, channel) => __awaiter(this, void 0, void 0, function*() {
-                                const key = channel ? `${index}-${channel}` : `${index}`;
-                                const cached = this.cache.get(key);
-                                if (cached) {
-                                    return cached;
-                                }
-                                let fetchState = this.fetchStates[key];
-                                if (!fetchState) {
-                                    fetchState = {
-                                        callbacks: [],
-                                    };
-                                    this.fetchStates[key] = fetchState;
-                                    const {
-                                        content,
-                                        buffers
-                                    } = yield this.send_cmd('fetch_data', {
-                                        index,
-                                        channel,
-                                    });
-                                    const {
-                                        format = this.get('format')
-                                    } = content;
-                                    const blob = new Blob(buffers, {
-                                        type: `video/${format}`
-                                    });
-                                    this.cache.set(key, blob);
-                                    fetchState.callbacks.forEach((callback) => callback(blob));
-                                    delete this.fetchStates[key];
-                                    return blob;
-                                } else {
-                                    let theResolve = undefined;
-                                    fetchState.callbacks.push((blob) => {
-                                        if (theResolve) {
-                                            theResolve(blob);
-                                        } else {
-                                            throw new Error('This is impossible! No resovle method found. It seems that the promise is not invoked yet.');
-                                        }
-                                    });
-                                    return new Promise((resolve) => {
-                                        theResolve = resolve;
-                                    });
-                                }
-                            });
-                            this.addMessageHandler('channel_stale', (cmdMsg) => {
-                                const {
-                                    args = {}
-                                } = cmdMsg;
-                                const {
-                                    channel
-                                } = args;
-                                if (channel) {
-                                    for (const key of this.cache.keys()) {
-                                        if (key.endsWith(`-${channel}`)) {
-                                            this.cache.delete(key);
-                                        }
-                                    }
-                                } else {
-                                    this.cache.clear();
-                                }
-                                this.meta = undefined;
-                                this.triggerRefresh(undefined, channel);
-                            });
-                        }
-                        defaults() {
-                            return Object.assign(Object.assign({}, super.defaults()), {
-                                _model_name: RecorderPlayerModel.model_name,
-                                _view_name: RecorderPlayerModel.view_name,
-                                format: 'mp4',
-                                width: '',
-                                height: '',
-                                autoplay: true,
-                                loop: false,
-                                controls: true,
-                                autonext: true
-                            });
-                        }
-                    }
-                    exports.RecorderPlayerModel = RecorderPlayerModel;
-                    RecorderPlayerModel.model_name = 'RecorderPlayerModel';
-                    RecorderPlayerModel.view_name = 'RecorderPlayerView'; // Set to null if no view
-                    class RecorderPlayerView extends base_1.DOMWidgetView {
-                        constructor(...args) {
-                            super(...args);
-                            this.index = -1;
-                            this.indexSize = 0;
-                            this.channel = '';
-                            this.channels = [];
-                            this.loading = false;
-                            this.loadStateOnceCallbacks = [];
-                            this.addLoadStateOnceCallback = (callback) => {
-                                this.loadStateOnceCallbacks.push(callback);
-                            };
-                            this.setLoading = (loading) => {
-                                if (this.loading !== loading) {
-                                    this.loading = loading;
-                                    this.loadStateOnceCallbacks.forEach((callback) => callback(loading));
-                                    this.loadStateOnceCallbacks.splice(0, this.loadStateOnceCallbacks.length);
-                                }
-                            };
-                            this.fetchMeta = () => __awaiter(this, void 0, void 0, function*() {
-                                const {
-                                    record_count = 0, chanels = []
-                                } = yield this.model.fetchMeta();
-                                this.indexSize = record_count;
-                                this.channels = chanels;
-                            });
-                            this.initVideo = () => __awaiter(this, void 0, void 0, function*() {
-                                if (!this.video) {
-                                    this.video = new video_1.Video();
-                                    this.video.addIndexSelectHandler((i) => {
-                                        this.load(i, undefined);
-                                    });
-                                    this.video.addChannelSelectHandler((channel) => {
-                                        this.load(undefined, channel, false, true);
-                                    });
-                                    this.video.video.addEventListener('ended', () => __awaiter(this, void 0, void 0, function*() {
-                                        const autonext = this.model.get('autonext');
-                                        const loop = this.model.get('loop');
-                                        if (autonext) {
-                                            if (this.index < this.indexSize - 1) {
-                                                this.load(this.index + 1, undefined);
-                                            } else if (this.index === this.indexSize - 1 && loop) {
-                                                this.load(0, undefined);
-                                            }
-                                        }
-                                    }));
-                                    this.el.appendChild(this.video.container);
-                                    this.update();
-                                    yield this.fetchMeta();
-                                    yield this.load(0, '');
-                                }
-                            });
-                            this.waitForLoading = (loading) => __awaiter(this, void 0, void 0, function*() {
-                                return new Promise((resolve) => {
-                                    if (this.loading === loading) {
-                                        resolve();
-                                    } else {
-                                        this.addLoadStateOnceCallback((state) => {
-                                            if (state === loading) {
-                                                resolve();
-                                            }
-                                        });
-                                    }
-                                });
-                            });
-                            this.load = (index, channel, force = false, resumeTime = false) => __awaiter(this, void 0, void 0, function*() {
-                                if (this.video) {
-                                    if (typeof index === 'undefined') {
-                                        index = this.index;
-                                    }
-                                    if (typeof channel === 'undefined') {
-                                        channel = this.channel;
-                                    }
-                                    if (this.index === index && this.channel === channel && !force) {
-                                        return;
-                                    }
-                                    yield this.waitForLoading(false);
-                                    this.setLoading(true);
-                                    yield this.fetchMeta();
-                                    try {
-                                        if (this.indexSize > 0) {
-                                            const blob = yield this.model.fetchData(index, channel);
-                                            this.video.updateData(blob, resumeTime);
-                                        }
-                                        this.index = index;
-                                        this.channel = channel;
-                                        this.video.updateIndexerSize(this.indexSize);
-                                        this.video.updateIndexerIndex(this.index);
-                                        this.video.updateChannels(this.channels);
-                                    } catch (e) {
-                                        console.error(e);
-                                    } finally {
-                                        this.setLoading(false);
-                                    }
-                                }
-                            });
-                            this.updateWidth = () => {
-                                var _a, _b;
-                                const width = this.model.get('width');
-                                if (width !== undefined && width.length > 0) {
-                                    (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('width', width);
-                                } else {
-                                    (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('width');
-                                }
-                            };
-                            this.updateHeight = () => {
-                                var _a, _b;
-                                const height = this.model.get('height');
-                                if (height !== undefined && height.length > 0) {
-                                    (_a = this.video) === null || _a === void 0 ? void 0 : _a.video.setAttribute('height', height);
-                                } else {
-                                    (_b = this.video) === null || _b === void 0 ? void 0 : _b.video.removeAttribute('height');
-                                }
-                            };
-                            this.updateOtherVideoAttributes = () => {
-                                var _a, _b;
-                                const video = (_a = this.video) === null || _a === void 0 ? void 0 : _a.video;
-                                if (video) {
-                                    video.autoplay = this.model.get('autoplay') ? true : false;
-                                    if (this.model.get('autonext')) {
-                                        video.loop = false;
-                                    } else {
-                                        video.loop = this.model.get('loop') ? true : false;
-                                    }
-                                }
-                                (_b = this.video) === null || _b === void 0 ? void 0 : _b.enableControls(this.model.get('controls'));
-                            };
-                            this.model.addRefereshCallback((i, c) => {
-                                if (this.index === i &&
-                                    ((!this.channel && !c) || (this.channel && c && this.channel === c))) {
-                                    this.load(undefined, undefined, true);
-                                }
+
+                        if (index !== -1) {
+                            stylesInDom[index].references++;
+                            stylesInDom[index].updater(obj);
+                        } else {
+                            stylesInDom.push({
+                                identifier: identifier,
+                                updater: addStyle(obj, options),
+                                references: 1
                             });
                         }
-                        render() {
-                            super.render();
-                            this.initVideo();
-                        }
-                        update() {
-                            this.updateWidth();
-                            this.updateHeight();
-                            this.updateOtherVideoAttributes();
-                            return super.update();
-                        }
-                        remove() {
-                            var _a;
-                            (_a = this.video) === null || _a === void 0 ? void 0 : _a.destroy();
-                            this.video = undefined;
-                        }
+
+                        identifiers.push(identifier);
                     }
-                    exports.RecorderPlayerView = RecorderPlayerView;
 
+                    return identifiers;
+                }
 
-                    /***/
-                }),
+                function insertStyleElement(options) {
+                    var style = document.createElement('style');
+                    var attributes = options.attributes || {};
 
-            /***/
-            "./src/utils.ts":
-                /*!**********************!*\
-                  !*** ./src/utils.ts ***!
-                  \**********************/
-                /***/
-                ((__unused_webpack_module, exports) => {
+                    if (typeof attributes.nonce === 'undefined') {
+                        var nonce = true ? __webpack_require__.nc : 0;
 
-                    "use strict";
+                        if (nonce) {
+                            attributes.nonce = nonce;
+                        }
+                    }
 
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.isMac = exports.arrayFind = exports.arrayInclude = void 0;
+                    Object.keys(attributes).forEach(function(key) {
+                        style.setAttribute(key, attributes[key]);
+                    });
 
-                    function arrayInclude(arr, target) {
-                        return !!~arr.indexOf(target);
-                    }
-                    exports.arrayInclude = arrayInclude;
+                    if (typeof options.insert === 'function') {
+                        options.insert(style);
+                    } else {
+                        var target = getTarget(options.insert || 'head');
 
-                    function arrayFind(arr, cond) {
-                        for (let i = 0; i < arr.length; ++i) {
-                            const e = arr[i];
-                            if (cond(e, i)) {
-                                return e;
-                            }
+                        if (!target) {
+                            throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
                         }
-                        return undefined;
-                    }
-                    exports.arrayFind = arrayFind;
 
-                    function isMac() {
-                        return window.navigator.userAgent.indexOf('Mac') !== -1;
+                        target.appendChild(style);
                     }
-                    exports.isMac = isMac;
 
+                    return style;
+                }
 
-                    /***/
-                }),
+                function removeStyleElement(style) {
+                    // istanbul ignore if
+                    if (style.parentNode === null) {
+                        return false;
+                    }
 
-            /***/
-            "./src/version.ts":
-                /*!************************!*\
-                  !*** ./src/version.ts ***!
-                  \************************/
-                /***/
-                ((__unused_webpack_module, exports, __webpack_require__) => {
+                    style.parentNode.removeChild(style);
+                }
+                /* istanbul ignore next  */
 
-                    "use strict";
 
-                    // Copyright (c) Xiaojing Chen
-                    // Distributed under the terms of the Modified BSD License.
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.MODULE_NAME = exports.MODULE_VERSION = void 0;
-                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment
-                    // @ts-ignore
-                    // eslint-disable-next-line @typescript-eslint/no-var-requires
-                    const data = __webpack_require__( /*! ../package.json */ "./package.json");
-                    /**
-                     * The _model_module_version/_view_module_version this package implements.
-                     *
-                     * The html widget manager assumes that this is the same as the npm package
-                     * version number.
-                     */
-                    exports.MODULE_VERSION = data.version;
-                    /*
-                     * The current package name.
-                     */
-                    exports.MODULE_NAME = data.name;
+                var replaceText = function replaceText() {
+                    var textStore = [];
+                    return function replace(index, replacement) {
+                        textStore[index] = replacement;
+                        return textStore.filter(Boolean).join('\n');
+                    };
+                }();
 
+                function applyToSingletonTag(style, index, remove, obj) {
+                    var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE
 
-                    /***/
-                }),
+                    /* istanbul ignore if  */
 
-            /***/
-            "./src/video.ts":
-                /*!**********************!*\
-                  !*** ./src/video.ts ***!
-                  \**********************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
+                    if (style.styleSheet) {
+                        style.styleSheet.cssText = replaceText(index, css);
+                    } else {
+                        var cssNode = document.createTextNode(css);
+                        var childNodes = style.childNodes;
 
-                    "use strict";
+                        if (childNodes[index]) {
+                            style.removeChild(childNodes[index]);
+                        }
 
-                    /* eslint-disable @typescript-eslint/no-non-null-assertion */
-                    var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
-                        function adopt(value) {
-                            return value instanceof P ? value : new P(function(resolve) {
-                                resolve(value);
-                            });
+                        if (childNodes.length) {
+                            style.insertBefore(cssNode, childNodes[index]);
+                        } else {
+                            style.appendChild(cssNode);
                         }
-                        return new(P || (P = Promise))(function(resolve, reject) {
-                            function fulfilled(value) {
-                                try {
-                                    step(generator.next(value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
+                    }
+                }
 
-                            function rejected(value) {
-                                try {
-                                    step(generator["throw"](value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
+                function applyToTag(style, options, obj) {
+                    var css = obj.css;
+                    var media = obj.media;
+                    var sourceMap = obj.sourceMap;
 
-                            function step(result) {
-                                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
-                            }
-                            step((generator = generator.apply(thisArg, _arguments || [])).next());
-                        });
-                    };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.Video = exports.createVideoContainer = exports.createVideoProgress = exports.createPlaybackAnimation = exports.createSelectiveUses = exports.makeId = void 0;
-                    __webpack_require__( /*! ../css/video.css */ "./css/video.css");
-                    const utils_1 = __webpack_require__( /*! ./utils */ "./src/utils.ts");
-                    const svgNS = 'http://www.w3.org/2000/svg';
-                    const prefix = 'ipywebcam-video-';
-
-                    function makeId(id) {
-                        return `${prefix}${id}`;
-                    }
-                    exports.makeId = makeId;
-
-                    function createSymbol(id, pathD, viewBox = '0 0 24 24') {
-                        const symbol = document.createElementNS(svgNS, 'symbol');
-                        symbol.id = makeId(id);
-                        symbol.setAttribute('viewBox', viewBox);
-                        const path = document.createElementNS(svgNS, 'path');
-                        path.setAttribute('d', pathD);
-                        symbol.appendChild(path);
-                        return symbol;
+                    if (media) {
+                        style.setAttribute('media', media);
+                    } else {
+                        style.removeAttribute('media');
                     }
 
-                    function createControlsSvg() {
-                        const svg = document.createElementNS(svgNS, 'svg');
-                        svg.id = makeId('icons');
-                        svg.setAttribute('style', 'display: none');
-                        const defs = document.createElementNS(svgNS, 'defs');
-                        svg.appendChild(defs);
-                        defs.appendChild(createSymbol('pause', 'M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z'));
-                        defs.appendChild(createSymbol('play-icon', 'M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z'));
-                        defs.appendChild(createSymbol('volume-high', 'M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z'));
-                        defs.appendChild(createSymbol('volume-low', 'M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z'));
-                        defs.appendChild(createSymbol('volume-mute', 'M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z'));
-                        defs.appendChild(createSymbol('fullscreen', 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'));
-                        defs.appendChild(createSymbol('fullscreen-exit', 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'));
-                        defs.appendChild(createSymbol('pip', 'M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z'));
-                        defs.appendChild(createSymbol('left-arrow', 'M15.293 3.293 6.586 12l8.707 8.707 1.414-1.414L9.414 12l7.293-7.293-1.414-1.414z'));
-                        defs.appendChild(createSymbol('right-arrow', 'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'));
-                        return svg;
-                    }
-
-                    function createSelectiveUses(active, ...ids) {
-                        const svg = document.createElementNS(svgNS, 'svg');
-                        ids.forEach((id) => {
-                            const use = document.createElementNS(svgNS, 'use');
-                            use.classList.add(`use-${id}`);
-                            use.setAttribute('href', `#${makeId(id)}`);
-                            if (id !== active) {
-                                use.classList.add('hidden');
-                            }
-                            svg.appendChild(use);
-                        });
-                        return svg;
-                    }
-                    exports.createSelectiveUses = createSelectiveUses;
-
-                    function createPlaybackAnimation() {
-                        const div = document.createElement('div');
-                        div.id = makeId('playback-animation');
-                        div.className = 'playback-animation';
-                        const svg = createSelectiveUses('pause', 'play-icon', 'pause');
-                        svg.classList.add('playback-icons');
-                        div.appendChild(svg);
-                        return div;
-                    }
-                    exports.createPlaybackAnimation = createPlaybackAnimation;
-
-                    function createVideoProgress() {
-                        const container = document.createElement('div');
-                        container.classList.add('video-progress');
-                        const progress = document.createElement('progress');
-                        progress.id = makeId('progress-bar');
-                        progress.classList.add('progress-bar');
-                        progress.value = progress.max = 0;
-                        const input = document.createElement('input');
-                        input.id = makeId('seek');
-                        input.classList.add('seek');
-                        input.type = 'range';
-                        input.value = '0';
-                        input.min = '0';
-                        input.step = '1';
-                        const tooltip = document.createElement('div');
-                        tooltip.id = makeId('seek-tooltip');
-                        tooltip.classList.add('seek-tooltip');
-                        tooltip.innerText = '00:00';
-                        container.appendChild(progress);
-                        container.appendChild(input);
-                        container.appendChild(tooltip);
-                        return container;
-                    }
-                    exports.createVideoProgress = createVideoProgress;
-
-                    function createPlaybackButton(options) {
-                        const button = document.createElement('button');
-                        button.id = makeId('play');
-                        button.classList.add('play');
-                        button.setAttribute('data-title', `Play (${descShortcut(options.shortcuts.play)})`);
-                        const svg = createSelectiveUses('play-icon', 'play-icon', 'pause');
-                        svg.classList.add('playback-icons');
-                        button.appendChild(svg);
-                        return button;
-                    }
-
-                    function createVolumeButton(options) {
-                        const button = document.createElement('button');
-                        button.id = makeId('volume-button');
-                        button.classList.add('volume-button');
-                        button.setAttribute('data-title', `Mute (${descShortcut(options.shortcuts.mute)})`);
-                        const svg = createSelectiveUses('volume-high', 'volume-mute', 'volume-low', 'volume-high');
-                        svg.classList.add('volume-icons');
-                        button.appendChild(svg);
-                        return button;
-                    }
-
-                    function createVolumeInput() {
-                        const input = document.createElement('input');
-                        input.id = makeId('volume');
-                        input.classList.add('volume');
-                        input.value = '1';
-                        input.type = 'range';
-                        input.min = '0';
-                        input.max = '1';
-                        input.step = '0.01';
-                        input.setAttribute('data-mute', '0.5');
-                        return input;
-                    }
-
-                    function createVolumeControls(options) {
-                        const container = document.createElement('div');
-                        container.classList.add('volume-controls');
-                        const button = createVolumeButton(options);
-                        container.appendChild(button);
-                        const input = createVolumeInput();
-                        container.appendChild(input);
-                        return container;
-                    }
-
-                    function createTime() {
-                        const container = document.createElement('div');
-                        container.classList.add('time');
-                        const elapsed = document.createElement('time');
-                        elapsed.id = makeId('time-elapsed');
-                        elapsed.classList.add('time-elapsed');
-                        elapsed.innerText = '00:00';
-                        container.appendChild(elapsed);
-                        const span = document.createElement('span');
-                        span.innerText = ' / ';
-                        container.appendChild(span);
-                        const duration = document.createElement('time');
-                        duration.id = makeId('duration');
-                        duration.classList.add('duration');
-                        duration.innerText = '00:00';
-                        container.appendChild(duration);
-                        return container;
-                    }
-
-                    function createLeftControls(options) {
-                        const container = document.createElement('div');
-                        container.classList.add('left-controls');
-                        const playbackButton = createPlaybackButton(options);
-                        container.appendChild(playbackButton);
-                        const volumeControls = createVolumeControls(options);
-                        container.appendChild(volumeControls);
-                        const time = createTime();
-                        container.appendChild(time);
-                        return container;
-                    }
-
-                    function createIndexSelector() {
-                        const container = document.createElement('button');
-                        container.id = makeId('index-selector');
-                        container.classList.add('index-selector');
-                        container.classList.add('text-button');
-                        container.classList.add('hidden');
-                        container.setAttribute('data-title', 'Select Index');
-                        const text = document.createElement('div');
-                        text.classList.add('text');
-                        container.appendChild(text);
-                        return container;
-                    }
-
-                    function createSpeedSelector() {
-                        const container = document.createElement('button');
-                        container.id = makeId('speed-selector');
-                        container.classList.add('speed-selector');
-                        container.classList.add('text-button');
-                        container.setAttribute('data-title', 'Select Speed');
-                        const text = document.createElement('div');
-                        text.classList.add('text');
-                        container.appendChild(text);
-                        return container;
-                    }
-
-                    function createChannelSelector() {
-                        const container = document.createElement('button');
-                        container.id = makeId('channel-selector');
-                        container.classList.add('channel-selector');
-                        container.classList.add('text-button');
-                        container.classList.add('hidden');
-                        container.setAttribute('data-title', 'Select Channel');
-                        const text = document.createElement('div');
-                        text.classList.add('text');
-                        container.appendChild(text);
-                        return container;
-                    }
-
-                    function createPipButton(options) {
-                        const button = document.createElement('button');
-                        button.id = makeId('pip-button');
-                        button.classList.add('pip-button');
-                        if (!isPipEnabled()) {
-                            button.classList.add('hidden');
-                        }
-                        button.setAttribute('data-title', `PIP (${descShortcut(options.shortcuts.pip)})`);
-                        const svg = createSelectiveUses('pip', 'pip');
-                        button.appendChild(svg);
-                        return button;
-                    }
-
-                    function createFullscreenButton(options) {
-                        const button = document.createElement('button');
-                        button.id = makeId('fullscreen-button');
-                        button.classList.add('fullscreen-button');
-                        button.setAttribute('data-title', `Full screen (${descShortcut(options.shortcuts.fullscreen)})`);
-                        const svg = createSelectiveUses('fullscreen', 'fullscreen', 'fullscreen-exit');
-                        button.appendChild(svg);
-                        return button;
-                    }
-
-                    function createRightControls(options) {
-                        const container = document.createElement('div');
-                        container.classList.add('right-controls');
-                        const indexSelector = createIndexSelector();
-                        container.appendChild(indexSelector);
-                        const channelSelector = createChannelSelector();
-                        container.appendChild(channelSelector);
-                        const speedSelector = createSpeedSelector();
-                        container.appendChild(speedSelector);
-                        const pipButton = createPipButton(options);
-                        container.appendChild(pipButton);
-                        const fullscreenButton = createFullscreenButton(options);
-                        container.appendChild(fullscreenButton);
-                        return container;
-                    }
-
-                    function createBottomControls(options) {
-                        const container = document.createElement('div');
-                        container.classList.add('bottom-controls');
-                        const leftControls = createLeftControls(options);
-                        container.appendChild(leftControls);
-                        const rightControls = createRightControls(options);
-                        container.appendChild(rightControls);
-                        return container;
-                    }
-
-                    function createVideoControls(options) {
-                        const container = document.createElement('div');
-                        container.classList.add('video-controls');
-                        container.tabIndex = 0;
-                        const videoProgress = createVideoProgress();
-                        container.appendChild(videoProgress);
-                        const bottomControls = createBottomControls(options);
-                        container.appendChild(bottomControls);
-                        return container;
-                    }
-                    const VIDEO_WORKS = !!document.createElement('video').canPlayType;
-
-                    function createVideoContainer(options) {
-                        const container = document.createElement('div');
-                        container.id = makeId('container');
-                        container.classList.add('ipywebcam');
-                        container.classList.add('video-container');
-                        const playbackAnimation = createPlaybackAnimation();
-                        container.appendChild(playbackAnimation);
-                        const video = document.createElement('video');
-                        video.id = makeId('video');
-                        video.classList.add('video');
-                        container.appendChild(video);
-                        const videoControls = createVideoControls(options);
-                        container.appendChild(videoControls);
-                        return container;
-                    }
-                    exports.createVideoContainer = createVideoContainer;
-
-                    function iconShow(svg, id) {
-                        const uses = svg.getElementsByTagNameNS(svgNS, 'use');
-                        for (let i = 0; i < uses.length; ++i) {
-                            const use = uses[i];
-                            if (use.classList.contains(`use-${id}`)) {
-                                use.classList.remove('hidden');
-                            } else {
-                                use.classList.add('hidden');
-                            }
-                        }
-                    }
+                    if (sourceMap && typeof btoa !== 'undefined') {
+                        css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
+                    } // For old IE
 
-                    function isPipEnabled() {
-                        return !!document.pictureInPictureEnabled;
-                    }
-                    class SelectorPannel {
-                        constructor(options) {
-                            this.options = [];
-                            this.optionButtons = [];
-                            this.clickHandlers = [];
-                            this.realClickHandlers = [];
-                            this.layout = () => {
-                                const {
-                                    width,
-                                    height
-                                } = this.container.getBoundingClientRect();
-                                this.container.style.left = `-${width / 2}px`;
-                                this.container.style.top = `-${height}px`;
-                            };
-                            this.show = () => {
-                                this.container.classList.remove('hidden');
-                                this.layout();
-                                this.container.focus();
-                            };
-                            this.hidden = () => {
-                                this.container.classList.add('hidden');
-                            };
-                            this.toggle = () => {
-                                if (this.container.classList.contains('hidden')) {
-                                    this.show();
-                                } else {
-                                    this.hidden();
-                                }
-                            };
-                            this.findOption = (options, label) => {
-                                for (let i = 0; i < options.length; ++i) {
-                                    const option = options[i];
-                                    if (option.label === label) {
-                                        return i;
-                                    }
-                                }
-                                return -1;
-                            };
-                            this.updateViewAfterSelect = (label) => {
-                                const index = this.findOption(this.options, label);
-                                if (index === -1) {
-                                    return;
-                                }
-                                this.container.querySelectorAll('button.selector-option').forEach((e) => {
-                                    e.classList.remove('selected');
-                                });
-                                const option = this.container.querySelector(`button.selector-option-${index}`);
-                                if (option) {
-                                    option.classList.add('selected');
-                                }
-                            };
-                            this.select = (label) => {
-                                const index = this.findOption(this.options, label);
-                                if (index !== -1) {
-                                    const option = this.options[index];
-                                    (this.clickHandlers || []).forEach((handler) => {
-                                        handler(option);
-                                    });
-                                    this.updateViewAfterSelect(option.label);
-                                }
-                            };
-                            this.install = (element, handler, initLabel = undefined) => {
-                                this.trigger = element;
-                                this.hidden();
-                                this.addClickHandler(handler);
-                                element.appendChild(this.container);
-                                element.addEventListener('click', () => {
-                                    this.toggle();
-                                });
-                                if (initLabel) {
-                                    this.select(initLabel);
-                                }
-                                return this;
-                            };
-                            this.addClickHandler = (handler) => {
-                                this.clickHandlers.push(handler);
-                            };
-                            this.createHandler = (option) => {
-                                return (evt) => {
-                                    evt.stopPropagation();
-                                    try {
-                                        this.select(option.label);
-                                        this.hidden();
-                                    } catch (e) {
-                                        console.error(e);
-                                    }
-                                };
-                            };
-                            this.updateView = (options) => {
-                                const buttons = this.optionButtons;
-                                const handlers = this.realClickHandlers;
-                                const newLen = options.length;
-                                const oldLen = buttons.length;
-                                for (let i = 0; i < oldLen; ++i) {
-                                    const button = buttons[i];
-                                    const handler = handlers[i];
-                                    if (i < newLen) {
-                                        const option = options[i];
-                                        button.innerText = option.label;
-                                        button.removeEventListener('click', handler);
-                                        const newHandler = this.createHandler(option);
-                                        button.addEventListener('click', newHandler);
-                                        handlers[i] = newHandler;
-                                    } else {
-                                        button.removeEventListener('click', handler);
-                                        this.container.removeChild(button);
-                                    }
-                                }
-                                if (oldLen > newLen) {
-                                    buttons.splice(newLen, oldLen - newLen);
-                                    handlers.splice(newLen, oldLen - newLen);
-                                }
-                                if (oldLen < newLen) {
-                                    for (let i = oldLen; i < newLen; ++i) {
-                                        const option = options[i];
-                                        const button = document.createElement('button');
-                                        button.innerText = option.label;
-                                        button.classList.add('selector-option');
-                                        button.classList.add('no-tooltip');
-                                        button.classList.add(`selector-option-${i}`);
-                                        button.setAttribute('data-index', `${i}`);
-                                        const handler = this.createHandler(option);
-                                        button.addEventListener('click', handler);
-                                        this.container.appendChild(button);
-                                        buttons.push(button);
-                                        handlers.push(handler);
-                                    }
-                                }
-                                this.options = options;
-                            };
-                            this.container = document.createElement('div');
-                            this.container.classList.add('selector-panel');
-                            this.container.classList.add('selector-options');
-                            this.container.tabIndex = -1;
-                            this.container.addEventListener('focusout', (evt) => {
-                                if (!this.container.contains(evt.relatedTarget) &&
-                                    evt.relatedTarget !== this.trigger) {
-                                    this.hidden();
-                                }
-                            });
-                            this.updateView(options);
-                        }
-                    }
-                    class IndexSelectorPannel {
-                        constructor(size) {
-                            this.clickHandlers = [];
-                            this.realClickHandlers = [];
-                            this.calcLayout = (pageIndex) => {
-                                this.row = Math.ceil(this.size / 4);
-                                this.column = Math.min(this.size, 4);
-                                this.hasPager = this.row > 6;
-                                this.pageIndex = pageIndex;
-                                this.pageSize = Math.ceil(this.size / 24);
-                                const curRow = this.pageIndex < this.pageSize ? 6 : this.row - (this.pageIndex - 1) * 6;
-                                this.optionsWidth = this.column * 32 + (this.column - 1) * 6 + 6;
-                                this.optionsHeight = curRow * 32 + (curRow - 1) * 6 + 6;
-                                const height = this.optionsHeight + (this.hasPager ? 32 : 0);
-                                this.container.style.width = `${this.optionsWidth}px`;
-                                this.container.style.height = `${height}px`;
-                                this.container.style.left = `${-this.optionsWidth / 2}px`;
-                                this.container.style.top = `${-height}px`;
-                            };
-                            this.show = () => {
-                                this.container.classList.remove('hidden');
-                                this.container.focus();
-                            };
-                            this.hidden = () => {
-                                this.container.classList.add('hidden');
-                            };
-                            this.toggle = () => {
-                                if (this.container.classList.contains('hidden')) {
-                                    this.show();
-                                } else {
-                                    this.hidden();
-                                }
-                            };
-                            this.addClickHandler = (handler) => {
-                                this.clickHandlers.push(handler);
-                            };
-                            this.calcPageIndexFromIndex = (index) => {
-                                if (index < 0 || index >= this.size) {
-                                    throw new Error(`Invalid index ${index}`);
-                                }
-                                return Math.ceil((index + 1) / 24);
-                            };
-                            this.setSelectIndex = (index) => {
-                                this.updatePage(this.calcPageIndexFromIndex(index));
-                                this.selected = index;
-                                this.container.querySelectorAll('button.selector-option').forEach((e) => {
-                                    e.classList.remove('selected');
-                                });
-                                const option = this.container.querySelector(`button.selector-option-${index}`);
-                                if (option) {
-                                    option.classList.add('selected');
-                                }
-                            };
-                            this.createHandler = (index) => {
-                                return (evt) => {
-                                    evt.stopPropagation();
-                                    try {
-                                        (this.clickHandlers || []).forEach((handler) => {
-                                            handler(index);
-                                        });
-                                        this.hidden();
-                                    } catch (e) {
-                                        console.error(e);
-                                    }
-                                };
-                            };
-                            this.updatePage = (pageIndex) => {
-                                if (pageIndex !== this.pageIndex) {
-                                    this.calcLayout(pageIndex);
-                                    const optNum = this.pageIndex < this.pageSize ? 24 : this.size % 24;
-                                    let len = this.options.children.length;
-                                    let idx = 0;
-                                    for (let i = 0; i < len; ++i) {
-                                        const child = this.options.children.item(i);
-                                        if (child === null || child === void 0 ? void 0 : child.classList.contains('selector-option')) {
-                                            const button = child;
-                                            const oldHandler = this.realClickHandlers[idx];
-                                            const dataIdx = idx + (pageIndex - 1) * 24;
-                                            if (idx < optNum) {
-                                                const newHandler = (this.realClickHandlers[idx] =
-                                                    this.createHandler(dataIdx));
-                                                button.removeEventListener('click', oldHandler);
-                                                button.addEventListener('click', newHandler);
-                                                button.innerText = `${dataIdx}`;
-                                                button.className = '';
-                                                button.classList.add('selector-option');
-                                                button.classList.add('no-tooltip');
-                                                button.classList.add(`selector-option-${dataIdx}`);
-                                                if (dataIdx === this.selected) {
-                                                    button.classList.add('selected');
-                                                } else {
-                                                    button.classList.remove('selected');
-                                                }
-                                                ++idx;
-                                            } else {
-                                                button.removeEventListener('click', oldHandler);
-                                                this.options.removeChild(button);
-                                                --i;
-                                                --len;
-                                            }
-                                        }
-                                    }
-                                    if (this.realClickHandlers.length > optNum) {
-                                        this.realClickHandlers.splice(optNum, this.realClickHandlers.length - optNum);
-                                    }
-                                    if (idx < optNum) {
-                                        for (let i = idx; i < optNum; ++i) {
-                                            const dataIdx = i + (pageIndex - 1) * 24;
-                                            const option = document.createElement('button');
-                                            option.innerText = `${dataIdx}`;
-                                            option.classList.add('selector-option');
-                                            option.classList.add('no-tooltip');
-                                            option.classList.add(`selector-option-${dataIdx}`);
-                                            if (dataIdx === this.selected) {
-                                                option.classList.add('selected');
-                                            } else {
-                                                option.classList.remove('selected');
-                                            }
-                                            option.setAttribute('data-index', `${dataIdx}`);
-                                            const handler = this.createHandler(dataIdx);
-                                            this.realClickHandlers.push(handler);
-                                            option.addEventListener('click', handler);
-                                            this.options.appendChild(option);
-                                        }
-                                    }
-                                    if (this.hasPager) {
-                                        if (this.pager) {
-                                            if (this.pagerLeft && this.pageIndex <= 1) {
-                                                this.pagerLeft.classList.add('disabled');
-                                            } else if (this.pagerLeft) {
-                                                this.pagerLeft.classList.remove('disabled');
-                                            }
-                                            if (this.pagerNumber) {
-                                                this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;
-                                            }
-                                            if (this.pagerRight && this.pageIndex >= this.pageSize) {
-                                                this.pagerRight.classList.add('disabled');
-                                            } else if (this.pagerRight) {
-                                                this.pagerRight.classList.remove('disabled');
-                                            }
-                                        } else {
-                                            this.pager = document.createElement('div');
-                                            this.pager.classList.add('selector-pager');
-                                            this.pagerLeft = document.createElement('button');
-                                            this.pagerLeft.classList.add('page-left');
-                                            this.pagerLeft.classList.add('no-tooltip');
-                                            this.pagerLeft.tabIndex = -1;
-                                            this.pagerLeft.appendChild(createSelectiveUses('left-arrow', 'left-arrow'));
-                                            if (this.pageIndex <= 1) {
-                                                this.pagerLeft.classList.add('disabled');
-                                            }
-                                            this.pagerLeft.addEventListener('click', (evt) => {
-                                                evt.stopPropagation();
-                                                if (this.pageIndex > 1) {
-                                                    this.updatePage(this.pageIndex - 1);
-                                                }
-                                            });
-                                            this.pager.appendChild(this.pagerLeft);
-                                            this.pagerNumber = document.createElement('div');
-                                            this.pagerNumber.innerText = `${pageIndex} / ${this.pageSize}`;
-                                            this.pager.appendChild(this.pagerNumber);
-                                            this.pagerRight = document.createElement('button');
-                                            this.pagerRight.classList.add('page-right');
-                                            this.pagerRight.classList.add('no-tooltip');
-                                            this.pagerRight.tabIndex = -1;
-                                            this.pagerRight.appendChild(createSelectiveUses('right-arrow', 'right-arrow'));
-                                            if (this.pageIndex >= this.pageSize) {
-                                                this.pagerRight.classList.add('disabled');
-                                            }
-                                            this.pagerRight.addEventListener('click', (evt) => {
-                                                evt.stopPropagation();
-                                                if (this.pageIndex < this.pageSize) {
-                                                    this.updatePage(this.pageIndex + 1);
-                                                }
-                                            });
-                                            this.pager.appendChild(this.pagerRight);
-                                            this.container.appendChild(this.pager);
-                                        }
-                                    } else {
-                                        if (this.pager) {
-                                            this.container.removeChild(this.pager);
-                                            this.pager = undefined;
-                                            this.pagerNumber = undefined;
-                                        }
-                                    }
-                                }
-                            };
-                            this.updateSize = (size) => {
-                                if (this.size !== size) {
-                                    this.size = size;
-                                    this.pageIndex = 0;
-                                    this.updatePage(1);
-                                }
-                            };
-                            this.container = document.createElement('div');
-                            this.container.id = makeId('selector-panel');
-                            this.container.classList.add('selector-panel');
-                            this.container.tabIndex = -1;
-                            this.options = document.createElement('div');
-                            this.options.classList.add('selector-options');
-                            this.options.classList.add('grid');
-                            this.container.appendChild(this.options);
-                            this.container.addEventListener('focusout', (evt) => {
-                                if (!this.container.contains(evt.relatedTarget) &&
-                                    evt.relatedTarget !== this.trigger) {
-                                    this.hidden();
-                                }
-                            });
-                            this.updateSize(size);
-                        }
-                    }
+                    /* istanbul ignore if  */
 
-                    function descShortcut(shortcut) {
-                        const parts = [];
-                        if (shortcut.ctrl) {
-                            parts.push('ctrl');
-                        }
-                        if (shortcut.alt) {
-                            parts.push('alt');
-                        }
-                        if (shortcut.shift) {
-                            parts.push('shift');
-                        }
-                        parts.push(shortcut.key);
-                        return parts.join(' + ');
-                    }
-                    const DEFAULT_OPTIONS = {
-                        shortcuts: {
-                            play: 'k',
-                            mute: 'm',
-                            fullscreen: 'f',
-                            pip: 'p',
-                        },
-                    };
 
-                    function makeShortcut(shortcut) {
-                        if (typeof shortcut === 'string') {
-                            return {
-                                key: shortcut,
-                                ctrl: false,
-                                alt: false,
-                                shift: false,
-                            };
-                        } else {
-                            return {
-                                key: shortcut.key,
-                                ctrl: shortcut.ctrl || false,
-                                alt: shortcut.alt || false,
-                                shift: shortcut.shift || false,
-                            };
+                    if (style.styleSheet) {
+                        style.styleSheet.cssText = css;
+                    } else {
+                        while (style.firstChild) {
+                            style.removeChild(style.firstChild);
                         }
-                    }
 
-                    function makeOptions(otps) {
-                        const options = Object.assign({}, DEFAULT_OPTIONS, otps);
-                        options.shortcuts = Object.assign({}, DEFAULT_OPTIONS.shortcuts, otps.shortcuts);
-                        options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen);
-                        options.shortcuts.mute = makeShortcut(options.shortcuts.mute);
-                        options.shortcuts.pip = makeShortcut(options.shortcuts.pip);
-                        options.shortcuts.play = makeShortcut(options.shortcuts.play);
-                        return options;
-                    }
-                    const SpeedOptions = [{
-                        label: '0.25x',
-                        value: 0.25
-                    }, {
-                        label: '0.5x',
-                        value: 0.5
-                    }, {
-                        label: '0.75x',
-                        value: 0.75
-                    }, {
-                        label: '1.0x',
-                        value: 1
-                    }, {
-                        label: '1.25x',
-                        value: 1.25
-                    }, {
-                        label: '1.5x',
-                        value: 1.5
-                    }, {
-                        label: '1.75x',
-                        value: 1.75
-                    }, {
-                        label: '2.0x',
-                        value: 2
-                    }, {
-                        label: '2.5x',
-                        value: 2.5
-                    }, {
-                        label: '3.0x',
-                        value: 3
-                    }, ];
-                    class Video {
-                        constructor(opts = {}) {
-                            this.indexSelectHandlers = [];
-                            this.indexerIndex = -1;
-                            this.indexerSize = 0;
-                            this.speed = 1;
-                            this.channelSelectHandlers = [];
-                            this.channel = '';
-                            this.destroy = () => {
-                                document.removeEventListener('keyup', this.keyboardShortcuts);
-                                const url = this.video.src;
-                                this.video.src = '';
-                                if (url) {
-                                    URL.revokeObjectURL(url);
-                                }
-                            };
-                            this.updateChannels = (channels = []) => {
-                                if (channels.length > 0) {
-                                    this.channelSelector.classList.remove('hidden');
-                                    const options = [{
-                                        label: 'Default',
-                                        value: ''
-                                    }];
-                                    channels.forEach((channel) => {
-                                        options.push({
-                                            label: channel,
-                                            value: channel
-                                        });
-                                    });
-                                    this.channelSelectorPannel.updateView(options);
-                                    if (!utils_1.arrayInclude(channels, this.channel)) {
-                                        this.channelSelectorPannel.select('Default');
-                                    }
-                                } else {
-                                    this.channelSelector.classList.add('hidden');
-                                    this.channelSelectorPannel.updateView([]);
-                                }
-                            };
-                            this.addChannelSelectHandler = (handler) => {
-                                this.channelSelectHandlers.push(handler);
-                            };
-                            this.updateIndexerSize = (size) => {
-                                if (!this.indexSelectorPannel) {
-                                    if (size > 0) {
-                                        this.indexSelectorPannel = new IndexSelectorPannel(size);
-                                        this.indexSelectorPannel.hidden();
-                                        this.indexSelectHandlers.forEach((handler) => {
-                                            var _a;
-                                            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.addClickHandler(handler);
-                                        });
-                                        this.indexSelectorPannel.trigger = this.indexSelector;
-                                        this.indexSelector.appendChild(this.indexSelectorPannel.container);
-                                        this.indexSelector.addEventListener('click', () => {
-                                            var _a, _b;
-                                            (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.toggle();
-                                            const index = this.indexSelector.getAttribute('data-index');
-                                            if (index) {
-                                                (_b = this.indexSelectorPannel) === null || _b === void 0 ? void 0 : _b.setSelectIndex(Number.parseInt(index));
-                                            }
-                                        });
-                                        this.indexSelector.classList.remove('hidden');
-                                    } else {
-                                        this.indexSelector.classList.add('hidden');
-                                    }
-                                } else {
-                                    if (size <= 0) {
-                                        this.indexSelectorPannel.hidden();
-                                        this.indexSelector.classList.add('hidden');
-                                    } else {
-                                        this.indexSelectorPannel.updateSize(size);
-                                        this.indexSelector.classList.remove('hidden');
-                                    }
-                                }
-                                this.indexerSize = size;
-                            };
-                            this.updateIndexerIndex = (index) => {
-                                var _a;
-                                const text = this.indexSelector.querySelector('div.text');
-                                text.innerText = `${index}`;
-                                this.indexSelector.setAttribute('data-index', `${index}`);
-                                (_a = this.indexSelectorPannel) === null || _a === void 0 ? void 0 : _a.setSelectIndex(index);
-                                this.indexerIndex = index;
-                            };
-                            this.addIndexSelectHandler = (handler) => {
-                                this.indexSelectHandlers.push(handler);
-                                if (this.indexSelectorPannel) {
-                                    this.indexSelectorPannel.addClickHandler(handler);
-                                }
-                            };
-                            this.updateData = (blob, resumeTime = false) => {
-                                const oldUrl = this.video.src;
-                                const url = URL.createObjectURL(blob);
-                                this.video.src = url;
-                                if (oldUrl) {
-                                    this.video.load();
-                                    if (resumeTime && this.currentTime) {
-                                        this.video.currentTime = this.currentTime;
-                                    }
-                                    URL.revokeObjectURL(oldUrl);
-                                }
-                            };
-                            this.installSvg = () => {
-                                const id = makeId('icons');
-                                const svg = document.getElementById(id);
-                                if (!svg) {
-                                    document.body.appendChild(createControlsSvg());
-                                }
-                            };
-                            this.togglePlay = () => {
-                                if (this.video.paused || this.video.ended) {
-                                    this.video.play();
-                                } else {
-                                    this.video.pause();
-                                }
-                            };
-                            this.enableControls = (enabled) => {
-                                if (enabled) {
-                                    if (VIDEO_WORKS) {
-                                        this.video.controls = false;
-                                        this.videoControls.classList.remove('hidden');
-                                    } else {
-                                        this.video.controls = true;
-                                        this.videoControls.classList.add('hidden');
-                                    }
-                                } else {
-                                    this.video.controls = false;
-                                    this.videoControls.classList.add('hidden');
-                                }
-                            };
-                            this.updatePlayButton = () => {
-                                const svg = this.playButton.getElementsByClassName('playback-icons')[0];
-                                const shortcut = descShortcut(this.options.shortcuts.play);
-                                if (this.video.paused || this.video.ended) {
-                                    iconShow(svg, 'play-icon');
-                                    this.playButton.setAttribute('data-title', `Play (${shortcut})`);
-                                } else {
-                                    iconShow(svg, 'pause');
-                                    this.playButton.setAttribute('data-title', `Pause (${shortcut})`);
-                                }
-                            };
-                            this.initializeVideo = () => {
-                                const videoDuration = Math.floor(this.video.duration);
-                                this.seek.setAttribute('max', `${videoDuration}`);
-                                this.progress.setAttribute('max', `${videoDuration}`);
-                                const time = formatTime(videoDuration);
-                                this.duration.innerText = `${time.minutes}:${time.seconds}`;
-                                this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
-                            };
-                            this.updateCurrentTime = () => {
-                                this.currentTime = this.video.currentTime;
-                            };
-                            // updateTimeElapsed indicates how far through the video
-                            // the current playback is by updating the timeElapsed element
-                            this.updateTimeElapsed = () => {
-                                const time = formatTime(Math.floor(this.video.currentTime));
-                                this.timeElapsed.innerText = `${time.minutes}:${time.seconds}`;
-                                this.timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
-                            };
-                            // updateProgress indicates how far through the video
-                            // the current playback is by updating the progress bar
-                            this.updateProgress = () => {
-                                this.seek.value = `${Math.floor(this.video.currentTime)}`;
-                                this.progress.value = Math.floor(this.video.currentTime);
-                            };
-                            // updateSeekTooltip uses the position of the mouse on the progress bar to
-                            // roughly work out what point in the video the user will skip to if
-                            // the progress bar is clicked at that point
-                            this.updateSeekTooltip = (event) => {
-                                const skipTo = Math.round((event.offsetX / this.seek.clientWidth) *
-                                    parseInt(this.seek.getAttribute('max') || '0', 10));
-                                this.seek.setAttribute('data-seek', `${skipTo}`);
-                                const t = formatTime(skipTo);
-                                this.seekTooltip.textContent = `${t.minutes}:${t.seconds}`;
-                                const rect = this.video.getBoundingClientRect();
-                                this.seekTooltip.style.left = `${event.pageX - rect.left}px`;
-                            };
-                            // skipAhead jumps to a different point in the video when the progress bar
-                            // is clicked
-                            this.skipAhead = () => {
-                                const skipTo = this.seek.dataset.seek ?
-                                    this.seek.dataset.seek :
-                                    this.seek.value;
-                                this.video.currentTime = Number.parseFloat(skipTo);
-                                this.progress.value = Number.parseFloat(skipTo);
-                                this.seek.value = skipTo;
-                            };
-                            // updateVolume updates the video's volume
-                            // and disables the muted state if active
-                            this.updateVolume = () => {
-                                if (this.video.muted) {
-                                    this.video.muted = false;
-                                }
-                                this.video.volume = Number.parseFloat(this.volume.value);
-                            };
-                            // updateVolumeIcon updates the volume icon so that it correctly reflects
-                            // the volume of the video
-                            this.updateVolumeIcon = () => {
-                                const shortcut = descShortcut(this.options.shortcuts.mute);
-                                this.volumeButton.setAttribute('data-title', `Mute (${shortcut})`);
-                                if (this.video.muted || this.video.volume === 0) {
-                                    this.volumeButton.setAttribute('data-title', `Unmute (${shortcut})`);
-                                    iconShow(this.volumeIcons, 'volume-mute');
-                                } else if (this.video.volume > 0 && this.video.volume <= 0.5) {
-                                    iconShow(this.volumeIcons, 'volume-low');
-                                } else {
-                                    iconShow(this.volumeIcons, 'volume-high');
-                                }
-                            };
-                            // toggleMute mutes or unmutes the video when executed
-                            // When the video is unmuted, the volume is returned to the value
-                            // it was set to before the video was muted
-                            this.toggleMute = () => {
-                                this.video.muted = !this.video.muted;
-                                if (this.video.muted) {
-                                    this.volume.setAttribute('data-volume', this.volume.value);
-                                    this.volume.value = '0';
-                                } else {
-                                    this.volume.value = this.volume.dataset.volume || `${this.video.volume}`;
-                                }
-                            };
-                            // animatePlayback displays an animation when
-                            // the video is played or paused
-                            this.animatePlayback = () => {
-                                this.playbackAnimation.animate([{
-                                    opacity: 1,
-                                    transform: 'scale(1)',
-                                }, {
-                                    opacity: 0,
-                                    transform: 'scale(1.3)',
-                                }, ], {
-                                    duration: 500,
-                                });
-                            };
-                            // toggleFullScreen toggles the full screen state of the video
-                            // If the browser is currently in fullscreen mode,
-                            // then it should exit and vice versa.
-                            this.toggleFullScreen = () => {
-                                if (document.fullscreenElement) {
-                                    document.exitFullscreen();
-                                } else if (document.webkitFullscreenElement) {
-                                    // Need this to support Safari
-                                    document.webkitExitFullscreen();
-                                } else if (this.container.webkitRequestFullscreen) {
-                                    // Need this to support Safari
-                                    this.container.webkitRequestFullscreen();
-                                } else {
-                                    this.container.requestFullscreen();
-                                }
-                            };
-                            this.isFullscreen = () => {
-                                return (document.fullscreenElement ||
-                                    document.webkitFullscreenElement ||
-                                    this.container.webkitRequestFullscreen);
-                            };
-                            // updateFullscreenButton changes the icon of the full screen button
-                            // and tooltip to reflect the current full screen state of the video
-                            this.updateFullscreenButton = () => {
-                                const shortcut = descShortcut(this.options.shortcuts.fullscreen);
-                                if (this.isFullscreen()) {
-                                    this.fullscreenButton.setAttribute('data-title', `Exit full screen (${shortcut})`);
-                                    iconShow(this.fullscreenIcons, 'fullscreen-exit');
-                                } else {
-                                    this.fullscreenButton.setAttribute('data-title', `Full screen (${shortcut})`);
-                                    iconShow(this.fullscreenIcons, 'fullscreen');
-                                }
-                            };
-                            // togglePip toggles Picture-in-Picture mode on the video
-                            this.togglePip = () => __awaiter(this, void 0, void 0, function*() {
-                                try {
-                                    if (this.video !== document.pictureInPictureElement) {
-                                        this.pipButton.disabled = true;
-                                        yield this.video.requestPictureInPicture();
-                                    } else {
-                                        yield document.exitPictureInPicture();
-                                    }
-                                } catch (error) {
-                                    console.error(error);
-                                } finally {
-                                    this.pipButton.disabled = false;
-                                }
-                            });
-                            // hideControls hides the video controls when not in use
-                            // if the video is paused, the controls must remain visible
-                            this.hideControls = () => {
-                                if (this.video.paused) {
-                                    return;
-                                }
-                                this.videoControls.classList.add('hide');
-                            };
-                            // showControls displays the video controls
-                            this.showControls = () => {
-                                this.videoControls.classList.remove('hide');
-                            };
-                            this.isInFocus = () => {
-                                var _a;
-                                return ((_a = document.activeElement) === null || _a === void 0 ? void 0 : _a.contains(this.container)) || false;
-                            };
-                            // keyboardShortcuts executes the relevant functions for
-                            // each supported shortcut key
-                            this.keyboardShortcuts = (event) => {
-                                if (!this.isInFocus()) {
-                                    return;
-                                }
-                                const {
-                                    key,
-                                    ctrlKey,
-                                    altKey,
-                                    shiftKey
-                                } = event;
-                                const {
-                                    play,
-                                    mute,
-                                    fullscreen,
-                                    pip
-                                } = this.options.shortcuts;
-                                if (key === play.key &&
-                                    (play.ctrl === !!ctrlKey ||
-                                        play.alt === !!altKey ||
-                                        play.shift === !!shiftKey)) {
-                                    this.togglePlay();
-                                    this.animatePlayback();
-                                    if (this.video.paused) {
-                                        this.showControls();
-                                    } else {
-                                        setTimeout(() => {
-                                            this.hideControls();
-                                        }, 2000);
-                                    }
-                                } else if (key === mute.key &&
-                                    (mute.ctrl === !!ctrlKey ||
-                                        mute.alt === !!altKey ||
-                                        mute.shift === !!shiftKey)) {
-                                    this.toggleMute();
-                                } else if (key === fullscreen.key &&
-                                    (fullscreen.ctrl === !!ctrlKey ||
-                                        fullscreen.alt === !!altKey ||
-                                        fullscreen.shift === !!shiftKey)) {
-                                    this.toggleFullScreen();
-                                } else if (key === pip.key &&
-                                    (pip.ctrl === !!ctrlKey ||
-                                        pip.alt === !!altKey ||
-                                        pip.shift === !!shiftKey)) {
-                                    this.togglePip();
-                                }
-                            };
-                            this.options = makeOptions(opts);
-                            this.installSvg();
-                            this.container = createVideoContainer(this.options);
-                            this.video = this.container.querySelector('video.video');
-                            this.videoControls = this.container.querySelector('div.video-controls');
-                            this.playButton = this.container.querySelector('button.play');
-                            this.timeElapsed = this.container.querySelector('time.time-elapsed');
-                            this.duration = this.container.querySelector('time.duration');
-                            this.progress = this.container.querySelector('progress.progress-bar');
-                            this.seek = this.container.querySelector('input.seek');
-                            this.seekTooltip = this.container.querySelector('div.seek-tooltip');
-                            this.volume = this.container.querySelector('input.volume');
-                            this.volumeButton = this.container.querySelector('button.volume-button');
-                            this.volumeIcons = this.volumeButton.querySelector('svg');
-                            this.playbackAnimation = this.container.querySelector('div.playback-animation');
-                            this.fullscreenButton = this.container.querySelector('button.fullscreen-button');
-                            this.fullscreenIcons = this.fullscreenButton.querySelector('svg');
-                            this.pipButton = this.container.querySelector('button.pip-button');
-                            this.indexSelector = this.container.querySelector('button.index-selector');
-                            this.speedSelector = this.container.querySelector('button.speed-selector');
-                            this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(this.speedSelector, (option) => {
-                                const text = this.speedSelector.querySelector('div.text');
-                                text.innerText = option.label;
-                                this.video.playbackRate = option.value;
-                                this.speed = option.value;
-                            }, '1.0x');
-                            this.channelSelector = this.container.querySelector('button.channel-selector');
-                            this.channelSelectorPannel = new SelectorPannel([]).install(this.channelSelector, (option) => {
-                                const text = this.channelSelector.querySelector('div.text');
-                                text.innerText = option.label;
-                                this.channelSelectHandlers.forEach((handler) => {
-                                    handler(option.value);
-                                });
-                                this.channel = option.value;
-                            });
-                            this.playButton.addEventListener('click', this.togglePlay);
-                            this.video.addEventListener('play', this.updateCurrentTime);
-                            this.video.addEventListener('play', this.updatePlayButton);
-                            this.video.addEventListener('play', () => {
-                                this.video.playbackRate = this.speed;
-                            });
-                            this.video.addEventListener('pause', this.updatePlayButton);
-                            this.video.addEventListener('loadedmetadata', this.initializeVideo);
-                            this.video.addEventListener('timeupdate', this.updateCurrentTime);
-                            this.video.addEventListener('timeupdate', this.updateTimeElapsed);
-                            this.video.addEventListener('timeupdate', this.updateProgress);
-                            this.video.addEventListener('volumechange', this.updateVolumeIcon);
-                            this.video.addEventListener('click', this.togglePlay);
-                            this.video.addEventListener('click', this.animatePlayback);
-                            this.video.addEventListener('mouseenter', this.showControls);
-                            this.video.addEventListener('mouseleave', this.hideControls);
-                            this.videoControls.addEventListener('mouseenter', this.showControls);
-                            this.videoControls.addEventListener('mouseleave', this.hideControls);
-                            this.seek.addEventListener('mousemove', this.updateSeekTooltip);
-                            this.seek.addEventListener('input', this.skipAhead);
-                            this.volume.addEventListener('input', this.updateVolume);
-                            this.volumeButton.addEventListener('click', this.toggleMute);
-                            this.fullscreenButton.addEventListener('click', this.toggleFullScreen);
-                            this.container.addEventListener('fullscreenchange', this.updateFullscreenButton);
-                            this.pipButton.addEventListener('click', this.togglePip);
-                            document.addEventListener('keyup', this.keyboardShortcuts);
-                        }
-                    }
-                    exports.Video = Video;
-                    // formatTime takes a time length in seconds and returns the time in
-                    // minutes and seconds
-                    function formatTime(timeInSeconds) {
-                        const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);
-                        return {
-                            minutes: result.substr(3, 2),
-                            seconds: result.substr(6, 2),
-                        };
+                        style.appendChild(document.createTextNode(css));
                     }
+                }
 
+                var singleton = null;
+                var singletonCounter = 0;
 
-                    /***/
-                }),
-
-            /***/
-            "./src/webcam.ts":
-                /*!***********************!*\
-                  !*** ./src/webcam.ts ***!
-                  \***********************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
+                function addStyle(obj, options) {
+                    var style;
+                    var update;
+                    var remove;
 
-                    "use strict";
+                    if (options.singleton) {
+                        var styleIndex = singletonCounter++;
+                        style = singleton || (singleton = insertStyleElement(options));
+                        update = applyToSingletonTag.bind(null, style, styleIndex, false);
+                        remove = applyToSingletonTag.bind(null, style, styleIndex, true);
+                    } else {
+                        style = insertStyleElement(options);
+                        update = applyToTag.bind(null, style, options);
 
-                    // Copyright (c) Xiaojing Chen
-                    // Distributed under the terms of the Modified BSD License.
-                    var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
-                        function adopt(value) {
-                            return value instanceof P ? value : new P(function(resolve) {
-                                resolve(value);
-                            });
-                        }
-                        return new(P || (P = Promise))(function(resolve, reject) {
-                            function fulfilled(value) {
-                                try {
-                                    step(generator.next(value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
+                        remove = function remove() {
+                            removeStyleElement(style);
+                        };
+                    }
 
-                            function rejected(value) {
-                                try {
-                                    step(generator["throw"](value));
-                                } catch (e) {
-                                    reject(e);
-                                }
+                    update(obj);
+                    return function updateStyle(newObj) {
+                        if (newObj) {
+                            if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
+                                return;
                             }
 
-                            function step(result) {
-                                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
-                            }
-                            step((generator = generator.apply(thisArg, _arguments || [])).next());
-                        });
-                    };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.WebCamView = exports.WebCamModel = void 0;
-                    const base_1 = __webpack_require__( /*! @jupyter-widgets/base */ "@jupyter-widgets/base");
-                    const common_1 = __webpack_require__( /*! ./common */ "./src/common.ts");
-                    const webrtc_1 = __webpack_require__( /*! ./webrtc */ "./src/webrtc.ts");
-                    const utils_1 = __webpack_require__( /*! ./utils */ "./src/utils.ts");
-                    // Import the CSS
-                    __webpack_require__( /*! ../css/widget.css */ "./css/widget.css");
-                    const supportsSetCodecPreferences = window.RTCRtpTransceiver &&
-                        'setCodecPreferences' in window.RTCRtpTransceiver.prototype;
-                    class WebCamModel extends common_1.BaseModel {
-                        // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
-                        constructor(...args) {
-                            super(...args);
-                            this.getDevice = (type) => __awaiter(this, void 0, void 0, function*() {
-                                const stream = yield navigator.mediaDevices.getUserMedia({
-                                    video: type === 'video_input',
-                                    audio: type === 'audio_input' || type === 'audio_output',
-                                });
-                                try {
-                                    const n_type = type.replace('_', '');
-                                    const devices = yield navigator.mediaDevices.enumerateDevices();
-                                    return devices.filter((device) => device.kind === n_type && device.deviceId);
-                                } finally {
-                                    stream.getTracks().forEach((track) => track.stop());
-                                }
-                            });
-                            this.resetPeer = () => {
-                                this.pc = undefined;
-                                this.client_stream = undefined;
-                                this.server_stream = undefined;
-                            };
-                            this.waitForStateWhen = (checker) => __awaiter(this, void 0, void 0, function*() {
-                                return new Promise((resolve) => {
-                                    const state = this.get('state');
-                                    if (checker(state)) {
-                                        resolve(state);
-                                    } else {
-                                        const checkState = () => {
-                                            const state = this.get('state');
-                                            if (checker(state)) {
-                                                this.off('change:state', checkState);
-                                                resolve(state);
-                                            }
-                                        };
-                                        this.on('change:state', checkState);
-                                    }
-                                });
-                            });
-                            this.waitForStateIn = (...states) => __awaiter(this, void 0, void 0, function*() {
-                                return this.waitForStateWhen((state) => states.indexOf(state) !== -1);
-                            });
-                            this.getState = () => this.get('state');
-                            this.setState = (state) => {
-                                this.set('state', state);
-                            };
-                            this.getConstraints = () => {
-                                let {
-                                    video,
-                                    audio
-                                } = this.get('constraints') || {
-                                    audio: false,
-                                    video: true
-                                };
-                                const videoId = this.videoInput;
-                                const audioId = this.audioInput;
-                                if (audio && audioId) {
-                                    if (typeof audio === 'boolean') {
-                                        audio = {
-                                            deviceId: audioId,
-                                        };
-                                    } else {
-                                        audio.deviceId = audioId;
-                                    }
-                                }
-                                if (video && videoId) {
-                                    if (typeof video === 'boolean') {
-                                        video = {
-                                            deviceId: videoId,
-                                        };
-                                    } else {
-                                        video.deviceId = videoId;
-                                    }
-                                }
-                                return {
-                                    video,
-                                    audio
-                                };
-                            };
-                            this.closePeer = () => __awaiter(this, void 0, void 0, function*() {
-                                const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new', 'error');
-                                if (state === 'new') {
-                                    throw new Error(`This should not happen. We can't close the peer when the state is ${state}. Because at this time, we haven't start the peer.`);
-                                }
-                                if (state === 'closed' || state === 'error') {
-                                    return;
-                                }
-                                const pc = this.pc;
-                                if (!pc) {
-                                    this.setState('closed');
-                                    return;
-                                }
-                                this.setState('closing');
-                                try {
-                                    pc.close();
-                                    if (pc.connectionState !== 'closed') {
-                                        yield new Promise((resolve) => {
-                                            pc.addEventListener('connectionstatechange', () => {
-                                                if (pc.connectionState === 'closed') {
-                                                    resolve();
-                                                }
-                                            });
-                                        });
-                                    }
-                                    this.resetPeer();
-                                    this.setState('closed');
-                                } catch (err) {
-                                    this.setState('error');
-                                }
-                            });
-                            this.fetchCodecs = () => {
-                                const codecs = this.getCodecs();
-                                this.set('video_codecs', codecs);
-                                this.save_changes();
-                            };
-                            this.getCodecs = () => {
-                                if (supportsSetCodecPreferences) {
-                                    const {
-                                        codecs = []
-                                    } = RTCRtpSender.getCapabilities('video') || {};
-                                    return codecs
-                                        .filter((codec) => !utils_1.arrayInclude(['video/red', 'video/ulpfec', 'video/rtx'], codec.mimeType))
-                                        .map((codec) => {
-                                            return (codec.mimeType + ' ' + (codec.sdpFmtpLine || '')).trim();
-                                        });
-                                } else {
-                                    return [];
-                                }
-                            };
-                            this.getPeerConfig = () => {
-                                const config = {};
-                                const iceServers = this.get('iceServers');
-                                if (iceServers && iceServers.length > 0) {
-                                    config.iceServers = iceServers.map((server) => {
-                                        if (typeof server === 'string') {
-                                            return {
-                                                urls: server
-                                            };
-                                        } else {
-                                            return server;
-                                        }
-                                    });
-                                }
-                                return config;
-                            };
-                            this.syncDevice = (track) => {
-                                const type = track.kind === 'video' ? 'video_input' : 'audio_input';
-                                let curDeviceId;
-                                if (typeof track.getCapabilities !== 'undefined') {
-                                    curDeviceId = track.getCapabilities().deviceId;
-                                } else {
-                                    curDeviceId = track.getSettings().deviceId;
-                                }
-                                if (type === 'video_input') {
-                                    this.videoInput = curDeviceId;
-                                } else {
-                                    this.audioInput = curDeviceId;
-                                }
-                                this.send_cmd('sync_device', {
-                                    type,
-                                    id: curDeviceId
-                                }, false);
-                            };
-                            this.connect = (video, force_reconnect = false, only_reconnect = false) => __awaiter(this, void 0, void 0, function*() {
-                                const state = yield this.waitForStateIn('closed', 'connected', 'error', 'new');
-                                if (state === 'closed' || state === 'error' || state === 'new') {
-                                    if (only_reconnect) {
-                                        return;
-                                    }
-                                    try {
-                                        this.setState('connecting');
-                                        const pc = webrtc_1.createPeerConnection(this.getPeerConfig());
-                                        this.pc = pc;
-                                        this.bindVideo(video);
-                                        pc.addEventListener('connectionstatechange', () => {
-                                            const state = pc.connectionState;
-                                            if (state === 'failed' ||
-                                                state === 'disconnected' ||
-                                                state === 'closed') {
-                                                pc.close();
-                                                if (this.pc === pc) {
-                                                    this.resetPeer();
-                                                }
-                                            }
-                                        });
-                                        pc.addEventListener('track', (evt) => {
-                                            if (evt.track.kind === 'video') {
-                                                console.log('track gotten');
-                                                this.server_stream = evt.streams[0];
-                                            }
-                                        });
-                                        const stream = yield navigator.mediaDevices.getUserMedia(this.getConstraints());
-                                        this.client_stream = stream;
-                                        stream.getTracks().forEach((track) => {
-                                            this.syncDevice(track);
-                                            pc.addTrack(track, stream);
-                                        });
-                                        yield webrtc_1.negotiate(pc, (offer) => __awaiter(this, void 0, void 0, function*() {
-                                            console.log(offer);
-                                            const {
-                                                content
-                                            } = yield this.send_cmd('exchange_peer', {
-                                                desc: offer,
-                                            });
-                                            return content;
-                                        }));
-                                        const pcState = yield webrtc_1.waitForConnectionState(pc, (state) => state !== 'connecting' && state !== 'new');
-                                        if (pcState === 'connected') {
-                                            this.setState('connected');
-                                        } else {
-                                            yield this.closePeer();
-                                        }
-                                    } catch (err) {
-                                        this.setState('error');
-                                        console.error(err);
-                                    }
-                                } else if (force_reconnect) {
-                                    yield this.closePeer();
-                                    yield this.connect(video, force_reconnect);
-                                } else {
-                                    this.bindVideo(video);
-                                }
-                            });
-                            this.bindVideo = (video) => {
-                                const pc = this.pc;
-                                if (!pc || !video) {
-                                    return;
-                                }
-                                if (pc.connectionState === 'connected' && this.server_stream) {
-                                    video.srcObject = this.server_stream;
-                                } else {
-                                    const handler = (evt) => {
-                                        if (evt.track.kind === 'video') {
-                                            console.log('track gotten');
-                                            this.server_stream = evt.streams[0];
-                                            video.srcObject = this.server_stream;
-                                            pc.removeEventListener('track', handler);
-                                        }
-                                    };
-                                    pc.addEventListener('track', handler);
-                                }
-                            };
-                            this.fetchCodecs();
-                            // this.fetchDevices();
-                            // this.on('change:video_input_device', (...args) => {
-                            //   console.log('change:video_input_device');
-                            //   console.log(args);
-                            //   this.connect(undefined, true, true);
-                            // });
-                            // this.on('change:audio_input_device', (...args) => {
-                            //   console.log('change:audio_input_device');
-                            //   console.log(args);
-                            //   this.connect(undefined, true, true);
-                            // });
-                            this.on('change:iceServers', () => {
-                                this.connect(undefined, true, true);
-                            });
-                            this.addMessageHandler('request_devices', (cmdMsg) => {
-                                const {
-                                    cmd,
-                                    id,
-                                    args
-                                } = cmdMsg;
-                                const {
-                                    type
-                                } = args;
-                                this.getDevice(type).then((devices) => {
-                                    console.log(devices);
-                                    this.send({
-                                        ans: cmd,
-                                        id,
-                                        res: devices
-                                    }, {});
-                                });
-                            });
-                            this.addMessageHandler('notify_device_change', (cmdMsg) => {
-                                const {
-                                    args
-                                } = cmdMsg;
-                                const {
-                                    type,
-                                    change
-                                } = args;
-                                if (type === 'video_input') {
-                                    if (this.videoInput !== change.new) {
-                                        this.videoInput = change.new;
-                                        this.connect(undefined, true, true);
-                                    }
-                                } else if (type === 'audio_input') {
-                                    if (this.audioInput !== change.new) {
-                                        this.audioInput = change.new;
-                                        this.connect(undefined, true, true);
-                                    }
-                                }
-                            });
-                        }
-                        defaults() {
-                            return Object.assign(Object.assign({}, super.defaults()), {
-                                _model_name: WebCamModel.model_name,
-                                _view_name: WebCamModel.view_name,
-                                server_desc: null,
-                                client_desc: null,
-                                iceServers: [],
-                                constraints: null,
-                                video_codecs: [],
-                                video_codec: null,
-                                state: 'new',
-                                autoplay: true,
-                                controls: true,
-                                crossOrigin: 'not-support',
-                                width: null,
-                                height: null,
-                                playsInline: true,
-                                muted: false
-                            });
-                        }
-                    }
-                    exports.WebCamModel = WebCamModel;
-                    WebCamModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);
-                    WebCamModel.model_name = 'WebCamModel';
-                    WebCamModel.view_name = 'WebCamView'; // Set to null if no view
-                    function attachSinkId(element, sinkId) {
-                        return __awaiter(this, void 0, void 0, function*() {
-                            if (typeof element.sinkId !== 'undefined') {
-                                if (sinkId) {
-                                    yield element.setSinkId(sinkId);
-                                }
-                            } else {
-                                console.warn('Browser does not support output device selection.');
-                            }
-                        });
-                    }
-                    class WebCamView extends base_1.DOMWidgetView {
-                        render() {
-                            const video = document.createElement('video');
-                            video.playsInline = true;
-                            this.el.appendChild(video);
-                            this.model.connect(video);
-                            this.model.on('change:state', () => {
-                                const model = this.model;
-                                if (model.getState() === 'connected') {
-                                    model.connect(video);
-                                }
-                            });
-                            const {
-                                deviceId
-                            } = this.model.get('audio_output_device') || {};
-                            attachSinkId(video, deviceId);
-                            this.model.on('change:audio_output_device', () => {
-                                const {
-                                    deviceId
-                                } = this.model.get('audio_output_device') || {};
-                                attachSinkId(video, deviceId);
-                            });
-                            video.autoplay = this.model.get('autoplay');
-                            this.model.on('change:autoplay', () => {
-                                video.autoplay = this.model.get('autoplay');
-                            });
-                            video.controls = this.model.get('controls');
-                            this.model.on('change:controls', () => {
-                                video.controls = this.model.get('controls');
-                            });
-                            const width = this.model.get('width');
-                            if (width) {
-                                video.width = width;
-                            }
-                            this.model.on('change:width', () => {
-                                const width = this.model.get('width');
-                                if (width) {
-                                    video.width = width;
-                                } else {
-                                    video.removeAttribute('width');
-                                }
-                            });
-                            const height = this.model.get('height');
-                            if (height) {
-                                video.height = height;
-                            }
-                            this.model.on('change:height', () => {
-                                const height = this.model.get('height');
-                                if (height) {
-                                    video.height = height;
-                                } else {
-                                    video.removeAttribute('height');
-                                }
-                            });
-                            video.playsInline = this.model.get('playsInline');
-                            this.model.on('change:playsInline', () => {
-                                video.playsInline = this.model.get('playsInline');
-                            });
-                            video.muted = this.model.get('muted');
-                            this.model.on('change:muted', () => {
-                                video.muted = this.model.get('muted');
-                            });
-                            const crossOrigin = this.model.get('crossOrigin');
-                            if (crossOrigin === 'not-support') {
-                                video.crossOrigin = null;
-                            } else {
-                                video.crossOrigin = crossOrigin;
-                            }
-                            this.model.on('change:crossOrigin', () => {
-                                const crossOrigin = this.model.get('crossOrigin');
-                                if (crossOrigin === 'not-support') {
-                                    video.crossOrigin = null;
-                                } else {
-                                    video.crossOrigin = crossOrigin;
-                                }
-                            });
+                            update(obj = newObj);
+                        } else {
+                            remove();
                         }
-                    }
-                    exports.WebCamView = WebCamView;
+                    };
+                }
 
+                module.exports = function(list, options) {
+                    options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
+                    // tags it will allow on a page
 
-                    /***/
-                }),
+                    if (!options.singleton && typeof options.singleton !== 'boolean') {
+                        options.singleton = isOldIE();
+                    }
 
-            /***/
-            "./src/webrtc.ts":
-                /*!***********************!*\
-                  !*** ./src/webrtc.ts ***!
-                  \***********************/
-                /***/
-                (function(__unused_webpack_module, exports, __webpack_require__) {
+                    list = list || [];
+                    var lastIdentifiers = modulesToDom(list, options);
+                    return function update(newList) {
+                        newList = newList || [];
 
-                    "use strict";
+                        if (Object.prototype.toString.call(newList) !== '[object Array]') {
+                            return;
+                        }
 
-                    /* eslint-disable @typescript-eslint/no-non-null-assertion */
-                    var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {
-                        function adopt(value) {
-                            return value instanceof P ? value : new P(function(resolve) {
-                                resolve(value);
-                            });
+                        for (var i = 0; i < lastIdentifiers.length; i++) {
+                            var identifier = lastIdentifiers[i];
+                            var index = getIndexByIdentifier(identifier);
+                            stylesInDom[index].references--;
                         }
-                        return new(P || (P = Promise))(function(resolve, reject) {
-                            function fulfilled(value) {
-                                try {
-                                    step(generator.next(value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
 
-                            function rejected(value) {
-                                try {
-                                    step(generator["throw"](value));
-                                } catch (e) {
-                                    reject(e);
-                                }
-                            }
+                        var newLastIdentifiers = modulesToDom(newList, options);
 
-                            function step(result) {
-                                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
-                            }
-                            step((generator = generator.apply(thisArg, _arguments || [])).next());
-                        });
-                    };
-                    Object.defineProperty(exports, "__esModule", ({
-                        value: true
-                    }));
-                    exports.negotiate = exports.waitForConnectionState = exports.createPeerConnection = void 0;
-                    const utils_1 = __webpack_require__( /*! ./utils */ "./src/utils.ts");
-                    const DEFAULT_ICE_SERVERS = [{
-                        urls: ['stun:stun.l.google.com:19302']
-                    }, {
-                        urls: ['stun:23.21.150.121']
-                    }, {
-                        urls: ['stun:stun01.sipphone.com']
-                    }, {
-                        urls: ['stun:stun.ekiga.net']
-                    }, {
-                        urls: ['stun:stun.fwdnet.net']
-                    }, {
-                        urls: ['stun:stun.ideasip.com']
-                    }, {
-                        urls: ['stun:stun.iptel.org']
-                    }, {
-                        urls: ['stun:stun.rixtelecom.se']
-                    }, {
-                        urls: ['stun:stun.schlund.de']
-                    }, {
-                        urls: ['stun:stunserver.org']
-                    }, {
-                        urls: ['stun:stun.softjoys.com']
-                    }, {
-                        urls: ['stun:stun.voiparound.com']
-                    }, {
-                        urls: ['stun:stun.voipbuster.com']
-                    }, {
-                        urls: ['stun:stun.voipstunt.com']
-                    }, {
-                        urls: ['stun:stun.voxgratia.org']
-                    }, {
-                        urls: ['stun:stun.xten.com']
-                    }, ];
-
-                    function createPeerConnection(config) {
-                        const pc = new RTCPeerConnection(Object.assign({}, {
-                            iceServers: DEFAULT_ICE_SERVERS
-                        }, config || {}));
-                        pc.addEventListener('connectionstatechange', () => {
-                            console.log(`connection -> ${pc.connectionState}`);
-                        }, false);
-                        // register some listeners to help debugging
-                        pc.addEventListener('icegatheringstatechange', () => {
-                            console.log(`iceGathering -> ${pc.iceGatheringState}`);
-                        }, false);
-                        pc.addEventListener('iceconnectionstatechange', () => {
-                            console.log(`iceConnection -> ${pc.iceConnectionState}`);
-                        }, false);
-                        pc.addEventListener('signalingstatechange', () => {
-                            console.log(`signaling -> ${pc.signalingState}`);
-                        }, false);
-                        return pc;
-                    }
-                    exports.createPeerConnection = createPeerConnection;
+                        for (var _i = 0; _i < lastIdentifiers.length; _i++) {
+                            var _identifier = lastIdentifiers[_i];
 
-                    function waitForConnectionState(pc, checker) {
-                        return __awaiter(this, void 0, void 0, function*() {
-                            return new Promise((resolve) => {
-                                if (checker(pc.connectionState)) {
-                                    resolve(pc.connectionState);
-                                } else {
-                                    const checkState = () => {
-                                        if (checker(pc.connectionState)) {
-                                            pc.removeEventListener('connectionstatechange', checkState);
-                                            resolve(pc.connectionState);
-                                        }
-                                    };
-                                    pc.addEventListener('connectionstatechange', checkState);
-                                }
-                            });
-                        });
-                    }
-                    exports.waitForConnectionState = waitForConnectionState;
+                            var _index = getIndexByIdentifier(_identifier);
 
-                    function waitIceGathering(pc) {
-                        return __awaiter(this, void 0, void 0, function*() {
-                            return new Promise((resolve) => {
-                                if (pc.iceGatheringState === 'complete') {
-                                    resolve();
-                                } else {
-                                    const checkState = () => {
-                                        if (pc.iceGatheringState === 'complete') {
-                                            pc.removeEventListener('icegatheringstatechange', checkState);
-                                            resolve();
-                                        }
-                                    };
-                                    pc.addEventListener('icegatheringstatechange', checkState);
-                                }
-                            });
-                        });
-                    }
+                            if (stylesInDom[_index].references === 0) {
+                                stylesInDom[_index].updater();
 
-                    function negotiate(pc, answerFunc, codec) {
-                        return __awaiter(this, void 0, void 0, function*() {
-                            let offer = yield pc.createOffer();
-                            yield pc.setLocalDescription(offer);
-                            yield waitIceGathering(pc);
-                            offer = pc.localDescription;
-                            if (codec) {
-                                if (codec.audio && codec.audio !== 'default') {
-                                    offer.sdp = sdpFilterCodec('audio', codec.audio, offer.sdp);
-                                }
-                                if (codec.video && codec.video !== 'default') {
-                                    offer.sdp = sdpFilterCodec('video', codec.video, offer.sdp);
-                                }
-                            }
-                            const answer = yield answerFunc(offer);
-                            yield pc.setRemoteDescription(answer);
-                        });
-                    }
-                    exports.negotiate = negotiate;
-
-                    function sdpFilterCodec(kind, codec, realSdp) {
-                        const allowed = [];
-                        const rtxRegex = new RegExp('a=fmtp:(\\d+) apt=(\\d+)\\r$');
-                        const codecRegex = new RegExp('a=rtpmap:([0-9]+) ' + escapeRegExp(codec));
-                        const videoRegex = new RegExp('(m=' + kind + ' .*?)( ([0-9]+))*\\s*$');
-                        const lines = realSdp.split('\n');
-                        let isKind = false;
-                        for (let i = 0; i < lines.length; i++) {
-                            if (lines[i].startsWith('m=' + kind + ' ')) {
-                                isKind = true;
-                            } else if (lines[i].startsWith('m=')) {
-                                isKind = false;
-                            }
-                            if (isKind) {
-                                let match = lines[i].match(codecRegex);
-                                if (match) {
-                                    allowed.push(parseInt(match[1]));
-                                }
-                                match = lines[i].match(rtxRegex);
-                                if (match && utils_1.arrayInclude(allowed, parseInt(match[2]))) {
-                                    allowed.push(parseInt(match[1]));
-                                }
-                            }
-                        }
-                        const skipRegex = 'a=(fmtp|rtcp-fb|rtpmap):([0-9]+)';
-                        let sdp = '';
-                        isKind = false;
-                        for (let i = 0; i < lines.length; i++) {
-                            if (lines[i].startsWith('m=' + kind + ' ')) {
-                                isKind = true;
-                            } else if (lines[i].startsWith('m=')) {
-                                isKind = false;
-                            }
-                            if (isKind) {
-                                const skipMatch = lines[i].match(skipRegex);
-                                if (skipMatch && !utils_1.arrayInclude(allowed, parseInt(skipMatch[2]))) {
-                                    continue;
-                                } else if (lines[i].match(videoRegex)) {
-                                    sdp += lines[i].replace(videoRegex, '$1 ' + allowed.join(' ')) + '\n';
-                                } else {
-                                    sdp += lines[i] + '\n';
-                                }
-                            } else {
-                                sdp += lines[i] + '\n';
+                                stylesInDom.splice(_index, 1);
                             }
                         }
-                        return sdp;
-                    }
-
-                    function escapeRegExp(str) {
-                        return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
-                    }
-
 
-                    /***/
-                }),
+                        lastIdentifiers = newLastIdentifiers;
+                    };
+                };
 
-            /***/
-            "@jupyter-widgets/base":
-                /*!****************************************!*\
-                  !*** external "@jupyter-widgets/base" ***!
-                  \****************************************/
                 /***/
-                ((module) => {
-
-                    "use strict";
-                    module.exports = __WEBPACK_EXTERNAL_MODULE__jupyter_widgets_base__;
-
-                    /***/
-                }),
+            }),
 
+        /***/
+        "./package.json":
+            /*!**********************!*\
+              !*** ./package.json ***!
+              \**********************/
             /***/
-            "./package.json":
-                /*!**********************!*\
-                  !*** ./package.json ***!
-                  \**********************/
-                /***/
-                ((module) => {
+            ((module) => {
 
-                    "use strict";
-                    module.exports = JSON.parse('{"name":"ipywebcam","version":"0.1.8","description":"A Custom Jupyter Widget Library for Web Camera using WebRTC","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/vipcxj/ipywebcam","bugs":{"url":"https://github.com/vipcxj/ipywebcam/issues"},"license":"BSD-3-Clause","author":{"name":"Xiaojing Chen","email":"vipcxj@126.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/vipcxj/ipywebcam"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebcam/labextension","clean:nbextension":"rimraf ipywebcam/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","lru-cache":"^7.14.1"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebcam/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
+                "use strict";
+                module.exports = JSON.parse('{"name":"ipywebcam","version":"0.1.8","description":"A Custom Jupyter Widget Library for Web Camera using WebRTC","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/vipcxj/ipywebcam","bugs":{"url":"https://github.com/vipcxj/ipywebcam/issues"},"license":"BSD-3-Clause","author":{"name":"Xiaojing Chen","email":"vipcxj@126.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/vipcxj/ipywebcam"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebcam/labextension","clean:nbextension":"rimraf ipywebcam/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","d3":"^7.8.2","lru-cache":"^7.14.1"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/d3":"^7.4.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebcam/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
 
-                    /***/
-                })
+                /***/
+            })
 
-            /******/
-        });
-        /************************************************************************/
-        /******/ // The module cache
-        /******/
-        var __webpack_module_cache__ = {};
-        /******/
-        /******/ // The require function
-        /******/
-        function __webpack_require__(moduleId) {
-            /******/ // Check if module is in cache
-            /******/
-            var cachedModule = __webpack_module_cache__[moduleId];
-            /******/
-            if (cachedModule !== undefined) {
-                /******/
-                return cachedModule.exports;
-                /******/
-            }
-            /******/ // Create a new module (and put it into the cache)
-            /******/
-            var module = __webpack_module_cache__[moduleId] = {
-                /******/
-                id: moduleId,
-                /******/ // no module.loaded needed
-                /******/
-                exports: {}
-                /******/
-            };
-            /******/
-            /******/ // Execute the module function
-            /******/
-            __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
-            /******/
-            /******/ // Return the exports of the module
-            /******/
-            return module.exports;
-            /******/
-        }
-        /******/
-        /************************************************************************/
-        /******/
-        /* webpack/runtime/nonce */
-        /******/
-        (() => {
-            /******/
-            __webpack_require__.nc = undefined;
-            /******/
-        })();
-        /******/
-        /************************************************************************/
-        /******/
-        /******/ // startup
-        /******/ // Load entry module and return exports
-        /******/ // This entry module is referenced by other modules so it can't be inlined
-        /******/
-        var __webpack_exports__ = __webpack_require__("./src/extension.ts");
-        /******/
-        /******/
-        return __webpack_exports__;
-        /******/
-    })();
-});;
-//# sourceMappingURL=index.js.map
+    }
+]);
+//# sourceMappingURL=lib_recorder_js-lib_webcam_js.6d987905f923e46131a3.js.map
```

### Comparing `ipywebcam-0.1.8.dev0/ipywebcam/tests/conftest.py` & `ipywebcam-0.1.9.dev0/ipywebcam/tests/conftest.py`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/common.ts` & `ipywebcam-0.1.9.dev0/src/common.ts`

 * *Files 20% similar despite different names*

```diff
@@ -1,8 +1,9 @@
 import { DOMWidgetModel } from '@jupyter-widgets/base';
+import { arrayRemove } from './utils';
 import { MODULE_NAME, MODULE_VERSION } from './version';
 
 type Args = Record<string, any>;
 type MsgTypeMap = Record<string, Args>;
 
 export interface BaseCommandMessage<C extends string, A extends Args> {
   cmd: C;
@@ -12,15 +13,15 @@
 
 export type MessageHandler<C extends string, A extends Args> = (
   msg: BaseCommandMessage<C, A>,
   buffers?: ArrayBuffer[] | ArrayBufferView[]
 ) => void;
 
 type MessageHandlers<MM extends MsgTypeMap> = {
-  [K in keyof MM & string]?: MessageHandler<K, MM[K]>;
+  [K in keyof MM & string]?: Array<MessageHandler<K, MM[K]>>;
 };
 
 export class BaseModel<MM extends MsgTypeMap> extends DOMWidgetModel {
   messageHandlers: MessageHandlers<MM> = {};
 
   defaults(): Backbone.ObjectHash {
     return {
@@ -47,29 +48,46 @@
       ) => {
         const { id, cmd } = msg;
         if (id && id !== this.message_id) {
           return;
         }
         Object.keys(this.messageHandlers).forEach((key) => {
           if (key === cmd) {
-            const handler = this.messageHandlers[key as MM & string];
-            if (handler) {
-              handler(msg, buffers);
+            const handlers = this.messageHandlers[key as MM & string];
+            if (handlers) {
+              handlers.forEach((handler) => {
+                handler(msg, buffers);
+              });
             }
           }
         });
       }
     );
   }
 
   addMessageHandler = <K extends string & keyof MM>(
     cmd: K,
     handler: MessageHandler<K, MM[K]>
   ): void => {
-    this.messageHandlers[cmd] = handler;
+    let handlers = this.messageHandlers[cmd];
+    if (!handlers) {
+      handlers = this.messageHandlers[cmd] = [];
+    }
+    handlers.push(handler);
+  };
+
+  removeMessageHandler = <K extends string & keyof MM>(
+    cmd: K,
+    handler: MessageHandler<K, MM[K]>
+  ): void => {
+    const handlers = this.messageHandlers[cmd];
+    if (handlers) {
+      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+      arrayRemove(handlers!, handler);
+    }
   };
 
   async send_cmd(
     cmd: string,
     args: Record<string, any>,
     wait: false
   ): Promise<void>;
```

### Comparing `ipywebcam-0.1.8.dev0/src/extension.ts` & `ipywebcam-0.1.9.dev0/src/extension.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/plugin.ts` & `ipywebcam-0.1.9.dev0/src/plugin.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/version.ts` & `ipywebcam-0.1.9.dev0/src/version.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/video.ts` & `ipywebcam-0.1.9.dev0/src/video.ts`

 * *Files 6% similar despite different names*

```diff
@@ -1,29 +1,46 @@
 /* eslint-disable @typescript-eslint/no-non-null-assertion */
 
 import '../css/video.css';
-import { arrayInclude } from './utils';
+import { makeLineChart } from './charts';
+import { RangeBar } from './range';
+import { arrayInclude, arrayRemove } from './utils';
+import { RecorderMeta } from './types';
 
 const svgNS = 'http://www.w3.org/2000/svg';
 const prefix = 'ipywebcam-video-';
 export function makeId(id: string): string {
   return `${prefix}${id}`;
 }
 
 function createSymbol(
   id: string,
-  pathD: string,
-  viewBox = '0 0 24 24'
+  pathD: string | string[],
+  viewBox = '0 0 24 24',
+  gTrans = ''
 ): SVGSymbolElement {
   const symbol = document.createElementNS(svgNS, 'symbol');
   symbol.id = makeId(id);
   symbol.setAttribute('viewBox', viewBox);
-  const path = document.createElementNS(svgNS, 'path');
-  path.setAttribute('d', pathD);
-  symbol.appendChild(path);
+  if (Array.isArray(pathD)) {
+    const group = document.createElementNS(svgNS, 'g');
+    if (gTrans) {
+      group.setAttribute('transform', gTrans);
+    }
+    for (const p of pathD) {
+      const path = document.createElementNS(svgNS, 'path');
+      path.setAttribute('d', p);
+      group.appendChild(path);
+    }
+    symbol.appendChild(group);
+  } else {
+    const path = document.createElementNS(svgNS, 'path');
+    path.setAttribute('d', pathD);
+    symbol.appendChild(path);
+  }
   return symbol;
 }
 
 function createControlsSvg(): SVGSVGElement {
   const svg = document.createElementNS(svgNS, 'svg');
   svg.id = makeId('icons');
   svg.setAttribute('style', 'display: none');
@@ -82,14 +99,27 @@
   );
   defs.appendChild(
     createSymbol(
       'right-arrow',
       'M7.293 4.707 14.586 12l-7.293 7.293 1.414 1.414L17.414 12 8.707 3.293 7.293 4.707z'
     )
   );
+  defs.appendChild(
+    createSymbol(
+      'statistics',
+      [
+        'M2096 2741 c-15 -10 -37 -32 -47 -47 -18 -28 -19 -65 -19 -984 l0 -955 25 -37 c32 -48 47 -50 268 -46 l179 3 29 33 29 32 0 969 c0 967 0 968 -21 995 -40 50 -64 56 -246 56 -148 0 -171 -2 -197 -19z',
+        'M1308 2088 c-30 -8 -41 -18 -58 -52 -19 -41 -20 -58 -20 -643 0 -330 3 -613 6 -629 3 -16 16 -42 30 -59 l24 -30 210 0 210 0 24 30 c14 17 27 43 30 59 3 16 6 299 6 629 0 584 -1 602 -20 643 -18 36 -27 43 -65 53 -53 13 -326 13 -377 -1z',
+        'M504 1426 c-64 -28 -64 -28 -64 -373 l0 -313 29 -32 29 -33 179 -3 c221 -4 236 -2 268 46 l25 37 0 293 c0 328 -3 347 -65 376 -44 21 -353 22 -401 2z',
+        'M42 468 c-39 -32 -41 -35 -41 -91 -1 -42 3 -59 14 -63 8 -3 17 -13 20 -23 3 -9 18 -24 34 -34 27 -16 124 -17 1431 -17 1307 0 1404 1 1431 17 16 10 31 25 34 34 3 10 12 20 20 23 11 4 15 21 15 58 0 49 -3 56 -40 91 l-40 37 -1419 0 -1419 0 -40 -32z',
+      ],
+      '0 0 1000 1000',
+      'translate(100, 900) scale(0.25, -0.25)'
+    )
+  );
   return svg;
 }
 
 export function createSelectiveUses(
   active: string,
   ...ids: string[]
 ): SVGSVGElement {
@@ -112,35 +142,47 @@
   div.className = 'playback-animation';
   const svg = createSelectiveUses('pause', 'play-icon', 'pause');
   svg.classList.add('playback-icons');
   div.appendChild(svg);
   return div;
 }
 
-export function createVideoProgress(): HTMLDivElement {
+function createVideoProgress(): HTMLDivElement {
   const container = document.createElement('div');
   container.classList.add('video-progress');
   const progress = document.createElement('progress');
   progress.id = makeId('progress-bar');
   progress.classList.add('progress-bar');
   progress.value = progress.max = 0;
   const input = document.createElement('input');
   input.id = makeId('seek');
   input.classList.add('seek');
   input.type = 'range';
   input.value = '0';
   input.min = '0';
   input.step = '1';
+  const rangeBar = document.createElement('div');
+  rangeBar.setAttribute('draggable', 'false');
+  rangeBar.classList.add('range-bar', 'hidden');
   const tooltip = document.createElement('div');
   tooltip.id = makeId('seek-tooltip');
   tooltip.classList.add('seek-tooltip');
   tooltip.innerText = '00:00';
   container.appendChild(progress);
   container.appendChild(input);
   container.appendChild(tooltip);
+  container.appendChild(rangeBar);
+  return container;
+}
+
+function createStatisticsContainer(): HTMLDivElement {
+  const container = document.createElement('div');
+  container.classList.add('statistics-container', 'hidden', 'unused');
+  const svg = document.createElementNS(svgNS, 'svg');
+  container.appendChild(svg);
   return container;
 }
 
 function createPlaybackButton(
   options: NormaledVideoOptions
 ): HTMLButtonElement {
   const button = document.createElement('button');
@@ -263,14 +305,27 @@
   container.setAttribute('data-title', 'Select Channel');
   const text = document.createElement('div');
   text.classList.add('text');
   container.appendChild(text);
   return container;
 }
 
+function createStatsSelector(): HTMLButtonElement {
+  const container = document.createElement('button');
+  container.classList.add('stats-selector', 'hidden');
+  container.setAttribute('data-title', 'Select Statistics Type');
+  const icon = createSelectiveUses('statistics', 'statistics');
+  icon.classList.add('icon');
+  container.appendChild(icon);
+  const text = document.createElement('div');
+  text.classList.add('text');
+  container.appendChild(text);
+  return container;
+}
+
 function createPipButton(options: NormaledVideoOptions): HTMLButtonElement {
   const button = document.createElement('button');
   button.id = makeId('pip-button');
   button.classList.add('pip-button');
   if (!isPipEnabled()) {
     button.classList.add('hidden');
   }
@@ -301,14 +356,16 @@
   button.appendChild(svg);
   return button;
 }
 
 function createRightControls(options: NormaledVideoOptions): HTMLDivElement {
   const container = document.createElement('div');
   container.classList.add('right-controls');
+  const statsSelector = createStatsSelector();
+  container.appendChild(statsSelector);
   const indexSelector = createIndexSelector();
   container.appendChild(indexSelector);
   const channelSelector = createChannelSelector();
   container.appendChild(channelSelector);
   const speedSelector = createSpeedSelector();
   container.appendChild(speedSelector);
   const pipButton = createPipButton(options);
@@ -326,18 +383,21 @@
   const rightControls = createRightControls(options);
   container.appendChild(rightControls);
   return container;
 }
 
 function createVideoControls(options: NormaledVideoOptions): HTMLDivElement {
   const container = document.createElement('div');
+  container.setAttribute('draggable', 'false');
   container.classList.add('video-controls');
   container.tabIndex = 0;
   const videoProgress = createVideoProgress();
   container.appendChild(videoProgress);
+  const statistics = createStatisticsContainer();
+  container.appendChild(statistics);
   const bottomControls = createBottomControls(options);
   container.appendChild(bottomControls);
   return container;
 }
 
 const VIDEO_WORKS = !!document.createElement('video').canPlayType;
 
@@ -826,32 +886,38 @@
 
 export interface VideoOptions {
   shortcuts?: {
     play?: string | VideoShortcut;
     mute?: string | VideoShortcut;
     fullscreen?: string | VideoShortcut;
     pip?: string | VideoShortcut;
+    range?: string | VideoShortcut;
+    stats?: string | VideoShortcut;
   };
 }
 
 interface NormaledVideoOptions {
   shortcuts: {
     play: NormaledVideoShortcut;
     mute: NormaledVideoShortcut;
     fullscreen: NormaledVideoShortcut;
     pip: NormaledVideoShortcut;
+    range: NormaledVideoShortcut;
+    stats: NormaledVideoShortcut;
   };
 }
 
 const DEFAULT_OPTIONS: VideoOptions = {
   shortcuts: {
     play: 'k',
     mute: 'm',
     fullscreen: 'f',
     pip: 'p',
+    range: 'v',
+    stats: 's',
   },
 };
 
 function makeShortcut(shortcut: string | VideoShortcut): NormaledVideoShortcut {
   if (typeof shortcut === 'string') {
     return {
       key: shortcut,
@@ -876,14 +942,16 @@
     DEFAULT_OPTIONS.shortcuts,
     otps.shortcuts
   );
   options.shortcuts.fullscreen = makeShortcut(options.shortcuts.fullscreen!);
   options.shortcuts.mute = makeShortcut(options.shortcuts.mute!);
   options.shortcuts.pip = makeShortcut(options.shortcuts.pip!);
   options.shortcuts.play = makeShortcut(options.shortcuts.play!);
+  options.shortcuts.range = makeShortcut(options.shortcuts.range!);
+  options.shortcuts.stats = makeShortcut(options.shortcuts.stats!);
   return options as NormaledVideoOptions;
 }
 
 const SpeedOptions: Array<Option<number>> = [
   { label: '0.25x', value: 0.25 },
   { label: '0.5x', value: 0.5 },
   { label: '0.75x', value: 0.75 },
@@ -892,45 +960,56 @@
   { label: '1.5x', value: 1.5 },
   { label: '1.75x', value: 1.75 },
   { label: '2.0x', value: 2 },
   { label: '2.5x', value: 2.5 },
   { label: '3.0x', value: 3 },
 ];
 
+type VideoInitHandler = (video: Video) => void;
+
 export class Video {
   options: NormaledVideoOptions;
   container: HTMLDivElement;
   video: HTMLVideoElement;
   videoControls: HTMLDivElement;
   playButton: HTMLButtonElement;
   timeElapsed: HTMLTimeElement;
   duration: HTMLTimeElement;
   progress: HTMLProgressElement;
   seek: HTMLInputElement;
   seekTooltip: HTMLDivElement;
+  rangeBar: RangeBar;
+  statisticsBar: HTMLDivElement;
+  statisticsSvg: SVGSVGElement;
   volume: HTMLInputElement;
   volumeButton: HTMLButtonElement;
   volumeIcons: SVGSVGElement;
   playbackAnimation: HTMLDivElement;
   fullscreenButton: HTMLButtonElement;
   fullscreenIcons: SVGSVGElement;
   pipButton: HTMLButtonElement;
   indexSelector: HTMLButtonElement;
   indexSelectorPannel: IndexSelectorPannel | undefined;
   indexSelectHandlers: IndexSelectHandler[] = [];
   indexerIndex = -1;
   indexerSize = 0;
+  statsSelector: HTMLButtonElement;
+  statsSelectorPannel: SelectorPannel<string>;
+  stats = '';
+  statsData: Required<RecorderMeta>['statistics'] = {};
+  statsMeta: Required<RecorderMeta>['statistics_meta'] = {};
   speedSelector: HTMLButtonElement;
   speedSelectorPannel: SelectorPannel<number>;
   speed = 1;
   channelSelector: HTMLButtonElement;
   channelSelectHandlers: ChannelSelectHandler[] = [];
   channelSelectorPannel: SelectorPannel<string>;
   channel = '';
   currentTime: number | undefined;
+  videoInitHandlers: VideoInitHandler[] = [];
 
   constructor(opts: VideoOptions = {}) {
     this.options = makeOptions(opts);
     this.installSvg();
     this.container = createVideoContainer(this.options);
     this.video = this.container.querySelector(
       'video.video'
@@ -950,14 +1029,23 @@
     this.progress = this.container.querySelector(
       'progress.progress-bar'
     )! as HTMLProgressElement;
     this.seek = this.container.querySelector('input.seek')! as HTMLInputElement;
     this.seekTooltip = this.container.querySelector(
       'div.seek-tooltip'
     )! as HTMLDivElement;
+    this.rangeBar = new RangeBar(
+      this.container.querySelector('div.range-bar')! as HTMLDivElement
+    );
+    this.statisticsBar = this.container.querySelector(
+      'div.statistics-container'
+    )! as HTMLDivElement;
+    this.statisticsSvg = this.statisticsBar.querySelector(
+      'svg'
+    )! as SVGSVGElement;
     this.volume = this.container.querySelector(
       'input.volume'
     )! as HTMLInputElement;
     this.volumeButton = this.container.querySelector(
       'button.volume-button'
     )! as HTMLButtonElement;
     this.volumeIcons = this.volumeButton.querySelector('svg')! as SVGSVGElement;
@@ -972,14 +1060,37 @@
     )! as SVGSVGElement;
     this.pipButton = this.container.querySelector(
       'button.pip-button'
     )! as HTMLButtonElement;
     this.indexSelector = this.container.querySelector(
       'button.index-selector'
     )! as HTMLButtonElement;
+    this.statsSelector = this.container.querySelector(
+      'button.stats-selector'
+    )! as HTMLButtonElement;
+    this.statsSelectorPannel = new SelectorPannel<string>([]).install(
+      this.statsSelector,
+      (option) => {
+        const text = this.statsSelector.querySelector(
+          'div.text'
+        )! as HTMLDivElement;
+        text.innerText = option.label;
+        this.stats = option.value;
+        if (this.video.duration > 0) {
+          makeLineChart(
+            this.statisticsSvg,
+            this.statsData[this.stats],
+            [0, this.video.duration],
+            this.statsMeta[this.stats]?.y_range,
+            this.video.clientWidth - 20,
+            30
+          );
+        }
+      }
+    );
     this.speedSelector = this.container.querySelector(
       'button.speed-selector'
     )! as HTMLButtonElement;
     this.speedSelectorPannel = new SelectorPannel(SpeedOptions).install(
       this.speedSelector,
       (option: Option<number>): void => {
         const text = this.speedSelector.querySelector(
@@ -990,15 +1101,15 @@
         this.speed = option.value;
       },
       '1.0x'
     );
     this.channelSelector = this.container.querySelector(
       'button.channel-selector'
     )! as HTMLButtonElement;
-    this.channelSelectorPannel = new SelectorPannel([]).install(
+    this.channelSelectorPannel = new SelectorPannel<string>([]).install(
       this.channelSelector,
       (option) => {
         const text = this.channelSelector.querySelector(
           'div.text'
         )! as HTMLDivElement;
         text.innerText = option.label;
         this.channelSelectHandlers.forEach((handler) => {
@@ -1041,14 +1152,46 @@
   destroy = (): void => {
     document.removeEventListener('keyup', this.keyboardShortcuts);
     const url = this.video.src;
     this.video.src = '';
     if (url) {
       URL.revokeObjectURL(url);
     }
+    this.rangeBar.destroy();
+  };
+
+  addVideoInitHandler = (handler: VideoInitHandler): void => {
+    this.videoInitHandlers.push(handler);
+  };
+
+  removeVideoInitHandler = (handler: VideoInitHandler): void => {
+    arrayRemove(this.videoInitHandlers, handler);
+  };
+
+  updateStatistics = (
+    statistics: RecorderMeta['statistics'] = {},
+    statistics_meta: RecorderMeta['statistics_meta'] = {}
+  ): void => {
+    this.statsData = statistics;
+    this.statsMeta = statistics_meta;
+    const keys = Object.keys(statistics);
+    if (keys.length > 0) {
+      this.statsSelector.classList.remove('hidden');
+      this.statsSelectorPannel.updateView(
+        keys.map((key) => ({ label: key, value: key }))
+      );
+      this.statisticsBar.classList.remove('unused');
+      if (!arrayInclude(keys, this.stats)) {
+        this.statsSelectorPannel.select(keys[0]);
+      }
+    } else {
+      this.statsSelector.classList.add('hidden');
+      this.statsSelectorPannel.updateView([]);
+      this.statisticsBar.classList.add('unused');
+    }
   };
 
   updateChannels = (channels: string[] = []): void => {
     if (channels.length > 0) {
       this.channelSelector.classList.remove('hidden');
       const options: Array<Option<string>> = [{ label: 'Default', value: '' }];
       channels.forEach((channel) => {
@@ -1179,14 +1322,21 @@
   initializeVideo = (): void => {
     const videoDuration = Math.floor(this.video.duration);
     this.seek.setAttribute('max', `${videoDuration}`);
     this.progress.setAttribute('max', `${videoDuration}`);
     const time = formatTime(videoDuration);
     this.duration.innerText = `${time.minutes}:${time.seconds}`;
     this.duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
+    this.rangeBar.max = videoDuration;
+    for (const handler of this.videoInitHandlers) {
+      handler(this);
+    }
+    if (this.stats) {
+      this.statsSelectorPannel.select(this.stats);
+    }
   };
 
   updateCurrentTime = (): void => {
     this.currentTime = this.video.currentTime;
   };
 
   // updateTimeElapsed indicates how far through the video
@@ -1347,14 +1497,22 @@
     } catch (error) {
       console.error(error);
     } finally {
       this.pipButton.disabled = false;
     }
   };
 
+  toggleRangeBar = (): void => {
+    this.rangeBar.toggle();
+  };
+
+  toggleStatisticsBar = (): void => {
+    this.statisticsBar.classList.toggle('hidden');
+  };
+
   // hideControls hides the video controls when not in use
   // if the video is paused, the controls must remain visible
   hideControls = (): void => {
     if (this.video.paused) {
       return;
     }
 
@@ -1373,15 +1531,16 @@
   // keyboardShortcuts executes the relevant functions for
   // each supported shortcut key
   keyboardShortcuts = (event: KeyboardEvent): void => {
     if (!this.isInFocus()) {
       return;
     }
     const { key, ctrlKey, altKey, shiftKey } = event;
-    const { play, mute, fullscreen, pip } = this.options.shortcuts;
+    const { play, mute, fullscreen, pip, range, stats } =
+      this.options.shortcuts;
     if (
       key === play.key &&
       (play.ctrl === !!ctrlKey ||
         play.alt === !!altKey ||
         play.shift === !!shiftKey)
     ) {
       this.togglePlay();
@@ -1410,14 +1569,28 @@
     } else if (
       key === pip.key &&
       (pip.ctrl === !!ctrlKey ||
         pip.alt === !!altKey ||
         pip.shift === !!shiftKey)
     ) {
       this.togglePip();
+    } else if (
+      key === range.key &&
+      (range.ctrl === !!ctrlKey ||
+        range.alt === !!altKey ||
+        range.shift === !!shiftKey)
+    ) {
+      this.toggleRangeBar();
+    } else if (
+      key === stats.key &&
+      (stats.ctrl === !!ctrlKey ||
+        stats.alt === !!altKey ||
+        stats.shift === !!shiftKey)
+    ) {
+      this.toggleStatisticsBar();
     }
   };
 }
 
 // formatTime takes a time length in seconds and returns the time in
 // minutes and seconds
 function formatTime(timeInSeconds: number) {
```

### Comparing `ipywebcam-0.1.8.dev0/src/webcam.ts` & `ipywebcam-0.1.9.dev0/src/webcam.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/webrtc.ts` & `ipywebcam-0.1.9.dev0/src/webrtc.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/__tests__/index.spec.ts` & `ipywebcam-0.1.9.dev0/src/__tests__/index.spec.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/src/__tests__/utils.ts` & `ipywebcam-0.1.9.dev0/src/__tests__/utils.ts`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/.gitignore` & `ipywebcam-0.1.9.dev0/.gitignore`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/LICENSE.txt` & `ipywebcam-0.1.9.dev0/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/README.md` & `ipywebcam-0.1.9.dev0/README.md`

 * *Files identical despite different names*

### Comparing `ipywebcam-0.1.8.dev0/pyproject.toml` & `ipywebcam-0.1.9.dev0/pyproject.toml`

 * *Files 1% similar despite different names*

```diff
@@ -33,15 +33,15 @@
     "Programming Language :: Python :: 3.10",
     "Programming Language :: Python :: 3.11",
 ]
 dependencies = [
     "ipywidgets>=7.0.0",
     "aiortc",
 ]
-version = "0.1.8.dev0"
+version = "0.1.9.dev0"
 
 [project.optional-dependencies]
 docs = [
     "jupyter_sphinx",
     "nbsphinx",
     "nbsphinx-link",
     "pypandoc",
@@ -104,13 +104,13 @@
 file = [
     { src = "pyproject.toml", version_template = "version = \"{major}.{minor}.{patch}{channel}{release}\"" },
     { src = "ipywebcam/_version.py", version_template = "__version__ = \"{major}.{minor}.{patch}{channel}\"" },
     { src = "package.json", version_template = "\"version\": \"{major}.{minor}.{patch}\"" },
 ]
 
 [tool.tbump.version]
-current = "0.1.8.dev0"
+current = "0.1.9.dev0"
 regex = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)((?P<channel>a|b|rc|.dev)(?P<release>\\d+))?"
 
 [tool.tbump.git]
 message_template = "Bump to {new_version}"
 tag_template = "v{new_version}"
```

### Comparing `ipywebcam-0.1.8.dev0/PKG-INFO` & `ipywebcam-0.1.9.dev0/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ipywebcam
-Version: 0.1.8.dev0
+Version: 0.1.9.dev0
 Summary: A Custom Jupyter Widget Library for Web Camera using WebRTC
 Project-URL: Homepage, https://github.com/vipcxj/ipywebcam
 Author-email: Xiaojing Chen <vipcxj@126.com>
 License: Copyright (c) 2023 Xiaojing Chen
         All rights reserved.
         
         Redistribution and use in source and binary forms, with or without
```

